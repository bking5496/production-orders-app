(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))u(g);new MutationObserver(g=>{for(const _ of g)if(_.type==="childList")for(const T of _.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&u(T)}).observe(document,{childList:!0,subtree:!0});function f(g){const _={};return g.integrity&&(_.integrity=g.integrity),g.referrerPolicy&&(_.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?_.credentials="include":g.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function u(g){if(g.ep)return;g.ep=!0;const _=f(g);fetch(g.href,_)}})();function Eo(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var yo={exports:{}},Cn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff;function Wx(){if(ff)return Cn;ff=1;var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function f(u,g,_){var T=null;if(_!==void 0&&(T=""+_),g.key!==void 0&&(T=""+g.key),"key"in g){_={};for(var Y in g)Y!=="key"&&(_[Y]=g[Y])}else _=g;return g=_.ref,{$$typeof:i,type:u,key:T,ref:g!==void 0?g:null,props:_}}return Cn.Fragment=o,Cn.jsx=f,Cn.jsxs=f,Cn}var hf;function Jx(){return hf||(hf=1,yo.exports=Wx()),yo.exports}var a=Jx(),bo={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf;function Fx(){if(xf)return ke;xf=1;var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),T=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),j=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),ae=Symbol.iterator;function H(m){return m===null||typeof m!="object"?null:(m=ae&&m[ae]||m["@@iterator"],typeof m=="function"?m:null)}var oe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,Q={};function L(m,q,Z){this.props=m,this.context=q,this.refs=Q,this.updater=Z||oe}L.prototype.isReactComponent={},L.prototype.setState=function(m,q){if(typeof m!="object"&&typeof m!="function"&&m!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,m,q,"setState")},L.prototype.forceUpdate=function(m){this.updater.enqueueForceUpdate(this,m,"forceUpdate")};function N(){}N.prototype=L.prototype;function R(m,q,Z){this.props=m,this.context=q,this.refs=Q,this.updater=Z||oe}var J=R.prototype=new N;J.constructor=R,B(J,L.prototype),J.isPureReactComponent=!0;var ie=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function ue(m,q,Z,ee,ne,ye){return Z=ye.ref,{$$typeof:i,type:m,key:q,ref:Z!==void 0?Z:null,props:ye}}function se(m,q){return ue(m.type,q,void 0,void 0,void 0,m.props)}function X(m){return typeof m=="object"&&m!==null&&m.$$typeof===i}function P(m){var q={"=":"=0",":":"=2"};return"$"+m.replace(/[=:]/g,function(Z){return q[Z]})}var Ee=/\/+/g;function re(m,q){return typeof m=="object"&&m!==null&&m.key!=null?P(""+m.key):q.toString(36)}function we(){}function ce(m){switch(m.status){case"fulfilled":return m.value;case"rejected":throw m.reason;default:switch(typeof m.status=="string"?m.then(we,we):(m.status="pending",m.then(function(q){m.status==="pending"&&(m.status="fulfilled",m.value=q)},function(q){m.status==="pending"&&(m.status="rejected",m.reason=q)})),m.status){case"fulfilled":return m.value;case"rejected":throw m.reason}}throw m}function w(m,q,Z,ee,ne){var ye=typeof m;(ye==="undefined"||ye==="boolean")&&(m=null);var me=!1;if(m===null)me=!0;else switch(ye){case"bigint":case"string":case"number":me=!0;break;case"object":switch(m.$$typeof){case i:case o:me=!0;break;case b:return me=m._init,w(me(m._payload),q,Z,ee,ne)}}if(me)return ne=ne(m),me=ee===""?"."+re(m,0):ee,ie(ne)?(Z="",me!=null&&(Z=me.replace(Ee,"$&/")+"/"),w(ne,q,Z,"",function(Be){return Be})):ne!=null&&(X(ne)&&(ne=se(ne,Z+(ne.key==null||m&&m.key===ne.key?"":(""+ne.key).replace(Ee,"$&/")+"/")+me)),q.push(ne)),1;me=0;var Oe=ee===""?".":ee+":";if(ie(m))for(var be=0;be<m.length;be++)ee=m[be],ye=Oe+re(ee,be),me+=w(ee,q,Z,ye,ne);else if(be=H(m),typeof be=="function")for(m=be.call(m),be=0;!(ee=m.next()).done;)ee=ee.value,ye=Oe+re(ee,be++),me+=w(ee,q,Z,ye,ne);else if(ye==="object"){if(typeof m.then=="function")return w(ce(m),q,Z,ee,ne);throw q=String(m),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return me}function p(m,q,Z){if(m==null)return m;var ee=[],ne=0;return w(m,ee,"","",function(ye){return q.call(Z,ye,ne++)}),ee}function k(m){if(m._status===-1){var q=m._result;q=q(),q.then(function(Z){(m._status===0||m._status===-1)&&(m._status=1,m._result=Z)},function(Z){(m._status===0||m._status===-1)&&(m._status=2,m._result=Z)}),m._status===-1&&(m._status=0,m._result=q)}if(m._status===1)return m._result.default;throw m._result}var E=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)};function V(){}return ke.Children={map:p,forEach:function(m,q,Z){p(m,function(){q.apply(this,arguments)},Z)},count:function(m){var q=0;return p(m,function(){q++}),q},toArray:function(m){return p(m,function(q){return q})||[]},only:function(m){if(!X(m))throw Error("React.Children.only expected to receive a single React element child.");return m}},ke.Component=L,ke.Fragment=f,ke.Profiler=g,ke.PureComponent=R,ke.StrictMode=u,ke.Suspense=A,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,ke.__COMPILER_RUNTIME={__proto__:null,c:function(m){return $.H.useMemoCache(m)}},ke.cache=function(m){return function(){return m.apply(null,arguments)}},ke.cloneElement=function(m,q,Z){if(m==null)throw Error("The argument must be a React element, but you passed "+m+".");var ee=B({},m.props),ne=m.key,ye=void 0;if(q!=null)for(me in q.ref!==void 0&&(ye=void 0),q.key!==void 0&&(ne=""+q.key),q)!I.call(q,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&q.ref===void 0||(ee[me]=q[me]);var me=arguments.length-2;if(me===1)ee.children=Z;else if(1<me){for(var Oe=Array(me),be=0;be<me;be++)Oe[be]=arguments[be+2];ee.children=Oe}return ue(m.type,ne,void 0,void 0,ye,ee)},ke.createContext=function(m){return m={$$typeof:T,_currentValue:m,_currentValue2:m,_threadCount:0,Provider:null,Consumer:null},m.Provider=m,m.Consumer={$$typeof:_,_context:m},m},ke.createElement=function(m,q,Z){var ee,ne={},ye=null;if(q!=null)for(ee in q.key!==void 0&&(ye=""+q.key),q)I.call(q,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ne[ee]=q[ee]);var me=arguments.length-2;if(me===1)ne.children=Z;else if(1<me){for(var Oe=Array(me),be=0;be<me;be++)Oe[be]=arguments[be+2];ne.children=Oe}if(m&&m.defaultProps)for(ee in me=m.defaultProps,me)ne[ee]===void 0&&(ne[ee]=me[ee]);return ue(m,ye,void 0,void 0,null,ne)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(m){return{$$typeof:Y,render:m}},ke.isValidElement=X,ke.lazy=function(m){return{$$typeof:b,_payload:{_status:-1,_result:m},_init:k}},ke.memo=function(m,q){return{$$typeof:j,type:m,compare:q===void 0?null:q}},ke.startTransition=function(m){var q=$.T,Z={};$.T=Z;try{var ee=m(),ne=$.S;ne!==null&&ne(Z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(V,E)}catch(ye){E(ye)}finally{$.T=q}},ke.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},ke.use=function(m){return $.H.use(m)},ke.useActionState=function(m,q,Z){return $.H.useActionState(m,q,Z)},ke.useCallback=function(m,q){return $.H.useCallback(m,q)},ke.useContext=function(m){return $.H.useContext(m)},ke.useDebugValue=function(){},ke.useDeferredValue=function(m,q){return $.H.useDeferredValue(m,q)},ke.useEffect=function(m,q,Z){var ee=$.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(m,q)},ke.useId=function(){return $.H.useId()},ke.useImperativeHandle=function(m,q,Z){return $.H.useImperativeHandle(m,q,Z)},ke.useInsertionEffect=function(m,q){return $.H.useInsertionEffect(m,q)},ke.useLayoutEffect=function(m,q){return $.H.useLayoutEffect(m,q)},ke.useMemo=function(m,q){return $.H.useMemo(m,q)},ke.useOptimistic=function(m,q){return $.H.useOptimistic(m,q)},ke.useReducer=function(m,q,Z){return $.H.useReducer(m,q,Z)},ke.useRef=function(m){return $.H.useRef(m)},ke.useState=function(m){return $.H.useState(m)},ke.useSyncExternalStore=function(m,q,Z){return $.H.useSyncExternalStore(m,q,Z)},ke.useTransition=function(){return $.H.useTransition()},ke.version="19.1.0",ke}var gf;function Mo(){return gf||(gf=1,bo.exports=Fx()),bo.exports}var y=Mo();const ys=Eo(y);var vo={exports:{}},En={},jo={exports:{}},No={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf;function Px(){return pf||(pf=1,function(i){function o(p,k){var E=p.length;p.push(k);e:for(;0<E;){var V=E-1>>>1,m=p[V];if(0<g(m,k))p[V]=k,p[E]=m,E=V;else break e}}function f(p){return p.length===0?null:p[0]}function u(p){if(p.length===0)return null;var k=p[0],E=p.pop();if(E!==k){p[0]=E;e:for(var V=0,m=p.length,q=m>>>1;V<q;){var Z=2*(V+1)-1,ee=p[Z],ne=Z+1,ye=p[ne];if(0>g(ee,E))ne<m&&0>g(ye,ee)?(p[V]=ye,p[ne]=E,V=ne):(p[V]=ee,p[Z]=E,V=Z);else if(ne<m&&0>g(ye,E))p[V]=ye,p[ne]=E,V=ne;else break e}}return k}function g(p,k){var E=p.sortIndex-k.sortIndex;return E!==0?E:p.id-k.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var _=performance;i.unstable_now=function(){return _.now()}}else{var T=Date,Y=T.now();i.unstable_now=function(){return T.now()-Y}}var A=[],j=[],b=1,ae=null,H=3,oe=!1,B=!1,Q=!1,L=!1,N=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function ie(p){for(var k=f(j);k!==null;){if(k.callback===null)u(j);else if(k.startTime<=p)u(j),k.sortIndex=k.expirationTime,o(A,k);else break;k=f(j)}}function $(p){if(Q=!1,ie(p),!B)if(f(A)!==null)B=!0,I||(I=!0,re());else{var k=f(j);k!==null&&w($,k.startTime-p)}}var I=!1,ue=-1,se=5,X=-1;function P(){return L?!0:!(i.unstable_now()-X<se)}function Ee(){if(L=!1,I){var p=i.unstable_now();X=p;var k=!0;try{e:{B=!1,Q&&(Q=!1,R(ue),ue=-1),oe=!0;var E=H;try{t:{for(ie(p),ae=f(A);ae!==null&&!(ae.expirationTime>p&&P());){var V=ae.callback;if(typeof V=="function"){ae.callback=null,H=ae.priorityLevel;var m=V(ae.expirationTime<=p);if(p=i.unstable_now(),typeof m=="function"){ae.callback=m,ie(p),k=!0;break t}ae===f(A)&&u(A),ie(p)}else u(A);ae=f(A)}if(ae!==null)k=!0;else{var q=f(j);q!==null&&w($,q.startTime-p),k=!1}}break e}finally{ae=null,H=E,oe=!1}k=void 0}}finally{k?re():I=!1}}}var re;if(typeof J=="function")re=function(){J(Ee)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,ce=we.port2;we.port1.onmessage=Ee,re=function(){ce.postMessage(null)}}else re=function(){N(Ee,0)};function w(p,k){ue=N(function(){p(i.unstable_now())},k)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(p){p.callback=null},i.unstable_forceFrameRate=function(p){0>p||125<p?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<p?Math.floor(1e3/p):5},i.unstable_getCurrentPriorityLevel=function(){return H},i.unstable_next=function(p){switch(H){case 1:case 2:case 3:var k=3;break;default:k=H}var E=H;H=k;try{return p()}finally{H=E}},i.unstable_requestPaint=function(){L=!0},i.unstable_runWithPriority=function(p,k){switch(p){case 1:case 2:case 3:case 4:case 5:break;default:p=3}var E=H;H=p;try{return k()}finally{H=E}},i.unstable_scheduleCallback=function(p,k,E){var V=i.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?V+E:V):E=V,p){case 1:var m=-1;break;case 2:m=250;break;case 5:m=1073741823;break;case 4:m=1e4;break;default:m=5e3}return m=E+m,p={id:b++,callback:k,priorityLevel:p,startTime:E,expirationTime:m,sortIndex:-1},E>V?(p.sortIndex=E,o(j,p),f(A)===null&&p===f(j)&&(Q?(R(ue),ue=-1):Q=!0,w($,E-V))):(p.sortIndex=m,o(A,p),B||oe||(B=!0,I||(I=!0,re()))),p},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(p){var k=H;return function(){var E=H;H=k;try{return p.apply(this,arguments)}finally{H=E}}}}(No)),No}var yf;function Ix(){return yf||(yf=1,jo.exports=Px()),jo.exports}var wo={exports:{}},Tt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bf;function e0(){if(bf)return Tt;bf=1;var i=Mo();function o(A){var j="https://react.dev/errors/"+A;if(1<arguments.length){j+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)j+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+A+"; visit "+j+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(){}var u={d:{f,r:function(){throw Error(o(522))},D:f,C:f,L:f,m:f,X:f,S:f,M:f},p:0,findDOMNode:null},g=Symbol.for("react.portal");function _(A,j,b){var ae=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:g,key:ae==null?null:""+ae,children:A,containerInfo:j,implementation:b}}var T=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Y(A,j){if(A==="font")return"";if(typeof j=="string")return j==="use-credentials"?j:""}return Tt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,Tt.createPortal=function(A,j){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j||j.nodeType!==1&&j.nodeType!==9&&j.nodeType!==11)throw Error(o(299));return _(A,j,null,b)},Tt.flushSync=function(A){var j=T.T,b=u.p;try{if(T.T=null,u.p=2,A)return A()}finally{T.T=j,u.p=b,u.d.f()}},Tt.preconnect=function(A,j){typeof A=="string"&&(j?(j=j.crossOrigin,j=typeof j=="string"?j==="use-credentials"?j:"":void 0):j=null,u.d.C(A,j))},Tt.prefetchDNS=function(A){typeof A=="string"&&u.d.D(A)},Tt.preinit=function(A,j){if(typeof A=="string"&&j&&typeof j.as=="string"){var b=j.as,ae=Y(b,j.crossOrigin),H=typeof j.integrity=="string"?j.integrity:void 0,oe=typeof j.fetchPriority=="string"?j.fetchPriority:void 0;b==="style"?u.d.S(A,typeof j.precedence=="string"?j.precedence:void 0,{crossOrigin:ae,integrity:H,fetchPriority:oe}):b==="script"&&u.d.X(A,{crossOrigin:ae,integrity:H,fetchPriority:oe,nonce:typeof j.nonce=="string"?j.nonce:void 0})}},Tt.preinitModule=function(A,j){if(typeof A=="string")if(typeof j=="object"&&j!==null){if(j.as==null||j.as==="script"){var b=Y(j.as,j.crossOrigin);u.d.M(A,{crossOrigin:b,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0})}}else j==null&&u.d.M(A)},Tt.preload=function(A,j){if(typeof A=="string"&&typeof j=="object"&&j!==null&&typeof j.as=="string"){var b=j.as,ae=Y(b,j.crossOrigin);u.d.L(A,b,{crossOrigin:ae,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0,type:typeof j.type=="string"?j.type:void 0,fetchPriority:typeof j.fetchPriority=="string"?j.fetchPriority:void 0,referrerPolicy:typeof j.referrerPolicy=="string"?j.referrerPolicy:void 0,imageSrcSet:typeof j.imageSrcSet=="string"?j.imageSrcSet:void 0,imageSizes:typeof j.imageSizes=="string"?j.imageSizes:void 0,media:typeof j.media=="string"?j.media:void 0})}},Tt.preloadModule=function(A,j){if(typeof A=="string")if(j){var b=Y(j.as,j.crossOrigin);u.d.m(A,{as:typeof j.as=="string"&&j.as!=="script"?j.as:void 0,crossOrigin:b,integrity:typeof j.integrity=="string"?j.integrity:void 0})}else u.d.m(A)},Tt.requestFormReset=function(A){u.d.r(A)},Tt.unstable_batchedUpdates=function(A,j){return A(j)},Tt.useFormState=function(A,j,b){return T.H.useFormState(A,j,b)},Tt.useFormStatus=function(){return T.H.useHostTransitionStatus()},Tt.version="19.1.0",Tt}var vf;function Mf(){if(vf)return wo.exports;vf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),wo.exports=e0(),wo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf;function t0(){if(jf)return En;jf=1;var i=Ix(),o=Mo(),f=Mf();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function T(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Y(e){if(_(e)!==e)throw Error(u(188))}function A(e){var t=e.alternate;if(!t){if(t=_(e),t===null)throw Error(u(188));return t!==e?null:e}for(var s=e,l=t;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return Y(n),e;if(r===l)return Y(n),t;r=r.sibling}throw Error(u(188))}if(s.return!==l.return)s=n,l=r;else{for(var c=!1,d=n.child;d;){if(d===s){c=!0,s=n,l=r;break}if(d===l){c=!0,l=n,s=r;break}d=d.sibling}if(!c){for(d=r.child;d;){if(d===s){c=!0,s=r,l=n;break}if(d===l){c=!0,l=r,s=n;break}d=d.sibling}if(!c)throw Error(u(189))}}if(s.alternate!==l)throw Error(u(190))}if(s.tag!==3)throw Error(u(188));return s.stateNode.current===s?e:t}function j(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=j(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,ae=Symbol.for("react.element"),H=Symbol.for("react.transitional.element"),oe=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),J=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),Ee=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=Ee&&e[Ee]||e["@@iterator"],typeof e=="function"?e:null)}var we=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===we?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case L:return"Profiler";case Q:return"StrictMode";case $:return"Suspense";case I:return"SuspenseList";case X:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case oe:return"Portal";case J:return(e.displayName||"Context")+".Provider";case R:return(e._context.displayName||"Context")+".Consumer";case ie:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ue:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}var w=Array.isArray,p=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,E={pending:!1,data:null,method:null,action:null},V=[],m=-1;function q(e){return{current:e}}function Z(e){0>m||(e.current=V[m],V[m]=null,m--)}function ee(e,t){m++,V[m]=e.current,e.current=t}var ne=q(null),ye=q(null),me=q(null),Oe=q(null);function be(e,t){switch(ee(me,t),ee(ye,e),ee(ne,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?$m(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=$m(t),e=Bm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Z(ne),ee(ne,e)}function Be(){Z(ne),Z(ye),Z(me)}function Ye(e){e.memoizedState!==null&&ee(Oe,e);var t=ne.current,s=Bm(t,e.type);t!==s&&(ee(ye,e),ee(ne,s))}function et(e){ye.current===e&&(Z(ne),Z(ye)),Oe.current===e&&(Z(Oe),Nn._currentValue=E)}var $e=Object.prototype.hasOwnProperty,h=i.unstable_scheduleCallback,W=i.unstable_cancelCallback,Me=i.unstable_shouldYield,D=i.unstable_requestPaint,fe=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,He=i.unstable_ImmediatePriority,Re=i.unstable_UserBlockingPriority,Et=i.unstable_NormalPriority,On=i.unstable_LowPriority,Dl=i.unstable_IdlePriority,tt=i.log,ga=i.unstable_setDisableYieldValue,Ns=null,kt=null;function Ot(e){if(typeof tt=="function"&&ga(e),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(Ns,e)}catch{}}var pt=Math.clz32?Math.clz32:De,kl=Math.log,Rn=Math.LN2;function De(e){return e>>>=0,e===0?32:31-(kl(e)/Rn|0)|0}var Xs=256,Gs=4194304;function wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Vs(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var n=0,r=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var d=l&134217727;return d!==0?(l=d&~r,l!==0?n=wa(l):(c&=d,c!==0?n=wa(c):s||(s=d&~e,s!==0&&(n=wa(s))))):(d=l&~r,d!==0?n=wa(d):c!==0?n=wa(c):s||(s=l&~e,s!==0&&(n=wa(s)))),n===0?0:t!==0&&t!==n&&(t&r)===0&&(r=n&-n,s=t&-t,r>=s||r===32&&(s&4194048)!==0)?t:n}function ws(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function oi(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var e=Xs;return Xs<<=1,(Xs&4194048)===0&&(Xs=256),e}function Un(){var e=Gs;return Gs<<=1,(Gs&62914560)===0&&(Gs=4194304),e}function Ol(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Va(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function di(e,t,s,l,n,r){var c=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var d=e.entanglements,v=e.expirationTimes,O=e.hiddenUpdates;for(s=c&~s;0<s;){var G=31-pt(s),F=1<<G;d[G]=0,v[G]=-1;var z=O[G];if(z!==null)for(O[G]=null,G=0;G<z.length;G++){var U=z[G];U!==null&&(U.lane&=-536870913)}s&=~F}l!==0&&qn(e,l,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(c&~t))}function qn(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-pt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194090}function Ln(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-pt(s),n=1<<l;n&t|e[l]&t&&(e[l]|=t),s&=~n}}function x(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function te(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function de(){var e=k.p;return e!==0?e:(e=window.event,e===void 0?32:rf(e.type))}function he(e,t){var s=k.p;try{return k.p=e,t()}finally{k.p=s}}var ve=Math.random().toString(36).slice(2),Te="__reactFiber$"+ve,Ce="__reactProps$"+ve,at="__reactContainer$"+ve,It="__reactEvents$"+ve,Za="__reactListeners$"+ve,Hn="__reactHandles$"+ve,Ka="__reactResources$"+ve,Sa="__reactMarker$"+ve;function Ss(e){delete e[Te],delete e[Ce],delete e[It],delete e[Za],delete e[Hn]}function Wa(e){var t=e[Te];if(t)return t;for(var s=e.parentNode;s;){if(t=s[at]||s[Te]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Gm(e);e!==null;){if(s=e[Te])return s;e=Gm(e)}return t}e=s,s=e.parentNode}return null}function it(e){if(e=e[Te]||e[at]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Bt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function da(e){var t=e[Ka];return t||(t=e[Ka]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function mt(e){e[Sa]=!0}var _a=new Set,Aa={};function _s(e,t){Zs(e,t),Zs(e+"Capture",t)}function Zs(e,t){for(Aa[e]=t,e=0;e<t.length;e++)_a.add(t[e])}var Bf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Do={},ko={};function Qf(e){return $e.call(ko,e)?!0:$e.call(Do,e)?!1:Bf.test(e)?ko[e]=!0:(Do[e]=!0,!1)}function $n(e,t,s){if(Qf(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Bn(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Ca(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}var ui,Oo;function Ks(e){if(ui===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);ui=t&&t[1]||"",Oo=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ui+e+Oo}var mi=!1;function fi(e,t){if(!e||mi)return"";mi=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(U){var z=U}Reflect.construct(e,[],F)}else{try{F.call()}catch(U){z=U}e.call(F.prototype)}}else{try{throw Error()}catch(U){z=U}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(U){if(U&&z&&typeof U.stack=="string")return[U.stack,z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),c=r[0],d=r[1];if(c&&d){var v=c.split(`
`),O=d.split(`
`);for(n=l=0;l<v.length&&!v[l].includes("DetermineComponentFrameRoot");)l++;for(;n<O.length&&!O[n].includes("DetermineComponentFrameRoot");)n++;if(l===v.length||n===O.length)for(l=v.length-1,n=O.length-1;1<=l&&0<=n&&v[l]!==O[n];)n--;for(;1<=l&&0<=n;l--,n--)if(v[l]!==O[n]){if(l!==1||n!==1)do if(l--,n--,0>n||v[l]!==O[n]){var G=`
`+v[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=n);break}}}finally{mi=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ks(s):""}function Yf(e){switch(e.tag){case 26:case 27:case 5:return Ks(e.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 15:return fi(e.type,!1);case 11:return fi(e.type.render,!1);case 1:return fi(e.type,!0);case 31:return Ks("Activity");default:return""}}function Ro(e){try{var t="";do t+=Yf(e),e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function ea(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xf(e){var t=zo(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(c){l=""+c,r.call(this,c)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(c){l=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qn(e){e._valueTracker||(e._valueTracker=Xf(e))}function Uo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=zo(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Yn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gf=/[\n"\\]/g;function ta(e){return e.replace(Gf,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function hi(e,t,s,l,n,r,c,d){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ea(t)):e.value!==""+ea(t)&&(e.value=""+ea(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?xi(e,c,ea(t)):s!=null?xi(e,c,ea(s)):l!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.name=""+ea(d):e.removeAttribute("name")}function qo(e,t,s,l,n,r,c,d){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;s=s!=null?""+ea(s):"",t=t!=null?""+ea(t):s,d||t===e.value||(e.value=t),e.defaultValue=t}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=d?e.checked:!!l,e.defaultChecked=!!l,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function xi(e,t,s){t==="number"&&Yn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ws(e,t,s,l){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&l&&(e[s].defaultSelected=!0)}else{for(s=""+ea(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Lo(e,t,s){if(t!=null&&(t=""+ea(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+ea(s):""}function Ho(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(u(92));if(w(l)){if(1<l.length)throw Error(u(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=ea(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function Js(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Vf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||Vf.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Bo(e,t,s){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in t)l=t[n],t.hasOwnProperty(n)&&s[n]!==l&&$o(e,n,l)}else for(var r in t)t.hasOwnProperty(r)&&$o(e,r,t[r])}function gi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xn(e){return Kf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var pi=null;function yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fs=null,Ps=null;function Qo(e){var t=it(e);if(t&&(e=t.stateNode)){var s=e[Ce]||null;e:switch(e=t.stateNode,t.type){case"input":if(hi(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+ta(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var n=l[Ce]||null;if(!n)throw Error(u(90));hi(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&Uo(l)}break e;case"textarea":Lo(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Ws(e,!!s.multiple,t,!1)}}}var bi=!1;function Yo(e,t,s){if(bi)return e(t,s);bi=!0;try{var l=e(t);return l}finally{if(bi=!1,(Fs!==null||Ps!==null)&&(Mr(),Fs&&(t=Fs,e=Ps,Ps=Fs=null,Qo(t),e)))for(t=0;t<e.length;t++)Qo(e[t])}}function Rl(e,t){var s=e.stateNode;if(s===null)return null;var l=s[Ce]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(u(231,t,typeof s));return s}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vi=!1;if(Ea)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){vi=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{vi=!1}var Ja=null,ji=null,Gn=null;function Xo(){if(Gn)return Gn;var e,t=ji,s=t.length,l,n="value"in Ja?Ja.value:Ja.textContent,r=n.length;for(e=0;e<s&&t[e]===n[e];e++);var c=s-e;for(l=1;l<=c&&t[s-l]===n[r-l];l++);return Gn=n.slice(e,1<l?1-l:void 0)}function Vn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zn(){return!0}function Go(){return!1}function Ut(e){function t(s,l,n,r,c){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=c,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(s=e[d],this[d]=s?s(r):r[d]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Zn:Go,this.isPropagationStopped=Go,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),t}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kn=Ut(As),Ul=b({},As,{view:0,detail:0}),Wf=Ut(Ul),Ni,wi,ql,Wn=b({},Ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_i,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ql&&(ql&&e.type==="mousemove"?(Ni=e.screenX-ql.screenX,wi=e.screenY-ql.screenY):wi=Ni=0,ql=e),Ni)},movementY:function(e){return"movementY"in e?e.movementY:wi}}),Vo=Ut(Wn),Jf=b({},Wn,{dataTransfer:0}),Ff=Ut(Jf),Pf=b({},Ul,{relatedTarget:0}),Si=Ut(Pf),If=b({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=Ut(If),th=b({},As,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ah=Ut(th),sh=b({},As,{data:0}),Zo=Ut(sh),lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ih(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rh[e])?!!t[e]:!1}function _i(){return ih}var ch=b({},Ul,{key:function(e){if(e.key){var t=lh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_i,charCode:function(e){return e.type==="keypress"?Vn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oh=Ut(ch),dh=b({},Wn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ko=Ut(dh),uh=b({},Ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_i}),mh=Ut(uh),fh=b({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),hh=Ut(fh),xh=b({},Wn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gh=Ut(xh),ph=b({},As,{newState:0,oldState:0}),yh=Ut(ph),bh=[9,13,27,32],Ai=Ea&&"CompositionEvent"in window,Ll=null;Ea&&"documentMode"in document&&(Ll=document.documentMode);var vh=Ea&&"TextEvent"in window&&!Ll,Wo=Ea&&(!Ai||Ll&&8<Ll&&11>=Ll),Jo=" ",Fo=!1;function Po(e,t){switch(e){case"keyup":return bh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Io(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Is=!1;function jh(e,t){switch(e){case"compositionend":return Io(t);case"keypress":return t.which!==32?null:(Fo=!0,Jo);case"textInput":return e=t.data,e===Jo&&Fo?null:e;default:return null}}function Nh(e,t){if(Is)return e==="compositionend"||!Ai&&Po(e,t)?(e=Xo(),Gn=ji=Ja=null,Is=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wo&&t.locale!=="ko"?null:t.data;default:return null}}var wh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ed(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wh[e.type]:t==="textarea"}function td(e,t,s,l){Fs?Ps?Ps.push(l):Ps=[l]:Fs=l,t=zr(t,"onChange"),0<t.length&&(s=new Kn("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var Hl=null,$l=null;function Sh(e){zm(e,0)}function Jn(e){var t=Bt(e);if(Uo(t))return e}function ad(e,t){if(e==="change")return t}var sd=!1;if(Ea){var Ci;if(Ea){var Ei="oninput"in document;if(!Ei){var ld=document.createElement("div");ld.setAttribute("oninput","return;"),Ei=typeof ld.oninput=="function"}Ci=Ei}else Ci=!1;sd=Ci&&(!document.documentMode||9<document.documentMode)}function nd(){Hl&&(Hl.detachEvent("onpropertychange",rd),$l=Hl=null)}function rd(e){if(e.propertyName==="value"&&Jn($l)){var t=[];td(t,$l,e,yi(e)),Yo(Sh,t)}}function _h(e,t,s){e==="focusin"?(nd(),Hl=t,$l=s,Hl.attachEvent("onpropertychange",rd)):e==="focusout"&&nd()}function Ah(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jn($l)}function Ch(e,t){if(e==="click")return Jn(t)}function Eh(e,t){if(e==="input"||e==="change")return Jn(t)}function Mh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:Mh;function Bl(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!$e.call(t,n)||!Qt(e[n],t[n]))return!1}return!0}function id(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cd(e,t){var s=id(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=id(s)}}function od(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?od(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Yn(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Yn(e.document)}return t}function Mi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Th=Ea&&"documentMode"in document&&11>=document.documentMode,el=null,Ti=null,Ql=null,Di=!1;function ud(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Di||el==null||el!==Yn(l)||(l=el,"selectionStart"in l&&Mi(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ql&&Bl(Ql,l)||(Ql=l,l=zr(Ti,"onSelect"),0<l.length&&(t=new Kn("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=el)))}function Cs(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var tl={animationend:Cs("Animation","AnimationEnd"),animationiteration:Cs("Animation","AnimationIteration"),animationstart:Cs("Animation","AnimationStart"),transitionrun:Cs("Transition","TransitionRun"),transitionstart:Cs("Transition","TransitionStart"),transitioncancel:Cs("Transition","TransitionCancel"),transitionend:Cs("Transition","TransitionEnd")},ki={},md={};Ea&&(md=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Es(e){if(ki[e])return ki[e];if(!tl[e])return e;var t=tl[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in md)return ki[e]=t[s];return e}var fd=Es("animationend"),hd=Es("animationiteration"),xd=Es("animationstart"),Dh=Es("transitionrun"),kh=Es("transitionstart"),Oh=Es("transitioncancel"),gd=Es("transitionend"),pd=new Map,Oi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oi.push("scrollEnd");function ua(e,t){pd.set(e,t),_s(t,[e])}var yd=new WeakMap;function aa(e,t){if(typeof e=="object"&&e!==null){var s=yd.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Ro(t)},yd.set(e,t),t)}return{value:e,source:t,stack:Ro(t)}}var sa=[],al=0,Ri=0;function Fn(){for(var e=al,t=Ri=al=0;t<e;){var s=sa[t];sa[t++]=null;var l=sa[t];sa[t++]=null;var n=sa[t];sa[t++]=null;var r=sa[t];if(sa[t++]=null,l!==null&&n!==null){var c=l.pending;c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n}r!==0&&bd(s,n,r)}}function Pn(e,t,s,l){sa[al++]=e,sa[al++]=t,sa[al++]=s,sa[al++]=l,Ri|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function zi(e,t,s,l){return Pn(e,t,s,l),In(e)}function sl(e,t){return Pn(e,null,null,t),In(e)}function bd(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var n=!1,r=e.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-pt(s),e=r.hiddenUpdates,l=e[n],l===null?e[n]=[t]:l.push(t),t.lane=s|536870912),r):null}function In(e){if(50<hn)throw hn=0,Bc=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ll={};function Rh(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,s,l){return new Rh(e,t,s,l)}function Ui(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ma(e,t){var s=e.alternate;return s===null?(s=Yt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function vd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function er(e,t,s,l,n,r){var c=0;if(l=e,typeof e=="function")Ui(e)&&(c=1);else if(typeof e=="string")c=Ux(e,s,ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case X:return e=Yt(31,s,t,n),e.elementType=X,e.lanes=r,e;case B:return Ms(s.children,n,r,t);case Q:c=8,n|=24;break;case L:return e=Yt(12,s,t,n|2),e.elementType=L,e.lanes=r,e;case $:return e=Yt(13,s,t,n),e.elementType=$,e.lanes=r,e;case I:return e=Yt(19,s,t,n),e.elementType=I,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:case J:c=10;break e;case R:c=9;break e;case ie:c=11;break e;case ue:c=14;break e;case se:c=16,l=null;break e}c=29,s=Error(u(130,e===null?"null":typeof e,"")),l=null}return t=Yt(c,s,t,n),t.elementType=e,t.type=l,t.lanes=r,t}function Ms(e,t,s,l){return e=Yt(7,e,l,t),e.lanes=s,e}function qi(e,t,s){return e=Yt(6,e,null,t),e.lanes=s,e}function Li(e,t,s){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var nl=[],rl=0,tr=null,ar=0,la=[],na=0,Ts=null,Ta=1,Da="";function Ds(e,t){nl[rl++]=ar,nl[rl++]=tr,tr=e,ar=t}function jd(e,t,s){la[na++]=Ta,la[na++]=Da,la[na++]=Ts,Ts=e;var l=Ta;e=Da;var n=32-pt(l)-1;l&=~(1<<n),s+=1;var r=32-pt(t)+n;if(30<r){var c=n-n%5;r=(l&(1<<c)-1).toString(32),l>>=c,n-=c,Ta=1<<32-pt(t)+n|s<<n|l,Da=r+e}else Ta=1<<r|s<<n|l,Da=e}function Hi(e){e.return!==null&&(Ds(e,1),jd(e,1,0))}function $i(e){for(;e===tr;)tr=nl[--rl],nl[rl]=null,ar=nl[--rl],nl[rl]=null;for(;e===Ts;)Ts=la[--na],la[na]=null,Da=la[--na],la[na]=null,Ta=la[--na],la[na]=null}var Rt=null,ct=null,Ve=!1,ks=null,pa=!1,Bi=Error(u(519));function Os(e){var t=Error(u(418,""));throw Gl(aa(t,e)),Bi}function Nd(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[Te]=e,t[Ce]=l,s){case"dialog":Le("cancel",t),Le("close",t);break;case"iframe":case"object":case"embed":Le("load",t);break;case"video":case"audio":for(s=0;s<gn.length;s++)Le(gn[s],t);break;case"source":Le("error",t);break;case"img":case"image":case"link":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"input":Le("invalid",t),qo(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Qn(t);break;case"select":Le("invalid",t);break;case"textarea":Le("invalid",t),Ho(t,l.value,l.defaultValue,l.children),Qn(t)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||Hm(t.textContent,s)?(l.popover!=null&&(Le("beforetoggle",t),Le("toggle",t)),l.onScroll!=null&&Le("scroll",t),l.onScrollEnd!=null&&Le("scrollend",t),l.onClick!=null&&(t.onclick=Ur),t=!0):t=!1,t||Os(e)}function wd(e){for(Rt=e.return;Rt;)switch(Rt.tag){case 5:case 13:pa=!1;return;case 27:case 3:pa=!0;return;default:Rt=Rt.return}}function Yl(e){if(e!==Rt)return!1;if(!Ve)return wd(e),Ve=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||so(e.type,e.memoizedProps)),s=!s),s&&ct&&Os(e),wd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(t===0){ct=fa(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++;e=e.nextSibling}ct=null}}else t===27?(t=ct,ms(e.type)?(e=io,io=null,ct=e):ct=t):ct=Rt?fa(e.stateNode.nextSibling):null;return!0}function Xl(){ct=Rt=null,Ve=!1}function Sd(){var e=ks;return e!==null&&(Ht===null?Ht=e:Ht.push.apply(Ht,e),ks=null),e}function Gl(e){ks===null?ks=[e]:ks.push(e)}var Qi=q(null),Rs=null,ka=null;function Fa(e,t,s){ee(Qi,t._currentValue),t._currentValue=s}function Oa(e){e._currentValue=Qi.current,Z(Qi)}function Yi(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function Xi(e,t,s,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var c=n.child;r=r.firstContext;e:for(;r!==null;){var d=r;r=n;for(var v=0;v<t.length;v++)if(d.context===t[v]){r.lanes|=s,d=r.alternate,d!==null&&(d.lanes|=s),Yi(r.return,s,e),l||(c=null);break e}r=d.next}}else if(n.tag===18){if(c=n.return,c===null)throw Error(u(341));c.lanes|=s,r=c.alternate,r!==null&&(r.lanes|=s),Yi(c,s,e),c=null}else c=n.child;if(c!==null)c.return=n;else for(c=n;c!==null;){if(c===e){c=null;break}if(n=c.sibling,n!==null){n.return=c.return,c=n;break}c=c.return}n=c}}function Vl(e,t,s,l){e=null;for(var n=t,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var c=n.alternate;if(c===null)throw Error(u(387));if(c=c.memoizedProps,c!==null){var d=n.type;Qt(n.pendingProps.value,c.value)||(e!==null?e.push(d):e=[d])}}else if(n===Oe.current){if(c=n.alternate,c===null)throw Error(u(387));c.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Nn):e=[Nn])}n=n.return}e!==null&&Xi(t,e,s,l),t.flags|=262144}function sr(e){for(e=e.firstContext;e!==null;){if(!Qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function zs(e){Rs=e,ka=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mt(e){return _d(Rs,e)}function lr(e,t){return Rs===null&&zs(e),_d(e,t)}function _d(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},ka===null){if(e===null)throw Error(u(308));ka=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ka=ka.next=t;return s}var zh=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Uh=i.unstable_scheduleCallback,qh=i.unstable_NormalPriority,yt={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gi(){return{controller:new zh,data:new Map,refCount:0}}function Zl(e){e.refCount--,e.refCount===0&&Uh(qh,function(){e.controller.abort()})}var Kl=null,Vi=0,il=0,cl=null;function Lh(e,t){if(Kl===null){var s=Kl=[];Vi=0,il=Kc(),cl={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Vi++,t.then(Ad,Ad),t}function Ad(){if(--Vi===0&&Kl!==null){cl!==null&&(cl.status="fulfilled");var e=Kl;Kl=null,il=0,cl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Hh(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var n=0;n<s.length;n++)(0,s[n])(t)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var Cd=p.S;p.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Lh(e,t),Cd!==null&&Cd(e,t)};var Us=q(null);function Zi(){var e=Us.current;return e!==null?e:st.pooledCache}function nr(e,t){t===null?ee(Us,Us.current):ee(Us,t.pool)}function Ed(){var e=Zi();return e===null?null:{parent:yt._currentValue,pool:e}}var Wl=Error(u(460)),Md=Error(u(474)),rr=Error(u(542)),Ki={then:function(){}};function Td(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ir(){}function Dd(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(ir,ir),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Od(e),e;default:if(typeof t.status=="string")t.then(ir,ir);else{if(e=st,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=l}},function(l){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Od(e),e}throw Jl=t,Wl}}var Jl=null;function kd(){if(Jl===null)throw Error(u(459));var e=Jl;return Jl=null,e}function Od(e){if(e===Wl||e===rr)throw Error(u(483))}var Pa=!1;function Wi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ji(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function es(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,t=In(e),bd(e,null,s),t}return Pn(e,l,t,s),In(e)}function Fl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Ln(e,s)}}function Fi(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var c={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?n=r=c:r=r.next=c,s=s.next}while(s!==null);r===null?n=r=t:r=r.next=t}else n=r=t;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Pi=!1;function Pl(){if(Pi){var e=cl;if(e!==null)throw e}}function Il(e,t,s,l){Pi=!1;var n=e.updateQueue;Pa=!1;var r=n.firstBaseUpdate,c=n.lastBaseUpdate,d=n.shared.pending;if(d!==null){n.shared.pending=null;var v=d,O=v.next;v.next=null,c===null?r=O:c.next=O,c=v;var G=e.alternate;G!==null&&(G=G.updateQueue,d=G.lastBaseUpdate,d!==c&&(d===null?G.firstBaseUpdate=O:d.next=O,G.lastBaseUpdate=v))}if(r!==null){var F=n.baseState;c=0,G=O=v=null,d=r;do{var z=d.lane&-536870913,U=z!==d.lane;if(U?(Qe&z)===z:(l&z)===z){z!==0&&z===il&&(Pi=!0),G!==null&&(G=G.next={lane:0,tag:d.tag,payload:d.payload,callback:null,next:null});e:{var _e=e,je=d;z=t;var Fe=s;switch(je.tag){case 1:if(_e=je.payload,typeof _e=="function"){F=_e.call(Fe,F,z);break e}F=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=je.payload,z=typeof _e=="function"?_e.call(Fe,F,z):_e,z==null)break e;F=b({},F,z);break e;case 2:Pa=!0}}z=d.callback,z!==null&&(e.flags|=64,U&&(e.flags|=8192),U=n.callbacks,U===null?n.callbacks=[z]:U.push(z))}else U={lane:z,tag:d.tag,payload:d.payload,callback:d.callback,next:null},G===null?(O=G=U,v=F):G=G.next=U,c|=z;if(d=d.next,d===null){if(d=n.shared.pending,d===null)break;U=d,d=U.next,U.next=null,n.lastBaseUpdate=U,n.shared.pending=null}}while(!0);G===null&&(v=F),n.baseState=v,n.firstBaseUpdate=O,n.lastBaseUpdate=G,r===null&&(n.shared.lanes=0),cs|=c,e.lanes=c,e.memoizedState=F}}function Rd(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function zd(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Rd(s[e],t)}var ol=q(null),cr=q(0);function Ud(e,t){e=$a,ee(cr,e),ee(ol,t),$a=e|t.baseLanes}function Ii(){ee(cr,$a),ee(ol,ol.current)}function ec(){$a=cr.current,Z(ol),Z(cr)}var ts=0,ze=null,We=null,xt=null,or=!1,dl=!1,qs=!1,dr=0,en=0,ul=null,$h=0;function ft(){throw Error(u(321))}function tc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Qt(e[s],t[s]))return!1;return!0}function ac(e,t,s,l,n,r){return ts=r,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,p.H=e===null||e.memoizedState===null?bu:vu,qs=!1,r=s(l,n),qs=!1,dl&&(r=Ld(t,s,l,n)),qd(e),r}function qd(e){p.H=gr;var t=We!==null&&We.next!==null;if(ts=0,xt=We=ze=null,or=!1,en=0,ul=null,t)throw Error(u(300));e===null||jt||(e=e.dependencies,e!==null&&sr(e)&&(jt=!0))}function Ld(e,t,s,l){ze=e;var n=0;do{if(dl&&(ul=null),en=0,dl=!1,25<=n)throw Error(u(301));if(n+=1,xt=We=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}p.H=Zh,r=t(s,l)}while(dl);return r}function Bh(){var e=p.H,t=e.useState()[0];return t=typeof t.then=="function"?tn(t):t,e=e.useState()[0],(We!==null?We.memoizedState:null)!==e&&(ze.flags|=1024),t}function sc(){var e=dr!==0;return dr=0,e}function lc(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function nc(e){if(or){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}or=!1}ts=0,xt=We=ze=null,dl=!1,en=dr=0,ul=null}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?ze.memoizedState=xt=e:xt=xt.next=e,xt}function gt(){if(We===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=xt===null?ze.memoizedState:xt.next;if(t!==null)xt=t,We=e;else{if(e===null)throw ze.alternate===null?Error(u(467)):Error(u(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},xt===null?ze.memoizedState=xt=e:xt=xt.next=e}return xt}function rc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tn(e){var t=en;return en+=1,ul===null&&(ul=[]),e=Dd(ul,e,t),t=ze,(xt===null?t.memoizedState:xt.next)===null&&(t=t.alternate,p.H=t===null||t.memoizedState===null?bu:vu),e}function ur(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tn(e);if(e.$$typeof===J)return Mt(e)}throw Error(u(438,String(e)))}function ic(e){var t=null,s=ze.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=rc(),ze.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=P;return t.index++,s}function Ra(e,t){return typeof t=="function"?t(e):t}function mr(e){var t=gt();return cc(t,We,e)}function cc(e,t,s){var l=e.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=s;var n=e.baseQueue,r=l.pending;if(r!==null){if(n!==null){var c=n.next;n.next=r.next,r.next=c}t.baseQueue=n=r,l.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var d=c=null,v=null,O=t,G=!1;do{var F=O.lane&-536870913;if(F!==O.lane?(Qe&F)===F:(ts&F)===F){var z=O.revertLane;if(z===0)v!==null&&(v=v.next={lane:0,revertLane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),F===il&&(G=!0);else if((ts&z)===z){O=O.next,z===il&&(G=!0);continue}else F={lane:0,revertLane:O.revertLane,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},v===null?(d=v=F,c=r):v=v.next=F,ze.lanes|=z,cs|=z;F=O.action,qs&&s(r,F),r=O.hasEagerState?O.eagerState:s(r,F)}else z={lane:F,revertLane:O.revertLane,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},v===null?(d=v=z,c=r):v=v.next=z,ze.lanes|=F,cs|=F;O=O.next}while(O!==null&&O!==t);if(v===null?c=r:v.next=d,!Qt(r,e.memoizedState)&&(jt=!0,G&&(s=cl,s!==null)))throw s;e.memoizedState=r,e.baseState=c,e.baseQueue=v,l.lastRenderedState=r}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function oc(e){var t=gt(),s=t.queue;if(s===null)throw Error(u(311));s.lastRenderedReducer=e;var l=s.dispatch,n=s.pending,r=t.memoizedState;if(n!==null){s.pending=null;var c=n=n.next;do r=e(r,c.action),c=c.next;while(c!==n);Qt(r,t.memoizedState)||(jt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),s.lastRenderedState=r}return[r,l]}function Hd(e,t,s){var l=ze,n=gt(),r=Ve;if(r){if(s===void 0)throw Error(u(407));s=s()}else s=t();var c=!Qt((We||n).memoizedState,s);c&&(n.memoizedState=s,jt=!0),n=n.queue;var d=Qd.bind(null,l,n,e);if(an(2048,8,d,[e]),n.getSnapshot!==t||c||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,ml(9,fr(),Bd.bind(null,l,n,s,t),null),st===null)throw Error(u(349));r||(ts&124)!==0||$d(l,t,s)}return s}function $d(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ze.updateQueue,t===null?(t=rc(),ze.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Bd(e,t,s,l){t.value=s,t.getSnapshot=l,Yd(t)&&Xd(e)}function Qd(e,t,s){return s(function(){Yd(t)&&Xd(e)})}function Yd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Qt(e,s)}catch{return!0}}function Xd(e){var t=sl(e,2);t!==null&&Kt(t,e,2)}function dc(e){var t=qt();if(typeof e=="function"){var s=e;if(e=s(),qs){Ot(!0);try{s()}finally{Ot(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:e},t}function Gd(e,t,s,l){return e.baseState=s,cc(e,We,typeof l=="function"?l:Ra)}function Qh(e,t,s,l,n){if(xr(e))throw Error(u(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){r.listeners.push(c)}};p.T!==null?s(!0):r.isTransition=!1,l(r),s=t.pending,s===null?(r.next=t.pending=r,Vd(t,r)):(r.next=s.next,t.pending=s.next=r)}}function Vd(e,t){var s=t.action,l=t.payload,n=e.state;if(t.isTransition){var r=p.T,c={};p.T=c;try{var d=s(n,l),v=p.S;v!==null&&v(c,d),Zd(e,t,d)}catch(O){uc(e,t,O)}finally{p.T=r}}else try{r=s(n,l),Zd(e,t,r)}catch(O){uc(e,t,O)}}function Zd(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Kd(e,t,l)},function(l){return uc(e,t,l)}):Kd(e,t,s)}function Kd(e,t,s){t.status="fulfilled",t.value=s,Wd(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Vd(e,s)))}function uc(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,Wd(t),t=t.next;while(t!==l)}e.action=null}function Wd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Jd(e,t){return t}function Fd(e,t){if(Ve){var s=st.formState;if(s!==null){e:{var l=ze;if(Ve){if(ct){t:{for(var n=ct,r=pa;n.nodeType!==8;){if(!r){n=null;break t}if(n=fa(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){ct=fa(n.nextSibling),l=n.data==="F!";break e}}Os(l)}l=!1}l&&(t=s[0])}}return s=qt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jd,lastRenderedState:t},s.queue=l,s=gu.bind(null,ze,l),l.dispatch=s,l=dc(!1),r=gc.bind(null,ze,!1,l.queue),l=qt(),n={state:t,dispatch:null,action:e,pending:null},l.queue=n,s=Qh.bind(null,ze,n,r,s),n.dispatch=s,l.memoizedState=e,[t,s,!1]}function Pd(e){var t=gt();return Id(t,We,e)}function Id(e,t,s){if(t=cc(e,t,Jd)[0],e=mr(Ra)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=tn(t)}catch(c){throw c===Wl?rr:c}else l=t;t=gt();var n=t.queue,r=n.dispatch;return s!==t.memoizedState&&(ze.flags|=2048,ml(9,fr(),Yh.bind(null,n,s),null)),[l,r,e]}function Yh(e,t){e.action=t}function eu(e){var t=gt(),s=We;if(s!==null)return Id(t,s,e);gt(),t=t.memoizedState,s=gt();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function ml(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=ze.updateQueue,t===null&&(t=rc(),ze.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function fr(){return{destroy:void 0,resource:void 0}}function tu(){return gt().memoizedState}function hr(e,t,s,l){var n=qt();l=l===void 0?null:l,ze.flags|=e,n.memoizedState=ml(1|t,fr(),s,l)}function an(e,t,s,l){var n=gt();l=l===void 0?null:l;var r=n.memoizedState.inst;We!==null&&l!==null&&tc(l,We.memoizedState.deps)?n.memoizedState=ml(t,r,s,l):(ze.flags|=e,n.memoizedState=ml(1|t,r,s,l))}function au(e,t){hr(8390656,8,e,t)}function su(e,t){an(2048,8,e,t)}function lu(e,t){return an(4,2,e,t)}function nu(e,t){return an(4,4,e,t)}function ru(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iu(e,t,s){s=s!=null?s.concat([e]):null,an(4,4,ru.bind(null,t,e),s)}function mc(){}function cu(e,t){var s=gt();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&tc(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function ou(e,t){var s=gt();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&tc(t,l[1]))return l[0];if(l=e(),qs){Ot(!0);try{e()}finally{Ot(!1)}}return s.memoizedState=[l,t],l}function fc(e,t,s){return s===void 0||(ts&1073741824)!==0?e.memoizedState=t:(e.memoizedState=s,e=mm(),ze.lanes|=e,cs|=e,s)}function du(e,t,s,l){return Qt(s,t)?s:ol.current!==null?(e=fc(e,s,l),Qt(e,t)||(jt=!0),e):(ts&42)===0?(jt=!0,e.memoizedState=s):(e=mm(),ze.lanes|=e,cs|=e,t)}function uu(e,t,s,l,n){var r=k.p;k.p=r!==0&&8>r?r:8;var c=p.T,d={};p.T=d,gc(e,!1,t,s);try{var v=n(),O=p.S;if(O!==null&&O(d,v),v!==null&&typeof v=="object"&&typeof v.then=="function"){var G=Hh(v,l);sn(e,t,G,Zt(e))}else sn(e,t,l,Zt(e))}catch(F){sn(e,t,{then:function(){},status:"rejected",reason:F},Zt())}finally{k.p=r,p.T=c}}function Xh(){}function hc(e,t,s,l){if(e.tag!==5)throw Error(u(476));var n=mu(e).queue;uu(e,n,t,E,s===null?Xh:function(){return fu(e),s(l)})}function mu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:E,baseState:E,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:E},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function fu(e){var t=mu(e).next.queue;sn(e,t,{},Zt())}function xc(){return Mt(Nn)}function hu(){return gt().memoizedState}function xu(){return gt().memoizedState}function Gh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Zt();e=Ia(s);var l=es(t,e,s);l!==null&&(Kt(l,t,s),Fl(l,t,s)),t={cache:Gi()},e.payload=t;return}t=t.return}}function Vh(e,t,s){var l=Zt();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},xr(e)?pu(t,s):(s=zi(e,t,s,l),s!==null&&(Kt(s,e,l),yu(s,t,l)))}function gu(e,t,s){var l=Zt();sn(e,t,s,l)}function sn(e,t,s,l){var n={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(xr(e))pu(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var c=t.lastRenderedState,d=r(c,s);if(n.hasEagerState=!0,n.eagerState=d,Qt(d,c))return Pn(e,t,n,0),st===null&&Fn(),!1}catch{}finally{}if(s=zi(e,t,n,l),s!==null)return Kt(s,e,l),yu(s,t,l),!0}return!1}function gc(e,t,s,l){if(l={lane:2,revertLane:Kc(),action:l,hasEagerState:!1,eagerState:null,next:null},xr(e)){if(t)throw Error(u(479))}else t=zi(e,s,l,2),t!==null&&Kt(t,e,2)}function xr(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function pu(e,t){dl=or=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function yu(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Ln(e,s)}}var gr={readContext:Mt,use:ur,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft},bu={readContext:Mt,use:ur,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:au,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,hr(4194308,4,ru.bind(null,t,e),s)},useLayoutEffect:function(e,t){return hr(4194308,4,e,t)},useInsertionEffect:function(e,t){hr(4,2,e,t)},useMemo:function(e,t){var s=qt();t=t===void 0?null:t;var l=e();if(qs){Ot(!0);try{e()}finally{Ot(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=qt();if(s!==void 0){var n=s(t);if(qs){Ot(!0);try{s(t)}finally{Ot(!1)}}}else n=t;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Vh.bind(null,ze,e),[l.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:function(e){e=dc(e);var t=e.queue,s=gu.bind(null,ze,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:mc,useDeferredValue:function(e,t){var s=qt();return fc(s,e,t)},useTransition:function(){var e=dc(!1);return e=uu.bind(null,ze,e.queue,!0,!1),qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=ze,n=qt();if(Ve){if(s===void 0)throw Error(u(407));s=s()}else{if(s=t(),st===null)throw Error(u(349));(Qe&124)!==0||$d(l,t,s)}n.memoizedState=s;var r={value:s,getSnapshot:t};return n.queue=r,au(Qd.bind(null,l,r,e),[e]),l.flags|=2048,ml(9,fr(),Bd.bind(null,l,r,s,t),null),s},useId:function(){var e=qt(),t=st.identifierPrefix;if(Ve){var s=Da,l=Ta;s=(l&~(1<<32-pt(l)-1)).toString(32)+s,t="«"+t+"R"+s,s=dr++,0<s&&(t+="H"+s.toString(32)),t+="»"}else s=$h++,t="«"+t+"r"+s.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:xc,useFormState:Fd,useActionState:Fd,useOptimistic:function(e){var t=qt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=gc.bind(null,ze,!0,s),s.dispatch=t,[e,t]},useMemoCache:ic,useCacheRefresh:function(){return qt().memoizedState=Gh.bind(null,ze)}},vu={readContext:Mt,use:ur,useCallback:cu,useContext:Mt,useEffect:su,useImperativeHandle:iu,useInsertionEffect:lu,useLayoutEffect:nu,useMemo:ou,useReducer:mr,useRef:tu,useState:function(){return mr(Ra)},useDebugValue:mc,useDeferredValue:function(e,t){var s=gt();return du(s,We.memoizedState,e,t)},useTransition:function(){var e=mr(Ra)[0],t=gt().memoizedState;return[typeof e=="boolean"?e:tn(e),t]},useSyncExternalStore:Hd,useId:hu,useHostTransitionStatus:xc,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,t){var s=gt();return Gd(s,We,e,t)},useMemoCache:ic,useCacheRefresh:xu},Zh={readContext:Mt,use:ur,useCallback:cu,useContext:Mt,useEffect:su,useImperativeHandle:iu,useInsertionEffect:lu,useLayoutEffect:nu,useMemo:ou,useReducer:oc,useRef:tu,useState:function(){return oc(Ra)},useDebugValue:mc,useDeferredValue:function(e,t){var s=gt();return We===null?fc(s,e,t):du(s,We.memoizedState,e,t)},useTransition:function(){var e=oc(Ra)[0],t=gt().memoizedState;return[typeof e=="boolean"?e:tn(e),t]},useSyncExternalStore:Hd,useId:hu,useHostTransitionStatus:xc,useFormState:eu,useActionState:eu,useOptimistic:function(e,t){var s=gt();return We!==null?Gd(s,We,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:ic,useCacheRefresh:xu},fl=null,ln=0;function pr(e){var t=ln;return ln+=1,fl===null&&(fl=[]),Dd(fl,e,t)}function nn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function yr(e,t){throw t.$$typeof===ae?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ju(e){var t=e._init;return t(e._payload)}function Nu(e){function t(C,S){if(e){var M=C.deletions;M===null?(C.deletions=[S],C.flags|=16):M.push(S)}}function s(C,S){if(!e)return null;for(;S!==null;)t(C,S),S=S.sibling;return null}function l(C){for(var S=new Map;C!==null;)C.key!==null?S.set(C.key,C):S.set(C.index,C),C=C.sibling;return S}function n(C,S){return C=Ma(C,S),C.index=0,C.sibling=null,C}function r(C,S,M){return C.index=M,e?(M=C.alternate,M!==null?(M=M.index,M<S?(C.flags|=67108866,S):M):(C.flags|=67108866,S)):(C.flags|=1048576,S)}function c(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function d(C,S,M,K){return S===null||S.tag!==6?(S=qi(M,C.mode,K),S.return=C,S):(S=n(S,M),S.return=C,S)}function v(C,S,M,K){var ge=M.type;return ge===B?G(C,S,M.props.children,K,M.key):S!==null&&(S.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===se&&ju(ge)===S.type)?(S=n(S,M.props),nn(S,M),S.return=C,S):(S=er(M.type,M.key,M.props,null,C.mode,K),nn(S,M),S.return=C,S)}function O(C,S,M,K){return S===null||S.tag!==4||S.stateNode.containerInfo!==M.containerInfo||S.stateNode.implementation!==M.implementation?(S=Li(M,C.mode,K),S.return=C,S):(S=n(S,M.children||[]),S.return=C,S)}function G(C,S,M,K,ge){return S===null||S.tag!==7?(S=Ms(M,C.mode,K,ge),S.return=C,S):(S=n(S,M),S.return=C,S)}function F(C,S,M){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=qi(""+S,C.mode,M),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case H:return M=er(S.type,S.key,S.props,null,C.mode,M),nn(M,S),M.return=C,M;case oe:return S=Li(S,C.mode,M),S.return=C,S;case se:var K=S._init;return S=K(S._payload),F(C,S,M)}if(w(S)||re(S))return S=Ms(S,C.mode,M,null),S.return=C,S;if(typeof S.then=="function")return F(C,pr(S),M);if(S.$$typeof===J)return F(C,lr(C,S),M);yr(C,S)}return null}function z(C,S,M,K){var ge=S!==null?S.key:null;if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return ge!==null?null:d(C,S,""+M,K);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case H:return M.key===ge?v(C,S,M,K):null;case oe:return M.key===ge?O(C,S,M,K):null;case se:return ge=M._init,M=ge(M._payload),z(C,S,M,K)}if(w(M)||re(M))return ge!==null?null:G(C,S,M,K,null);if(typeof M.then=="function")return z(C,S,pr(M),K);if(M.$$typeof===J)return z(C,S,lr(C,M),K);yr(C,M)}return null}function U(C,S,M,K,ge){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return C=C.get(M)||null,d(S,C,""+K,ge);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case H:return C=C.get(K.key===null?M:K.key)||null,v(S,C,K,ge);case oe:return C=C.get(K.key===null?M:K.key)||null,O(S,C,K,ge);case se:var Ue=K._init;return K=Ue(K._payload),U(C,S,M,K,ge)}if(w(K)||re(K))return C=C.get(M)||null,G(S,C,K,ge,null);if(typeof K.then=="function")return U(C,S,M,pr(K),ge);if(K.$$typeof===J)return U(C,S,M,lr(S,K),ge);yr(S,K)}return null}function _e(C,S,M,K){for(var ge=null,Ue=null,pe=S,Se=S=0,wt=null;pe!==null&&Se<M.length;Se++){pe.index>Se?(wt=pe,pe=null):wt=pe.sibling;var Ge=z(C,pe,M[Se],K);if(Ge===null){pe===null&&(pe=wt);break}e&&pe&&Ge.alternate===null&&t(C,pe),S=r(Ge,S,Se),Ue===null?ge=Ge:Ue.sibling=Ge,Ue=Ge,pe=wt}if(Se===M.length)return s(C,pe),Ve&&Ds(C,Se),ge;if(pe===null){for(;Se<M.length;Se++)pe=F(C,M[Se],K),pe!==null&&(S=r(pe,S,Se),Ue===null?ge=pe:Ue.sibling=pe,Ue=pe);return Ve&&Ds(C,Se),ge}for(pe=l(pe);Se<M.length;Se++)wt=U(pe,C,Se,M[Se],K),wt!==null&&(e&&wt.alternate!==null&&pe.delete(wt.key===null?Se:wt.key),S=r(wt,S,Se),Ue===null?ge=wt:Ue.sibling=wt,Ue=wt);return e&&pe.forEach(function(ps){return t(C,ps)}),Ve&&Ds(C,Se),ge}function je(C,S,M,K){if(M==null)throw Error(u(151));for(var ge=null,Ue=null,pe=S,Se=S=0,wt=null,Ge=M.next();pe!==null&&!Ge.done;Se++,Ge=M.next()){pe.index>Se?(wt=pe,pe=null):wt=pe.sibling;var ps=z(C,pe,Ge.value,K);if(ps===null){pe===null&&(pe=wt);break}e&&pe&&ps.alternate===null&&t(C,pe),S=r(ps,S,Se),Ue===null?ge=ps:Ue.sibling=ps,Ue=ps,pe=wt}if(Ge.done)return s(C,pe),Ve&&Ds(C,Se),ge;if(pe===null){for(;!Ge.done;Se++,Ge=M.next())Ge=F(C,Ge.value,K),Ge!==null&&(S=r(Ge,S,Se),Ue===null?ge=Ge:Ue.sibling=Ge,Ue=Ge);return Ve&&Ds(C,Se),ge}for(pe=l(pe);!Ge.done;Se++,Ge=M.next())Ge=U(pe,C,Se,Ge.value,K),Ge!==null&&(e&&Ge.alternate!==null&&pe.delete(Ge.key===null?Se:Ge.key),S=r(Ge,S,Se),Ue===null?ge=Ge:Ue.sibling=Ge,Ue=Ge);return e&&pe.forEach(function(Kx){return t(C,Kx)}),Ve&&Ds(C,Se),ge}function Fe(C,S,M,K){if(typeof M=="object"&&M!==null&&M.type===B&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case H:e:{for(var ge=M.key;S!==null;){if(S.key===ge){if(ge=M.type,ge===B){if(S.tag===7){s(C,S.sibling),K=n(S,M.props.children),K.return=C,C=K;break e}}else if(S.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===se&&ju(ge)===S.type){s(C,S.sibling),K=n(S,M.props),nn(K,M),K.return=C,C=K;break e}s(C,S);break}else t(C,S);S=S.sibling}M.type===B?(K=Ms(M.props.children,C.mode,K,M.key),K.return=C,C=K):(K=er(M.type,M.key,M.props,null,C.mode,K),nn(K,M),K.return=C,C=K)}return c(C);case oe:e:{for(ge=M.key;S!==null;){if(S.key===ge)if(S.tag===4&&S.stateNode.containerInfo===M.containerInfo&&S.stateNode.implementation===M.implementation){s(C,S.sibling),K=n(S,M.children||[]),K.return=C,C=K;break e}else{s(C,S);break}else t(C,S);S=S.sibling}K=Li(M,C.mode,K),K.return=C,C=K}return c(C);case se:return ge=M._init,M=ge(M._payload),Fe(C,S,M,K)}if(w(M))return _e(C,S,M,K);if(re(M)){if(ge=re(M),typeof ge!="function")throw Error(u(150));return M=ge.call(M),je(C,S,M,K)}if(typeof M.then=="function")return Fe(C,S,pr(M),K);if(M.$$typeof===J)return Fe(C,S,lr(C,M),K);yr(C,M)}return typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint"?(M=""+M,S!==null&&S.tag===6?(s(C,S.sibling),K=n(S,M),K.return=C,C=K):(s(C,S),K=qi(M,C.mode,K),K.return=C,C=K),c(C)):s(C,S)}return function(C,S,M,K){try{ln=0;var ge=Fe(C,S,M,K);return fl=null,ge}catch(pe){if(pe===Wl||pe===rr)throw pe;var Ue=Yt(29,pe,null,C.mode);return Ue.lanes=K,Ue.return=C,Ue}finally{}}}var hl=Nu(!0),wu=Nu(!1),ra=q(null),ya=null;function as(e){var t=e.alternate;ee(bt,bt.current&1),ee(ra,e),ya===null&&(t===null||ol.current!==null||t.memoizedState!==null)&&(ya=e)}function Su(e){if(e.tag===22){if(ee(bt,bt.current),ee(ra,e),ya===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ya=e)}}else ss()}function ss(){ee(bt,bt.current),ee(ra,ra.current)}function za(e){Z(ra),ya===e&&(ya=null),Z(bt)}var bt=q(0);function br(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||ro(s)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function pc(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:b({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var yc={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=Zt(),n=Ia(l);n.payload=t,s!=null&&(n.callback=s),t=es(e,n,l),t!==null&&(Kt(t,e,l),Fl(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=Zt(),n=Ia(l);n.tag=1,n.payload=t,s!=null&&(n.callback=s),t=es(e,n,l),t!==null&&(Kt(t,e,l),Fl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Zt(),l=Ia(s);l.tag=2,t!=null&&(l.callback=t),t=es(e,l,s),t!==null&&(Kt(t,e,s),Fl(t,e,s))}};function _u(e,t,s,l,n,r,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,r,c):t.prototype&&t.prototype.isPureReactComponent?!Bl(s,l)||!Bl(n,r):!0}function Au(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&yc.enqueueReplaceState(t,t.state,null)}function Ls(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=b({},s));for(var n in e)s[n]===void 0&&(s[n]=e[n])}return s}var vr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Cu(e){vr(e)}function Eu(e){console.error(e)}function Mu(e){vr(e)}function jr(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Tu(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function bc(e,t,s){return s=Ia(s),s.tag=3,s.payload={element:null},s.callback=function(){jr(e,t)},s}function Du(e){return e=Ia(e),e.tag=3,e}function ku(e,t,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;e.payload=function(){return n(r)},e.callback=function(){Tu(t,s,l)}}var c=s.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){Tu(t,s,l),typeof n!="function"&&(os===null?os=new Set([this]):os.add(this));var d=l.stack;this.componentDidCatch(l.value,{componentStack:d!==null?d:""})})}function Kh(e,t,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Vl(t,s,n,!0),s=ra.current,s!==null){switch(s.tag){case 13:return ya===null?Yc():s.alternate===null&&ot===0&&(ot=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===Ki?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Gc(e,l,n)),!1;case 22:return s.flags|=65536,l===Ki?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Gc(e,l,n)),!1}throw Error(u(435,s.tag))}return Gc(e,l,n),Yc(),!1}if(Ve)return t=ra.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,l!==Bi&&(e=Error(u(422),{cause:l}),Gl(aa(e,s)))):(l!==Bi&&(t=Error(u(423),{cause:l}),Gl(aa(t,s))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=aa(l,s),n=bc(e.stateNode,l,n),Fi(e,n),ot!==4&&(ot=2)),!1;var r=Error(u(520),{cause:l});if(r=aa(r,s),fn===null?fn=[r]:fn.push(r),ot!==4&&(ot=2),t===null)return!0;l=aa(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=n&-n,s.lanes|=e,e=bc(s.stateNode,l,e),Fi(s,e),!1;case 1:if(t=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(os===null||!os.has(r))))return s.flags|=65536,n&=-n,s.lanes|=n,n=Du(n),ku(n,e,s,l),Fi(s,n),!1}s=s.return}while(s!==null);return!1}var Ou=Error(u(461)),jt=!1;function _t(e,t,s,l){t.child=e===null?wu(t,null,s,l):hl(t,e.child,s,l)}function Ru(e,t,s,l,n){s=s.render;var r=t.ref;if("ref"in l){var c={};for(var d in l)d!=="ref"&&(c[d]=l[d])}else c=l;return zs(t),l=ac(e,t,s,c,r,n),d=sc(),e!==null&&!jt?(lc(e,t,n),Ua(e,t,n)):(Ve&&d&&Hi(t),t.flags|=1,_t(e,t,l,n),t.child)}function zu(e,t,s,l,n){if(e===null){var r=s.type;return typeof r=="function"&&!Ui(r)&&r.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=r,Uu(e,t,r,l,n)):(e=er(s.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Cc(e,n)){var c=r.memoizedProps;if(s=s.compare,s=s!==null?s:Bl,s(c,l)&&e.ref===t.ref)return Ua(e,t,n)}return t.flags|=1,e=Ma(r,l),e.ref=t.ref,e.return=t,t.child=e}function Uu(e,t,s,l,n){if(e!==null){var r=e.memoizedProps;if(Bl(r,l)&&e.ref===t.ref)if(jt=!1,t.pendingProps=l=r,Cc(e,n))(e.flags&131072)!==0&&(jt=!0);else return t.lanes=e.lanes,Ua(e,t,n)}return vc(e,t,s,l,n)}function qu(e,t,s){var l=t.pendingProps,n=l.children,r=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=r!==null?r.baseLanes|s:s,e!==null){for(n=t.child=e.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;t.childLanes=r&~l}else t.childLanes=0,t.child=null;return Lu(e,t,l,s)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&nr(t,r!==null?r.cachePool:null),r!==null?Ud(t,r):Ii(),Su(t);else return t.lanes=t.childLanes=536870912,Lu(e,t,r!==null?r.baseLanes|s:s,s)}else r!==null?(nr(t,r.cachePool),Ud(t,r),ss(),t.memoizedState=null):(e!==null&&nr(t,null),Ii(),ss());return _t(e,t,n,s),t.child}function Lu(e,t,s,l){var n=Zi();return n=n===null?null:{parent:yt._currentValue,pool:n},t.memoizedState={baseLanes:s,cachePool:n},e!==null&&nr(t,null),Ii(),Su(t),e!==null&&Vl(e,t,l,!0),null}function Nr(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(u(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function vc(e,t,s,l,n){return zs(t),s=ac(e,t,s,l,void 0,n),l=sc(),e!==null&&!jt?(lc(e,t,n),Ua(e,t,n)):(Ve&&l&&Hi(t),t.flags|=1,_t(e,t,s,n),t.child)}function Hu(e,t,s,l,n,r){return zs(t),t.updateQueue=null,s=Ld(t,l,s,n),qd(e),l=sc(),e!==null&&!jt?(lc(e,t,r),Ua(e,t,r)):(Ve&&l&&Hi(t),t.flags|=1,_t(e,t,s,r),t.child)}function $u(e,t,s,l,n){if(zs(t),t.stateNode===null){var r=ll,c=s.contextType;typeof c=="object"&&c!==null&&(r=Mt(c)),r=new s(l,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=yc,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=l,r.state=t.memoizedState,r.refs={},Wi(t),c=s.contextType,r.context=typeof c=="object"&&c!==null?Mt(c):ll,r.state=t.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(pc(t,s,c,l),r.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(c=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),c!==r.state&&yc.enqueueReplaceState(r,r.state,null),Il(t,l,r,n),Pl(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){r=t.stateNode;var d=t.memoizedProps,v=Ls(s,d);r.props=v;var O=r.context,G=s.contextType;c=ll,typeof G=="object"&&G!==null&&(c=Mt(G));var F=s.getDerivedStateFromProps;G=typeof F=="function"||typeof r.getSnapshotBeforeUpdate=="function",d=t.pendingProps!==d,G||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(d||O!==c)&&Au(t,r,l,c),Pa=!1;var z=t.memoizedState;r.state=z,Il(t,l,r,n),Pl(),O=t.memoizedState,d||z!==O||Pa?(typeof F=="function"&&(pc(t,s,F,l),O=t.memoizedState),(v=Pa||_u(t,s,v,l,z,O,c))?(G||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=O),r.props=l,r.state=O,r.context=c,l=v):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{r=t.stateNode,Ji(e,t),c=t.memoizedProps,G=Ls(s,c),r.props=G,F=t.pendingProps,z=r.context,O=s.contextType,v=ll,typeof O=="object"&&O!==null&&(v=Mt(O)),d=s.getDerivedStateFromProps,(O=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(c!==F||z!==v)&&Au(t,r,l,v),Pa=!1,z=t.memoizedState,r.state=z,Il(t,l,r,n),Pl();var U=t.memoizedState;c!==F||z!==U||Pa||e!==null&&e.dependencies!==null&&sr(e.dependencies)?(typeof d=="function"&&(pc(t,s,d,l),U=t.memoizedState),(G=Pa||_u(t,s,G,l,z,U,v)||e!==null&&e.dependencies!==null&&sr(e.dependencies))?(O||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,U,v),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,U,v)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=U),r.props=l,r.state=U,r.context=v,l=G):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),l=!1)}return r=l,Nr(e,t),l=(t.flags&128)!==0,r||l?(r=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&l?(t.child=hl(t,e.child,null,n),t.child=hl(t,null,s,n)):_t(e,t,s,n),t.memoizedState=r.state,e=t.child):e=Ua(e,t,n),e}function Bu(e,t,s,l){return Xl(),t.flags|=256,_t(e,t,s,l),t.child}var jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nc(e){return{baseLanes:e,cachePool:Ed()}}function wc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=ia),e}function Qu(e,t,s){var l=t.pendingProps,n=!1,r=(t.flags&128)!==0,c;if((c=r)||(c=e!==null&&e.memoizedState===null?!1:(bt.current&2)!==0),c&&(n=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ve){if(n?as(t):ss(),Ve){var d=ct,v;if(v=d){e:{for(v=d,d=pa;v.nodeType!==8;){if(!d){d=null;break e}if(v=fa(v.nextSibling),v===null){d=null;break e}}d=v}d!==null?(t.memoizedState={dehydrated:d,treeContext:Ts!==null?{id:Ta,overflow:Da}:null,retryLane:536870912,hydrationErrors:null},v=Yt(18,null,null,0),v.stateNode=d,v.return=t,t.child=v,Rt=t,ct=null,v=!0):v=!1}v||Os(t)}if(d=t.memoizedState,d!==null&&(d=d.dehydrated,d!==null))return ro(d)?t.lanes=32:t.lanes=536870912,null;za(t)}return d=l.children,l=l.fallback,n?(ss(),n=t.mode,d=wr({mode:"hidden",children:d},n),l=Ms(l,n,s,null),d.return=t,l.return=t,d.sibling=l,t.child=d,n=t.child,n.memoizedState=Nc(s),n.childLanes=wc(e,c,s),t.memoizedState=jc,l):(as(t),Sc(t,d))}if(v=e.memoizedState,v!==null&&(d=v.dehydrated,d!==null)){if(r)t.flags&256?(as(t),t.flags&=-257,t=_c(e,t,s)):t.memoizedState!==null?(ss(),t.child=e.child,t.flags|=128,t=null):(ss(),n=l.fallback,d=t.mode,l=wr({mode:"visible",children:l.children},d),n=Ms(n,d,s,null),n.flags|=2,l.return=t,n.return=t,l.sibling=n,t.child=l,hl(t,e.child,null,s),l=t.child,l.memoizedState=Nc(s),l.childLanes=wc(e,c,s),t.memoizedState=jc,t=n);else if(as(t),ro(d)){if(c=d.nextSibling&&d.nextSibling.dataset,c)var O=c.dgst;c=O,l=Error(u(419)),l.stack="",l.digest=c,Gl({value:l,source:null,stack:null}),t=_c(e,t,s)}else if(jt||Vl(e,t,s,!1),c=(s&e.childLanes)!==0,jt||c){if(c=st,c!==null&&(l=s&-s,l=(l&42)!==0?1:x(l),l=(l&(c.suspendedLanes|s))!==0?0:l,l!==0&&l!==v.retryLane))throw v.retryLane=l,sl(e,l),Kt(c,e,l),Ou;d.data==="$?"||Yc(),t=_c(e,t,s)}else d.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=v.treeContext,ct=fa(d.nextSibling),Rt=t,Ve=!0,ks=null,pa=!1,e!==null&&(la[na++]=Ta,la[na++]=Da,la[na++]=Ts,Ta=e.id,Da=e.overflow,Ts=t),t=Sc(t,l.children),t.flags|=4096);return t}return n?(ss(),n=l.fallback,d=t.mode,v=e.child,O=v.sibling,l=Ma(v,{mode:"hidden",children:l.children}),l.subtreeFlags=v.subtreeFlags&65011712,O!==null?n=Ma(O,n):(n=Ms(n,d,s,null),n.flags|=2),n.return=t,l.return=t,l.sibling=n,t.child=l,l=n,n=t.child,d=e.child.memoizedState,d===null?d=Nc(s):(v=d.cachePool,v!==null?(O=yt._currentValue,v=v.parent!==O?{parent:O,pool:O}:v):v=Ed(),d={baseLanes:d.baseLanes|s,cachePool:v}),n.memoizedState=d,n.childLanes=wc(e,c,s),t.memoizedState=jc,l):(as(t),s=e.child,e=s.sibling,s=Ma(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=s,t.memoizedState=null,s)}function Sc(e,t){return t=wr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function wr(e,t){return e=Yt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function _c(e,t,s){return hl(t,e.child,null,s),e=Sc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Yu(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Yi(e.return,t,s)}function Ac(e,t,s,l,n){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=s,r.tailMode=n)}function Xu(e,t,s){var l=t.pendingProps,n=l.revealOrder,r=l.tail;if(_t(e,t,l.children,s),l=bt.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yu(e,s,t);else if(e.tag===19)Yu(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ee(bt,l),n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&br(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),Ac(t,!1,n,s,r);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&br(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}Ac(t,!0,s,null,r);break;case"together":Ac(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ua(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),cs|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Vl(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,s=Ma(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Ma(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Cc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&sr(e)))}function Wh(e,t,s){switch(t.tag){case 3:be(t,t.stateNode.containerInfo),Fa(t,yt,e.memoizedState.cache),Xl();break;case 27:case 5:Ye(t);break;case 4:be(t,t.stateNode.containerInfo);break;case 10:Fa(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(as(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Qu(e,t,s):(as(t),e=Ua(e,t,s),e!==null?e.sibling:null);as(t);break;case 19:var n=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Vl(e,t,s,!1),l=(s&t.childLanes)!==0),n){if(l)return Xu(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ee(bt,bt.current),l)break;return null;case 22:case 23:return t.lanes=0,qu(e,t,s);case 24:Fa(t,yt,e.memoizedState.cache)}return Ua(e,t,s)}function Gu(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)jt=!0;else{if(!Cc(e,s)&&(t.flags&128)===0)return jt=!1,Wh(e,t,s);jt=(e.flags&131072)!==0}else jt=!1,Ve&&(t.flags&1048576)!==0&&jd(t,ar,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,n=l._init;if(l=n(l._payload),t.type=l,typeof l=="function")Ui(l)?(e=Ls(l,e),t.tag=1,t=$u(null,t,l,e,s)):(t.tag=0,t=vc(null,t,l,e,s));else{if(l!=null){if(n=l.$$typeof,n===ie){t.tag=11,t=Ru(null,t,l,e,s);break e}else if(n===ue){t.tag=14,t=zu(null,t,l,e,s);break e}}throw t=ce(l)||l,Error(u(306,t,""))}}return t;case 0:return vc(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,n=Ls(l,t.pendingProps),$u(e,t,l,n,s);case 3:e:{if(be(t,t.stateNode.containerInfo),e===null)throw Error(u(387));l=t.pendingProps;var r=t.memoizedState;n=r.element,Ji(e,t),Il(t,l,null,s);var c=t.memoizedState;if(l=c.cache,Fa(t,yt,l),l!==r.cache&&Xi(t,[yt],s,!0),Pl(),l=c.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Bu(e,t,l,s);break e}else if(l!==n){n=aa(Error(u(424)),t),Gl(n),t=Bu(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ct=fa(e.firstChild),Rt=t,Ve=!0,ks=null,pa=!0,s=wu(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Xl(),l===n){t=Ua(e,t,s);break e}_t(e,t,l,s)}t=t.child}return t;case 26:return Nr(e,t),e===null?(s=Wm(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ve||(s=t.type,e=t.pendingProps,l=qr(me.current).createElement(s),l[Te]=t,l[Ce]=e,Ct(l,s,e),mt(l),t.stateNode=l):t.memoizedState=Wm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ye(t),e===null&&Ve&&(l=t.stateNode=Vm(t.type,t.pendingProps,me.current),Rt=t,pa=!0,n=ct,ms(t.type)?(io=n,ct=fa(l.firstChild)):ct=n),_t(e,t,t.pendingProps.children,s),Nr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ve&&((n=l=ct)&&(l=wx(l,t.type,t.pendingProps,pa),l!==null?(t.stateNode=l,Rt=t,ct=fa(l.firstChild),pa=!1,n=!0):n=!1),n||Os(t)),Ye(t),n=t.type,r=t.pendingProps,c=e!==null?e.memoizedProps:null,l=r.children,so(n,r)?l=null:c!==null&&so(n,c)&&(t.flags|=32),t.memoizedState!==null&&(n=ac(e,t,Bh,null,null,s),Nn._currentValue=n),Nr(e,t),_t(e,t,l,s),t.child;case 6:return e===null&&Ve&&((e=s=ct)&&(s=Sx(s,t.pendingProps,pa),s!==null?(t.stateNode=s,Rt=t,ct=null,e=!0):e=!1),e||Os(t)),null;case 13:return Qu(e,t,s);case 4:return be(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=hl(t,null,l,s):_t(e,t,l,s),t.child;case 11:return Ru(e,t,t.type,t.pendingProps,s);case 7:return _t(e,t,t.pendingProps,s),t.child;case 8:return _t(e,t,t.pendingProps.children,s),t.child;case 12:return _t(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,Fa(t,t.type,l.value),_t(e,t,l.children,s),t.child;case 9:return n=t.type._context,l=t.pendingProps.children,zs(t),n=Mt(n),l=l(n),t.flags|=1,_t(e,t,l,s),t.child;case 14:return zu(e,t,t.type,t.pendingProps,s);case 15:return Uu(e,t,t.type,t.pendingProps,s);case 19:return Xu(e,t,s);case 31:return l=t.pendingProps,s=t.mode,l={mode:l.mode,children:l.children},e===null?(s=wr(l,s),s.ref=t.ref,t.child=s,s.return=t,t=s):(s=Ma(e.child,l),s.ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return qu(e,t,s);case 24:return zs(t),l=Mt(yt),e===null?(n=Zi(),n===null&&(n=st,r=Gi(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=s),n=r),t.memoizedState={parent:l,cache:n},Wi(t),Fa(t,yt,n)):((e.lanes&s)!==0&&(Ji(e,t),Il(t,null,null,s),Pl()),n=e.memoizedState,r=t.memoizedState,n.parent!==l?(n={parent:l,cache:l},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Fa(t,yt,l)):(l=r.cache,Fa(t,yt,l),l!==n.cache&&Xi(t,[yt],s,!0))),_t(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function qa(e){e.flags|=4}function Vu(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ef(t)){if(t=ra.current,t!==null&&((Qe&4194048)===Qe?ya!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||t!==ya))throw Jl=Ki,Md;e.flags|=8192}}function Sr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Un():536870912,e.lanes|=t,yl|=t)}function rn(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function Jh(e,t,s){var l=t.pendingProps;switch($i(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return rt(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Oa(yt),Be(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Yl(t)?qa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Sd())),rt(t),null;case 26:return s=t.memoizedState,e===null?(qa(t),s!==null?(rt(t),Vu(t,s)):(rt(t),t.flags&=-16777217)):s?s!==e.memoizedState?(qa(t),rt(t),Vu(t,s)):(rt(t),t.flags&=-16777217):(e.memoizedProps!==l&&qa(t),rt(t),t.flags&=-16777217),null;case 27:et(t),s=me.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&qa(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return rt(t),null}e=ne.current,Yl(t)?Nd(t):(e=Vm(n,l,s),t.stateNode=e,qa(t))}return rt(t),null;case 5:if(et(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&qa(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return rt(t),null}if(e=ne.current,Yl(t))Nd(t);else{switch(n=qr(me.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?n.createElement(s,{is:l.is}):n.createElement(s)}}e[Te]=t,e[Ce]=l;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(Ct(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&qa(t)}}return rt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&qa(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(u(166));if(e=me.current,Yl(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,n=Rt,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[Te]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Hm(e.nodeValue,s)),e||Os(t)}else e=qr(e).createTextNode(l),e[Te]=t,t.stateNode=e}return rt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Yl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(u(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(u(317));n[Te]=t}else Xl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),n=!1}else n=Sd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(za(t),t):(za(t),null)}if(za(t),(t.flags&128)!==0)return t.lanes=s,t;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=t.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var r=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),Sr(t,t.updateQueue),rt(t),null;case 4:return Be(),e===null&&Pc(t.stateNode.containerInfo),rt(t),null;case 10:return Oa(t.type),rt(t),null;case 19:if(Z(bt),n=t.memoizedState,n===null)return rt(t),null;if(l=(t.flags&128)!==0,r=n.rendering,r===null)if(l)rn(n,!1);else{if(ot!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=br(e),r!==null){for(t.flags|=128,rn(n,!1),e=r.updateQueue,t.updateQueue=e,Sr(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)vd(s,e),s=s.sibling;return ee(bt,bt.current&1|2),t.child}e=e.sibling}n.tail!==null&&fe()>Cr&&(t.flags|=128,l=!0,rn(n,!1),t.lanes=4194304)}else{if(!l)if(e=br(r),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Sr(t,e),rn(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!Ve)return rt(t),null}else 2*fe()-n.renderingStartTime>Cr&&s!==536870912&&(t.flags|=128,l=!0,rn(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(e=n.last,e!==null?e.sibling=r:t.child=r,n.last=r)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=fe(),t.sibling=null,e=bt.current,ee(bt,l?e&1|2:e&1),t):(rt(t),null);case 22:case 23:return za(t),ec(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),s=t.updateQueue,s!==null&&Sr(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&Z(Us),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Oa(yt),rt(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function Fh(e,t){switch($i(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oa(yt),Be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return et(t),null;case 13:if(za(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Xl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(bt),null;case 4:return Be(),null;case 10:return Oa(t.type),null;case 22:case 23:return za(t),ec(),e!==null&&Z(Us),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Oa(yt),null;case 25:return null;default:return null}}function Zu(e,t){switch($i(t),t.tag){case 3:Oa(yt),Be();break;case 26:case 27:case 5:et(t);break;case 4:Be();break;case 13:za(t);break;case 19:Z(bt);break;case 10:Oa(t.type);break;case 22:case 23:za(t),ec(),e!==null&&Z(Us);break;case 24:Oa(yt)}}function cn(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&e)===e){l=void 0;var r=s.create,c=s.inst;l=r(),c.destroy=l}s=s.next}while(s!==n)}}catch(d){Pe(t,t.return,d)}}function ls(e,t,s){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&e)===e){var c=l.inst,d=c.destroy;if(d!==void 0){c.destroy=void 0,n=t;var v=s,O=d;try{O()}catch(G){Pe(n,v,G)}}}l=l.next}while(l!==r)}}catch(G){Pe(t,t.return,G)}}function Ku(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{zd(t,s)}catch(l){Pe(e,e.return,l)}}}function Wu(e,t,s){s.props=Ls(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Pe(e,t,l)}}function on(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(n){Pe(e,t,n)}}function ba(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){Pe(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){Pe(e,t,n)}else s.current=null}function Ju(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){Pe(e,e.return,n)}}function Ec(e,t,s){try{var l=e.stateNode;yx(l,e.type,s,t),l[Ce]=t}catch(n){Pe(e,e.return,n)}}function Fu(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ms(e.type)||e.tag===4}function Mc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ms(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ur));else if(l!==4&&(l===27&&ms(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Tc(e,t,s),e=e.sibling;e!==null;)Tc(e,t,s),e=e.sibling}function _r(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&ms(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(_r(e,t,s),e=e.sibling;e!==null;)_r(e,t,s),e=e.sibling}function Pu(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ct(t,l,s),t[Te]=e,t[Ce]=s}catch(r){Pe(e,e.return,r)}}var La=!1,ht=!1,Dc=!1,Iu=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Ph(e,t){if(e=e.containerInfo,to=Yr,e=dd(e),Mi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var c=0,d=-1,v=-1,O=0,G=0,F=e,z=null;t:for(;;){for(var U;F!==s||n!==0&&F.nodeType!==3||(d=c+n),F!==r||l!==0&&F.nodeType!==3||(v=c+l),F.nodeType===3&&(c+=F.nodeValue.length),(U=F.firstChild)!==null;)z=F,F=U;for(;;){if(F===e)break t;if(z===s&&++O===n&&(d=c),z===r&&++G===l&&(v=c),(U=F.nextSibling)!==null)break;F=z,z=F.parentNode}F=U}s=d===-1||v===-1?null:{start:d,end:v}}else s=null}s=s||{start:0,end:0}}else s=null;for(ao={focusedElem:e,selectionRange:s},Yr=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){switch(t=Nt,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,s=t,n=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var _e=Ls(s.type,n,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(_e,r),l.__reactInternalSnapshotBeforeUpdate=e}catch(je){Pe(s,s.return,je)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)no(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":no(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}}function em(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ns(e,s),l&4&&cn(5,s);break;case 1:if(ns(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(c){Pe(s,s.return,c)}else{var n=Ls(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){Pe(s,s.return,c)}}l&64&&Ku(s),l&512&&on(s,s.return);break;case 3:if(ns(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{zd(e,t)}catch(c){Pe(s,s.return,c)}}break;case 27:t===null&&l&4&&Pu(s);case 26:case 5:ns(e,s),t===null&&l&4&&Ju(s),l&512&&on(s,s.return);break;case 12:ns(e,s);break;case 13:ns(e,s),l&4&&sm(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=ix.bind(null,s),_x(e,s))));break;case 22:if(l=s.memoizedState!==null||La,!l){t=t!==null&&t.memoizedState!==null||ht,n=La;var r=ht;La=l,(ht=t)&&!r?rs(e,s,(s.subtreeFlags&8772)!==0):ns(e,s),La=n,ht=r}break;case 30:break;default:ns(e,s)}}function tm(e){var t=e.alternate;t!==null&&(e.alternate=null,tm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ss(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,Lt=!1;function Ha(e,t,s){for(s=s.child;s!==null;)am(e,t,s),s=s.sibling}function am(e,t,s){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(Ns,s)}catch{}switch(s.tag){case 26:ht||ba(s,t),Ha(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ht||ba(s,t);var l=nt,n=Lt;ms(s.type)&&(nt=s.stateNode,Lt=!1),Ha(e,t,s),yn(s.stateNode),nt=l,Lt=n;break;case 5:ht||ba(s,t);case 6:if(l=nt,n=Lt,nt=null,Ha(e,t,s),nt=l,Lt=n,nt!==null)if(Lt)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(s.stateNode)}catch(r){Pe(s,t,r)}else try{nt.removeChild(s.stateNode)}catch(r){Pe(s,t,r)}break;case 18:nt!==null&&(Lt?(e=nt,Xm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),An(e)):Xm(nt,s.stateNode));break;case 4:l=nt,n=Lt,nt=s.stateNode.containerInfo,Lt=!0,Ha(e,t,s),nt=l,Lt=n;break;case 0:case 11:case 14:case 15:ht||ls(2,s,t),ht||ls(4,s,t),Ha(e,t,s);break;case 1:ht||(ba(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Wu(s,t,l)),Ha(e,t,s);break;case 21:Ha(e,t,s);break;case 22:ht=(l=ht)||s.memoizedState!==null,Ha(e,t,s),ht=l;break;default:Ha(e,t,s)}}function sm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{An(e)}catch(s){Pe(t,t.return,s)}}function Ih(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Iu),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Iu),t;default:throw Error(u(435,e.tag))}}function kc(e,t){var s=Ih(e);t.forEach(function(l){var n=cx.bind(null,e,l);s.has(l)||(s.add(l),l.then(n,n))})}function Xt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],r=e,c=t,d=c;e:for(;d!==null;){switch(d.tag){case 27:if(ms(d.type)){nt=d.stateNode,Lt=!1;break e}break;case 5:nt=d.stateNode,Lt=!1;break e;case 3:case 4:nt=d.stateNode.containerInfo,Lt=!0;break e}d=d.return}if(nt===null)throw Error(u(160));am(r,c,n),nt=null,Lt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)lm(t,e),t=t.sibling}var ma=null;function lm(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xt(t,e),Gt(e),l&4&&(ls(3,e,e.return),cn(3,e),ls(5,e,e.return));break;case 1:Xt(t,e),Gt(e),l&512&&(ht||s===null||ba(s,s.return)),l&64&&La&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=ma;if(Xt(t,e),Gt(e),l&512&&(ht||s===null||ba(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[Sa]||r[Te]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),Ct(r,l,s),r[Te]=e,mt(r),l=r;break e;case"link":var c=Pm("link","href",n).get(l+(s.href||""));if(c){for(var d=0;d<c.length;d++)if(r=c[d],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){c.splice(d,1);break t}}r=n.createElement(l),Ct(r,l,s),n.head.appendChild(r);break;case"meta":if(c=Pm("meta","content",n).get(l+(s.content||""))){for(d=0;d<c.length;d++)if(r=c[d],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){c.splice(d,1);break t}}r=n.createElement(l),Ct(r,l,s),n.head.appendChild(r);break;default:throw Error(u(468,l))}r[Te]=e,mt(r),l=r}e.stateNode=l}else Im(n,e.type,e.stateNode);else e.stateNode=Fm(n,l,e.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?Im(n,e.type,e.stateNode):Fm(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ec(e,e.memoizedProps,s.memoizedProps)}break;case 27:Xt(t,e),Gt(e),l&512&&(ht||s===null||ba(s,s.return)),s!==null&&l&4&&Ec(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Xt(t,e),Gt(e),l&512&&(ht||s===null||ba(s,s.return)),e.flags&32){n=e.stateNode;try{Js(n,"")}catch(U){Pe(e,e.return,U)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,Ec(e,n,s!==null?s.memoizedProps:n)),l&1024&&(Dc=!0);break;case 6:if(Xt(t,e),Gt(e),l&4){if(e.stateNode===null)throw Error(u(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(U){Pe(e,e.return,U)}}break;case 3:if($r=null,n=ma,ma=Lr(t.containerInfo),Xt(t,e),ma=n,Gt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{An(t.containerInfo)}catch(U){Pe(e,e.return,U)}Dc&&(Dc=!1,nm(e));break;case 4:l=ma,ma=Lr(e.stateNode.containerInfo),Xt(t,e),Gt(e),ma=l;break;case 12:Xt(t,e),Gt(e);break;case 13:Xt(t,e),Gt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Lc=fe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,kc(e,l)));break;case 22:n=e.memoizedState!==null;var v=s!==null&&s.memoizedState!==null,O=La,G=ht;if(La=O||n,ht=G||v,Xt(t,e),ht=G,La=O,Gt(e),l&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(s===null||v||La||ht||Hs(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){v=s=t;try{if(r=v.stateNode,n)c=r.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{d=v.stateNode;var F=v.memoizedProps.style,z=F!=null&&F.hasOwnProperty("display")?F.display:null;d.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(U){Pe(v,v.return,U)}}}else if(t.tag===6){if(s===null){v=t;try{v.stateNode.nodeValue=n?"":v.memoizedProps}catch(U){Pe(v,v.return,U)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,kc(e,s))));break;case 19:Xt(t,e),Gt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,kc(e,l)));break;case 30:break;case 21:break;default:Xt(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(Fu(l)){s=l;break}l=l.return}if(s==null)throw Error(u(160));switch(s.tag){case 27:var n=s.stateNode,r=Mc(e);_r(e,r,n);break;case 5:var c=s.stateNode;s.flags&32&&(Js(c,""),s.flags&=-33);var d=Mc(e);_r(e,d,c);break;case 3:case 4:var v=s.stateNode.containerInfo,O=Mc(e);Tc(e,O,v);break;default:throw Error(u(161))}}catch(G){Pe(e,e.return,G)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;nm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ns(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)em(e,t.alternate,t),t=t.sibling}function Hs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ls(4,t,t.return),Hs(t);break;case 1:ba(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Wu(t,t.return,s),Hs(t);break;case 27:yn(t.stateNode);case 26:case 5:ba(t,t.return),Hs(t);break;case 22:t.memoizedState===null&&Hs(t);break;case 30:Hs(t);break;default:Hs(t)}e=e.sibling}}function rs(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,n=e,r=t,c=r.flags;switch(r.tag){case 0:case 11:case 15:rs(n,r,s),cn(4,r);break;case 1:if(rs(n,r,s),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(O){Pe(l,l.return,O)}if(l=r,n=l.updateQueue,n!==null){var d=l.stateNode;try{var v=n.shared.hiddenCallbacks;if(v!==null)for(n.shared.hiddenCallbacks=null,n=0;n<v.length;n++)Rd(v[n],d)}catch(O){Pe(l,l.return,O)}}s&&c&64&&Ku(r),on(r,r.return);break;case 27:Pu(r);case 26:case 5:rs(n,r,s),s&&l===null&&c&4&&Ju(r),on(r,r.return);break;case 12:rs(n,r,s);break;case 13:rs(n,r,s),s&&c&4&&sm(n,r);break;case 22:r.memoizedState===null&&rs(n,r,s),on(r,r.return);break;case 30:break;default:rs(n,r,s)}t=t.sibling}}function Oc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Zl(s))}function Rc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zl(e))}function va(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rm(e,t,s,l),t=t.sibling}function rm(e,t,s,l){var n=t.flags;switch(t.tag){case 0:case 11:case 15:va(e,t,s,l),n&2048&&cn(9,t);break;case 1:va(e,t,s,l);break;case 3:va(e,t,s,l),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zl(e)));break;case 12:if(n&2048){va(e,t,s,l),e=t.stateNode;try{var r=t.memoizedProps,c=r.id,d=r.onPostCommit;typeof d=="function"&&d(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(v){Pe(t,t.return,v)}}else va(e,t,s,l);break;case 13:va(e,t,s,l);break;case 23:break;case 22:r=t.stateNode,c=t.alternate,t.memoizedState!==null?r._visibility&2?va(e,t,s,l):dn(e,t):r._visibility&2?va(e,t,s,l):(r._visibility|=2,xl(e,t,s,l,(t.subtreeFlags&10256)!==0)),n&2048&&Oc(c,t);break;case 24:va(e,t,s,l),n&2048&&Rc(t.alternate,t);break;default:va(e,t,s,l)}}function xl(e,t,s,l,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,c=t,d=s,v=l,O=c.flags;switch(c.tag){case 0:case 11:case 15:xl(r,c,d,v,n),cn(8,c);break;case 23:break;case 22:var G=c.stateNode;c.memoizedState!==null?G._visibility&2?xl(r,c,d,v,n):dn(r,c):(G._visibility|=2,xl(r,c,d,v,n)),n&&O&2048&&Oc(c.alternate,c);break;case 24:xl(r,c,d,v,n),n&&O&2048&&Rc(c.alternate,c);break;default:xl(r,c,d,v,n)}t=t.sibling}}function dn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,n=l.flags;switch(l.tag){case 22:dn(s,l),n&2048&&Oc(l.alternate,l);break;case 24:dn(s,l),n&2048&&Rc(l.alternate,l);break;default:dn(s,l)}t=t.sibling}}var un=8192;function gl(e){if(e.subtreeFlags&un)for(e=e.child;e!==null;)im(e),e=e.sibling}function im(e){switch(e.tag){case 26:gl(e),e.flags&un&&e.memoizedState!==null&&Lx(ma,e.memoizedState,e.memoizedProps);break;case 5:gl(e);break;case 3:case 4:var t=ma;ma=Lr(e.stateNode.containerInfo),gl(e),ma=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=un,un=16777216,gl(e),un=t):gl(e));break;default:gl(e)}}function cm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function mn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Nt=l,dm(l,e)}cm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)om(e),e=e.sibling}function om(e){switch(e.tag){case 0:case 11:case 15:mn(e),e.flags&2048&&ls(9,e,e.return);break;case 3:mn(e);break;case 12:mn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ar(e)):mn(e);break;default:mn(e)}}function Ar(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Nt=l,dm(l,e)}cm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ls(8,t,t.return),Ar(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Ar(t));break;default:Ar(t)}e=e.sibling}}function dm(e,t){for(;Nt!==null;){var s=Nt;switch(s.tag){case 0:case 11:case 15:ls(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Nt=l;else e:for(s=e;Nt!==null;){l=Nt;var n=l.sibling,r=l.return;if(tm(l),l===s){Nt=null;break e}if(n!==null){n.return=r,Nt=n;break e}Nt=r}}}var ex={getCacheForType:function(e){var t=Mt(yt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s}},tx=typeof WeakMap=="function"?WeakMap:Map,Ze=0,st=null,qe=null,Qe=0,Ke=0,Vt=null,is=!1,pl=!1,zc=!1,$a=0,ot=0,cs=0,$s=0,Uc=0,ia=0,yl=0,fn=null,Ht=null,qc=!1,Lc=0,Cr=1/0,Er=null,os=null,At=0,ds=null,bl=null,vl=0,Hc=0,$c=null,um=null,hn=0,Bc=null;function Zt(){if((Ze&2)!==0&&Qe!==0)return Qe&-Qe;if(p.T!==null){var e=il;return e!==0?e:Kc()}return de()}function mm(){ia===0&&(ia=(Qe&536870912)===0||Ve?zn():536870912);var e=ra.current;return e!==null&&(e.flags|=32),ia}function Kt(e,t,s){(e===st&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)&&(jl(e,0),us(e,Qe,ia,!1)),Va(e,s),((Ze&2)===0||e!==st)&&(e===st&&((Ze&2)===0&&($s|=s),ot===4&&us(e,Qe,ia,!1)),ja(e))}function fm(e,t,s){if((Ze&6)!==0)throw Error(u(327));var l=!s&&(t&124)===0&&(t&e.expiredLanes)===0||ws(e,t),n=l?lx(e,t):Xc(e,t,!0),r=l;do{if(n===0){pl&&!l&&us(e,t,0,!1);break}else{if(s=e.current.alternate,r&&!ax(s)){n=Xc(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var d=e;n=fn;var v=d.current.memoizedState.isDehydrated;if(v&&(jl(d,c).flags|=256),c=Xc(d,c,!1),c!==2){if(zc&&!v){d.errorRecoveryDisabledLanes|=r,$s|=r,n=4;break e}r=Ht,Ht=n,r!==null&&(Ht===null?Ht=r:Ht.push.apply(Ht,r))}n=c}if(r=!1,n!==2)continue}}if(n===1){jl(e,0),us(e,t,0,!0);break}e:{switch(l=e,r=n,r){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:us(l,t,ia,!is);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(n=Lc+300-fe(),10<n)){if(us(l,t,ia,!is),Vs(l,0,!0)!==0)break e;l.timeoutHandle=Qm(hm.bind(null,l,s,Ht,Er,qc,t,ia,$s,yl,is,r,2,-0,0),n);break e}hm(l,s,Ht,Er,qc,t,ia,$s,yl,is,r,0,-0,0)}}break}while(!0);ja(e)}function hm(e,t,s,l,n,r,c,d,v,O,G,F,z,U){if(e.timeoutHandle=-1,F=t.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(jn={stylesheets:null,count:0,unsuspend:qx},im(t),F=Hx(),F!==null)){e.cancelPendingCommit=F(jm.bind(null,e,t,r,s,l,n,c,d,v,G,1,z,U)),us(e,r,c,!O);return}jm(e,t,r,s,l,n,c,d,v)}function ax(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],r=n.getSnapshot;n=n.value;try{if(!Qt(r(),n))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function us(e,t,s,l){t&=~Uc,t&=~$s,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var n=t;0<n;){var r=31-pt(n),c=1<<r;l[r]=-1,n&=~c}s!==0&&qn(e,s,t)}function Mr(){return(Ze&6)===0?(xn(0),!1):!0}function Qc(){if(qe!==null){if(Ke===0)var e=qe.return;else e=qe,ka=Rs=null,nc(e),fl=null,ln=0,e=qe;for(;e!==null;)Zu(e.alternate,e),e=e.return;qe=null}}function jl(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,vx(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Qc(),st=e,qe=s=Ma(e.current,null),Qe=t,Ke=0,Vt=null,is=!1,pl=ws(e,t),zc=!1,yl=ia=Uc=$s=cs=ot=0,Ht=fn=null,qc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var n=31-pt(l),r=1<<n;t|=e[n],l&=~r}return $a=t,Fn(),s}function xm(e,t){ze=null,p.H=gr,t===Wl||t===rr?(t=kd(),Ke=3):t===Md?(t=kd(),Ke=4):Ke=t===Ou?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Vt=t,qe===null&&(ot=1,jr(e,aa(t,e.current)))}function gm(){var e=p.H;return p.H=gr,e===null?gr:e}function pm(){var e=p.A;return p.A=ex,e}function Yc(){ot=4,is||(Qe&4194048)!==Qe&&ra.current!==null||(pl=!0),(cs&134217727)===0&&($s&134217727)===0||st===null||us(st,Qe,ia,!1)}function Xc(e,t,s){var l=Ze;Ze|=2;var n=gm(),r=pm();(st!==e||Qe!==t)&&(Er=null,jl(e,t)),t=!1;var c=ot;e:do try{if(Ke!==0&&qe!==null){var d=qe,v=Vt;switch(Ke){case 8:Qc(),c=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(t=!0);var O=Ke;if(Ke=0,Vt=null,Nl(e,d,v,O),s&&pl){c=0;break e}break;default:O=Ke,Ke=0,Vt=null,Nl(e,d,v,O)}}sx(),c=ot;break}catch(G){xm(e,G)}while(!0);return t&&e.shellSuspendCounter++,ka=Rs=null,Ze=l,p.H=n,p.A=r,qe===null&&(st=null,Qe=0,Fn()),c}function sx(){for(;qe!==null;)ym(qe)}function lx(e,t){var s=Ze;Ze|=2;var l=gm(),n=pm();st!==e||Qe!==t?(Er=null,Cr=fe()+500,jl(e,t)):pl=ws(e,t);e:do try{if(Ke!==0&&qe!==null){t=qe;var r=Vt;t:switch(Ke){case 1:Ke=0,Vt=null,Nl(e,t,r,1);break;case 2:case 9:if(Td(r)){Ke=0,Vt=null,bm(t);break}t=function(){Ke!==2&&Ke!==9||st!==e||(Ke=7),ja(e)},r.then(t,t);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Td(r)?(Ke=0,Vt=null,bm(t)):(Ke=0,Vt=null,Nl(e,t,r,7));break;case 5:var c=null;switch(qe.tag){case 26:c=qe.memoizedState;case 5:case 27:var d=qe;if(!c||ef(c)){Ke=0,Vt=null;var v=d.sibling;if(v!==null)qe=v;else{var O=d.return;O!==null?(qe=O,Tr(O)):qe=null}break t}}Ke=0,Vt=null,Nl(e,t,r,5);break;case 6:Ke=0,Vt=null,Nl(e,t,r,6);break;case 8:Qc(),ot=6;break e;default:throw Error(u(462))}}nx();break}catch(G){xm(e,G)}while(!0);return ka=Rs=null,p.H=l,p.A=n,Ze=s,qe!==null?0:(st=null,Qe=0,Fn(),ot)}function nx(){for(;qe!==null&&!Me();)ym(qe)}function ym(e){var t=Gu(e.alternate,e,$a);e.memoizedProps=e.pendingProps,t===null?Tr(e):qe=t}function bm(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Hu(s,t,t.pendingProps,t.type,void 0,Qe);break;case 11:t=Hu(s,t,t.pendingProps,t.type.render,t.ref,Qe);break;case 5:nc(t);default:Zu(s,t),t=qe=vd(t,$a),t=Gu(s,t,$a)}e.memoizedProps=e.pendingProps,t===null?Tr(e):qe=t}function Nl(e,t,s,l){ka=Rs=null,nc(t),fl=null,ln=0;var n=t.return;try{if(Kh(e,n,t,s,Qe)){ot=1,jr(e,aa(s,e.current)),qe=null;return}}catch(r){if(n!==null)throw qe=n,r;ot=1,jr(e,aa(s,e.current)),qe=null;return}t.flags&32768?(Ve||l===1?e=!0:pl||(Qe&536870912)!==0?e=!1:(is=e=!0,(l===2||l===9||l===3||l===6)&&(l=ra.current,l!==null&&l.tag===13&&(l.flags|=16384))),vm(t,e)):Tr(t)}function Tr(e){var t=e;do{if((t.flags&32768)!==0){vm(t,is);return}e=t.return;var s=Jh(t.alternate,t,$a);if(s!==null){qe=s;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);ot===0&&(ot=5)}function vm(e,t){do{var s=Fh(e.alternate,e);if(s!==null){s.flags&=32767,qe=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){qe=e;return}qe=e=s}while(e!==null);ot=6,qe=null}function jm(e,t,s,l,n,r,c,d,v){e.cancelPendingCommit=null;do Dr();while(At!==0);if((Ze&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(r=t.lanes|t.childLanes,r|=Ri,di(e,s,r,c,d,v),e===st&&(qe=st=null,Qe=0),bl=t,ds=e,vl=s,Hc=r,$c=n,um=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ox(Et,function(){return Am(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=p.T,p.T=null,n=k.p,k.p=2,c=Ze,Ze|=4;try{Ph(e,t,s)}finally{Ze=c,k.p=n,p.T=l}}At=1,Nm(),wm(),Sm()}}function Nm(){if(At===1){At=0;var e=ds,t=bl,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=p.T,p.T=null;var l=k.p;k.p=2;var n=Ze;Ze|=4;try{lm(t,e);var r=ao,c=dd(e.containerInfo),d=r.focusedElem,v=r.selectionRange;if(c!==d&&d&&d.ownerDocument&&od(d.ownerDocument.documentElement,d)){if(v!==null&&Mi(d)){var O=v.start,G=v.end;if(G===void 0&&(G=O),"selectionStart"in d)d.selectionStart=O,d.selectionEnd=Math.min(G,d.value.length);else{var F=d.ownerDocument||document,z=F&&F.defaultView||window;if(z.getSelection){var U=z.getSelection(),_e=d.textContent.length,je=Math.min(v.start,_e),Fe=v.end===void 0?je:Math.min(v.end,_e);!U.extend&&je>Fe&&(c=Fe,Fe=je,je=c);var C=cd(d,je),S=cd(d,Fe);if(C&&S&&(U.rangeCount!==1||U.anchorNode!==C.node||U.anchorOffset!==C.offset||U.focusNode!==S.node||U.focusOffset!==S.offset)){var M=F.createRange();M.setStart(C.node,C.offset),U.removeAllRanges(),je>Fe?(U.addRange(M),U.extend(S.node,S.offset)):(M.setEnd(S.node,S.offset),U.addRange(M))}}}}for(F=[],U=d;U=U.parentNode;)U.nodeType===1&&F.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<F.length;d++){var K=F[d];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Yr=!!to,ao=to=null}finally{Ze=n,k.p=l,p.T=s}}e.current=t,At=2}}function wm(){if(At===2){At=0;var e=ds,t=bl,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=p.T,p.T=null;var l=k.p;k.p=2;var n=Ze;Ze|=4;try{em(e,t.alternate,t)}finally{Ze=n,k.p=l,p.T=s}}At=3}}function Sm(){if(At===4||At===3){At=0,D();var e=ds,t=bl,s=vl,l=um;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?At=5:(At=0,bl=ds=null,_m(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(os=null),te(s),t=t.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(Ns,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=p.T,n=k.p,k.p=2,p.T=null;try{for(var r=e.onRecoverableError,c=0;c<l.length;c++){var d=l[c];r(d.value,{componentStack:d.stack})}}finally{p.T=t,k.p=n}}(vl&3)!==0&&Dr(),ja(e),n=e.pendingLanes,(s&4194090)!==0&&(n&42)!==0?e===Bc?hn++:(hn=0,Bc=e):hn=0,xn(0)}}function _m(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Zl(t)))}function Dr(e){return Nm(),wm(),Sm(),Am()}function Am(){if(At!==5)return!1;var e=ds,t=Hc;Hc=0;var s=te(vl),l=p.T,n=k.p;try{k.p=32>s?32:s,p.T=null,s=$c,$c=null;var r=ds,c=vl;if(At=0,bl=ds=null,vl=0,(Ze&6)!==0)throw Error(u(331));var d=Ze;if(Ze|=4,om(r.current),rm(r,r.current,c,s),Ze=d,xn(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(Ns,r)}catch{}return!0}finally{k.p=n,p.T=l,_m(e,t)}}function Cm(e,t,s){t=aa(s,t),t=bc(e.stateNode,t,2),e=es(e,t,2),e!==null&&(Va(e,2),ja(e))}function Pe(e,t,s){if(e.tag===3)Cm(e,e,s);else for(;t!==null;){if(t.tag===3){Cm(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(os===null||!os.has(l))){e=aa(s,e),s=Du(2),l=es(t,s,2),l!==null&&(ku(s,l,t,e),Va(l,2),ja(l));break}}t=t.return}}function Gc(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new tx;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(s)||(zc=!0,n.add(s),e=rx.bind(null,e,t,s),t.then(e,e))}function rx(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,st===e&&(Qe&s)===s&&(ot===4||ot===3&&(Qe&62914560)===Qe&&300>fe()-Lc?(Ze&2)===0&&jl(e,0):Uc|=s,yl===Qe&&(yl=0)),ja(e)}function Em(e,t){t===0&&(t=Un()),e=sl(e,t),e!==null&&(Va(e,t),ja(e))}function ix(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Em(e,s)}function cx(e,t){var s=0;switch(e.tag){case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(u(314))}l!==null&&l.delete(t),Em(e,s)}function ox(e,t){return h(e,t)}var kr=null,wl=null,Vc=!1,Or=!1,Zc=!1,Bs=0;function ja(e){e!==wl&&e.next===null&&(wl===null?kr=wl=e:wl=wl.next=e),Or=!0,Vc||(Vc=!0,ux())}function xn(e,t){if(!Zc&&Or){Zc=!0;do for(var s=!1,l=kr;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var c=l.suspendedLanes,d=l.pingedLanes;r=(1<<31-pt(42|e)+1)-1,r&=n&~(c&~d),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,km(l,r))}else r=Qe,r=Vs(l,l===st?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||ws(l,r)||(s=!0,km(l,r));l=l.next}while(s);Zc=!1}}function dx(){Mm()}function Mm(){Or=Vc=!1;var e=0;Bs!==0&&(bx()&&(e=Bs),Bs=0);for(var t=fe(),s=null,l=kr;l!==null;){var n=l.next,r=Tm(l,t);r===0?(l.next=null,s===null?kr=n:s.next=n,n===null&&(wl=s)):(s=l,(e!==0||(r&3)!==0)&&(Or=!0)),l=n}xn(e)}function Tm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var c=31-pt(r),d=1<<c,v=n[c];v===-1?((d&s)===0||(d&l)!==0)&&(n[c]=oi(d,t)):v<=t&&(e.expiredLanes|=d),r&=~d}if(t=st,s=Qe,s=Vs(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&W(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||ws(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&W(l),te(s)){case 2:case 8:s=Re;break;case 32:s=Et;break;case 268435456:s=Dl;break;default:s=Et}return l=Dm.bind(null,e),s=h(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&W(l),e.callbackPriority=2,e.callbackNode=null,2}function Dm(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Dr()&&e.callbackNode!==s)return null;var l=Qe;return l=Vs(e,e===st?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(fm(e,l,t),Tm(e,fe()),e.callbackNode!=null&&e.callbackNode===s?Dm.bind(null,e):null)}function km(e,t){if(Dr())return null;fm(e,t,!0)}function ux(){jx(function(){(Ze&6)!==0?h(He,dx):Mm()})}function Kc(){return Bs===0&&(Bs=zn()),Bs}function Om(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xn(""+e)}function Rm(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function mx(e,t,s,l,n){if(t==="submit"&&s&&s.stateNode===n){var r=Om((n[Ce]||null).action),c=l.submitter;c&&(t=(t=c[Ce]||null)?Om(t.formAction):c.getAttribute("formAction"),t!==null&&(r=t,c=null));var d=new Kn("action","action",null,l,n);e.push({event:d,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Bs!==0){var v=c?Rm(n,c):new FormData(n);hc(s,{pending:!0,data:v,method:n.method,action:r},null,v)}}else typeof r=="function"&&(d.preventDefault(),v=c?Rm(n,c):new FormData(n),hc(s,{pending:!0,data:v,method:n.method,action:r},r,v))},currentTarget:n}]})}}for(var Wc=0;Wc<Oi.length;Wc++){var Jc=Oi[Wc],fx=Jc.toLowerCase(),hx=Jc[0].toUpperCase()+Jc.slice(1);ua(fx,"on"+hx)}ua(fd,"onAnimationEnd"),ua(hd,"onAnimationIteration"),ua(xd,"onAnimationStart"),ua("dblclick","onDoubleClick"),ua("focusin","onFocus"),ua("focusout","onBlur"),ua(Dh,"onTransitionRun"),ua(kh,"onTransitionStart"),ua(Oh,"onTransitionCancel"),ua(gd,"onTransitionEnd"),Zs("onMouseEnter",["mouseout","mouseover"]),Zs("onMouseLeave",["mouseout","mouseover"]),Zs("onPointerEnter",["pointerout","pointerover"]),Zs("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gn));function zm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],n=l.event;l=l.listeners;e:{var r=void 0;if(t)for(var c=l.length-1;0<=c;c--){var d=l[c],v=d.instance,O=d.currentTarget;if(d=d.listener,v!==r&&n.isPropagationStopped())break e;r=d,n.currentTarget=O;try{r(n)}catch(G){vr(G)}n.currentTarget=null,r=v}else for(c=0;c<l.length;c++){if(d=l[c],v=d.instance,O=d.currentTarget,d=d.listener,v!==r&&n.isPropagationStopped())break e;r=d,n.currentTarget=O;try{r(n)}catch(G){vr(G)}n.currentTarget=null,r=v}}}}function Le(e,t){var s=t[It];s===void 0&&(s=t[It]=new Set);var l=e+"__bubble";s.has(l)||(Um(t,e,2,!1),s.add(l))}function Fc(e,t,s){var l=0;t&&(l|=4),Um(s,e,l,t)}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Pc(e){if(!e[Rr]){e[Rr]=!0,_a.forEach(function(s){s!=="selectionchange"&&(xx.has(s)||Fc(s,!1,e),Fc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rr]||(t[Rr]=!0,Fc("selectionchange",!1,t))}}function Um(e,t,s,l){switch(rf(t)){case 2:var n=Qx;break;case 8:n=Yx;break;default:n=fo}s=n.bind(null,t,s,e),n=void 0,!vi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Ic(e,t,s,l,n){var r=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var c=l.tag;if(c===3||c===4){var d=l.stateNode.containerInfo;if(d===n)break;if(c===4)for(c=l.return;c!==null;){var v=c.tag;if((v===3||v===4)&&c.stateNode.containerInfo===n)return;c=c.return}for(;d!==null;){if(c=Wa(d),c===null)return;if(v=c.tag,v===5||v===6||v===26||v===27){l=r=c;continue e}d=d.parentNode}}l=l.return}Yo(function(){var O=r,G=yi(s),F=[];e:{var z=pd.get(e);if(z!==void 0){var U=Kn,_e=e;switch(e){case"keypress":if(Vn(s)===0)break e;case"keydown":case"keyup":U=oh;break;case"focusin":_e="focus",U=Si;break;case"focusout":_e="blur",U=Si;break;case"beforeblur":case"afterblur":U=Si;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=Ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=mh;break;case fd:case hd:case xd:U=eh;break;case gd:U=hh;break;case"scroll":case"scrollend":U=Wf;break;case"wheel":U=gh;break;case"copy":case"cut":case"paste":U=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=Ko;break;case"toggle":case"beforetoggle":U=yh}var je=(t&4)!==0,Fe=!je&&(e==="scroll"||e==="scrollend"),C=je?z!==null?z+"Capture":null:z;je=[];for(var S=O,M;S!==null;){var K=S;if(M=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||M===null||C===null||(K=Rl(S,C),K!=null&&je.push(pn(S,K,M))),Fe)break;S=S.return}0<je.length&&(z=new U(z,_e,null,s,G),F.push({event:z,listeners:je}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",z&&s!==pi&&(_e=s.relatedTarget||s.fromElement)&&(Wa(_e)||_e[at]))break e;if((U||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,U?(_e=s.relatedTarget||s.toElement,U=O,_e=_e?Wa(_e):null,_e!==null&&(Fe=_(_e),je=_e.tag,_e!==Fe||je!==5&&je!==27&&je!==6)&&(_e=null)):(U=null,_e=O),U!==_e)){if(je=Vo,K="onMouseLeave",C="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(je=Ko,K="onPointerLeave",C="onPointerEnter",S="pointer"),Fe=U==null?z:Bt(U),M=_e==null?z:Bt(_e),z=new je(K,S+"leave",U,s,G),z.target=Fe,z.relatedTarget=M,K=null,Wa(G)===O&&(je=new je(C,S+"enter",_e,s,G),je.target=M,je.relatedTarget=Fe,K=je),Fe=K,U&&_e)t:{for(je=U,C=_e,S=0,M=je;M;M=Sl(M))S++;for(M=0,K=C;K;K=Sl(K))M++;for(;0<S-M;)je=Sl(je),S--;for(;0<M-S;)C=Sl(C),M--;for(;S--;){if(je===C||C!==null&&je===C.alternate)break t;je=Sl(je),C=Sl(C)}je=null}else je=null;U!==null&&qm(F,z,U,je,!1),_e!==null&&Fe!==null&&qm(F,Fe,_e,je,!0)}}e:{if(z=O?Bt(O):window,U=z.nodeName&&z.nodeName.toLowerCase(),U==="select"||U==="input"&&z.type==="file")var ge=ad;else if(ed(z))if(sd)ge=Eh;else{ge=Ah;var Ue=_h}else U=z.nodeName,!U||U.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?O&&gi(O.elementType)&&(ge=ad):ge=Ch;if(ge&&(ge=ge(e,O))){td(F,ge,s,G);break e}Ue&&Ue(e,z,O),e==="focusout"&&O&&z.type==="number"&&O.memoizedProps.value!=null&&xi(z,"number",z.value)}switch(Ue=O?Bt(O):window,e){case"focusin":(ed(Ue)||Ue.contentEditable==="true")&&(el=Ue,Ti=O,Ql=null);break;case"focusout":Ql=Ti=el=null;break;case"mousedown":Di=!0;break;case"contextmenu":case"mouseup":case"dragend":Di=!1,ud(F,s,G);break;case"selectionchange":if(Th)break;case"keydown":case"keyup":ud(F,s,G)}var pe;if(Ai)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Is?Po(e,s)&&(Se="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Se="onCompositionStart");Se&&(Wo&&s.locale!=="ko"&&(Is||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Is&&(pe=Xo()):(Ja=G,ji="value"in Ja?Ja.value:Ja.textContent,Is=!0)),Ue=zr(O,Se),0<Ue.length&&(Se=new Zo(Se,e,null,s,G),F.push({event:Se,listeners:Ue}),pe?Se.data=pe:(pe=Io(s),pe!==null&&(Se.data=pe)))),(pe=vh?jh(e,s):Nh(e,s))&&(Se=zr(O,"onBeforeInput"),0<Se.length&&(Ue=new Zo("onBeforeInput","beforeinput",null,s,G),F.push({event:Ue,listeners:Se}),Ue.data=pe)),mx(F,e,O,s,G)}zm(F,t)})}function pn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function zr(e,t){for(var s=t+"Capture",l=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=Rl(e,s),n!=null&&l.unshift(pn(e,n,r)),n=Rl(e,t),n!=null&&l.push(pn(e,n,r))),e.tag===3)return l;e=e.return}return[]}function Sl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function qm(e,t,s,l,n){for(var r=t._reactName,c=[];s!==null&&s!==l;){var d=s,v=d.alternate,O=d.stateNode;if(d=d.tag,v!==null&&v===l)break;d!==5&&d!==26&&d!==27||O===null||(v=O,n?(O=Rl(s,r),O!=null&&c.unshift(pn(s,O,v))):n||(O=Rl(s,r),O!=null&&c.push(pn(s,O,v)))),s=s.return}c.length!==0&&e.push({event:t,listeners:c})}var gx=/\r\n?/g,px=/\u0000|\uFFFD/g;function Lm(e){return(typeof e=="string"?e:""+e).replace(gx,`
`).replace(px,"")}function Hm(e,t){return t=Lm(t),Lm(e)===t}function Ur(){}function Je(e,t,s,l,n,r){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Js(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Js(e,""+l);break;case"className":Bn(e,"class",l);break;case"tabIndex":Bn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(e,s,l);break;case"style":Bo(e,l,r);break;case"data":if(t!=="object"){Bn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Xn(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(t!=="input"&&Je(e,t,"name",n.name,n,null),Je(e,t,"formEncType",n.formEncType,n,null),Je(e,t,"formMethod",n.formMethod,n,null),Je(e,t,"formTarget",n.formTarget,n,null)):(Je(e,t,"encType",n.encType,n,null),Je(e,t,"method",n.method,n,null),Je(e,t,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Xn(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=Ur);break;case"onScroll":l!=null&&Le("scroll",e);break;case"onScrollEnd":l!=null&&Le("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(u(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Xn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":Le("beforetoggle",e),Le("toggle",e),$n(e,"popover",l);break;case"xlinkActuate":Ca(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ca(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ca(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ca(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ca(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ca(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ca(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":$n(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Zf.get(s)||s,$n(e,s,l))}}function eo(e,t,s,l,n,r){switch(s){case"style":Bo(e,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(u(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Js(e,l):(typeof l=="number"||typeof l=="bigint")&&Js(e,""+l);break;case"onScroll":l!=null&&Le("scroll",e);break;case"onScrollEnd":l!=null&&Le("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ur);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Aa.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),t=s.slice(2,n?s.length-7:void 0),r=e[Ce]||null,r=r!=null?r[s]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,n);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):$n(e,s,l)}}}function Ct(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",e),Le("load",e);var l=!1,n=!1,r;for(r in s)if(s.hasOwnProperty(r)){var c=s[r];if(c!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Je(e,t,r,c,s,null)}}n&&Je(e,t,"srcSet",s.srcSet,s,null),l&&Je(e,t,"src",s.src,s,null);return;case"input":Le("invalid",e);var d=r=c=n=null,v=null,O=null;for(l in s)if(s.hasOwnProperty(l)){var G=s[l];if(G!=null)switch(l){case"name":n=G;break;case"type":c=G;break;case"checked":v=G;break;case"defaultChecked":O=G;break;case"value":r=G;break;case"defaultValue":d=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(u(137,t));break;default:Je(e,t,l,G,s,null)}}qo(e,r,d,v,O,c,n,!1),Qn(e);return;case"select":Le("invalid",e),l=c=r=null;for(n in s)if(s.hasOwnProperty(n)&&(d=s[n],d!=null))switch(n){case"value":r=d;break;case"defaultValue":c=d;break;case"multiple":l=d;default:Je(e,t,n,d,s,null)}t=r,s=c,e.multiple=!!l,t!=null?Ws(e,!!l,t,!1):s!=null&&Ws(e,!!l,s,!0);return;case"textarea":Le("invalid",e),r=n=l=null;for(c in s)if(s.hasOwnProperty(c)&&(d=s[c],d!=null))switch(c){case"value":l=d;break;case"defaultValue":n=d;break;case"children":r=d;break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(u(91));break;default:Je(e,t,c,d,s,null)}Ho(e,l,n,r),Qn(e);return;case"option":for(v in s)if(s.hasOwnProperty(v)&&(l=s[v],l!=null))switch(v){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(e,t,v,l,s,null)}return;case"dialog":Le("beforetoggle",e),Le("toggle",e),Le("cancel",e),Le("close",e);break;case"iframe":case"object":Le("load",e);break;case"video":case"audio":for(l=0;l<gn.length;l++)Le(gn[l],e);break;case"image":Le("error",e),Le("load",e);break;case"details":Le("toggle",e);break;case"embed":case"source":case"link":Le("error",e),Le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in s)if(s.hasOwnProperty(O)&&(l=s[O],l!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Je(e,t,O,l,s,null)}return;default:if(gi(t)){for(G in s)s.hasOwnProperty(G)&&(l=s[G],l!==void 0&&eo(e,t,G,l,s,void 0));return}}for(d in s)s.hasOwnProperty(d)&&(l=s[d],l!=null&&Je(e,t,d,l,s,null))}function yx(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,c=null,d=null,v=null,O=null,G=null;for(U in s){var F=s[U];if(s.hasOwnProperty(U)&&F!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":v=F;default:l.hasOwnProperty(U)||Je(e,t,U,null,l,F)}}for(var z in l){var U=l[z];if(F=s[z],l.hasOwnProperty(z)&&(U!=null||F!=null))switch(z){case"type":r=U;break;case"name":n=U;break;case"checked":O=U;break;case"defaultChecked":G=U;break;case"value":c=U;break;case"defaultValue":d=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(u(137,t));break;default:U!==F&&Je(e,t,z,U,l,F)}}hi(e,c,d,v,O,G,r,n);return;case"select":U=c=d=z=null;for(r in s)if(v=s[r],s.hasOwnProperty(r)&&v!=null)switch(r){case"value":break;case"multiple":U=v;default:l.hasOwnProperty(r)||Je(e,t,r,null,l,v)}for(n in l)if(r=l[n],v=s[n],l.hasOwnProperty(n)&&(r!=null||v!=null))switch(n){case"value":z=r;break;case"defaultValue":d=r;break;case"multiple":c=r;default:r!==v&&Je(e,t,n,r,l,v)}t=d,s=c,l=U,z!=null?Ws(e,!!s,z,!1):!!l!=!!s&&(t!=null?Ws(e,!!s,t,!0):Ws(e,!!s,s?[]:"",!1));return;case"textarea":U=z=null;for(d in s)if(n=s[d],s.hasOwnProperty(d)&&n!=null&&!l.hasOwnProperty(d))switch(d){case"value":break;case"children":break;default:Je(e,t,d,null,l,n)}for(c in l)if(n=l[c],r=s[c],l.hasOwnProperty(c)&&(n!=null||r!=null))switch(c){case"value":z=n;break;case"defaultValue":U=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(u(91));break;default:n!==r&&Je(e,t,c,n,l,r)}Lo(e,z,U);return;case"option":for(var _e in s)if(z=s[_e],s.hasOwnProperty(_e)&&z!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":e.selected=!1;break;default:Je(e,t,_e,null,l,z)}for(v in l)if(z=l[v],U=s[v],l.hasOwnProperty(v)&&z!==U&&(z!=null||U!=null))switch(v){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Je(e,t,v,z,l,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in s)z=s[je],s.hasOwnProperty(je)&&z!=null&&!l.hasOwnProperty(je)&&Je(e,t,je,null,l,z);for(O in l)if(z=l[O],U=s[O],l.hasOwnProperty(O)&&z!==U&&(z!=null||U!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(u(137,t));break;default:Je(e,t,O,z,l,U)}return;default:if(gi(t)){for(var Fe in s)z=s[Fe],s.hasOwnProperty(Fe)&&z!==void 0&&!l.hasOwnProperty(Fe)&&eo(e,t,Fe,void 0,l,z);for(G in l)z=l[G],U=s[G],!l.hasOwnProperty(G)||z===U||z===void 0&&U===void 0||eo(e,t,G,z,l,U);return}}for(var C in s)z=s[C],s.hasOwnProperty(C)&&z!=null&&!l.hasOwnProperty(C)&&Je(e,t,C,null,l,z);for(F in l)z=l[F],U=s[F],!l.hasOwnProperty(F)||z===U||z==null&&U==null||Je(e,t,F,z,l,U)}var to=null,ao=null;function qr(e){return e.nodeType===9?e:e.ownerDocument}function $m(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function so(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lo=null;function bx(){var e=window.event;return e&&e.type==="popstate"?e===lo?!1:(lo=e,!0):(lo=null,!1)}var Qm=typeof setTimeout=="function"?setTimeout:void 0,vx=typeof clearTimeout=="function"?clearTimeout:void 0,Ym=typeof Promise=="function"?Promise:void 0,jx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ym<"u"?function(e){return Ym.resolve(null).then(e).catch(Nx)}:Qm;function Nx(e){setTimeout(function(){throw e})}function ms(e){return e==="head"}function Xm(e,t){var s=t,l=0,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(0<l&&8>l){s=l;var c=e.ownerDocument;if(s&1&&yn(c.documentElement),s&2&&yn(c.body),s&4)for(s=c.head,yn(s),c=s.firstChild;c;){var d=c.nextSibling,v=c.nodeName;c[Sa]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&c.rel.toLowerCase()==="stylesheet"||s.removeChild(c),c=d}}if(n===0){e.removeChild(r),An(t);return}n--}else s==="$"||s==="$?"||s==="$!"?n++:l=s.charCodeAt(0)-48;else l=0;s=r}while(s);An(t)}function no(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":no(s),Ss(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function wx(e,t,s,l){for(;e.nodeType===1;){var n=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Sa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=fa(e.nextSibling),e===null)break}return null}function Sx(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=fa(e.nextSibling),e===null))return null;return e}function ro(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function _x(e,t){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function fa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var io=null;function Gm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}function Vm(e,t,s){switch(t=qr(s),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function yn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ss(e)}var ca=new Map,Zm=new Set;function Lr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ba=k.d;k.d={f:Ax,r:Cx,D:Ex,C:Mx,L:Tx,m:Dx,X:Ox,S:kx,M:Rx};function Ax(){var e=Ba.f(),t=Mr();return e||t}function Cx(e){var t=it(e);t!==null&&t.tag===5&&t.type==="form"?fu(t):Ba.r(e)}var _l=typeof document>"u"?null:document;function Km(e,t,s){var l=_l;if(l&&typeof t=="string"&&t){var n=ta(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),Zm.has(n)||(Zm.add(n),e={rel:e,crossOrigin:s,href:t},l.querySelector(n)===null&&(t=l.createElement("link"),Ct(t,"link",e),mt(t),l.head.appendChild(t)))}}function Ex(e){Ba.D(e),Km("dns-prefetch",e,null)}function Mx(e,t){Ba.C(e,t),Km("preconnect",e,t)}function Tx(e,t,s){Ba.L(e,t,s);var l=_l;if(l&&e&&t){var n='link[rel="preload"][as="'+ta(t)+'"]';t==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+ta(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+ta(s.imageSizes)+'"]')):n+='[href="'+ta(e)+'"]';var r=n;switch(t){case"style":r=Al(e);break;case"script":r=Cl(e)}ca.has(r)||(e=b({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),ca.set(r,e),l.querySelector(n)!==null||t==="style"&&l.querySelector(bn(r))||t==="script"&&l.querySelector(vn(r))||(t=l.createElement("link"),Ct(t,"link",e),mt(t),l.head.appendChild(t)))}}function Dx(e,t){Ba.m(e,t);var s=_l;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+ta(l)+'"][href="'+ta(e)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Cl(e)}if(!ca.has(r)&&(e=b({rel:"modulepreload",href:e},t),ca.set(r,e),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(vn(r)))return}l=s.createElement("link"),Ct(l,"link",e),mt(l),s.head.appendChild(l)}}}function kx(e,t,s){Ba.S(e,t,s);var l=_l;if(l&&e){var n=da(l).hoistableStyles,r=Al(e);t=t||"default";var c=n.get(r);if(!c){var d={loading:0,preload:null};if(c=l.querySelector(bn(r)))d.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},s),(s=ca.get(r))&&co(e,s);var v=c=l.createElement("link");mt(v),Ct(v,"link",e),v._p=new Promise(function(O,G){v.onload=O,v.onerror=G}),v.addEventListener("load",function(){d.loading|=1}),v.addEventListener("error",function(){d.loading|=2}),d.loading|=4,Hr(c,t,l)}c={type:"stylesheet",instance:c,count:1,state:d},n.set(r,c)}}}function Ox(e,t){Ba.X(e,t);var s=_l;if(s&&e){var l=da(s).hoistableScripts,n=Cl(e),r=l.get(n);r||(r=s.querySelector(vn(n)),r||(e=b({src:e,async:!0},t),(t=ca.get(n))&&oo(e,t),r=s.createElement("script"),mt(r),Ct(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function Rx(e,t){Ba.M(e,t);var s=_l;if(s&&e){var l=da(s).hoistableScripts,n=Cl(e),r=l.get(n);r||(r=s.querySelector(vn(n)),r||(e=b({src:e,async:!0,type:"module"},t),(t=ca.get(n))&&oo(e,t),r=s.createElement("script"),mt(r),Ct(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function Wm(e,t,s,l){var n=(n=me.current)?Lr(n):null;if(!n)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=Al(s.href),s=da(n).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Al(s.href);var r=da(n).hoistableStyles,c=r.get(e);if(c||(n=n.ownerDocument||n,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,c),(r=n.querySelector(bn(e)))&&!r._p&&(c.instance=r,c.state.loading=5),ca.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ca.set(e,s),r||zx(n,e,s,c.state))),t&&l===null)throw Error(u(528,""));return c}if(t&&l!==null)throw Error(u(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Cl(s),s=da(n).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Al(e){return'href="'+ta(e)+'"'}function bn(e){return'link[rel="stylesheet"]['+e+"]"}function Jm(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function zx(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Ct(t,"link",s),mt(t),e.head.appendChild(t))}function Cl(e){return'[src="'+ta(e)+'"]'}function vn(e){return"script[async]"+e}function Fm(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+ta(s.href)+'"]');if(l)return t.instance=l,mt(l),l;var n=b({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),mt(l),Ct(l,"style",n),Hr(l,s.precedence,e),t.instance=l;case"stylesheet":n=Al(s.href);var r=e.querySelector(bn(n));if(r)return t.state.loading|=4,t.instance=r,mt(r),r;l=Jm(s),(n=ca.get(n))&&co(l,n),r=(e.ownerDocument||e).createElement("link"),mt(r);var c=r;return c._p=new Promise(function(d,v){c.onload=d,c.onerror=v}),Ct(r,"link",l),t.state.loading|=4,Hr(r,s.precedence,e),t.instance=r;case"script":return r=Cl(s.src),(n=e.querySelector(vn(r)))?(t.instance=n,mt(n),n):(l=s,(n=ca.get(r))&&(l=b({},s),oo(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),mt(n),Ct(n,"link",l),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Hr(l,s.precedence,e));return t.instance}function Hr(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,c=0;c<l.length;c++){var d=l[c];if(d.dataset.precedence===t)r=d;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function co(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function oo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $r=null;function Pm(e,t,s){if($r===null){var l=new Map,n=$r=new Map;n.set(s,l)}else n=$r,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),n=0;n<s.length;n++){var r=s[n];if(!(r[Sa]||r[Te]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var c=r.getAttribute(t)||"";c=e+c;var d=l.get(c);d?d.push(r):l.set(c,[r])}}return l}function Im(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function Ux(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ef(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var jn=null;function qx(){}function Lx(e,t,s){if(jn===null)throw Error(u(475));var l=jn;if(t.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var n=Al(s.href),r=e.querySelector(bn(n));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Br.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=r,mt(r);return}r=e.ownerDocument||e,s=Jm(s),(n=ca.get(n))&&co(s,n),r=r.createElement("link"),mt(r);var c=r;c._p=new Promise(function(d,v){c.onload=d,c.onerror=v}),Ct(r,"link",s),t.instance=r}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=Br.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function Hx(){if(jn===null)throw Error(u(475));var e=jn;return e.stylesheets&&e.count===0&&uo(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&uo(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Br(){if(this.count--,this.count===0){if(this.stylesheets)uo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qr=null;function uo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qr=new Map,t.forEach($x,e),Qr=null,Br.call(e))}function $x(e,t){if(!(t.state.loading&4)){var s=Qr.get(e);if(s)var l=s.get(null);else{s=new Map,Qr.set(e,s);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var c=n[r];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(s.set(c.dataset.precedence,c),l=c)}l&&s.set(null,l)}n=t.instance,c=n.getAttribute("data-precedence"),r=s.get(c)||l,r===l&&s.set(null,n),s.set(c,n),this.count++,l=Br.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var Nn={$$typeof:J,Provider:null,Consumer:null,_currentValue:E,_currentValue2:E,_threadCount:0};function Bx(e,t,s,l,n,r,c,d){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ol(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.hiddenUpdates=Ol(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=d,this.incompleteTransitions=new Map}function tf(e,t,s,l,n,r,c,d,v,O,G,F){return e=new Bx(e,t,s,c,d,v,O,F),t=1,r===!0&&(t|=24),r=Yt(3,null,null,t),e.current=r,r.stateNode=e,t=Gi(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:t},Wi(r),e}function af(e){return e?(e=ll,e):ll}function sf(e,t,s,l,n,r){n=af(n),l.context===null?l.context=n:l.pendingContext=n,l=Ia(t),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=es(e,l,t),s!==null&&(Kt(s,e,t),Fl(s,e,t))}function lf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function mo(e,t){lf(e,t),(e=e.alternate)&&lf(e,t)}function nf(e){if(e.tag===13){var t=sl(e,67108864);t!==null&&Kt(t,e,67108864),mo(e,67108864)}}var Yr=!0;function Qx(e,t,s,l){var n=p.T;p.T=null;var r=k.p;try{k.p=2,fo(e,t,s,l)}finally{k.p=r,p.T=n}}function Yx(e,t,s,l){var n=p.T;p.T=null;var r=k.p;try{k.p=8,fo(e,t,s,l)}finally{k.p=r,p.T=n}}function fo(e,t,s,l){if(Yr){var n=ho(l);if(n===null)Ic(e,t,l,Xr,s),cf(e,l);else if(Gx(n,e,t,s,l))l.stopPropagation();else if(cf(e,l),t&4&&-1<Xx.indexOf(e)){for(;n!==null;){var r=it(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var c=wa(r.pendingLanes);if(c!==0){var d=r;for(d.pendingLanes|=2,d.entangledLanes|=2;c;){var v=1<<31-pt(c);d.entanglements[1]|=v,c&=~v}ja(r),(Ze&6)===0&&(Cr=fe()+500,xn(0))}}break;case 13:d=sl(r,2),d!==null&&Kt(d,r,2),Mr(),mo(r,2)}if(r=ho(l),r===null&&Ic(e,t,l,Xr,s),r===n)break;n=r}n!==null&&l.stopPropagation()}else Ic(e,t,l,null,s)}}function ho(e){return e=yi(e),xo(e)}var Xr=null;function xo(e){if(Xr=null,e=Wa(e),e!==null){var t=_(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=T(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xr=e,null}function rf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xe()){case He:return 2;case Re:return 8;case Et:case On:return 32;case Dl:return 268435456;default:return 32}default:return 32}}var go=!1,fs=null,hs=null,xs=null,wn=new Map,Sn=new Map,gs=[],Xx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cf(e,t){switch(e){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":wn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sn.delete(t.pointerId)}}function _n(e,t,s,l,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},t!==null&&(t=it(t),t!==null&&nf(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Gx(e,t,s,l,n){switch(t){case"focusin":return fs=_n(fs,e,t,s,l,n),!0;case"dragenter":return hs=_n(hs,e,t,s,l,n),!0;case"mouseover":return xs=_n(xs,e,t,s,l,n),!0;case"pointerover":var r=n.pointerId;return wn.set(r,_n(wn.get(r)||null,e,t,s,l,n)),!0;case"gotpointercapture":return r=n.pointerId,Sn.set(r,_n(Sn.get(r)||null,e,t,s,l,n)),!0}return!1}function of(e){var t=Wa(e.target);if(t!==null){var s=_(t);if(s!==null){if(t=s.tag,t===13){if(t=T(s),t!==null){e.blockedOn=t,he(e.priority,function(){if(s.tag===13){var l=Zt();l=x(l);var n=sl(s,l);n!==null&&Kt(n,s,l),mo(s,l)}});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=ho(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);pi=l,s.target.dispatchEvent(l),pi=null}else return t=it(s),t!==null&&nf(t),e.blockedOn=s,!1;t.shift()}return!0}function df(e,t,s){Gr(e)&&s.delete(t)}function Vx(){go=!1,fs!==null&&Gr(fs)&&(fs=null),hs!==null&&Gr(hs)&&(hs=null),xs!==null&&Gr(xs)&&(xs=null),wn.forEach(df),Sn.forEach(df)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,go||(go=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vx)))}var Zr=null;function uf(e){Zr!==e&&(Zr=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Zr===e&&(Zr=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],n=e[t+2];if(typeof l!="function"){if(xo(l||s)===null)continue;break}var r=it(s);r!==null&&(e.splice(t,3),t-=3,hc(r,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function An(e){function t(v){return Vr(v,e)}fs!==null&&Vr(fs,e),hs!==null&&Vr(hs,e),xs!==null&&Vr(xs,e),wn.forEach(t),Sn.forEach(t);for(var s=0;s<gs.length;s++){var l=gs[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<gs.length&&(s=gs[0],s.blockedOn===null);)of(s),s.blockedOn===null&&gs.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],r=s[l+1],c=n[Ce]||null;if(typeof r=="function")c||uf(s);else if(c){var d=null;if(r&&r.hasAttribute("formAction")){if(n=r,c=r[Ce]||null)d=c.formAction;else if(xo(n)!==null)continue}else d=c.action;typeof d=="function"?s[l+1]=d:(s.splice(l,3),l-=3),uf(s)}}}function po(e){this._internalRoot=e}Kr.prototype.render=po.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var s=t.current,l=Zt();sf(s,l,e,t,null,null)},Kr.prototype.unmount=po.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sf(e.current,2,null,e,null,null),Mr(),t[at]=null}};function Kr(e){this._internalRoot=e}Kr.prototype.unstable_scheduleHydration=function(e){if(e){var t=de();e={blockedOn:null,target:e,priority:t};for(var s=0;s<gs.length&&t!==0&&t<gs[s].priority;s++);gs.splice(s,0,e),s===0&&of(e)}};var mf=o.version;if(mf!=="19.1.0")throw Error(u(527,mf,"19.1.0"));k.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=A(t),e=e!==null?j(e):null,e=e===null?null:e.stateNode,e};var Zx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:p,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wr.isDisabled&&Wr.supportsFiber)try{Ns=Wr.inject(Zx),kt=Wr}catch{}}return En.createRoot=function(e,t){if(!g(e))throw Error(u(299));var s=!1,l="",n=Cu,r=Eu,c=Mu,d=null;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(d=t.unstable_transitionCallbacks)),t=tf(e,1,!1,null,null,s,l,n,r,c,d,null),e[at]=t.current,Pc(e),new po(t)},En.hydrateRoot=function(e,t,s){if(!g(e))throw Error(u(299));var l=!1,n="",r=Cu,c=Eu,d=Mu,v=null,O=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(c=s.onCaughtError),s.onRecoverableError!==void 0&&(d=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(v=s.unstable_transitionCallbacks),s.formState!==void 0&&(O=s.formState)),t=tf(e,1,!0,t,s??null,l,n,r,c,d,v,O),t.context=af(null),s=t.current,l=Zt(),l=x(l),n=Ia(l),n.callback=null,es(s,n,l),s=l,t.current.lanes=s,Va(t,s),ja(t),e[at]=t.current,Pc(e),new Kr(t)},En.version="19.1.0",En}var Nf;function a0(){if(Nf)return vo.exports;Nf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),vo.exports=t0(),vo.exports}var s0=a0();const l0=Eo(s0),n0={events:{},on(i,o){return this.events[i]||(this.events[i]=[]),this.events[i].push(o),()=>{this.off(i,o)}},off(i,o){this.events[i]&&(this.events[i]=this.events[i].filter(f=>f!==o))},emit(i,o){this.events[i]&&this.events[i].forEach(f=>{try{f(o)}catch(u){console.error(`Error in event handler for ${i}:`,u)}})},clear(i){i?delete this.events[i]:this.events={}}};window.EventBus=n0;class r0{constructor(){this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=window.APP_CONFIG?.WS_RECONNECT_ATTEMPTS||5,this.reconnectDelay=window.APP_CONFIG?.WS_RECONNECT_DELAY||1e3,this.pingInterval=window.APP_CONFIG?.WS_PING_INTERVAL||3e4,this.subscriptions=[],this.eventHandlers=new Map,this.isConnecting=!1,this.isAuthenticated=!1,this.pingTimer=null,this.reconnectTimer=null,this.connectionState="disconnected",this.lastConnectionAttempt=null,this.connectionId=null,console.log("🔌 WebSocket Service initialized")}async connect(o=null){if(this.isConnecting||this.ws&&this.ws.readyState===WebSocket.OPEN){console.log("⚠️ WebSocket already connecting or connected");return}try{this.isConnecting=!0,this.connectionState="connecting",this.lastConnectionAttempt=new Date;const f=o||this.getTokenFromCookie();if(!f)throw new Error("No authentication token available");const g=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}?token=${encodeURIComponent(f)}`;console.log("🔗 Connecting to WebSocket:",g.replace(/token=[^&]+/,"token=***")),this.ws=new WebSocket(g),this.setupEventHandlers()}catch(f){console.error("💥 WebSocket connection error:",f),this.handleConnectionError(f)}}setupEventHandlers(){this.ws&&(this.ws.onopen=o=>{console.log("✅ WebSocket connected successfully"),this.isConnecting=!1,this.isAuthenticated=!1,this.connectionState="connected",this.reconnectAttempts=0,this.connectionId=`ws_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.emit("connected",{connectionId:this.connectionId}),this.startHeartbeat()},this.ws.onmessage=o=>{try{const f=JSON.parse(o.data);this.handleMessage(f)}catch(f){console.error("💥 Failed to parse WebSocket message:",f,o.data)}},this.ws.onclose=o=>{console.log(`🔌 WebSocket disconnected - Code: ${o.code}, Reason: ${o.reason}`),this.handleDisconnection(o)},this.ws.onerror=o=>{console.error("💥 WebSocket error:",o),this.handleConnectionError(new Error("WebSocket connection error"))})}handleMessage(o){const{type:f,data:u,channel:g,timestamp:_}=o;switch(console.log(`📨 WebSocket message received: ${f}`,u),f){case"welcome":this.isAuthenticated=!0,console.log("🎉 WebSocket authentication successful:",u.user),this.emit("authenticated",u),this.subscriptions.length>0&&this.subscribe(this.subscriptions);break;case"auth_error":console.error("🚫 WebSocket authentication failed:",u.error),this.connectionState="error",this.emit("auth_error",u),this.disconnect();break;case"pong":break;case"subscription_confirmed":console.log("📺 Subscription confirmed for channels:",u.channels),this.emit("subscribed",u);break;case"unsubscription_confirmed":console.log("📺 Unsubscription confirmed for channels:",u.channels),this.emit("unsubscribed",u);break;case"error":console.error("⚠️ WebSocket server error:",u.error),this.emit("error",u);break;case"order_started":case"order_stopped":case"order_resumed":case"order_completed":this.emit("order_update",{type:f,data:u,timestamp:_}),this.emit(f,{data:u,timestamp:_});break;case"machine_status_changed":this.emit("machine_update",{type:f,data:u,timestamp:_}),this.emit(f,{data:u,timestamp:_});break;case"notification":this.emit("notification",{data:u,timestamp:_});break;default:this.emit(f,{data:u,timestamp:_});break}}handleDisconnection(o){this.isConnecting=!1,this.isAuthenticated=!1,this.connectionState="disconnected",this.stopHeartbeat(),this.emit("disconnected",{code:o.code,reason:o.reason,wasAuthenticated:this.isAuthenticated}),o.code!==1e3&&o.code!==1001&&this.scheduleReconnect()}handleConnectionError(o){this.isConnecting=!1,this.connectionState="error",this.stopHeartbeat(),console.error("💥 WebSocket connection error:",o.message),this.emit("error",{error:o.message}),this.scheduleReconnect()}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.emit("max_reconnect_attempts");return}const o=this.reconnectDelay*Math.pow(2,this.reconnectAttempts);this.reconnectAttempts++,console.log(`🔄 Scheduling reconnection attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts} in ${o}ms`),this.reconnectTimer=setTimeout(()=>{console.log(`🔄 Reconnection attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),this.connect()},o),this.emit("reconnecting",{attempt:this.reconnectAttempts,maxAttempts:this.maxReconnectAttempts,delay:o})}subscribe(o){Array.isArray(o)||(o=[o]),this.subscriptions=[...new Set([...this.subscriptions,...o])],this.isConnected()&&this.isAuthenticated?(this.send("subscribe",{channels:o}),console.log("📺 Subscribing to channels:",o)):console.log("📺 Queued subscription for channels (will subscribe when connected):",o)}unsubscribe(o){Array.isArray(o)||(o=[o]),this.subscriptions=this.subscriptions.filter(f=>!o.includes(f)),this.isConnected()&&this.isAuthenticated&&(this.send("unsubscribe",{channels:o}),console.log("📺 Unsubscribing from channels:",o))}send(o,f={}){if(!this.isConnected())return console.warn("⚠️ Cannot send message - WebSocket not connected"),!1;try{const u=JSON.stringify({type:o,...f});return this.ws.send(u),console.log(`📤 Sent WebSocket message: ${o}`),!0}catch(u){return console.error("💥 Failed to send WebSocket message:",u),!1}}startHeartbeat(){this.stopHeartbeat(),this.pingTimer=setInterval(()=>{this.isConnected()&&this.send("ping")},this.pingInterval),console.log(`💓 Started WebSocket heartbeat (${this.pingInterval}ms)`)}stopHeartbeat(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null,console.log("💓 Stopped WebSocket heartbeat"))}disconnect(){console.log("🔌 Disconnecting WebSocket"),this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),this.isConnecting=!1,this.isAuthenticated=!1,this.connectionState="disconnected",this.reconnectAttempts=0,this.subscriptions=[]}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}getStatus(){return{state:this.connectionState,isConnected:this.isConnected(),isAuthenticated:this.isAuthenticated,subscriptions:[...this.subscriptions],reconnectAttempts:this.reconnectAttempts,connectionId:this.connectionId,lastConnectionAttempt:this.lastConnectionAttempt}}on(o,f){this.eventHandlers.has(o)||this.eventHandlers.set(o,[]),this.eventHandlers.get(o).push(f),console.log(`👂 Registered handler for event: ${o}`)}off(o,f){if(this.eventHandlers.has(o)){const u=this.eventHandlers.get(o),g=u.indexOf(f);g>-1&&(u.splice(g,1),console.log(`🚫 Removed handler for event: ${o}`))}}emit(o,f){this.eventHandlers.has(o)&&this.eventHandlers.get(o).forEach(u=>{try{u(f)}catch(g){console.error(`💥 Error in event handler for ${o}:`,g)}})}getTokenFromCookie(){const o=document.cookie.split(";");for(let f of o){const[u,g]=f.trim().split("=");if(u==="token")return decodeURIComponent(g)}return null}reconnect(){console.log("🔄 Manual reconnection triggered"),this.disconnect(),setTimeout(()=>this.connect(),1e3)}resetReconnectionAttempts(){this.reconnectAttempts=0,console.log("🔄 Reset reconnection attempts counter")}}const Ml=new r0;document.addEventListener("DOMContentLoaded",()=>{Ml.getTokenFromCookie()&&(console.log("🚀 Auto-connecting WebSocket on page load"),Ml.connect())});document.addEventListener("visibilitychange",()=>{!document.hidden&&!Ml.isConnected()&&Ml.getTokenFromCookie()&&(console.log("🔄 Page visible - attempting to reconnect WebSocket"),Ml.connect())});window.WebSocketService=Ml;const Tf=ys.createContext(null),vs=()=>ys.useContext(Tf),Df=({children:i})=>{const[o,f]=ys.useState(null),[u,g]=ys.useState(!0),[_,T]=ys.useState(!1),Y=async()=>{g(!0);try{const{user:H}=await window.API.verifySession();H&&(f(H),T(!0),localStorage.setItem("user_data",JSON.stringify(H)))}catch{f(null),T(!1),localStorage.removeItem("user_data")}finally{g(!1)}};ys.useEffect(()=>{Y();const H=window.EventBus.on("auth:logout",()=>{f(null),T(!1),localStorage.removeItem("user_data")});return()=>H()},[]);const ae={user:o,login:async(H,oe)=>{const B=await window.API.login(H,oe);return B.user&&(f(B.user),T(!0),localStorage.setItem("user_data",JSON.stringify(B.user))),B},logout:async()=>{try{await window.API.logout()}catch(H){console.error("Logout failed:",H)}finally{f(null),T(!1),localStorage.removeItem("user_data")}},loading:u,isAuthenticated:_,hasRole:H=>o?(Array.isArray(H)?H:[H]).includes(o.role):!1,checkAuth:Y};return ys.createElement(Tf.Provider,{value:ae},i)};window.useAuth=vs;window.AuthProvider=Df;class i0{constructor(){this.routes=[],this.currentRoute=null,this.listening=!1}init(){this.listening=!0,window.addEventListener("popstate",o=>{this.handleRouteChange()}),this.handleRouteChange()}addRoute(o){this.routes.push(o)}navigate(o,f={}){o!==window.location.pathname&&(window.history.pushState({},"",o),this.handleRouteChange())}back(){window.history.back()}handleRouteChange(){const o=window.location.pathname,f=this.findRoute(o);this.currentRoute=f,window.EventBus&&window.EventBus.emit("router:navigation",{route:f,path:o,params:f?{}:null})}findRoute(o){return this.routes.find(f=>{if(f.path===o)return!0;const u=f.path.split("/"),g=o.split("/");return u.length!==g.length?!1:u.every((_,T)=>_.startsWith(":")||_===g[T])})}getCurrentRoute(){return{route:this.currentRoute,path:window.location.pathname,params:{},query:this.getQueryParams()}}getQueryParams(){const o=new URLSearchParams(window.location.search),f={};for(const[u,g]of o)f[u]=g;return f}updateQueryParams(o,f=!1){const u=new URL(window.location);Object.entries(o).forEach(([g,_])=>{_==null?u.searchParams.delete(g):u.searchParams.set(g,_)}),f?window.history.replaceState({},"",u):window.history.pushState({},"",u)}isActive(o,f=!1){const u=window.location.pathname;return f?u===o:u.startsWith(o)}link(o){return o}}const To=new i0;window.Router=To;const c0=()=>{const[i,o]=React.useState(window.Router.getCurrentRoute());React.useEffect(()=>{const _=T=>{o({route:T.route,path:T.path,params:T.params||{},query:window.Router.getQueryParams()})};if(window.EventBus)return window.EventBus.on("router:navigation",_)},[]);const f=React.useCallback((_,T)=>{window.Router.navigate(_,T)},[]),u=React.useCallback(()=>{window.Router.back()},[]),g=React.useCallback((_,T)=>{window.Router.updateQueryParams(_,T)},[]);return{route:i.route,path:i.path,params:i.params,query:i.query,navigate:f,back:u,updateQuery:g,isActive:window.Router.isActive.bind(window.Router),link:window.Router.link.bind(window.Router)}};window.useRouter=c0;/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d0=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,f,u)=>u?u.toUpperCase():f.toLowerCase()),wf=i=>{const o=d0(i);return o.charAt(0).toUpperCase()+o.slice(1)},kf=(...i)=>i.filter((o,f,u)=>!!o&&o.trim()!==""&&u.indexOf(o)===f).join(" ").trim(),u0=i=>{for(const o in i)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=y.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:f=2,absoluteStrokeWidth:u,className:g="",children:_,iconNode:T,...Y},A)=>y.createElement("svg",{ref:A,...m0,width:o,height:o,stroke:i,strokeWidth:u?Number(f)*24/Number(o):f,className:kf("lucide",g),...!_&&!u0(Y)&&{"aria-hidden":"true"},...Y},[...T.map(([j,b])=>y.createElement(j,b)),...Array.isArray(_)?_:[_]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(i,o)=>{const f=y.forwardRef(({className:u,...g},_)=>y.createElement(f0,{ref:_,iconNode:o,className:kf(`lucide-${o0(wf(i))}`,`lucide-${i}`,u),...g}));return f.displayName=wf(i),f};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Dt=Ae("activity",h0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],g0=Ae("award",x0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],y0=Ae("bell",p0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ya=Ae("calendar",b0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Na=Ae("chart-column",v0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Sf=Ae("circle-alert",j0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ut=Ae("circle-check-big",N0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_f=Ae("circle-x",w0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ti=Ae("clipboard-list",S0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$t=Ae("clock",_0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],C0=Ae("database",A0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],xa=Ae("download",E0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],T0=Ae("ellipsis-vertical",M0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Xa=Ae("eye",D0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Jr=Ae("factory",k0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ai=Ae("file-text",O0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ri=Ae("funnel",R0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],U0=Ae("info",z0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],L0=Ae("layout-dashboard",q0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],$0=Ae("menu",H0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],oa=Ae("package",B0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],ii=Ae("pause",Q0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],si=Ae("pen-line",Y0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],li=Ae("pen",X0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Qa=Ae("play",G0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Pt=Ae("plus",V0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lt=Ae("refresh-cw",Z0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],_o=Ae("rotate-ccw",K0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Tn=Ae("save",W0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],kn=Ae("search",J0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Jt=Ae("settings",F0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ei=Ae("shield",P0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Fr=Ae("square",I0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],bs=Ae("target",eg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qs=Ae("trash-2",tg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Ao=Ae("trending-down",ag);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],El=Ae("trending-up",sg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],St=Ae("triangle-alert",lg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Of=Ae("upload",ng);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wt=Ae("user-check",rg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],So=Ae("user-plus",ig);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],og=Ae("user-x",cg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ie=Ae("users",dg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],mg=Ae("wifi-off",ug);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],hg=Ae("wifi",fg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],ni=Ae("wrench",xg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ha=Ae("x",gg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],yg=Ae("zap",pg),bg={calendar:Ya,users:Ie,search:kn,plus:Pt,check:ut,x:ha,clipboard:ti,userCheck:Wt,settings:Jt,edit:li,save:Tn,trash:Qs,upload:Of,download:xa,activity:Dt,package:oa,shield:ei,dashboard:L0,moreVertical:T0,clock:$t,barChart3:Na,menu:$0,wifi:hg,wifiOff:mg},Ga=({icon:i,size:o=24,className:f=""})=>{const u=bg[i];return u?a.jsx(u,{size:o,className:f}):a.jsx(Ie,{size:o,className:f})},vg=()=>{const[i,o]=y.useState(navigator.onLine),[f,u]=y.useState("disconnected"),[g,_]=y.useState(new Date);y.useEffect(()=>{const H=()=>{o(!0),_(new Date)},oe=()=>{o(!1),_(new Date)};window.addEventListener("online",H),window.addEventListener("offline",oe);const B=()=>{u("connected"),_(new Date)},Q=()=>{u("disconnected"),_(new Date)},L=()=>{u("reconnecting"),_(new Date)},N=()=>{u("error"),_(new Date)};if(window.WebSocketService){window.WebSocketService.on("connected",B),window.WebSocketService.on("authenticated",B),window.WebSocketService.on("disconnected",Q),window.WebSocketService.on("reconnecting",L),window.WebSocketService.on("error",N);const J=window.WebSocketService.getStatus();u(J.isConnected?"connected":J.state)}const R=setInterval(()=>{i&&_(new Date)},6e4);return()=>{window.removeEventListener("online",H),window.removeEventListener("offline",oe),clearInterval(R),window.WebSocketService&&(window.WebSocketService.off("connected",B),window.WebSocketService.off("authenticated",B),window.WebSocketService.off("disconnected",Q),window.WebSocketService.off("reconnecting",L),window.WebSocketService.off("error",N))}},[i]);const T=i&&f==="connected",Y=f==="reconnecting",A=f==="error"||!i;let j,b,ae;return Y?(j="bg-yellow-100 text-yellow-800",b="Reconnecting...",ae="wifi"):T?(j="bg-green-100 text-green-800",b="Live",ae="wifi"):A?(j="bg-red-100 text-red-800",b=i?"Connection Error":"Offline",ae="wifiOff"):(j="bg-gray-100 text-gray-800",b="Connecting...",ae="wifi"),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs ${j}`,children:[a.jsx(Ga,{icon:ae,size:12,className:`${T?"text-green-600":A?"text-red-600":"text-yellow-600"} ${Y?"animate-pulse":""}`}),a.jsx("span",{children:b}),a.jsx("span",{className:"text-gray-500 hidden sm:inline",children:g.toLocaleTimeString()})]})},jg=()=>{const{user:i,logout:o}=vs(),[f,u]=y.useState(!1);return i?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(!f),className:"flex items-center space-x-3 focus:outline-none",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-semibold text-gray-700",children:i.username?i.username.charAt(0).toUpperCase():"U"})}),a.jsxs("div",{className:"hidden md:block text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:i.username}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i.role})]})]}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:a.jsx("button",{onClick:o,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})})]}):null},Ng=({onMenuClick:i})=>a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("button",{onClick:i,className:"lg:hidden p-3 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Open navigation menu",children:a.jsx(Ga,{icon:"menu",size:24})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-semibold text-gray-900 hidden sm:block",children:"Production Management System"}),a.jsx("h1",{className:"text-lg font-semibold text-gray-900 sm:hidden",children:"PMS"}),a.jsx(vg,{})]}),a.jsx(jg,{})]})})}),wg=({isOpen:i,onClose:o})=>{const{user:f}=vs(),g=[{name:"Dashboard",href:"/",icon:"dashboard",priority:"critical",roles:["operator","supervisor","manager","admin"]},{name:"Production Monitor",href:"/production",icon:"activity",priority:"critical",roles:["operator","supervisor","manager","admin"]},{name:"Orders",href:"/orders",icon:"package",priority:"daily",roles:["operator","supervisor","manager","admin"]},{name:"Machines",href:"/machines",icon:"settings",priority:"daily",roles:["operator","supervisor","manager","admin"]},{name:"Labor Layout",href:"/labour-layout",icon:"users",priority:"daily",roles:["supervisor","manager","admin"]},{name:"Labor Planner",href:"/labor-planner",icon:"calendar",priority:"daily",roles:["supervisor","manager","admin"]},{name:"Analytics",href:"/analytics",icon:"barChart3",priority:"management",roles:["manager","admin"]},{name:"Shift Reports",href:"/shift-reports",icon:"clock",priority:"management",roles:["supervisor","manager","admin"]},{name:"Users",href:"/users",icon:"users",priority:"management",roles:["admin"]},{name:"Settings",href:"/settings",icon:"settings",priority:"management",roles:["supervisor","manager","admin"]},{name:"Admin",href:"/admin",icon:"shield",priority:"management",roles:["admin"]}].filter(b=>b.roles.includes(f?.role||"operator")),_=g.filter(b=>b.priority==="critical"),T=g.filter(b=>b.priority==="daily"),Y=g.filter(b=>b.priority==="management"),A=(b,ae)=>{b.preventDefault(),window.history.pushState({},"",ae);const H=new PopStateEvent("popstate");window.dispatchEvent(H),o&&o()},j=(b,ae)=>b.length===0?null:a.jsxs("div",{className:"mb-4",children:[ae&&a.jsx("h3",{className:"px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:ae}),a.jsx("div",{className:"space-y-1",children:b.map(H=>a.jsxs("a",{href:H.href,onClick:oe=>A(oe,H.href),className:`group flex items-center px-3 py-3 text-sm font-medium rounded-md hover:bg-gray-700 hover:text-white transition-colors min-h-[44px] touch-manipulation ${window.location.pathname===H.href?"bg-gray-900 text-white":"text-gray-300"}`,children:[a.jsx(Ga,{icon:H.icon,size:18,className:"mr-3 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:H.name})]},H.name))})]});return a.jsxs(a.Fragment,{children:[i&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-30 lg:hidden",onClick:o}),a.jsxs("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-gray-800 text-white transform transition-transform ${i?"translate-x-0":"-translate-x-full"} lg:translate-x-0 lg:static lg:inset-0`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-700",children:[a.jsx("span",{className:"text-white font-semibold text-xl",children:"PMS"}),a.jsx("button",{onClick:o,className:"lg:hidden p-2 text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white rounded-md min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Close navigation menu",children:a.jsx(Ga,{icon:"x",size:20})})]}),a.jsx("div",{className:"px-4 py-3 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-sm font-semibold text-white",children:f?.username?f.username.charAt(0).toUpperCase():"U"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:f?.username}),a.jsx("p",{className:"text-xs text-gray-300 capitalize",children:f?.role})]})]})}),a.jsxs("nav",{className:"flex-1 px-2 py-4 overflow-y-auto",children:[j(_,"Critical"),j(T,"Daily Operations"),j(Y,"Management")]})]})]})};function Sg({children:i}){const[o,f]=y.useState(!1);return a.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[a.jsx(wg,{isOpen:o,onClose:()=>f(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Ng,{onMenuClick:()=>f(!0)}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:a.jsx("div",{className:"py-6",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})]})}function _g(){const[i,o]=y.useState({username:"",password:""}),[f,u]=y.useState(""),[g,_]=y.useState(!1),{login:T}=vs(),Y=async j=>{j.preventDefault(),u(""),_(!0);try{await T(i.username,i.password)}catch(b){u(b.message||"Login failed. Please try again.")}finally{_(!1)}},A=j=>b=>{o(ae=>({...ae,[j]:b.target.value})),f&&u("")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Production Management"}),a.jsx("p",{className:"text-gray-600",children:"Sign in to continue"})]}),a.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[f&&a.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded",children:f}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx("input",{type:"text",value:i.username,onChange:A("username"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,autoFocus:!0,disabled:g})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:i.password,onChange:A("password"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,disabled:g})]}),a.jsx("button",{type:"submit",disabled:g,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-200 disabled:opacity-50",children:g?"Signing in...":"Sign In"})]}),a.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Default: username: admin, password: admin123"})]})})}const Ag=({notification:i,onClose:o})=>{const{type:f,title:u,message:g,timestamp:_}=i;y.useEffect(()=>{const A=setTimeout(()=>{o()},5e3);return()=>clearTimeout(A)},[o]);const T=()=>{switch(f){case"order_started":return"bg-blue-50 border-blue-200 text-blue-800";case"order_completed":return"bg-green-50 border-green-200 text-green-800";case"order_stopped":return"bg-red-50 border-red-200 text-red-800";case"order_resumed":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"machine_status_changed":return"bg-purple-50 border-purple-200 text-purple-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},Y=()=>{switch(f){case"order_started":return"activity";case"order_completed":return"check";case"order_stopped":return"x";case"order_resumed":return"activity";case"machine_status_changed":return"settings";default:return"info"}};return a.jsx("div",{className:`mb-3 p-4 rounded-lg border-l-4 shadow-md transition-all duration-300 ${T()}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ga,{icon:Y(),size:20,className:"mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-sm",children:u}),a.jsx("p",{className:"text-sm mt-1 text-gray-600",children:g}),a.jsx("p",{className:"text-xs mt-2 text-gray-500",children:new Date(_).toLocaleTimeString()})]}),a.jsx("button",{onClick:o,className:"ml-3 flex-shrink-0 text-gray-400 hover:text-gray-600",children:a.jsx(Ga,{icon:"x",size:16})})]})})},Cg=()=>{const[i,o]=y.useState([]),[f,u]=y.useState(!1);y.useEffect(()=>{if(!window.WebSocketService){console.warn("WebSocket service not available");return}const Y=()=>{u(!0),window.WebSocketService.subscribe(["orders","machines","notifications"])},A=()=>{u(!1)},j=oe=>{const{type:B,data:Q,timestamp:L}=oe;let N,R;switch(B){case"order_started":N="Production Started",R=`Order ${Q.order.order_number} started on ${Q.order.machine_name} by ${Q.operator}`;break;case"order_stopped":N="Production Stopped",R=`Order ${Q.order.order_number} stopped - ${Q.reason}`;break;case"order_resumed":N="Production Resumed",R=`Order ${Q.order.order_number} resumed by ${Q.resumed_by}`;break;case"order_completed":N="Order Completed",R=`Order ${Q.order.order_number} completed (${Q.efficiency.toFixed(1)}% efficiency)`;break;default:N="Order Update",R=`Order ${Q.order?.order_number||"Unknown"} has been updated`}g({id:`${B}_${Date.now()}`,type:B,title:N,message:R,timestamp:L,data:Q})},b=oe=>{const{type:B,data:Q,timestamp:L}=oe;B==="machine_status_changed"&&g({id:`machine_${Q.machine_id}_${Date.now()}`,type:B,title:"Machine Status Changed",message:`Machine status updated to ${Q.status}`,timestamp:L,data:Q})},ae=oe=>{const{data:B,timestamp:Q}=oe;g({id:`notification_${Date.now()}`,type:"notification",title:B.title||"System Notification",message:B.message||"You have a new notification",timestamp:Q,data:B})};return window.WebSocketService.on("connected",Y),window.WebSocketService.on("authenticated",Y),window.WebSocketService.on("disconnected",A),window.WebSocketService.on("order_update",j),window.WebSocketService.on("machine_update",b),window.WebSocketService.on("notification",ae),window.WebSocketService.getStatus().isConnected&&Y(),()=>{window.WebSocketService.off("connected",Y),window.WebSocketService.off("authenticated",Y),window.WebSocketService.off("disconnected",A),window.WebSocketService.off("order_update",j),window.WebSocketService.off("machine_update",b),window.WebSocketService.off("notification",ae)}},[]);const g=Y=>{o(A=>[Y,...A.slice(0,4)])},_=Y=>{o(A=>A.filter(j=>j.id!==Y))},T=()=>{o([])};return i.length===0?null:a.jsxs("div",{className:"fixed top-4 right-4 z-50 w-96 max-w-sm",children:[a.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Live Updates"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-400":"bg-gray-400"}`}),a.jsx("button",{onClick:T,className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear All"})]})]}),a.jsx("div",{className:"space-y-3 max-h-screen overflow-y-auto",children:i.map(Y=>a.jsx(Ag,{notification:Y,onClose:()=>_(Y.id)},Y.id))})]})};class Af extends y.Component{constructor(o){super(o),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(o){return{hasError:!0}}componentDidCatch(o,f){this.setState({error:o,errorInfo:f}),console.error("Error caught by ErrorBoundary:",o,f)}getErrorMessage=o=>{const f={NETWORK_ERROR:{title:"Connection Problem",message:"Check your network connection and try again.",actions:["retry","work_offline"],severity:"warning"},MACHINE_OFFLINE:{title:"Machine Communication Lost",message:"Unable to communicate with selected machine.",actions:["check_machine","contact_maintenance"],severity:"critical"},DATA_SYNC_FAILED:{title:"Data Sync Failed",message:"Your changes may not be saved. Try again.",actions:["retry","save_locally"],severity:"warning"},SESSION_EXPIRED:{title:"Session Expired",message:"Please log in again to continue.",actions:["login"],severity:"warning"}},u=o?.code||(o?.message?.includes("fetch")?"NETWORK_ERROR":o?.message?.includes("session")?"SESSION_EXPIRED":"UNKNOWN");return f[u]||{title:"System Error",message:"An unexpected error occurred. Please try refreshing the page.",actions:["retry","contact_support"],severity:"critical"}};handleErrorAction=o=>{switch(o){case"retry":this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload();break;case"work_offline":this.setState({hasError:!1,error:null,errorInfo:null});break;case"check_machine":window.history.pushState({},"","/machines"),this.setState({hasError:!1,error:null,errorInfo:null});break;case"contact_maintenance":alert("Please contact maintenance team at ext. 1234");break;case"save_locally":console.log("Attempting to save data locally...");break;case"contact_support":alert("Please contact IT support at ext. 5678");break;case"login":localStorage.removeItem("token"),window.location.reload();break;default:console.log("Unknown action:",o)}};render(){if(this.state.hasError){const o=this.getErrorMessage(this.state.error);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md w-full space-y-8",children:a.jsx("div",{className:`p-6 rounded-lg border-l-4 ${o.severity==="critical"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ga,{icon:"x",size:24,className:`mr-3 mt-1 ${o.severity==="critical"?"text-red-600":"text-yellow-600"}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`font-bold text-lg ${o.severity==="critical"?"text-red-800":"text-yellow-800"}`,children:o.title}),a.jsx("p",{className:`mt-2 ${o.severity==="critical"?"text-red-700":"text-yellow-700"}`,children:o.message}),a.jsx("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row",children:o.actions.map(f=>a.jsx("button",{className:`flex-1 px-4 py-3 rounded text-sm font-medium min-h-[44px] touch-manipulation ${o.severity==="critical"?"bg-red-600 text-white hover:bg-red-700":"bg-yellow-600 text-white hover:bg-yellow-700"}`,onClick:()=>this.handleErrorAction(f),children:f.replace("_"," ").toUpperCase()},f))}),a.jsxs("details",{className:"mt-4",children:[a.jsx("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"Technical Details"}),a.jsxs("div",{className:"mt-2 p-3 bg-gray-100 rounded text-xs font-mono text-gray-700 overflow-auto max-h-32",children:[this.state.error&&this.state.error.toString(),a.jsx("br",{}),this.state.errorInfo.componentStack]})]})]})]})})})})}return this.props.children}}class Eg{constructor(){this.baseURL=window.APP_CONFIG?.API_BASE||"/api"}getHeaders(){return{"Content-Type":"application/json"}}async handleResponse(o){if(!o.ok){if(o.status===401||o.status===403)throw window.EventBus&&window.EventBus.emit("auth:logout"),new Error("Session expired or unauthorized. Please login again.");const f=await o.json().catch(()=>({error:"Request failed"})),u=new Error(f.error||f.message||"Request failed");throw u.response={status:o.status,data:f},u}return o.headers.get("content-length")==="0"?null:o.json()}async request(o,f={}){const u=`${this.baseURL}${o}`,g={...f,headers:this.getHeaders(),credentials:"include"};try{const _=await fetch(u,g);return this.handleResponse(_)}catch(_){throw console.error("API request failed:",_),_}}get(o,f={}){const u=new URLSearchParams(f).toString(),g=u?`${o}?${u}`:o;return this.request(g,{method:"GET"})}post(o,f={}){return this.request(o,{method:"POST",body:JSON.stringify(f)})}put(o,f={}){return this.request(o,{method:"PUT",body:JSON.stringify(f)})}patch(o,f={}){return this.request(o,{method:"PATCH",body:JSON.stringify(f)})}delete(o){return this.request(o,{method:"DELETE"})}login(o,f){return this.post("/auth/login",{username:o,password:f})}logout(){return this.post("/auth/logout")}verifySession(){return this.get("/auth/verify-session")}getUsers(){return this.get("/users")}getMachines(){return this.get("/machines")}getOrders(){return this.get("/orders")}}const le=new Eg;window.API=le;const Mg=({onSessionExpiring:i,onSessionExpired:o})=>{const[f,u]=y.useState(null),[g,_]=y.useState(!1),[T,Y]=y.useState(!1),A=y.useCallback(async()=>{try{const ae=await le.get("/auth/session-status"),H=ae.timeRemaining||ae.data?.timeRemaining;H!==void 0&&(u(H),H<3e5&&H>0?(_(!0),i?.(H)):H<=0?(_(!1),o?.()):_(!1))}catch(ae){console.error("Session check failed:",ae),ae.response?.status===401&&o?.()}},[i,o]),j=async()=>{Y(!0);try{await le.post("/auth/extend-session"),_(!1),u(null),console.log("Session extended successfully")}catch(ae){console.error("Failed to extend session:",ae),ae.response?.status===401&&o?.()}finally{Y(!1)}};if(y.useEffect(()=>{const ae=setInterval(A,6e4);return A(),()=>clearInterval(ae)},[A]),!g)return null;const b=Math.ceil(f/6e4);return a.jsx("div",{className:"fixed top-4 right-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg z-50 max-w-sm w-full",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Ga,{icon:"clock",size:20,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-yellow-800",children:"Session Expiring"}),a.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["Your session will expire in ",b," minute",b!==1?"s":"","."]}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsx("button",{onClick:j,disabled:T,className:"flex-1 bg-yellow-600 text-white px-3 py-2 rounded text-sm font-medium hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px] touch-manipulation flex items-center justify-center",children:T?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Extending..."]}):"Extend Session"}),a.jsx("button",{onClick:()=>_(!1),className:"px-3 py-2 text-yellow-700 hover:text-yellow-800 text-sm font-medium min-h-[44px] min-w-[44px] flex items-center justify-center",children:a.jsx(Ga,{icon:"x",size:16})})]})]})]})})},Tg=()=>{const[i,o]=y.useState("active"),f=y.useCallback(g=>{o("expiring"),console.log(`Session expiring in ${Math.ceil(g/6e4)} minutes`)},[]),u=y.useCallback(()=>{o("expired"),console.log("Session expired, redirecting to login..."),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"},[]);return{sessionStatus:i,handleSessionExpiring:f,handleSessionExpired:u}};var Dg=Mf();const kg=Eo(Dg),zt=({children:i,onClose:o,title:f})=>kg.createPortal(a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300",onClick:o,children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all duration-300",onClick:u=>u.stopPropagation(),children:[f&&a.jsx("h2",{className:"text-xl font-bold mb-4",children:f}),i]})}),document.getElementById("portal-root")),Ne=({children:i,className:o="",...f})=>a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${o}`,...f,children:i}),xe=({children:i,variant:o="default",size:f="md",className:u="",disabled:g=!1,..._})=>{const T="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",Y={default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500"},A={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return a.jsx("button",{className:`${T} ${Y[o]} ${A[f]} ${u}`,disabled:g,..._,children:i})},dt=({children:i,variant:o="default",size:f="md",className:u="",...g})=>{const _="inline-flex items-center font-medium rounded-full",T={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"},Y={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"};return a.jsx("span",{className:`${_} ${T[o]} ${Y[f]} ${u}`,...g,children:i})};function Rf(){const[i,o]=y.useState({orders:{total:0,pending:0,in_progress:0,completed:0,paused:0},machines:{total:0,available:0,in_use:0,maintenance:0,offline:0},production:{efficiency:0,output:0,quality_score:0,on_time_delivery:0},alerts:{critical:0,warning:0,info:0}}),[f,u]=y.useState([]),[g,_]=y.useState([]),[T,Y]=y.useState(!0),[A,j]=y.useState(!1),[b,ae]=y.useState(null),[H,oe]=y.useState("today"),[B,Q]=y.useState(!1),L=y.useRef(null);y.useEffect(()=>(R(),L.current=setInterval(()=>{R(!0)},3e4),()=>{L.current&&clearInterval(L.current)}),[H]);const N=($,I="success")=>{ae({message:$,type:I}),setTimeout(()=>ae(null),3e3)},R=async($=!1)=>{$?j(!0):Y(!0);try{const[I,ue,se]=await Promise.all([le.getOrders().catch(()=>[]),le.getMachines().catch(()=>[]),le.get("/users").catch(()=>[])]),X={total:I.length,pending:I.filter(E=>E.status==="pending").length,in_progress:I.filter(E=>E.status==="in_progress").length,completed:I.filter(E=>E.status==="completed").length,paused:I.filter(E=>E.status==="paused").length},P={total:ue.length,available:ue.filter(E=>E.status==="available").length,in_use:ue.filter(E=>E.status==="in_use").length,maintenance:ue.filter(E=>E.status==="maintenance").length,offline:ue.filter(E=>E.status==="offline").length},Ee=I.reduce((E,V)=>E+(parseInt(V.quantity)||0),0),re=I.filter(E=>E.status==="completed").reduce((E,V)=>E+(parseInt(V.actual_quantity||V.quantity)||0),0),we=P.total>0?Math.round(P.in_use/P.total*100):0,ce=Ee>0?Math.round(re/Ee*100):0,w=X.total>0?Math.round(X.completed/X.total*100):0,p=[];P.offline>0&&p.push({type:"critical",message:`${P.offline} machine(s) offline`,time:new Date}),P.maintenance>0&&p.push({type:"warning",message:`${P.maintenance} machine(s) in maintenance`,time:new Date}),X.paused>0&&p.push({type:"warning",message:`${X.paused} order(s) paused`,time:new Date}),we<60&&p.push({type:"warning",message:`Low machine utilization: ${we}%`,time:new Date});const k={critical:p.filter(E=>E.type==="critical").length,warning:p.filter(E=>E.type==="warning").length,info:p.filter(E=>E.type==="info").length};o({orders:X,machines:P,production:{efficiency:we,output:re,quality_score:ce,on_time_delivery:w},alerts:k}),u(I.slice(0,6)),_(p.slice(0,5)),$&&N("Dashboard updated","success")}catch(I){console.error("Failed to load dashboard data:",I),N("Failed to load dashboard data","danger")}finally{Y(!1),j(!1)}},J=[{label:"Create Order",icon:Pt,action:()=>window.location.href="#/orders",color:"blue"},{label:"View Analytics",icon:Na,action:()=>window.location.href="#/analytics",color:"purple"},{label:"Manage Machines",icon:Jt,action:()=>window.location.href="#/machines",color:"green"},{label:"Labor Planning",icon:Ie,action:()=>window.location.href="#/labor-planner",color:"orange"}],ie=y.useMemo(()=>g.filter($=>$.type==="critical").slice(0,3),[g]);return T?a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx(lt,{className:"w-8 h-8 animate-spin text-blue-600 mr-3"}),a.jsx("div",{className:"text-lg text-gray-600",children:"Loading dashboard..."})]}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[b&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${b.type==="success"?"bg-green-100 text-green-800 border border-green-200":b.type==="danger"?"bg-red-100 text-red-800 border border-red-200":b.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:b.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Production Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time overview of your manufacturing operations"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ya,{className:"w-4 h-4 text-gray-500"}),a.jsxs("select",{value:H,onChange:$=>oe($.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"})]})]}),a.jsxs(xe,{onClick:()=>R(!0),disabled:A,variant:"outline",children:[a.jsx(lt,{className:`w-4 h-4 mr-2 ${A?"animate-spin":""}`}),"Refresh"]}),a.jsxs(xe,{onClick:()=>Q(!0),children:[a.jsx(yg,{className:"w-4 h-4 mr-2"}),"Quick Actions"]})]})]}),ie.length>0&&a.jsxs(Ne,{className:"p-4 bg-red-50 border-l-4 border-red-500",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(St,{className:"w-5 h-5 text-red-600"}),a.jsx("h3",{className:"font-semibold text-red-900",children:"Critical Alerts"})]}),a.jsx("div",{className:"space-y-2",children:ie.map(($,I)=>a.jsxs("div",{className:"flex items-center gap-3 text-sm text-red-800",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{children:$.message}),a.jsx("span",{className:"text-red-600 ml-auto",children:$.time.toLocaleTimeString()})]},I))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Pr,{title:"Machine Efficiency",value:`${i.production.efficiency}%`,change:i.production.efficiency>=80?5:-3,icon:Dt,color:"blue",target:"80%"}),a.jsx(Pr,{title:"Quality Score",value:`${i.production.quality_score}%`,change:i.production.quality_score>=90?2:-1,icon:g0,color:"green",target:"90%"}),a.jsx(Pr,{title:"On-Time Delivery",value:`${i.production.on_time_delivery}%`,change:i.production.on_time_delivery>=85?4:-2,icon:bs,color:"purple",target:"85%"}),a.jsx(Pr,{title:"Daily Output",value:i.production.output.toLocaleString(),change:12,icon:oa,color:"orange",target:"5000",unit:" units"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Ne,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Production Orders"}),a.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/orders",children:[a.jsx(Xa,{className:"w-4 h-4 mr-2"}),"View All"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.orders.in_progress}),a.jsx("div",{className:"text-sm text-blue-600",children:"In Progress"})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.orders.completed}),a.jsx("div",{className:"text-sm text-green-600",children:"Completed"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Pending:"}),a.jsx("span",{className:"font-medium",children:i.orders.pending})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Paused:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:i.orders.paused})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Total Orders:"}),a.jsx("span",{className:"font-medium",children:i.orders.total})]})]})]}),a.jsxs(Ne,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Machine Status"}),a.jsxs(xe,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/machines",children:[a.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Manage"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ir,{label:"In Use",count:i.machines.in_use,total:i.machines.total,color:"blue"}),a.jsx(Ir,{label:"Available",count:i.machines.available,total:i.machines.total,color:"green"}),a.jsx(Ir,{label:"Maintenance",count:i.machines.maintenance,total:i.machines.total,color:"yellow"}),a.jsx(Ir,{label:"Offline",count:i.machines.offline,total:i.machines.total,color:"red"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Utilization Rate"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[i.production.efficiency,"%"]}),a.jsx("div",{className:"text-xs text-gray-500",children:"of total capacity"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Ne,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Orders"}),a.jsx(xe,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/orders",children:"View All"})]}),f.length>0?a.jsx("div",{className:"space-y-3",children:f.map($=>a.jsx(Og,{order:$},$.id))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(oa,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{children:"No recent orders"})]})]}),a.jsxs(Ne,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"System Alerts"}),a.jsx(dt,{variant:"info",children:g.length})]}),g.length>0?a.jsx("div",{className:"space-y-3",children:g.map(($,I)=>a.jsx(Rg,{alert:$},I))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ut,{className:"w-12 h-12 mx-auto mb-3 text-green-400"}),a.jsx("p",{children:"All systems running smoothly"})]})]})]}),B&&a.jsx(zt,{title:"Quick Actions",onClose:()=>Q(!1),children:a.jsx("div",{className:"grid grid-cols-2 gap-4",children:J.map(($,I)=>{const ue=$.icon;return a.jsxs("button",{onClick:()=>{$.action(),Q(!1)},className:`p-6 border-2 border-gray-200 rounded-lg hover:border-${$.color}-300 hover:bg-${$.color}-50 transition-all group`,children:[a.jsx(ue,{className:`w-8 h-8 text-${$.color}-600 mx-auto mb-3`}),a.jsx("div",{className:"text-sm font-medium text-gray-800",children:$.label})]},I)})})})]})}const Pr=({title:i,value:o,change:f,icon:u,color:g,target:_,unit:T=""})=>{const Y={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",purple:"bg-purple-50 text-purple-600 border-purple-200",orange:"bg-orange-50 text-orange-600 border-orange-200",red:"bg-red-50 text-red-600 border-red-200"},A=f>=0;return a.jsxs(Ne,{className:`p-6 border-l-4 ${Y[g]}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg ${Y[g]} flex items-center justify-center`,children:a.jsx(u,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:i}),a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[o,T]})]})]})}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[A?a.jsx(El,{className:"w-4 h-4 text-green-500"}):a.jsx(Ao,{className:"w-4 h-4 text-red-500"}),a.jsxs("span",{className:A?"text-green-600":"text-red-600",children:[Math.abs(f),"%"]}),a.jsx("span",{className:"text-gray-500",children:"vs yesterday"})]}),_&&a.jsxs("span",{className:"text-gray-500",children:["Target: ",_]})]})]})},Ir=({label:i,count:o,total:f,color:u})=>{const g=f>0?o/f*100:0,_={blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500"};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-600",children:i}),a.jsxs("span",{className:"font-medium",children:[o,"/",f]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${_[u]}`,style:{width:`${g}%`}})})]})},Og=({order:i})=>{const o=f=>{const g={pending:{variant:"default",icon:$t},in_progress:{variant:"info",icon:Qa},completed:{variant:"success",icon:ut},paused:{variant:"warning",icon:ii}}[f]||{variant:"default",icon:$t},_=g.icon;return a.jsxs(dt,{variant:g.variant,children:[a.jsx(_,{className:"w-3 h-3 mr-1"}),f?f.replace("_"," ").toUpperCase():"PENDING"]})};return a.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg border border-gray-100 transition-all",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:i.order_number||`Order #${i.id}`}),a.jsx("p",{className:"text-sm text-gray-500",children:i.product_name||"Product"})]})}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[a.jsxs("span",{children:["Qty: ",i.quantity?.toLocaleString()||"N/A"]}),a.jsxs("span",{children:["Env: ",i.environment||"N/A"]}),i.due_date&&a.jsxs("span",{children:["Due: ",new Date(i.due_date).toLocaleDateString()]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:o(i.status)})]})},Rg=({alert:i})=>{const o=u=>{switch(u){case"critical":return a.jsx(St,{className:"w-4 h-4 text-red-500"});case"warning":return a.jsx($t,{className:"w-4 h-4 text-yellow-500"});default:return a.jsx(y0,{className:"w-4 h-4 text-blue-500"})}},f=u=>{switch(u){case"critical":return"border-l-red-500 bg-red-50";case"warning":return"border-l-yellow-500 bg-yellow-50";default:return"border-l-blue-500 bg-blue-50"}};return a.jsx("div",{className:`p-3 border-l-4 rounded-r-lg ${f(i.type)}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[o(i.type),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-800",children:i.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.time.toLocaleTimeString()})]})]})})},Tl={name:"SAST",fullName:"South African Standard Time",offset:"+02:00",offsetMinutes:120,offsetHours:2,offsetMS:7200*1e3};function js(){return new Date(Date.now()+Tl.offsetMS)}function Ys(i){if(!i)return null;const o=typeof i=="string"?new Date(i):i;return isNaN(o.getTime())?null:new Date(o.getTime()+Tl.offsetMS)}function zg(i){if(!i)return null;const o=new Date(i);return isNaN(o.getTime())?null:new Date(o.getTime()-Tl.offsetMS)}function Ug(i,o={}){if(!i)return"N/A";const u={...{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},...o},g=Ys(i);return g?g.toLocaleString("en-ZA",u):"N/A"}function Dn(i){if(!i)return"";const o=Ys(i);return o?o.toISOString().split("T")[0]:""}function qg(i){if(!i)return"N/A";const o=Ys(i);return o?o.toLocaleString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1}):"N/A"}function Lg(i=null){const o=i?Ys(i):js();if(!o)return"";const f=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),g=String(o.getDate()).padStart(2,"0"),_=String(o.getHours()).padStart(2,"0"),T=String(o.getMinutes()).padStart(2,"0");return`${f}-${u}-${g}T${_}:${T}`}function Hg(i=null){return Dn(i||js())}function $g(){return js().toISOString()}function Bg(i=null){const o=i||new Date;return new Date(o.getTime()+Tl.offsetMS).toISOString()}function Qg(i,o=null){if(!i)return 0;const f=new Date(i),u=o?new Date(o):js();return Math.round((u.getTime()-f.getTime())/(1e3*60))}function Yg(){return Date.now()+Tl.offsetMS}function Xg(i){if(!i)return!1;const o=Dn(i),f=Dn(js());return o===f}function Gg(i=null){const o=i?new Date(i):js(),f=Ys(o),u=new Date(f);u.setHours(0,0,0,0);const g=new Date(f);return g.setHours(23,59,59,999),{startOfDay:u.toISOString(),endOfDay:g.toISOString()}}function Vg(i){if(i<0)return"0 seconds";const o=Math.floor(i/1e3),f=Math.floor(o/60),u=Math.floor(f/60),g=Math.floor(u/24);return g>0?`${g} day${g!==1?"s":""}, ${u%24} hour${u%24!==1?"s":""}`:u>0?`${u} hour${u!==1?"s":""}, ${f%60} minute${f%60!==1?"s":""}`:f>0?`${f} minute${f!==1?"s":""}, ${o%60} second${o%60!==1?"s":""}`:`${o} second${o!==1?"s":""}`}function Zg(i){const o=Ys(i),u=js().getTime()-o.getTime(),g=Math.floor(u/(1e3*60)),_=Math.floor(g/60),T=Math.floor(_/24);return Math.abs(g)<1?"just now":Math.abs(g)<60?g>0?`${g} minutes ago`:`in ${Math.abs(g)} minutes`:Math.abs(_)<24?_>0?`${_} hours ago`:`in ${Math.abs(_)} hours`:Math.abs(T)<7?T>0?`${T} days ago`:`in ${Math.abs(T)} days`:Dn(i)}const Ft={TIMEZONE_CONFIG:Tl,getCurrentSASTTime:js,toSAST:Ys,convertSASTToUTC:zg,formatSASTDateTime:Ug,formatSASTDate:Dn,formatSASTTime:qg,getSASTDateTimeLocal:Lg,getSASTDateOnly:Hg,getCurrentSASTISOString:$g,toSASTDatabaseString:Bg,calculateDurationMinutes:Qg,getSASTTimestamp:Yg,isSASTToday:Xg,getSASTDayRange:Gg,formatDuration:Vg,getSASTRelativeTime:Zg},Kg=i=>{if(!i)return"00:00:00";const o=Ft.toSAST(i).getTime(),f=Ft.getSASTTimestamp(),u=Math.max(0,f-o),g=Math.floor(u/36e5).toString().padStart(2,"0"),_=Math.floor(u%36e5/6e4).toString().padStart(2,"0"),T=Math.floor(u%6e4/1e3).toString().padStart(2,"0");return`${g}:${_}:${T}`},zf=i=>{if(!i.start_time||i.status!=="in_use")return 0;const o=new Date(i.start_time).getTime(),u=(Date.now()-o)/36e5*(i.production_rate||60),g=i.actual_quantity||0;return u>0?Math.min(100,Math.round(g/u*100)):0},Wg=({machine:i,onClick:o})=>{const[f,u]=y.useState(0);y.useEffect(()=>{if(i.status==="in_use"){const j=setInterval(()=>u(b=>b+1),1e3);return()=>clearInterval(j)}},[i.status]);const _={available:{border:"border-green-500",text:"text-green-600",bg:"bg-green-50",icon:a.jsx(Dt,{className:"w-4 h-4"})},in_use:{border:"border-blue-500",text:"text-blue-600",bg:"bg-blue-50",icon:a.jsx(Qa,{className:"w-4 h-4"})},maintenance:{border:"border-yellow-500",text:"text-yellow-600",bg:"bg-yellow-50",icon:a.jsx(St,{className:"w-4 h-4"})},offline:{border:"border-red-500",text:"text-red-600",bg:"bg-red-50",icon:a.jsx(ii,{className:"w-4 h-4"})}}[i.status]||{border:"border-gray-300",text:"text-gray-600",bg:"bg-gray-50",icon:a.jsx(Dt,{className:"w-4 h-4"})},T=zf(i),Y=i.status==="in_use",A=i.order_number;return a.jsx("div",{className:`rounded-xl shadow-sm border-l-4 ${_.border} ${_.bg} hover:shadow-lg transition-all duration-300 ${A?"cursor-pointer":"cursor-default"} transform hover:scale-105 ${A?"relative":""}`,onClick:()=>o&&o(i),children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-800 text-sm truncate",children:i.name}),a.jsx("p",{className:"text-xs text-gray-500",children:i.type})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Y&&T>0&&a.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[T,"%"]}),a.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${_.bg.replace("50","100")} ${_.text}`,children:[_.icon,i.status.replace("_"," ").toUpperCase()]})]})]}),a.jsx("div",{className:"space-y-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg p-2 relative",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 truncate",children:i.order_number}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:i.product_name}),i.order_status==="stopped"&&a.jsx("p",{className:"text-xs text-red-600 font-medium mt-1",children:"STOPPED"})]}),a.jsx(Xa,{className:"w-4 h-4 text-blue-500 flex-shrink-0 ml-2",title:"Click to view order details"})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[a.jsx($t,{className:"w-3 h-3"}),a.jsx("span",{className:"text-lg font-mono",children:Kg(i.start_time)})]}),i.operator&&a.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[a.jsx(Ie,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs truncate max-w-20",children:i.operator})]})]}),T>0&&a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${T>=90?"bg-green-500":T>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(T,100)}%`}})})]}):a.jsx("div",{className:"flex items-center justify-center h-16 text-center",children:a.jsxs("div",{className:"text-gray-400",children:[_.icon,a.jsx("p",{className:"text-xs mt-1",children:i.status.replace("_"," ").toUpperCase()})]})})})]})})},Jg=({machines:i})=>{const o=y.useMemo(()=>{const f=i.length,u=i.filter(A=>A.status==="in_use").length,g=i.filter(A=>A.status==="available").length,_=i.filter(A=>A.status==="maintenance").length,T=i.filter(A=>A.status==="offline").length,Y=u>0?Math.round(i.filter(A=>A.status==="in_use").reduce((A,j)=>A+zf(j),0)/u):0;return{total:f,running:u,available:g,maintenance:_,offline:T,avgEfficiency:Y}},[i]);return a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:o.total})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qa,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Running"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.running})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Available"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.available})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Maintenance"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:o.maintenance})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ii,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Offline"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.offline})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(El,{className:"w-5 h-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Avg Efficiency"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[o.avgEfficiency,"%"]})]})]})})]})},Fg=({isOpen:i,onClose:o,orderId:f,orderNumber:u})=>{const[g,_]=y.useState(null),[T,Y]=y.useState(!1),[A,j]=y.useState(""),[b,ae]=y.useState(0),H=y.useCallback(async()=>{if(!(!f||!i)){Y(!0),j("");try{console.log("Fetching order details for ID:",f);const Q=await le.get("/orders");console.log("Orders response:",Q);const N=(Q.data||Q||[]).find(J=>J.id==f);if(!N)throw new Error(`Order with ID ${f} not found`);let R=[];try{const J=await le.get(`/reports/downtime?order_id=${f}`);if(R=J.records||J.data?.records||[],console.log("Downtime response for order",f,":",J),!Array.isArray(R)||R.length===0){console.log("No stops found for specific order, trying all stops...");const ie=await le.get("/reports/downtime"),$=ie.records||ie.data?.records||[];console.log("All stops:",$),R=Array.isArray($)?$.filter(I=>I.order_id==f):[]}}catch(J){console.log("Downtime endpoint error:",J),R=[]}_({order:N,stops:Array.isArray(R)?R:[]})}catch(Q){console.error("Failed to fetch order details:",Q),j(Q.message||"Failed to load order details")}finally{Y(!1)}}},[f,i]);y.useEffect(()=>{H()},[H]),y.useEffect(()=>{if(i&&g?.stops?.some(Q=>!Q.end_time)){const Q=setInterval(()=>ae(L=>L+1),1e3);return()=>clearInterval(Q)}},[i,g?.stops]);const oe=y.useCallback(Q=>!Q||!Array.isArray(Q)||Q.length===0?0:Q.reduce((L,N)=>{if(N.start_time){const R=new Date(N.start_time).getTime();let J;return N.end_time?J=new Date(N.end_time).getTime():J=Date.now(),L+(J-R)}return L},0),[b]),B=y.useCallback(Q=>{if(!Q||Q===0)return"0m";const L=Math.floor(Q/6e4),N=Math.floor(L/60);return N>0?`${N}h ${L%60}m`:`${L}m`},[]);return i?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm transition-opacity",onClick:o}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:u}),g&&a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${g.order.status==="stopped"?"bg-red-500 text-white":g.order.status==="in_progress"?"bg-blue-500 text-white":g.order.status==="completed"?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:g.order.status.replace("_"," ").toUpperCase()})]}),a.jsx("button",{onClick:o,className:"text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white/20 rounded-full p-1.5 hover:bg-white/10 transition-colors",children:a.jsx(ha,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6",children:[T&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(lt,{className:"w-5 h-5 animate-spin text-gray-400 mr-2"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"Loading..."})]}),A&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(St,{className:"w-4 h-4 text-red-500 mr-2"}),a.jsx("span",{className:"text-red-700 text-sm",children:A})]})}),g&&!T&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:g.order.start_time?Ft.formatSASTTime(g.order.start_time):"--:--"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Started"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:g.order.quantity?.toLocaleString()||"0"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Target Qty"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:(g.order.actual_quantity||0).toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Produced"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs("div",{className:"relative w-8 h-8",children:[a.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-green-500 rounded-full",style:{clipPath:`inset(0 ${100-Math.round((g.order.actual_quantity||0)/g.order.quantity*100)}% 0 0)`}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-xs font-bold text-gray-700",children:[Math.round((g.order.actual_quantity||0)/g.order.quantity*100),"%"]})})]})}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Complete"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-100 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(St,{className:"w-4 h-4 text-orange-500"}),"Downtime Analysis"]}),g.order.status==="stopped"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600 bg-red-100 px-2 py-1 rounded-full",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Active Stop"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:g.stops.length}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Stops"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:B(oe(g.stops))}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Time"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-500",children:g.stops.length>0?B(oe(g.stops)/g.stops.length):"0m"}),a.jsx("div",{className:"text-xs text-gray-600",children:"Avg Duration"})]})]})]}),!g.stops||!Array.isArray(g.stops)||g.stops.length===0?a.jsxs("div",{className:"text-center py-6 text-gray-400",children:[a.jsx($t,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No stops recorded"})]}):a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx($t,{className:"w-4 h-4"}),"Stop History (",g.stops.length,")"]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(g.stops||[]).map((Q,L)=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:border-gray-300 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${Q.end_time?"bg-gray-400":"bg-red-500 animate-pulse"}`}),a.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:Q.reason.replace("_"," ").replace(/\b\w/g,N=>N.toUpperCase())}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Q.category==="Equipment"?"bg-red-100 text-red-700":Q.category==="Material"?"bg-orange-100 text-orange-700":Q.category==="Quality"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:Q.category||"Other"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx("span",{children:Ft.formatSASTTime(Q.start_time)}),Q.end_time&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"→"}),a.jsx("span",{children:Ft.formatSASTTime(Q.end_time)})]})]})]}),a.jsxs("div",{className:"text-right ml-3",children:[a.jsx("div",{className:`text-sm font-bold ${Q.end_time?"text-gray-900":"text-red-600"}`,children:Q.start_time?B(Q.end_time?new Date(Q.end_time).getTime()-new Date(Q.start_time).getTime():Date.now()-new Date(Q.start_time).getTime()):a.jsx("span",{className:"text-orange-500",children:"Unknown"})}),a.jsx("div",{className:"text-xs text-gray-500",children:Q.end_time?"resolved":"active"})]})]})},L))})]})]})]}),a.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-100",children:a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-900 text-white rounded-full hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2",children:"Close"})})})]})]})}):null};function Pg(){const[i,o]=y.useState([]),[f,u]=y.useState(!0),[g,_]=y.useState(new Date),[T,Y]=y.useState(null),[A,j]=y.useState("all"),[b,ae]=y.useState(!1),[H,oe]=y.useState(null),[B,Q]=y.useState(!1),L=y.useCallback(async()=>{try{Y(null);const ie=await le.get("/production/floor-overview");console.log("Production floor overview data:",ie);const $=(ie||[]).filter(I=>I.order_number);console.log("Machines with orders:",$),console.log("All machine statuses:",(ie||[]).map(I=>({name:I.name,status:I.status,order_number:I.order_number,order_id:I.order_id}))),o(ie||[])}catch(ie){console.error("Failed to fetch production data:",ie),Y(ie.message||"Failed to fetch production data")}finally{u(!1),_(new Date),ae(!1)}},[]),N=()=>{ae(!0),L()},R=ie=>{ie.order_id&&ie.order_number?(oe({id:ie.order_id,number:ie.order_number,machineId:ie.id,machineName:ie.name,status:ie.status}),Q(!0)):console.log("Machine clicked (no assigned order):",ie)};y.useEffect(()=>{L();const ie=setInterval(L,5e3);return()=>clearInterval(ie)},[L]);const J=y.useMemo(()=>A==="all"?i:i.filter(ie=>ie.status===A),[i,A]);return f?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(lt,{className:"w-5 h-5 animate-spin"}),"Loading Production Floor Data..."]})}):T?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md mx-auto",children:[a.jsx(St,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),a.jsx("p",{className:"text-red-800 font-medium",children:"Error loading production data"}),a.jsx("p",{className:"text-red-600 text-sm mt-1",children:T}),a.jsx("button",{onClick:N,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Production Floor Monitor"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time production monitoring and machine status"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ri,{className:"w-4 h-4 text-gray-500"}),a.jsxs("select",{value:A,onChange:ie=>j(ie.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Machines"}),a.jsx("option",{value:"in_use",children:"Running"}),a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"offline",children:"Offline"})]})]}),a.jsxs("button",{onClick:N,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[a.jsx(lt,{className:`w-4 h-4 ${b?"animate-spin":""}`}),"Refresh"]})]})]}),a.jsx(Jg,{machines:i}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4",children:J.map(ie=>a.jsx(Wg,{machine:ie,onClick:R},ie.id))}),J.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Dt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No machines found for the selected filter"})]}),a.jsx(Fg,{isOpen:B,onClose:()=>Q(!1),orderId:H?.id,orderNumber:H?.number})]})}function Ig({isOpen:i,onClose:o,order:f,onComplete:u}){const[g,_]=y.useState(!1),[T,Y]=y.useState(""),[A,j]=y.useState(null),[b,ae]=y.useState("production"),[H,oe]=y.useState({actual_quantity:0,notes:""}),[B,Q]=y.useState([{item_type:"Raw Material Scrap",description:"",weight:0,unit:"kg"},{item_type:"Packaging Waste",description:"",weight:0,unit:"kg"},{item_type:"Defective Products",description:"",weight:0,unit:"units"}]),L=y.useCallback(()=>{Q(I=>[...I,{item_type:"",description:"",weight:0,unit:"kg"}])},[]),N=y.useCallback((I,ue,se)=>{Q(X=>X.map((P,Ee)=>Ee===I?{...P,[ue]:se}:P))},[]),R=y.useCallback(I=>{Q(ue=>ue.filter((se,X)=>X!==I))},[]),J=y.useMemo(()=>{const I=f?.quantity>0?Math.round(H.actual_quantity/f.quantity*100):0,ue=B.reduce((X,P)=>X+(P.weight||0),0),se=B.filter(X=>X.weight>0).length;return{completionRate:I,totalWasteWeight:ue,wasteItems:se}},[H,B,f]);if(y.useEffect(()=>{f&&(oe({actual_quantity:f.actual_quantity||f.quantity||0,notes:""}),Y(""),j(null))},[f]),!i||!f)return null;const ie=y.useCallback(()=>{const I=[];return(!H.actual_quantity||H.actual_quantity<=0)&&I.push("Actual quantity must be greater than 0"),H.actual_quantity>f?.quantity*1.2&&I.push("Actual quantity cannot exceed 120% of target quantity"),B.some(se=>se.weight>0&&!se.item_type.trim())&&I.push("All waste items with weight must have a valid item type"),I},[H,B,f]),$=y.useCallback(async I=>{I.preventDefault();const ue=ie();if(ue.length>0){Y(ue.join(". "));return}_(!0),Y(""),j(null);try{const se={...H,completion_time:new Date().toISOString(),waste_data:B.filter(P=>P.weight>0),metrics:{completion_rate:J.completionRate,total_waste_weight:J.totalWasteWeight,waste_items_count:J.wasteItems}},X=await le.post(`/orders/${f.id}/complete`,se);j({type:"success",message:"Production order completed successfully!"}),setTimeout(()=>{u?.(X),o()},1500)}catch(se){const X=se.response?.data?.message||se.message||"Failed to complete order";Y(X),j({type:"error",message:X})}finally{_(!1)}},[H,B,f,J,ie,u,o]);return a.jsx(zt,{title:"Complete Production Order",onClose:o,size:"lg",className:"glass backdrop-blur-xl",children:a.jsxs("div",{className:"space-y-6",children:[T&&a.jsx("div",{className:"p-4 rounded-xl glass border-l-4 border-red-400 text-red-800 hover-lift",role:"alert",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"font-medium",children:T})]})}),A&&a.jsx("div",{className:`p-4 rounded-xl glass border-l-4 hover-lift transition-all duration-500 transform animate-pulse ${A.type==="success"?"border-green-400 text-green-800":"border-red-400 text-red-800"}`,role:"alert",children:a.jsxs("div",{className:"flex items-center gap-2",children:[A.type==="success"?a.jsx(ut,{className:"w-5 h-5 text-green-600"}):a.jsx(St,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"font-medium",children:A.message})]})}),a.jsx(Ne,{className:"p-6 glass hover-lift card-hover gradient-animate",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 float",children:f.order_number}),a.jsx("p",{className:"text-gray-700 font-medium",children:f.product_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Target: ",f.quantity?.toLocaleString()," units"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["Environment: ",f.environment]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Machine: ",f.machine_name||"N/A"]})]})]})}),a.jsx("div",{className:"flex border-b border-gray-200",children:[{id:"production",label:"Production Details",icon:oa},{id:"waste",label:"Waste Tracking",icon:Qs}].map(I=>{const ue=I.icon;return a.jsxs("button",{onClick:()=>ae(I.id),className:`flex items-center gap-2 px-4 py-2 border-b-2 font-medium text-sm transition-all duration-300 hover-lift btn-micro ${b===I.id?"border-purple-500 text-purple-600 glass":"border-transparent text-gray-600 hover:text-gray-800 hover:glass"}`,children:[a.jsx(ue,{className:"w-4 h-4"}),I.label]},I.id)})}),a.jsxs("form",{onSubmit:$,children:[b==="production"&&a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Actual Quantity Produced ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",value:H.actual_quantity,onChange:I=>oe({...H,actual_quantity:parseInt(I.target.value)||0}),className:"w-full px-3 py-2 glass border border-white/20 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300 focus:scale-105",required:!0,min:"0",max:f.quantity*1.2}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",Math.round(f.quantity*1.2)," units (120% of target allowed)"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Notes"}),a.jsx("textarea",{value:H.notes,onChange:I=>oe({...H,notes:I.target.value}),placeholder:"Any additional notes about the production run (quality issues, machine performance, etc.)...",className:"w-full px-3 py-2 glass border border-white/20 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300",rows:"3"})]}),a.jsxs("div",{className:"glass p-3 rounded-lg border border-purple-300/50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx($t,{className:"w-4 h-4 text-purple-600"}),a.jsx("h4",{className:"text-sm font-medium text-gray-800",children:"Completion Time"})]}),a.jsx("p",{className:"text-xs text-gray-600",children:"Order will be marked as completed when you submit this form."}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Current time: ",Ft.formatSASTDateTime(Ft.getCurrentSASTTime())]})]})]})}),b==="waste"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Waste Tracking"}),a.jsxs(xe,{type:"button",onClick:L,variant:"outline",size:"sm",className:"hover-lift btn-micro glass border-white/20",children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Waste Item"]})]}),a.jsx("div",{className:"space-y-3",children:B.map((I,ue)=>a.jsx("div",{className:"bg-white p-4 rounded border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-5 gap-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Type"}),a.jsxs("select",{value:I.item_type,onChange:se=>N(ue,"item_type",se.target.value),className:"w-full px-2 py-2 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"FP",children:"FP"}),a.jsx("option",{value:"BP",children:"BP"}),a.jsx("option",{value:"PM",children:"PM"}),a.jsx("option",{value:"RM",children:"RM"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Description"}),a.jsx("input",{type:"text",value:I.description,onChange:se=>N(ue,"description",se.target.value),placeholder:"Description",className:"w-full px-2 py-2 border border-gray-300 rounded text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Weight"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("input",{type:"number",step:"0.01",value:I.weight,onChange:se=>N(ue,"weight",parseFloat(se.target.value)||0),className:"flex-1 px-2 py-2 border border-gray-300 rounded text-sm",placeholder:"0.00"}),a.jsxs("select",{value:I.unit,onChange:se=>N(ue,"unit",se.target.value),className:"w-16 px-1 py-2 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"tons",children:"tons"}),a.jsx("option",{value:"units",children:"units"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"m³",children:"m³"}),a.jsx("option",{value:"m",children:"m"})]})]})]}),a.jsx("div",{children:a.jsx(xe,{type:"button",onClick:()=>R(ue),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",disabled:B.length===1,children:a.jsx(Qs,{className:"w-4 h-4"})})})]})},ue))}),B.some(I=>I.weight>0)&&a.jsxs(Ne,{className:"p-3 glass hover-lift status-pending",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(oa,{className:"w-4 h-4 text-yellow-600"}),a.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Waste Summary"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-yellow-700",children:"Total Material Weight:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[J.totalWasteWeight?.toFixed(2)," kg"]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-yellow-700",children:"Waste Items:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[J.wasteItems," recorded"]})]})]}),a.jsx("div",{className:"mt-2 p-2 glass rounded-lg border border-yellow-300/50",children:a.jsxs("p",{className:"text-xs text-yellow-700",children:[a.jsx(St,{className:"w-3 h-3 inline mr-1"}),"Waste tracking helps optimize material usage."]})})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsxs(xe,{type:"button",onClick:o,variant:"outline",disabled:g,className:"hover-lift btn-micro glass border-white/20",children:[a.jsx(ha,{className:"w-4 h-4 mr-2"}),"Cancel"]}),a.jsxs(xe,{type:"submit",disabled:g||H.actual_quantity<=0,className:`bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white border-0 hover-lift btn-micro ${g?"opacity-50 cursor-not-allowed":""}`,children:[g&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!g&&a.jsx(ut,{className:"w-4 h-4 mr-2"}),g?"Completing...":"Complete Production"]})]})]})]})})}function ep(){const[i,o]=y.useState([]),[f,u]=y.useState([]),[g,_]=y.useState([]),[T,Y]=y.useState(!0),[A,j]=y.useState(!1),[b,ae]=y.useState("all"),[H,oe]=y.useState("all"),[B,Q]=y.useState(""),[L,N]=y.useState(null),[R,J]=y.useState(!1),[ie,$]=y.useState(!1),[I,ue]=y.useState(!1),[se,X]=y.useState(!1),[P,Ee]=y.useState(!1),[re,we]=y.useState(null),[ce,w]=y.useState(""),[p,k]=y.useState(""),[E,V]=y.useState(0),[m,q]=y.useState({order_number:"",product_name:"",quantity:"",environment:"",priority:"normal",due_date:"",notes:""}),Z=(D,fe="success")=>{N({message:D,type:fe}),setTimeout(()=>N(null),3e3)},ee=async(D=!1)=>{D?j(!0):Y(!0);try{const[fe,Xe,He]=await Promise.all([le.get("/orders"),le.get("/machines"),le.get("/environments").catch(()=>[])]);o(fe),u(Xe),_(He)}catch(fe){console.error("Failed to load data:",fe),Z("Failed to load orders","danger")}finally{Y(!1),j(!1)}},ne=()=>{ee(!0)};y.useEffect(()=>{ee();const D=setInterval(ee,3e4);return()=>clearInterval(D)},[]);const ye=async D=>{D.preventDefault();try{await le.post("/orders",m),J(!1),q({order_number:"",product_name:"",quantity:"",environment:"",priority:"normal",due_date:"",notes:""}),ee(),Z("Order created successfully")}catch(fe){Z("Failed to create order: "+fe.message,"danger")}},me=async()=>{if(!ce){Z("Please select a machine","warning");return}try{await le.post(`/orders/${re.id}/start`,{machine_id:ce}),$(!1),w(""),ee(),Z("Production started successfully")}catch(D){Z("Failed to start production: "+D.message,"danger")}},Oe=async()=>{if(!p.trim()){Z("Please enter a reason for stopping","warning");return}try{await le.post(`/orders/${re.id}/stop`,{reason:p}),X(!1),k(""),ee(),Z("Production stopped successfully")}catch(D){Z("Failed to stop production: "+D.message,"danger")}},be=async D=>{if(D.preventDefault(),E<0||E>re.quantity){Z("Invalid quantity entered","warning");return}Y(!0);try{const fe=await le.patch(`/orders/${re.id}/quantity`,{actual_quantity:E,notes:`Updated from ${re.actual_quantity||0} to ${E} by operator`});fe.shiftType&&fe.quantityChange!==void 0?Z(`Quantity updated: ${fe.quantityChange>0?"+":""}${fe.quantityChange} units (${fe.shiftType} shift)`,"success"):Z("Quantity updated successfully"),Ee(!1),V(0),ee()}catch(fe){Z("Failed to update quantity: "+fe.message,"danger")}finally{Y(!1)}},Be=async D=>{try{await le.post(`/orders/${D}/resume`),ee(),Z("Production resumed successfully")}catch(fe){Z("Failed to resume production: "+fe.message,"danger")}},Ye=async D=>{if(window.confirm("Are you sure you want to delete this order?"))try{await le.delete(`/orders/${D}`),ee(),Z("Order deleted successfully")}catch(fe){Z("Failed to delete order: "+fe.message,"danger")}},et=y.useMemo(()=>{let D=i;return b!=="all"&&(D=D.filter(fe=>fe.environment===b)),H!=="all"&&(D=D.filter(fe=>fe.status===H)),B&&(D=D.filter(fe=>fe.order_number.toLowerCase().includes(B.toLowerCase())||fe.product_name.toLowerCase().includes(B.toLowerCase()))),D},[i,b,H,B]),$e=y.useMemo(()=>{const D=i.length,fe=i.filter(tt=>tt.status==="pending").length,Xe=i.filter(tt=>tt.status==="in_progress").length,He=i.filter(tt=>tt.status==="completed").length,Re=i.filter(tt=>tt.status==="stopped").length,Et=i.reduce((tt,ga)=>tt+(parseInt(ga.quantity)||0),0),On=i.filter(tt=>tt.status==="completed").reduce((tt,ga)=>tt+(parseInt(ga.actual_quantity||ga.quantity)||0),0),Dl=D>0?Math.round(He/D*100):0;return{total:D,pending:fe,inProgress:Xe,completed:He,stopped:Re,totalQuantity:Et,completedQuantity:On,completionRate:Dl}},[i]),h=D=>{const Xe={pending:{variant:"default",icon:$t},in_progress:{variant:"info",icon:Qa},completed:{variant:"success",icon:ut},stopped:{variant:"danger",icon:Fr}}[D]||{variant:"default",icon:St},He=Xe.icon;return a.jsxs(dt,{variant:Xe.variant,children:[a.jsx(He,{className:"w-3 h-3 mr-1"}),D?D.replace("_"," ").toUpperCase():"UNKNOWN"]})},W=D=>{const fe={low:"default",normal:"info",high:"warning",urgent:"danger"};return a.jsx(dt,{variant:fe[D]||"default",size:"sm",children:D?.toUpperCase()||"NORMAL"})},Me=()=>a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsx(Ne,{className:"p-4 glass hover-lift card-hover",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(oa,{className:"w-6 h-6 text-blue-600 float"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Orders"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:$e.total})]})]})}),a.jsx(Ne,{className:"p-4 glass hover-lift card-hover",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx($t,{className:"w-6 h-6 text-orange-600 float",style:{animationDelay:"1s"}}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600 status-pending rounded px-2",children:$e.pending})]})]})}),a.jsx(Ne,{className:"p-4 glass hover-lift card-hover",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qa,{className:"w-6 h-6 text-blue-600 float",style:{animationDelay:"2s"}}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600 status-progress rounded px-2",children:$e.inProgress})]})]})}),a.jsx(Ne,{className:"p-4 glass hover-lift card-hover",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Fr,{className:"w-6 h-6 text-red-600 float",style:{animationDelay:"3s"}}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Stopped"}),a.jsx("p",{className:"text-2xl font-bold text-red-600 status-stopped rounded px-2",children:$e.stopped})]})]})})]});return T&&i.length===0?a.jsx("div",{className:"p-6 text-center min-h-screen gradient-animate flex items-center justify-center",children:a.jsx("div",{className:"glass p-8 rounded-2xl shadow-2xl",children:a.jsxs("div",{className:"flex items-center justify-center gap-3 text-white",children:[a.jsx(lt,{className:"w-8 h-8 animate-spin"}),a.jsx("span",{className:"text-lg font-medium shimmer",children:"Loading orders..."})]})})}):a.jsxs("div",{className:"p-6 space-y-6 min-h-screen gradient-animate",children:[L&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-xl shadow-2xl z-50 glass backdrop-blur-xl hover-lift transition-all duration-500 transform animate-pulse ${L.type==="success"?"border-l-4 border-green-400 text-green-800":L.type==="danger"?"border-l-4 border-red-400 text-red-800":L.type==="warning"?"border-l-4 border-yellow-400 text-yellow-800":"border-l-4 border-blue-400 text-blue-800"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[L.type==="success"&&a.jsx(ut,{className:"w-5 h-5 text-green-600"}),L.type==="danger"&&a.jsx(St,{className:"w-5 h-5 text-red-600"}),L.type==="warning"&&a.jsx(St,{className:"w-5 h-5 text-yellow-600"}),L.type!=="success"&&L.type!=="danger"&&L.type!=="warning"&&a.jsx(oa,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"font-medium",children:L.message})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{className:"float",children:[a.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Production Orders"}),a.jsx("p",{className:"text-white/80 text-sm mb-4 backdrop-blur-sm",children:"Manage production orders and track progress"}),a.jsxs(xe,{onClick:()=>J(!0),className:"hover-lift btn-micro bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 shadow-lg",children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Order"]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search orders...",value:B,onChange:D=>Q(D.target.value),className:"w-64 pl-10 pr-4 py-2 glass border border-white/20 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 focus:scale-105"})]}),a.jsx(xe,{onClick:ne,disabled:A,variant:"outline",size:"sm",className:"hover-lift btn-micro glass border-white/20 text-gray-700 hover:bg-white/20",children:a.jsx(lt,{className:`w-4 h-4 ${A?"animate-spin":""}`})})]})]}),a.jsx(Me,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 glass p-4 rounded-lg shadow-lg hover-lift",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{value:b,onChange:D=>ae(D.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white",children:[a.jsx("option",{value:"all",children:"All Environments"}),g.map(D=>a.jsx("option",{value:D.code,children:D.name},D.id))]})]}),a.jsxs("select",{value:H,onChange:D=>oe(D.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"stopped",children:"Stopped"})]})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",et.length," of ",i.length," orders"]})]}),a.jsx(Ne,{className:"glass hover-lift shadow-2xl",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Order #","Product","Qty","Environment","Status","Machine","Actions"].map(D=>a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:D},D))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center py-10",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(lt,{className:"w-8 h-8 animate-spin text-blue-600"}),a.jsx("span",{className:"text-gray-600 shimmer",children:"Loading orders..."})]})})}):et.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"7",className:"text-center py-10",children:[a.jsx(oa,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No orders found"}),!B&&b==="all"&&H==="all"?a.jsxs(xe,{onClick:()=>J(!0),size:"sm",children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create First Order"]}):a.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your filters or search term"})]})}):et.map(D=>a.jsxs("tr",{className:"hover:bg-white/50 transition-all duration-300 hover:shadow-md",children:[a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.order_number}),D.priority!=="normal"&&a.jsx("div",{className:"text-xs text-gray-500",children:W(D.priority)})]}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:D.product_name}),D.notes&&a.jsx("div",{className:"text-xs text-gray-500 truncate max-w-32",children:D.notes})]}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:D.actual_quantity?`${D.actual_quantity}/${D.quantity}`:D.quantity}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600 capitalize",children:D.environment}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:h(D.status)}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-600",children:D.machine_name||"-"}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:a.jsxs("div",{className:"flex gap-1",children:[D.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx(xe,{onClick:()=>{we(D),$(!0)},size:"sm",variant:"outline",className:"text-blue-600 hover:text-blue-700 hover-lift btn-micro",children:a.jsx(Qa,{className:"w-3 h-3"})}),a.jsx(xe,{onClick:()=>Ye(D.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover-lift btn-micro",children:a.jsx(Qs,{className:"w-3 h-3"})})]}),D.status==="in_progress"&&a.jsxs(a.Fragment,{children:[a.jsx(xe,{onClick:()=>{we(D),V(D.actual_quantity||0),Ee(!0)},size:"sm",variant:"outline",className:"text-blue-600 hover:text-blue-700 hover-lift btn-micro",title:"Update Quantity",children:a.jsx(bs,{className:"w-3 h-3"})}),a.jsx(xe,{onClick:()=>{we(D),X(!0)},size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700 hover-lift btn-micro",title:"Stop Production",children:a.jsx(Fr,{className:"w-3 h-3"})}),a.jsx(xe,{onClick:()=>{we(D),ue(!0)},size:"sm",variant:"outline",className:"text-green-600 hover:text-green-700 hover-lift btn-micro",title:"Complete Order",children:a.jsx(ut,{className:"w-3 h-3"})})]}),D.status==="stopped"&&a.jsx(xe,{onClick:()=>Be(D.id),size:"sm",variant:"outline",className:"text-blue-600 hover:text-blue-700 hover-lift btn-micro btn-pulse",title:"Resume Production",children:a.jsx(Qa,{className:"w-3 h-3"})})]})})]},D.id))})]})})}),R&&a.jsx(zt,{title:"Create New Order",onClose:()=>J(!1),className:"glass backdrop-blur-xl",children:a.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Number"}),a.jsx("input",{type:"text",placeholder:"e.g. ORD-2024-001",value:m.order_number,onChange:D=>q({...m,order_number:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),a.jsxs("select",{value:m.environment,onChange:D=>q({...m,environment:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Environment"}),g.map(D=>a.jsx("option",{value:D.code,children:D.name},D.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name"}),a.jsx("input",{type:"text",placeholder:"Product name",value:m.product_name,onChange:D=>q({...m,product_name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),a.jsx("input",{type:"number",placeholder:"1000",value:m.quantity,onChange:D=>q({...m,quantity:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),a.jsxs("select",{value:m.priority,onChange:D=>q({...m,priority:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"urgent",children:"Urgent"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date (Optional)"}),a.jsx("input",{type:"date",value:m.due_date,onChange:D=>q({...m,due_date:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),a.jsx("textarea",{placeholder:"Additional notes or instructions",value:m.notes,onChange:D=>q({...m,notes:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(xe,{type:"button",onClick:()=>J(!1),variant:"outline",children:"Cancel"}),a.jsxs(xe,{type:"submit",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white border-0 hover-lift btn-micro",children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Create Order"]})]})]})}),ie&&re&&a.jsx(zt,{title:"Start Production",onClose:()=>$(!1),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-blue-900",children:"Order Details"}),a.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:[a.jsx("span",{className:"font-medium",children:re.order_number})," - ",re.product_name]}),a.jsxs("p",{className:"text-sm text-blue-600",children:["Quantity: ",re.quantity," | Environment: ",re.environment]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Machine"}),a.jsxs("select",{value:ce,onChange:D=>w(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Choose an available machine..."}),f.filter(D=>D.environment===re.environment&&D.status==="available").map(D=>a.jsxs("option",{value:D.id,children:[D.name," (",D.type,") - Capacity: ",D.capacity]},D.id))]}),f.filter(D=>D.environment===re.environment&&D.status==="available").length===0&&a.jsxs("p",{className:"text-sm text-red-600 mt-2",children:[a.jsx(St,{className:"w-4 h-4 inline mr-1"}),"No available machines in ",re.environment," environment"]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(xe,{type:"button",onClick:()=>$(!1),variant:"outline",children:"Cancel"}),a.jsxs(xe,{onClick:me,disabled:!ce,className:"bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white border-0 hover-lift btn-micro",children:[a.jsx(Qa,{className:"w-4 h-4 mr-2"}),"Start Production"]})]})]})}),se&&re&&a.jsx(zt,{title:"Stop Production",onClose:()=>X(!1),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-red-900",children:"Order Details"}),a.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[a.jsx("span",{className:"font-medium",children:re.order_number})," - ",re.product_name]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Stopping"}),a.jsxs("select",{value:p,onChange:D=>k(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-3",required:!0,children:[a.jsx("option",{value:"",children:"Select stop reason..."}),a.jsx("option",{value:"machine_breakdown",children:"Machine Breakdown"}),a.jsx("option",{value:"material_shortage",children:"Material Shortage"}),a.jsx("option",{value:"quality_issue",children:"Quality Issue"}),a.jsx("option",{value:"operator_break",children:"Operator Break"}),a.jsx("option",{value:"shift_change",children:"Shift Change"}),a.jsx("option",{value:"maintenance",children:"Scheduled Maintenance"}),a.jsx("option",{value:"safety_incident",children:"Safety Incident"}),a.jsx("option",{value:"power_outage",children:"Power Outage"}),a.jsx("option",{value:"other",children:"Other"})]}),p&&a.jsx("textarea",{placeholder:"Additional details about the stop reason...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(xe,{type:"button",onClick:()=>X(!1),variant:"outline",children:"Cancel"}),a.jsxs(xe,{onClick:Oe,disabled:!p.trim(),className:"bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white border-0 hover-lift btn-micro",children:[a.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Stop Production"]})]})]})}),I&&re&&a.jsx(Ig,{isOpen:I,onClose:()=>ue(!1),order:re,onComplete:()=>{ue(!1),ee(),Z("Order completed successfully")}}),P&&re&&a.jsx(zt,{title:"Update Production Quantity",onClose:()=>Ee(!1),children:a.jsxs("form",{onSubmit:be,className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-medium text-blue-900",children:"Order Details"}),a.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:[a.jsx("span",{className:"font-medium",children:re.order_number})," - ",re.product_name]}),a.jsxs("div",{className:"flex justify-between mt-2 text-sm",children:[a.jsxs("span",{children:["Target Quantity: ",a.jsx("span",{className:"font-medium",children:re.quantity})]}),a.jsxs("span",{children:["Current: ",a.jsx("span",{className:"font-medium",children:re.actual_quantity||0})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Update Produced Quantity"}),a.jsx("input",{type:"number",min:"0",max:re.quantity,value:E,onChange:D=>V(parseInt(D.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current produced quantity",required:!0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Enter the total quantity produced so far (0 to ",re.quantity,")"]})]}),a.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[a.jsx(bs,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Real-time Tracking:"}),a.jsx("span",{children:"Updates are automatically tracked by shift and recorded with timestamp"})]})}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(xe,{type:"button",onClick:()=>Ee(!1),variant:"outline",children:"Cancel"}),a.jsxs(xe,{type:"submit",disabled:T||E<0||E>re.quantity,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white border-0 hover-lift btn-micro",children:[a.jsx(bs,{className:"w-4 h-4 mr-2"}),T?a.jsxs(a.Fragment,{children:[a.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Update Quantity"]})]})]})})]})}const Uf=i=>i?i.toLowerCase().replace(/\b\w/g,o=>o.toUpperCase()):"",ci=i=>{if(!i)return"Unknown";const o=i.fullName||i.username||"Unknown";return Uf(o)},qf=i=>i?i.toUpperCase():"N/A",tp=i=>i?{hopper:"Hopper Loader",operator:"Operator","operator(ar)":"Operator(AR)",packer:"Packer",supervisor:"Supervisor",admin:"Administrator"}[i.toLowerCase()]||Uf(i):"N/A";function ap(){const[i,o]=y.useState([]),[f,u]=y.useState([]),[g,_]=y.useState(!0),[T,Y]=y.useState(!1),[A,j]=y.useState("all"),[b,ae]=y.useState(""),[H,oe]=y.useState("all"),[B,Q]=y.useState(null),[L,N]=y.useState(!1),[R,J]=y.useState(!1),[ie,$]=y.useState(!1),[I,ue]=y.useState(null),[se,X]=y.useState({name:"",type:"",environment:"",capacity:100,production_rate:60,shift_cycle_enabled:!1,cycle_start_date:"",operators_per_shift:2,hopper_loaders_per_shift:1,packers_per_shift:3}),[P,Ee]=y.useState([{letter:"A",offset:0,employees:[]},{letter:"B",offset:2,employees:[]},{letter:"C",offset:4,employees:[]}]),[re,we]=y.useState([]),[ce,w]=y.useState(!1);y.useEffect(()=>{f.length>0&&!se.environment&&X(h=>({...h,environment:f[0].code}))},[f,se.environment]);const p=y.useMemo(()=>{const h={};return f.forEach(W=>{if(W.machine_types)try{h[W.code]=typeof W.machine_types=="string"?JSON.parse(W.machine_types):W.machine_types}catch(Me){console.error("Failed to parse machine types for environment:",W.name,Me),h[W.code]=[]}else h[W.code]=[]}),h},[f]),k={available:{bg:"bg-green-50",text:"text-green-600",border:"border-green-200",icon:ut},in_use:{bg:"bg-blue-50",text:"text-blue-600",border:"border-blue-200",icon:Dt},maintenance:{bg:"bg-yellow-50",text:"text-yellow-600",border:"border-yellow-200",icon:ni},offline:{bg:"bg-red-50",text:"text-red-600",border:"border-red-200",icon:_f}},E=(h,W="success")=>{Q({message:h,type:W}),setTimeout(()=>Q(null),3e3)},V=async()=>{try{const h=await le.get("/environments");u(h)}catch(h){console.error("Failed to load environments:",h),E("Failed to load environments","danger")}},m=async(h=!1)=>{h?Y(!0):_(!0);try{const W=await le.get("/machines");o(W)}catch(W){console.error("Failed to load machines:",W),E("Failed to load machines","danger")}finally{_(!1),Y(!1)}},q=async()=>{w(!0);try{const W=(await le.get("/users")).map(Me=>({id:Me.id,name:ci(Me),employee_code:qf(Me.employee_code)||`EMP${Me.id.toString().padStart(3,"0")}`,role:Me.role,is_active:Me.is_active})).filter(Me=>Me.is_active!==!1);we(W)}catch(h){console.error("Failed to load employees:",h),console.error("Error details:",h.message,h.response),we([]),h.message.includes("unauthorized")||h.message.includes("Session expired")?E("Please log in to manage crew assignments","danger"):E(`Failed to load employees: ${h.message}. You can still configure shift cycles without employee assignments.`,"danger")}finally{w(!1)}},Z=async h=>{try{const W=await le.get(`/machines/${h}/crews`);W.length>0?Ee(W):Ee([{letter:"A",offset:0,employees:[]},{letter:"B",offset:2,employees:[]},{letter:"C",offset:4,employees:[]}])}catch(W){console.error("Failed to load crews:",W)}},ee=()=>{m(!0)},ne=async h=>{try{await le.post(`/machines/${h}/crews`,P),E("Crew assignments saved successfully")}catch(W){console.error("Failed to save crew assignments:",W),E("Failed to save crew assignments: "+(W.message||"Unknown error"),"danger")}};y.useEffect(()=>{V(),m(),q();const h=setInterval(m,3e4);return()=>clearInterval(h)},[]);const ye=async h=>{h.preventDefault();try{await le.post("/machines",se),N(!1),m(),E("Machine added successfully")}catch(W){E("Failed to add machine: "+(W.message||"Unknown error"),"danger")}},me=async h=>{h.preventDefault();try{await le.put(`/machines/${I.id}`,se),se.shift_cycle_enabled&&await ne(I.id),J(!1),m(),E("Machine updated successfully")}catch(W){E("Failed to update machine: "+(W.message||"Unknown error"),"danger")}},Oe=async h=>{if(window.confirm("Are you sure you want to delete this machine?"))try{await le.delete(`/machines/${h}`),m(),E("Machine deleted successfully")}catch(W){E("Failed to delete machine: "+(W.message||"Unknown error"),"danger")}},be=async h=>{try{await le.patch(`/machines/${I.id}/status`,{status:h}),$(!1),m(),E(`Machine status changed to ${h}`)}catch(W){E("Failed to update status: "+(W.message||"Unknown error"),"danger")}},Be=y.useMemo(()=>{let h=i;return A!=="all"&&(h=h.filter(W=>W.environment===A)),H!=="all"&&(h=h.filter(W=>W.status===H)),b&&(h=h.filter(W=>W.name.toLowerCase().includes(b.toLowerCase())||W.type.toLowerCase().includes(b.toLowerCase()))),h},[i,A,H,b]),Ye=y.useMemo(()=>{const h=i.length,W=i.filter(He=>He.status==="available").length,Me=i.filter(He=>He.status==="in_use").length,D=i.filter(He=>He.status==="maintenance").length,fe=i.filter(He=>He.status==="offline").length,Xe=h>0?Math.round(Me/h*100):0;return{total:h,available:W,inUse:Me,maintenance:D,offline:fe,utilizationRate:Xe}},[i]),et=h=>{const Me=(k[h]||k.offline).icon;return a.jsxs(dt,{variant:h==="available"?"success":h==="in_use"?"info":h==="maintenance"?"warning":"danger",children:[a.jsx(Me,{className:"w-3 h-3 mr-1"}),h.replace("_"," ").toUpperCase()]})},$e=()=>a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jt,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Ye.total})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ut,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Available"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ye.available})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"In Use"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Ye.inUse})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ni,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Maintenance"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Ye.maintenance})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_f,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Offline"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:Ye.offline})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"w-5 h-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Utilization"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Ye.utilizationRate,"%"]})]})]})})]});return g&&i.length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(lt,{className:"w-5 h-5 animate-spin"}),"Loading machines..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[B&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${B.type==="success"?"bg-green-100 text-green-800 border border-green-200":B.type==="danger"?"bg-red-100 text-red-800 border border-red-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:B.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Machine Management"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage manufacturing equipment and monitor status"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(xe,{onClick:ee,disabled:T,variant:"outline",children:[a.jsx(lt,{className:`w-4 h-4 mr-2 ${T?"animate-spin":""}`}),"Refresh"]}),a.jsxs(xe,{onClick:()=>{X({name:"",type:"",environment:"blending",capacity:100,production_rate:60}),N(!0)},children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Machine"]})]})]}),a.jsx($e,{}),a.jsx(Ne,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search machines...",value:b,onChange:h=>ae(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{value:A,onChange:h=>j(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[a.jsx("option",{value:"all",children:"All Environments"}),f.map(h=>a.jsx("option",{value:h.code,children:h.name},h.id))]})]}),a.jsx("div",{children:a.jsxs("select",{value:H,onChange:h=>oe(h.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"in_use",children:"In Use"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"offline",children:"Offline"})]})}),a.jsx("div",{className:"flex items-center justify-center md:justify-start",children:a.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",Be.length," of ",i.length," machines"]})})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Be.map(h=>{const W=k[h.status]||k.offline,Me=W.icon;return a.jsxs(Ne,{className:`p-6 border-l-4 ${W.border} hover:shadow-lg transition-all duration-300`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:h.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:h.type}),a.jsxs("p",{className:"text-xs text-gray-400 capitalize",children:[h.environment," Environment"]})]}),et(h.status)]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Capacity:"}),a.jsx("span",{className:"font-medium",children:h.capacity})]}),h.production_rate&&a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Rate:"}),a.jsxs("span",{className:"font-medium",children:[h.production_rate,"/hr"]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(xe,{onClick:()=>{ue(h),$(!0)},variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(Me,{className:"w-4 h-4 mr-1"}),"Status"]}),a.jsx(xe,{onClick:async()=>{ue(h),X({...h,shift_cycle_enabled:h.shift_cycle_enabled||!1,cycle_start_date:h.cycle_start_date||"",operators_per_shift:h.operators_per_shift==null?"":h.operators_per_shift,hopper_loaders_per_shift:h.hopper_loaders_per_shift==null?"":h.hopper_loaders_per_shift,packers_per_shift:h.packers_per_shift==null?"":h.packers_per_shift}),await Z(h.id),J(!0)},variant:"outline",size:"sm",children:a.jsx(si,{className:"w-4 h-4"})}),h.status!=="in_use"&&a.jsx(xe,{onClick:()=>Oe(h.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",children:a.jsx(Qs,{className:"w-4 h-4"})})]})]},h.id)})}),Be.length===0&&a.jsxs(Ne,{className:"p-12 text-center",children:[a.jsx(Jt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No machines found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:b||A!=="all"||H!=="all"?"Try adjusting your filters or search term":"Get started by adding your first machine"}),!b&&A==="all"&&H==="all"&&a.jsxs(xe,{onClick:()=>{X({name:"",type:"",environment:"blending",capacity:100,production_rate:60}),N(!0)},children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add First Machine"]})]}),L&&a.jsx(zt,{title:"Add New Machine",onClose:()=>N(!1),children:a.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Name"}),a.jsx("input",{type:"text",placeholder:"Enter machine name",value:se.name,onChange:h=>X({...se,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),a.jsxs("select",{value:se.environment,onChange:h=>X({...se,environment:h.target.value,type:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Environment"}),f.map(h=>a.jsx("option",{value:h.code,children:h.name},h.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type"}),a.jsxs("select",{value:se.type,onChange:h=>X({...se,type:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select machine type..."}),(p[se.environment]||[]).map(h=>a.jsx("option",{value:h,children:h},h))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),a.jsx("input",{type:"number",placeholder:"100",value:se.capacity,onChange:h=>X({...se,capacity:parseInt(h.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Rate (/hr)"}),a.jsx("input",{type:"number",placeholder:"60",value:se.production_rate,onChange:h=>X({...se,production_rate:parseInt(h.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(xe,{type:"button",onClick:()=>N(!1),variant:"outline",children:"Cancel"}),a.jsxs(xe,{type:"submit",children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Machine"]})]})]})}),R&&I&&a.jsx(zt,{title:"Edit Machine",onClose:()=>J(!1),children:a.jsxs("form",{onSubmit:me,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Name"}),a.jsx("input",{type:"text",placeholder:"Machine Name",value:se.name,onChange:h=>X({...se,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),a.jsxs("select",{value:se.environment,onChange:h=>X({...se,environment:h.target.value,type:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Environment"}),f.map(h=>a.jsx("option",{value:h.code,children:h.name},h.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Changing environment will reset the machine type"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type"}),a.jsx("select",{value:se.type,onChange:h=>X({...se,type:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:(p[se.environment]||[]).map(h=>a.jsx("option",{value:h,children:h},h))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),a.jsx("input",{type:"number",placeholder:"Capacity",value:se.capacity,onChange:h=>X({...se,capacity:parseInt(h.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Rate (/hr)"}),a.jsx("input",{type:"number",placeholder:"Production Rate",value:se.production_rate||"",onChange:h=>X({...se,production_rate:parseInt(h.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"border-t pt-6 mt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Ie,{className:"w-5 h-5 text-blue-600"}),"Workforce Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:[a.jsx(Jt,{className:"w-4 h-4 inline mr-1"}),"Operators per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"10",value:se.operators_per_shift??2,onChange:h=>{const W=h.target.value===""?"":Math.max(0,parseInt(h.target.value)||0);X({...se,operators_per_shift:W})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Machine operators needed • Blank = N/A, 0 = Automated"})]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-orange-800 mb-2",children:[a.jsx(Na,{className:"w-4 h-4 inline mr-1"}),"Hopper Loaders per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"5",value:se.hopper_loaders_per_shift??1,onChange:h=>{const W=h.target.value===""?"":Math.max(0,parseInt(h.target.value)||0);X({...se,hopper_loaders_per_shift:W})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Material handling staff • Blank = N/A, 0 = Automated"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-green-800 mb-2",children:[a.jsx(ut,{className:"w-4 h-4 inline mr-1"}),"Packers per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"15",value:se.packers_per_shift??3,onChange:h=>{const W=h.target.value===""?"":Math.max(0,parseInt(h.target.value)||0);X({...se,packers_per_shift:W})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Packaging staff needed • Blank = N/A, 0 = Automated"})]})]}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Total Workforce per Shift"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Combined staffing requirement"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(()=>{const h=se.operators_per_shift===""?0:se.operators_per_shift??2,W=se.hopper_loaders_per_shift===""?0:se.hopper_loaders_per_shift??1,Me=se.packers_per_shift===""?0:se.packers_per_shift??3;return h+W+Me})()}),a.jsx("div",{className:"text-sm text-gray-500",children:"people"})]})]})}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(_o,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"font-semibold text-gray-900",children:"2-2-2 Shift Cycle"}),a.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"Advanced"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Automatic crew rotation with continuous coverage"}),a.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"Configure detailed scheduling in Labor Planner →"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"shift_cycle_enabled",checked:se.shift_cycle_enabled||!1,onChange:h=>X({...se,shift_cycle_enabled:h.target.checked}),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"shift_cycle_enabled",className:"text-sm font-medium text-gray-700",children:"Enable"})]})]}),se.shift_cycle_enabled&&a.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border border-indigo-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ya,{className:"w-8 h-8 text-indigo-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Shift Cycle Enabled"}),a.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Configure detailed crew assignments and schedules in the Labor Planner"}),a.jsx("button",{type:"button",onClick:()=>window.location.href="/labor-planner",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:"Open Labor Planner →"})]})})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(xe,{type:"button",onClick:()=>J(!1),variant:"outline",children:"Cancel"}),a.jsxs(xe,{type:"submit",children:[a.jsx(si,{className:"w-4 h-4 mr-2"}),"Update Machine"]})]})]})}),ie&&I&&a.jsx(zt,{title:"Change Machine Status",onClose:()=>$(!1),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:I.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Current status: ",et(I.status)]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(k).map(([h,W])=>{const Me=W.icon;return a.jsxs(xe,{onClick:()=>be(h),variant:I.status===h?"default":"outline",className:`${W.bg} ${W.text} border-2 ${W.border} h-16 flex flex-col items-center justify-center`,disabled:I.status===h,children:[a.jsx(Me,{className:"w-5 h-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:h.replace("_"," ").toUpperCase()})]},h)})}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx(xe,{onClick:()=>$(!1),variant:"outline",children:"Cancel"})})]})})]})}function sp(){const[i,o]=y.useState({orders:[],machines:[],assignments:[],employees:[],summary:{},archivedOrders:[]}),[f,u]=y.useState(!0),[g,_]=y.useState(!1),[T,Y]=y.useState(null),[A,j]=y.useState("overview"),[b,ae]=y.useState([]),[H,oe]=y.useState(null),[B,Q]=y.useState(!1),[L,N]=y.useState(()=>{const w=new Date,p=w.getFullYear(),k=w.getMonth()+1,E=`${p}-${k.toString().padStart(2,"0")}-01`,V=w.toISOString().split("T")[0];return{start_date:E,end_date:V}}),R=(w,p="success")=>{Y({message:w,type:p}),setTimeout(()=>Y(null),3e3)},J=async(w=!1)=>{w?_(!0):u(!0);try{const p=`${L.start_date}T00:00:00`,k=`${L.end_date}T23:59:59`,E=new URLSearchParams({start_date:p,end_date:k}).toString(),[V,m,q,Z,ee,ne,ye]=await Promise.all([le.get("/orders"),le.get("/machines"),le.get(`/analytics/summary?${E}`),le.get(`/analytics/downtime?${E}`),le.get(`/reports/downtime?${E}`),le.get("/users"),le.get(`/planner/assignments?date=${L.end_date}`)]);o({orders:V||[],machines:m||[],employees:ne||[],assignments:ye||[],summary:q?.summary||{},downtime:Z||{},downtimeRecords:ee?.records||[],downtimeSummary:ee?.summary||{},categoryBreakdown:ee?.category_breakdown||{}})}catch(p){console.error("Failed to load analytics:",p),R("Failed to load analytics data","danger")}finally{u(!1),_(!1)}},ie=()=>{J(!0)};y.useEffect(()=>{J()},[L]),y.useEffect(()=>{$()},[L]);const $=async()=>{try{const w=new URLSearchParams({start_date:L.start_date,end_date:L.end_date}).toString(),[p,k]=await Promise.all([le.get(`/orders/archived?${w}`).catch(()=>[]),le.get(`/reports/waste?${w}`).catch(()=>[])]),E=p||[];o(V=>({...V,orders:[...V.orders,...E],archivedOrders:E})),ae(k||[]),console.log("Loaded archived orders:",E.length)}catch(w){console.error("Failed to load archived orders:",w);try{const p=new URLSearchParams({start_date:L.start_date,end_date:L.end_date,status:"completed"}).toString(),k=await le.get(`/orders?${p}&archived=true`);o(E=>({...E,orders:[...E.orders,...k||[]],archivedOrders:k||[]})),console.log("Loaded completed orders from alternative endpoint:",(k||[]).length)}catch(p){console.error("Alternative archived orders endpoint also failed:",p)}}},I=async w=>{try{const p=await le.get(`/orders/${w.id}/waste`);oe({order:w,wasteData:p||[],metrics:p?{totalWeight:p.reduce((k,E)=>k+(E.weight||0),0),itemCount:p.length,categories:[...new Set(p.map(k=>k.item_type))]}:{totalWeight:0,itemCount:0,categories:[]}}),Q(!0)}catch(p){console.error("Failed to load waste report:",p),R("Failed to load waste report","danger")}},ue=()=>{const w=i.orders.filter(k=>k.status==="completed"),p=i.archivedOrders||[];return[...w,...p]},se=()=>{try{const w=ue();if(w.length===0){R("No completed orders to export","warning");return}const p=[["Order Number","Product","Completion Date","Target Qty","Actual Qty","Waste Items","Total Waste Weight","Waste Types"],...w.map(m=>{const q=m.waste_data||[],Z=q.reduce((ne,ye)=>ne+(ye.weight||0),0),ee=[...new Set(q.map(ne=>ne.item_type))].join("; ");return[m.order_number||"N/A",m.product_name||"N/A",m.complete_time?Ft.formatSASTDateTime(m.complete_time):"N/A",m.quantity||0,m.actual_quantity||0,q.length,Z,ee||"No waste recorded"]})].map(m=>m.join(",")).join(`
`),k=new Blob([p],{type:"text/csv"}),E=URL.createObjectURL(k),V=document.createElement("a");V.href=E,V.download=`waste-reports-${L.start_date}-to-${L.end_date}.csv`,V.click(),URL.revokeObjectURL(E),R("Waste reports exported successfully","success")}catch(w){console.error("Export error:",w),R("Failed to export waste reports","danger")}},X=y.useMemo(()=>{const{orders:w,machines:p}=i,k=w.length,E=w.filter(D=>D.status==="pending").length,V=w.filter(D=>D.status==="in_progress").length,m=w.filter(D=>D.status==="completed").length,q=w.filter(D=>D.status==="paused").length,Z=k>0?Math.round(m/k*100):0,ee=p.length,ne=p.filter(D=>D.status==="available").length,ye=p.filter(D=>D.status==="in_use").length,me=p.filter(D=>D.status==="maintenance").length,Oe=p.filter(D=>D.status==="offline").length,be=ee>0?Math.round(ye/ee*100):0,Be=w.reduce((D,fe)=>D+(parseInt(fe.quantity)||0),0),Ye=w.filter(D=>D.status==="completed").reduce((D,fe)=>D+(parseInt(fe.actual_quantity||fe.quantity)||0),0),et=w.reduce((D,fe)=>{const Xe=fe.priority||"normal";return D[Xe]=(D[Xe]||0)+1,D},{}),$e=w.reduce((D,fe)=>{const Xe=fe.environment||"unknown";return D[Xe]=(D[Xe]||0)+1,D},{}),h=w.reduce((D,fe)=>{const Xe=fe.status||"unknown";return D[Xe]=(D[Xe]||0)+1,D},{}),W=p.reduce((D,fe)=>{const Xe=fe.environment||"unknown";return D[Xe]=(D[Xe]||0)+1,D},{}),Me=Array.from({length:7},(D,fe)=>{const Xe=new Date;Xe.setDate(Xe.getDate()-fe);const He=Xe.toISOString().split("T")[0],Re=w.filter(Et=>Et.created_at?.startsWith(He)).length;return{date:He,count:Re}}).reverse();return{totalOrders:k,pendingOrders:E,inProgressOrders:V,completedOrders:m,pausedOrders:q,completionRate:Z,totalMachines:ee,availableMachines:ne,activeMachines:ye,maintenanceMachines:me,offlineMachines:Oe,utilizationRate:be,totalQuantityOrdered:Be,totalQuantityProduced:Ye,priorityDistribution:et,environmentDistribution:$e,statusDistribution:h,machineEnvDistribution:W,recentTrend:Me}},[i]),P=w=>{try{let p,k;if(w==="csv"){p=[["Metric","Value"],["Total Orders",X.totalOrders],["Completed Orders",X.completedOrders],["Completion Rate",`${X.completionRate}%`],["Total Machines",X.totalMachines],["Active Machines",X.activeMachines],["Utilization Rate",`${X.utilizationRate}%`],["Total Quantity Ordered",X.totalQuantityOrdered],["Total Quantity Produced",X.totalQuantityProduced]].map(Z=>Z.join(",")).join("\\n"),k=`analytics-${L.start_date}-to-${L.end_date}.csv`;const V=new Blob([p],{type:"text/csv"}),m=URL.createObjectURL(V),q=document.createElement("a");q.href=m,q.download=k,q.click(),URL.revokeObjectURL(m)}else{p=JSON.stringify({metrics:X,dateRange:L},null,2),k=`analytics-${L.start_date}-to-${L.end_date}.json`;const E=new Blob([p],{type:"application/json"}),V=URL.createObjectURL(E),m=document.createElement("a");m.href=V,m.download=k,m.click(),URL.revokeObjectURL(V)}R(`Analytics exported as ${w.toUpperCase()}`,"success")}catch{R("Failed to export data","danger")}},Ee=()=>{try{if(!i.downtimeRecords||i.downtimeRecords.length===0){R("No downtime records to export","warning");return}const w=[["Start Time","End Time","Duration (min)","Reason","Category","Order","Machine","Stopped By","Supervisor on Duty","Shift","Status","Notes"],...i.downtimeRecords.map(V=>[V.start_time||"N/A",V.end_time||"Active",V.duration||"N/A",V.reason||"N/A",V.category||"N/A",V.order_number||"N/A",V.machine_name||"N/A",V.stopped_by||"N/A",V.supervisor_on_duty||"N/A",V.shift||"N/A",V.status||"N/A",(V.notes||"").replace(/,/g,";")])].map(V=>V.join(",")).join(`
`),p=new Blob([w],{type:"text/csv"}),k=URL.createObjectURL(p),E=document.createElement("a");E.href=k,E.download=`downtime-report-${L.start_date}-to-${L.end_date}.csv`,E.click(),URL.revokeObjectURL(k),R("Downtime report exported successfully","success")}catch(w){console.error("Export error:",w),R("Failed to export downtime data","danger")}},re=({data:w,title:p,color:k="#3b82f6"})=>{const E=y.useRef(null);return y.useEffect(()=>{if(!E.current||!w)return;const V=E.current,m=V.getContext("2d"),q=Object.keys(w),Z=Object.values(w),ee=Math.max(...Z,1);if(m.clearRect(0,0,V.width,V.height),q.length===0){m.font="14px sans-serif",m.fillStyle="#6b7280",m.textAlign="center",m.fillText("No data available",V.width/2,V.height/2);return}const ne=V.height-80,ye=V.width-80,me=Math.min(60,ye/(q.length*1.5));m.strokeStyle="#e5e7eb",m.lineWidth=1;for(let Oe=0;Oe<=5;Oe++){const be=40+Oe/5*ne;m.beginPath(),m.moveTo(50,be),m.lineTo(V.width-20,be),m.stroke(),m.font="11px sans-serif",m.fillStyle="#6b7280",m.textAlign="right",m.fillText(Math.round((5-Oe)/5*ee),45,be+4)}q.forEach((Oe,be)=>{const Be=Z[be],Ye=Be/ee*ne,et=60+be*(ye/q.length),$e=40+ne-Ye;m.fillStyle=k,m.fillRect(et,$e,me,Ye),m.font="11px sans-serif",m.fillStyle="#374151",m.textAlign="center",m.fillText(Be,et+me/2,$e-5),m.save(),m.translate(et+me/2,V.height-20),m.rotate(-Math.PI/6),m.fillText(Oe.charAt(0).toUpperCase()+Oe.slice(1),0,0),m.restore()})},[w,k]),a.jsxs(Ne,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:p}),a.jsx("canvas",{ref:E,width:"400",height:"300",className:"w-full h-auto max-w-full"})]})},we=({data:w,title:p})=>{const k=y.useRef(null),E=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];return y.useEffect(()=>{if(!k.current||!w)return;const V=k.current,m=V.getContext("2d"),q=V.width/2,Z=V.height/2,ee=Math.min(q,Z)-40;m.clearRect(0,0,V.width,V.height);const ne=Object.values(w),ye=Object.keys(w),me=ne.reduce((be,Be)=>be+Be,0);if(me===0){m.font="14px sans-serif",m.fillStyle="#6b7280",m.textAlign="center",m.fillText("No data available",q,Z);return}let Oe=-Math.PI/2;ne.forEach((be,Be)=>{const Ye=be/me*2*Math.PI;m.beginPath(),m.moveTo(q,Z),m.arc(q,Z,ee,Oe,Oe+Ye),m.closePath(),m.fillStyle=E[Be%E.length],m.fill(),m.strokeStyle="#ffffff",m.lineWidth=2,m.stroke();const et=Oe+Ye/2,$e=q+Math.cos(et)*(ee*.7),h=Z+Math.sin(et)*(ee*.7),W=Math.round(be/me*100);W>5&&(m.font="12px sans-serif",m.fillStyle="#ffffff",m.textAlign="center",m.fillText(`${W}%`,$e,h)),Oe+=Ye}),ye.forEach((be,Be)=>{const Ye=20+Be*20;m.fillStyle=E[Be%E.length],m.fillRect(10,Ye,15,15),m.fillStyle="#374151",m.font="12px sans-serif",m.textAlign="left",m.fillText(`${be}: ${ne[Be]}`,30,Ye+12)})},[w]),a.jsxs(Ne,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:p}),a.jsx("canvas",{ref:k,width:"400",height:"300",className:"w-full h-auto max-w-full"})]})},ce=({title:w,value:p,change:k,icon:E,color:V="gray"})=>{const m={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",red:"bg-red-50 text-red-600 border-red-200",purple:"bg-purple-50 text-purple-600 border-purple-200",gray:"bg-gray-50 text-gray-600 border-gray-200"};return a.jsx(Ne,{className:`p-6 border-l-4 ${m[V]}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:w}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:p}),k!==void 0&&a.jsxs("div",{className:"flex items-center mt-2",children:[k>=0?a.jsx(El,{className:"w-4 h-4 text-green-500 mr-1"}):a.jsx(Ao,{className:"w-4 h-4 text-red-500 mr-1"}),a.jsxs("span",{className:`text-sm ${k>=0?"text-green-600":"text-red-600"}`,children:[Math.abs(k),"% from last period"]})]})]}),a.jsx(E,{className:"w-8 h-8"})]})})};return f&&Object.keys(i).length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(lt,{className:"w-5 h-5 animate-spin"}),"Loading analytics..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[T&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${T.type==="success"?"bg-green-100 text-green-800 border border-green-200":T.type==="danger"?"bg-red-100 text-red-800 border border-red-200":T.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:T.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Analytics & Reports"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Production insights and performance metrics"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(xe,{onClick:ie,disabled:g,variant:"outline",children:[a.jsx(lt,{className:`w-4 h-4 mr-2 ${g?"animate-spin":""}`}),"Refresh"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(xe,{onClick:()=>P("csv"),variant:"outline",size:"sm",children:[a.jsx(xa,{className:"w-4 h-4 mr-2"}),"CSV"]}),a.jsxs(xe,{onClick:()=>P("json"),variant:"outline",size:"sm",children:[a.jsx(xa,{className:"w-4 h-4 mr-2"}),"JSON"]})]})]})]}),a.jsx(Ne,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ya,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{className:"font-medium text-gray-700",children:"Date Range:"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:L.start_date,onChange:w=>N({...L,start_date:w.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:L.end_date,onChange:w=>N({...L,end_date:w.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Period: ",Math.ceil((new Date(L.end_date)-new Date(L.start_date))/(1e3*60*60*24))," days"]})]})}),a.jsx(Ne,{className:"p-1",children:a.jsx("div",{className:"flex gap-1",children:[{id:"overview",label:"Overview",icon:Na},{id:"orders",label:"Order Analytics",icon:oa},{id:"machines",label:"Machine Analytics",icon:Jr},{id:"labor",label:"Labor Analytics",icon:Ie},{id:"performance",label:"Performance",icon:El},{id:"downtime",label:"Downtime Report",icon:St},{id:"waste-reports",label:"Waste Reports",icon:ai}].map(w=>{const p=w.icon;return a.jsxs("button",{onClick:()=>j(w.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${A===w.id?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[a.jsx(p,{className:"w-4 h-4"}),w.label]},w.id)})})}),A==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(ce,{title:"Total Orders",value:X.totalOrders,icon:oa,color:"blue"}),a.jsx(ce,{title:"Completion Rate",value:`${X.completionRate}%`,icon:ut,color:"green"}),a.jsx(ce,{title:"Machine Utilization",value:`${X.utilizationRate}%`,icon:Jr,color:"purple"}),a.jsx(ce,{title:"Active Machines",value:`${X.activeMachines}/${X.totalMachines}`,icon:Dt,color:"yellow"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(we,{data:X.statusDistribution,title:"Order Status Distribution"}),a.jsx(re,{data:X.environmentDistribution,title:"Orders by Environment",color:"#10b981"})]})]}),A==="orders"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx(ce,{title:"Pending Orders",value:X.pendingOrders,icon:$t,color:"gray"}),a.jsx(ce,{title:"In Progress",value:X.inProgressOrders,icon:Qa,color:"blue"}),a.jsx(ce,{title:"Completed",value:X.completedOrders,icon:ut,color:"green"}),a.jsx(ce,{title:"Paused",value:X.pausedOrders,icon:ii,color:"yellow"}),a.jsx(ce,{title:"Total Quantity",value:X.totalQuantityOrdered.toLocaleString(),icon:bs,color:"purple"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(re,{data:X.priorityDistribution,title:"Order Priority Distribution",color:"#f59e0b"}),a.jsx(we,{data:X.environmentDistribution,title:"Orders by Environment"})]})]}),A==="machines"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx(ce,{title:"Total Machines",value:X.totalMachines,icon:Jr,color:"gray"}),a.jsx(ce,{title:"Available",value:X.availableMachines,icon:ut,color:"green"}),a.jsx(ce,{title:"In Use",value:X.activeMachines,icon:Dt,color:"blue"}),a.jsx(ce,{title:"Maintenance",value:X.maintenanceMachines,icon:St,color:"yellow"}),a.jsx(ce,{title:"Offline",value:X.offlineMachines,icon:Ie,color:"red"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(we,{data:{Available:X.availableMachines,"In Use":X.activeMachines,Maintenance:X.maintenanceMachines,Offline:X.offlineMachines},title:"Machine Status Distribution"}),a.jsx(re,{data:X.machineEnvDistribution,title:"Machines by Environment",color:"#8b5cf6"})]})]}),A==="performance"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(ce,{title:"Quantity Produced",value:X.totalQuantityProduced.toLocaleString(),icon:bs,color:"green"}),a.jsx(ce,{title:"Production Efficiency",value:`${Math.round(X.totalQuantityProduced/(X.totalQuantityOrdered||1)*100)}%`,icon:El,color:"blue"}),a.jsx(ce,{title:"Avg Orders/Day",value:Math.round(X.totalOrders/30),icon:oa,color:"purple"}),a.jsx(ce,{title:"Machine Efficiency",value:`${X.utilizationRate}%`,icon:Jr,color:"yellow"})]}),a.jsx("div",{className:"grid grid-cols-1 gap-6",children:a.jsx(re,{data:Object.fromEntries(i.downtime?Object.entries(i.downtime):[["No Data",0]]),title:"Downtime by Reason (Minutes)",color:"#ef4444"})}),a.jsxs(Ne,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Recent Performance Summary"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Period"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Order Completion Rate"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[X.completionRate,"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"85%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(dt,{variant:X.completionRate>=85?"success":X.completionRate>=70?"warning":"danger",children:X.completionRate>=85?"Excellent":X.completionRate>=70?"Good":"Needs Improvement"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Machine Utilization"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[X.utilizationRate,"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"80%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(dt,{variant:X.utilizationRate>=80?"success":X.utilizationRate>=60?"warning":"danger",children:X.utilizationRate>=80?"Excellent":X.utilizationRate>=60?"Good":"Needs Improvement"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Production Efficiency"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[Math.round(X.totalQuantityProduced/(X.totalQuantityOrdered||1)*100),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"90%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(dt,{variant:X.totalQuantityProduced/(X.totalQuantityOrdered||1)*100>=90?"success":X.totalQuantityProduced/(X.totalQuantityOrdered||1)*100>=75?"warning":"danger",children:X.totalQuantityProduced/(X.totalQuantityOrdered||1)*100>=90?"Excellent":X.totalQuantityProduced/(X.totalQuantityOrdered||1)*100>=75?"Good":"Needs Improvement"})})]})]})]})})]})]}),A==="labor"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(ce,{title:"Total Employees",value:i.employees.filter(w=>w.role!=="admin").length,icon:Ie,color:"blue"}),a.jsx(ce,{title:"Assigned Today",value:i.assignments.length,icon:ut,color:"green"}),a.jsx(ce,{title:"Unique Workers",value:new Set(i.assignments.map(w=>w.employee_id)).size,icon:Dt,color:"purple"}),a.jsx(ce,{title:"Utilization",value:`${Math.round(i.assignments.length/Math.max(i.machines.length,1)*100)}%`,icon:El,color:"orange"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Ne,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Employee Roles"}),a.jsx("div",{className:"space-y-3",children:["operator","supervisor","packer"].map(w=>{const p=i.employees.filter(E=>E.role===w).length,k=Math.round(p/Math.max(i.employees.filter(E=>E.role!=="admin").length,1)*100);return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600 capitalize",children:w}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-blue-500",style:{width:`${k}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 w-12",children:p})]})]},w)})})]}),a.jsxs(Ne,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Shift Distribution"}),a.jsx("div",{className:"space-y-3",children:["day","night"].map(w=>{const p=i.assignments.filter(E=>E.shift===w).length,k=Math.round(p/Math.max(i.assignments.length,1)*100);return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-600 capitalize",children:[w," Shift"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${w==="day"?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${k}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 w-12",children:p})]})]},w)})})]})]}),a.jsxs(Ne,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Recent Labor Assignments"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Machine"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.assignments.slice(0,10).map((w,p)=>{const k=i.employees.find(V=>V.id===w.employee_id),E=i.machines.find(V=>V.id==w.machine_id);return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k?.fullName||k?.username||"Unknown"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:k?.role||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:E?.name||`Machine ${w.machine_id}`}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:w.shift}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(dt,{variant:"success",children:"Active"})})]},p)})})]})})]})]}),A==="downtime"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(xe,{onClick:Ee,variant:"outline",children:[a.jsx(xa,{className:"w-4 h-4 mr-2"}),"Export Downtime Report"]})}),i.downtimeSummary&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx(ce,{title:"Total Stops",value:i.downtimeSummary.total_stops||0,icon:St,color:"red"}),a.jsx(ce,{title:"Active Stops",value:i.downtimeSummary.active_stops||0,icon:$t,color:"yellow"}),a.jsx(ce,{title:"Total Downtime",value:`${i.downtimeSummary.total_downtime_hours||0}h`,icon:Ao,color:"blue"}),a.jsx(ce,{title:"Avg Duration",value:`${i.downtimeSummary.average_downtime_minutes||0}m`,icon:Na,color:"purple"}),a.jsx(ce,{title:"Resolved",value:i.downtimeSummary.resolved_stops||0,icon:ut,color:"green"})]}),i.categoryBreakdown&&Object.keys(i.categoryBreakdown).length>0&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(re,{data:Object.fromEntries(Object.entries(i.categoryBreakdown).map(([w,p])=>[w,Math.round(p.total_minutes||0)])),title:"Downtime by Category (Minutes)",color:"#ef4444"}),a.jsx(we,{data:Object.fromEntries(Object.entries(i.categoryBreakdown).map(([w,p])=>[w,p.count||0])),title:"Stop Count by Category"})]}),a.jsxs(Ne,{children:[a.jsxs("div",{className:"p-6 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Recent Downtime Records"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",i.downtimeRecords?.length||0," records for selected period"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Start Time","Duration","Reason","Category","Order","Machine","Stopped By","Supervisor","Shift","Status"].map(w=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:w},w))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:!i.downtimeRecords||i.downtimeRecords.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"10",className:"text-center py-10 text-gray-500",children:"No downtime records found for the selected period"})}):i.downtimeRecords.slice(0,20).map((w,p)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.start_time?Ft.formatSASTDateTime(w.start_time):"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.duration?`${w.duration}m`:"Active"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(dt,{variant:w.reason?.includes("breakdown")||w.reason?.includes("safety")?"danger":w.reason?.includes("maintenance")||w.reason?.includes("material")?"warning":w.reason?.includes("break")||w.reason?.includes("shift")?"info":"default",size:"sm",children:w.reason?.replace(/_/g," ").toUpperCase()||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.category||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.order_number||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.machine_name||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.stopped_by||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.supervisor_on_duty||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:a.jsx(dt,{variant:w.shift==="day"?"info":w.shift==="night"?"default":"warning",size:"sm",children:w.shift?w.shift.charAt(0).toUpperCase()+w.shift.slice(1):"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(dt,{variant:w.status==="Active"?"warning":"success",size:"sm",children:w.status||"N/A"})})]},w.id||p))})]})}),i.downtimeRecords&&i.downtimeRecords.length>20&&a.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 border-t",children:["Showing first 20 of ",i.downtimeRecords.length," records. Export for complete data."]})]})]}),A==="waste-reports"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Waste Reports"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View waste tracking data for completed production orders"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(xe,{onClick:se,variant:"outline",children:[a.jsx(xa,{className:"w-4 h-4 mr-2"}),"Export Waste Data"]}),a.jsxs(xe,{onClick:$,variant:"outline",children:[a.jsx(lt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(ce,{title:"Completed Orders",value:ue().length,icon:ut,color:"green"}),a.jsx(ce,{title:"Orders with Waste",value:ue().filter(w=>w.waste_data&&w.waste_data.length>0).length,icon:St,color:"yellow"}),a.jsx(ce,{title:"Total Waste Weight",value:`${ue().reduce((w,p)=>p.waste_data?w+p.waste_data.reduce((k,E)=>k+(E.weight||0),0):w,0).toFixed(2)} kg`,icon:oa,color:"red"}),a.jsx(ce,{title:"Waste Tracking Rate",value:`${ue().length>0?Math.round(ue().filter(w=>w.waste_data&&w.waste_data.length>0).length/ue().length*100):0}%`,icon:bs,color:"blue"})]}),a.jsxs(Ne,{children:[a.jsxs("div",{className:"p-6 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Completed Orders - Waste Tracking"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",(i.archivedOrders||[]).length+i.orders.filter(w=>w.status==="completed").length," completed orders for selected period"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Debug: Active orders: ",i.orders.length,", Archived orders: ",(i.archivedOrders||[]).length]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Order","Product","Completion Date","Quantity","Waste Items","Total Waste","Actions"].map(w=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:w},w))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.orders.filter(w=>w.status==="completed").length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"7",className:"text-center py-10 text-gray-500",children:[a.jsx(ut,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsx("p",{children:"No completed orders found for the selected period"}),a.jsx("p",{className:"text-sm mt-2",children:"Adjust the date range to view completed orders"})]})}):i.orders.filter(w=>w.status==="completed").map((w,p)=>{const k=w.waste_data||[],E=k.reduce((m,q)=>m+(q.weight||0),0),V=k.length>0;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.order_number}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",w.id]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.product_name||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:w.complete_time?Ft.formatSASTDateTime(w.complete_time):"N/A"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsxs("div",{children:[w.actual_quantity||w.quantity||0," units"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",w.quantity||0]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:k.length}),V?a.jsx(dt,{variant:"warning",size:"sm",children:"Has Waste"}):a.jsx(dt,{variant:"success",size:"sm",children:"No Waste"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:V?a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[E.toFixed(2)," kg"]}),a.jsx("div",{className:"text-xs text-gray-500",children:[...new Set(k.map(m=>m.item_type))].join(", ")})]}):a.jsx("span",{className:"text-gray-400",children:"No waste recorded"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs(xe,{onClick:()=>I(w),variant:"outline",size:"sm",disabled:!V,children:[a.jsx(Xa,{className:"w-4 h-4 mr-1"}),V?"View Waste":"No Data"]})})]},w.id||p)})})]})})]}),i.orders.filter(w=>w.status==="completed"&&w.waste_data&&w.waste_data.length>0).length>0&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Ne,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Waste by Category"}),a.jsx("div",{className:"space-y-3",children:(()=>{const w={};return i.orders.filter(p=>p.status==="completed"&&p.waste_data).forEach(p=>{p.waste_data.forEach(k=>{const E=k.item_type||"Unknown";w[E]=(w[E]||0)+(k.weight||0)})}),Object.entries(w).map(([p,k])=>{const E=Object.values(w).reduce((V,m)=>V+m,0)>0?Math.round(k/Object.values(w).reduce((V,m)=>V+m,0)*100):0;return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600",children:p}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-red-500",style:{width:`${E}%`}})}),a.jsxs("span",{className:"text-sm text-gray-500 w-16",children:[k.toFixed(2),"kg"]})]})]},p)})})()})]}),a.jsxs(Ne,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent High-Waste Orders"}),a.jsx("div",{className:"space-y-3",children:i.orders.filter(w=>w.status==="completed"&&w.waste_data&&w.waste_data.length>0).sort((w,p)=>{const k=w.waste_data.reduce((V,m)=>V+(m.weight||0),0);return p.waste_data.reduce((V,m)=>V+(m.weight||0),0)-k}).slice(0,5).map(w=>{const p=w.waste_data.reduce((k,E)=>k+(E.weight||0),0);return a.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:w.order_number}),a.jsx("p",{className:"text-sm text-gray-600",children:w.product_name})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-medium text-red-600",children:[p.toFixed(2)," kg"]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[w.waste_data.length," items"]})]})]},w.id)})})]})]})]}),H&&a.jsx(zt,{title:"Waste Report Details",onClose:()=>oe(null),size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:H.order.order_number}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-600",children:["Product: ",a.jsx("span",{className:"font-medium",children:H.order.product_name})]}),a.jsxs("p",{className:"text-gray-600",children:["Completed: ",a.jsx("span",{className:"font-medium",children:H.order.complete_time?Ft.formatSASTDateTime(H.order.complete_time):"N/A"})]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-600",children:["Quantity: ",a.jsxs("span",{className:"font-medium",children:[H.order.actual_quantity||H.order.quantity," units"]})]}),a.jsxs("p",{className:"text-gray-600",children:["Target: ",a.jsxs("span",{className:"font-medium",children:[H.order.quantity," units"]})]})]})]})]}),H.wasteData.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-red-600",children:H.metrics.totalWeight.toFixed(2)}),a.jsx("p",{className:"text-sm text-red-700",children:"Total Weight (kg)"})]}),a.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:H.metrics.itemCount}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Waste Items"})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:H.metrics.categories.length}),a.jsx("p",{className:"text-sm text-blue-700",children:"Categories"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Waste Items Breakdown"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.wasteData.map((w,p)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.jsx(dt,{variant:"warning",size:"sm",children:w.item_type})}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:w.description||"No description"}),a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:w.weight||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:w.unit})]},p))})]})})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ut,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Waste Recorded"}),a.jsx("p",{className:"text-gray-600",children:"This order was completed without recorded waste."})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsx(xe,{onClick:()=>oe(null),variant:"outline",children:"Close"})})]})})]})}function lp(){const[i,o]=y.useState(null),[f,u]=y.useState([]),[g,_]=y.useState([]),[T,Y]=y.useState(!0),[A,j]=y.useState(null),[b,ae]=y.useState("packaging"),[H,oe]=y.useState([]),[B,Q]=y.useState(!1),[L,N]=y.useState(null),[R,J]=y.useState(!1),ie=(P,Ee="success")=>{j({message:P,type:Ee}),setTimeout(()=>j(null),3e3)},$=()=>{const P=new Date,Ee=P.getHours(),re=Ee>=6&&Ee<18?"day":"night",we=P.toISOString().split("T")[0];return{type:re,date:we,...{day:{start:"06:00",end:"18:00",label:"Day Shift"},night:{start:"18:00",end:"06:00",label:"Night Shift"}}[re]}},I=async()=>{try{Y(!0);const P=await le.get("/environments");oe(P||[]);const Ee=await le.get(`/shifts/current?environment=${b}`);o(Ee);const re=await le.get(`/shifts/reports?environment=${b}&limit=10`);u(re||[]);const we=$(),ce=await le.get(`/shifts/quantity-updates?shift_date=${we.date}&shift_type=${we.type}&environment=${b}`);_(ce||[])}catch(P){console.error("Failed to load shift data:",P),ie("Failed to load shift data","danger")}finally{Y(!1)}},ue=async()=>{try{if(J(!0),!i?.id){ie("No current shift found","warning");return}const P=await le.post(`/shifts/${i.id}/generate`);o(P.report),ie("Shift report generated successfully"),I()}catch(P){console.error("Failed to generate shift report:",P),ie("Failed to generate shift report","danger")}finally{J(!1)}},se=P=>{const re=[["Metric","Value"],["Shift Date",P.shift_date],["Shift Type",P.shift_type.toUpperCase()],["Environment",P.environment],["Total Orders",P.total_orders||0],["Completed Orders",P.completed_orders||0],["In Progress Orders",P.in_progress_orders||0],["Stopped Orders",P.stopped_orders||0],["Total Quantity Produced",P.total_quantity_produced||0],["Total Stops",P.total_stops||0],["Total Downtime (minutes)",P.total_downtime_minutes||0],["OEE Percentage",`${P.oee_percentage?.toFixed(1)||0}%`],["Efficiency Percentage",`${P.efficiency_percentage?.toFixed(1)||0}%`],["Quality Percentage",`${P.quality_percentage?.toFixed(1)||100}%`]].map(p=>p.join(",")).join("\\n"),we=new Blob([re],{type:"text/csv"}),ce=URL.createObjectURL(we),w=document.createElement("a");w.href=ce,w.download=`shift-report-${P.shift_date}-${P.shift_type}-${P.environment}.csv`,w.click(),URL.revokeObjectURL(ce),ie("Shift report exported successfully")};y.useEffect(()=>{I();const P=setInterval(I,3e4);return()=>clearInterval(P)},[b]);const X=$();return T?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(lt,{className:"w-5 h-5 animate-spin"}),"Loading shift reports..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[A&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${A.type==="success"?"bg-green-100 text-green-800 border border-green-200":A.type==="danger"?"bg-red-100 text-red-800 border border-red-200":A.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:A.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Shift Reports"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time production shift tracking and automated reporting"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("select",{value:b,onChange:P=>ae(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Environments"}),H.map(P=>a.jsx("option",{value:P.code,children:P.name},P.code))]}),a.jsxs(xe,{onClick:I,variant:"outline",children:[a.jsx(lt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.jsxs(Ne,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Current Shift - ",X.label]}),a.jsx(dt,{variant:"info",children:X.date}),a.jsxs(dt,{variant:"default",children:[X.start," - ",X.end]})]}),a.jsxs(xe,{onClick:ue,disabled:R,className:"bg-blue-600 text-white hover:bg-blue-700",children:[R?a.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(Na,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]}),i&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.total_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.completed_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.in_progress_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.stopped_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Stopped"})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(i.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-sm text-gray-600",children:"Quantity Produced"})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.oee_percentage?`${i.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-sm text-gray-600",children:"OEE"})]})]})]}),a.jsxs(Ne,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(Dt,{className:"w-5 h-5"}),"Recent Quantity Updates (",g.length,")"]}),g.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(bs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No quantity updates recorded for current shift"})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:g.map((P,Ee)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[P.order_number," - ",P.product_name]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[P.machine_name," • ",P.updated_by_name]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-bold text-gray-900",children:[P.previous_quantity," → ",P.new_quantity]}),a.jsx("div",{className:"text-sm text-gray-500",children:new Date(P.update_time).toLocaleTimeString()})]})]},Ee))})]}),a.jsxs(Ne,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ai,{className:"w-5 h-5"}),"Shift Reports History"]}),f.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx($t,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No shift reports available"})]}):a.jsx("div",{className:"space-y-3",children:f.map(P=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[P.shift_date," - ",P.shift_type.toUpperCase()," Shift"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[P.environment," • ",P.supervisor_name||"No supervisor assigned"]})]}),a.jsxs("div",{className:"flex gap-4 text-sm",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-blue-600",children:P.total_orders||0}),a.jsx("div",{className:"text-gray-500",children:"Orders"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-green-600",children:P.completed_orders||0}),a.jsx("div",{className:"text-gray-500",children:"Completed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-purple-600",children:(P.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-gray-500",children:"Produced"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-orange-600",children:P.oee_percentage?`${P.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-gray-500",children:"OEE"})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(xe,{onClick:()=>{N(P),Q(!0)},variant:"outline",size:"sm",children:[a.jsx(Xa,{className:"w-4 h-4 mr-1"}),"View"]}),a.jsxs(xe,{onClick:()=>se(P),variant:"outline",size:"sm",children:[a.jsx(xa,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})},P.id))})]}),B&&L&&a.jsx(zt,{isOpen:B,onClose:()=>Q(!1),title:`Shift Report - ${L.shift_date} ${L.shift_type.toUpperCase()}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:L.total_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Orders"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:L.completed_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Completed"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:L.in_progress_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:L.stopped_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Stopped"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600",children:(L.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-600",children:"Quantity Produced"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-orange-600",children:L.oee_percentage?`${L.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-xs text-gray-600",children:"OEE"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Downtime Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:["Total Stops: ",a.jsx("span",{className:"font-medium",children:L.total_stops||0})]}),a.jsxs("div",{children:["Total Downtime: ",a.jsxs("span",{className:"font-medium",children:[L.total_downtime_minutes||0," minutes"]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Machine Utilization"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:["Active Machines: ",a.jsx("span",{className:"font-medium",children:L.total_machines_active||0})]}),a.jsxs("div",{children:["Available Machines: ",a.jsx("span",{className:"font-medium",children:L.total_machines_available||0})]})]})]}),L.summary_notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Summary Notes"}),a.jsx("p",{className:"text-sm text-gray-700",children:L.summary_notes})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs(xe,{onClick:()=>se(L),variant:"outline",children:[a.jsx(xa,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),a.jsx(xe,{onClick:()=>Q(!1),children:"Close"})]})]})})]})}function np(){const[i,o]=y.useState([]),[f,u]=y.useState(!0),[g,_]=y.useState(!1),[T,Y]=y.useState(!1),[A,j]=y.useState(null),[b,ae]=y.useState({username:"",email:"",password:"",confirmPassword:"",role:"operator"}),[H,oe]=y.useState(""),{user:B}=vs(),Q=async()=>{u(!0);try{const $=await le.get("/users");o($)}catch($){console.error("Failed to load users:",$)}finally{u(!1)}};y.useEffect(()=>{Q()},[]);const L=()=>{ae({username:"",email:"",password:"",confirmPassword:"",role:"operator"}),oe("")},N=async $=>{if($.preventDefault(),oe(""),b.password!==b.confirmPassword)return oe("Passwords do not match");try{await le.post("/users",{username:b.username,email:b.email,password:b.password,role:b.role}),_(!1),L(),Q()}catch(I){oe(I.message||"Failed to add user")}},R=async $=>{$.preventDefault(),oe("");try{await le.put(`/users/${A.id}`,{email:b.email,role:b.role}),Y(!1),L(),Q()}catch(I){oe(I.message||"Failed to update user")}},J=async $=>{if($===B.id)return alert("You cannot delete your own account.");if(window.confirm("Are you sure you want to delete this user?"))try{await le.delete(`/users/${$}`),Q()}catch(I){alert("Failed to delete user: "+I.message)}},ie=$=>{const I={admin:"bg-purple-100 text-purple-800",supervisor:"bg-blue-100 text-blue-800",operator:"bg-green-100 text-green-800",viewer:"bg-gray-100 text-gray-800"};return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I[$]||""}`,children:$.toUpperCase()})};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),B?.role==="admin"&&a.jsx("button",{onClick:()=>{L(),_(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add New User"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["User","Email","Role","Status","Actions"].map($=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:$},$))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map($=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.username}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ie($.role)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$.is_active?"Active":"Inactive"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:B?.role==="admin"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{j($),ae($),Y(!0)},className:"text-blue-600 hover:text-blue-800",children:"Edit"}),a.jsx("button",{onClick:()=>J($.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},$.id))})]})}),g&&a.jsx(zt,{title:"Add New User",onClose:()=>_(!1),children:a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[H&&a.jsx("div",{className:"p-2 bg-red-100 text-red-700 rounded",children:H}),a.jsx("input",{type:"text",placeholder:"Username",value:b.username,onChange:$=>ae({...b,username:$.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"email",placeholder:"Email",value:b.email,onChange:$=>ae({...b,email:$.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"password",placeholder:"Password",value:b.password,onChange:$=>ae({...b,password:$.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"password",placeholder:"Confirm Password",value:b.confirmPassword,onChange:$=>ae({...b,confirmPassword:$.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsxs("select",{value:b.role,onChange:$=>ae({...b,role:$.target.value}),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"admin",children:"Administrator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>_(!1),children:"Cancel"}),a.jsx("button",{type:"submit",children:"Add User"})]})]})}),T&&A&&a.jsx(zt,{title:"Edit User",onClose:()=>Y(!1),children:a.jsxs("form",{onSubmit:R,className:"space-y-4",children:[H&&a.jsx("div",{className:"p-2 bg-red-100 text-red-700 rounded",children:H}),a.jsxs("div",{children:[a.jsx("label",{children:"Username"}),a.jsx("input",{type:"text",value:b.username,className:"w-full px-3 py-2 border rounded bg-gray-100",disabled:!0})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Email"}),a.jsx("input",{type:"email",value:b.email,onChange:$=>ae({...b,email:$.target.value}),className:"w-full px-3 py-2 border rounded",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Role"}),a.jsxs("select",{value:b.role,onChange:$=>ae({...b,role:$.target.value}),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"admin",children:"Administrator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>Y(!1),children:"Cancel"}),a.jsx("button",{type:"submit",children:"Update User"})]})]})})]})}const Co=({title:i,children:o})=>a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i})}),a.jsx("div",{className:"px-4 py-5 sm:p-6",children:o})]}),rp=()=>{const{user:i,checkAuth:o}=vs(),[f,u]=y.useState({email:"",fullName:"",phone:""}),[g,_]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[T,Y]=y.useState({text:"",type:"success"}),[A,j]=y.useState(!1),[b,ae]=y.useState({});y.useEffect(()=>{i&&u({email:i.email||"",fullName:i.fullName||"",phone:i.phone||""})},[i]);const H=y.useCallback(N=>{const R={};return N.email?.trim()||(R.email="Email is required"),N.fullName?.trim()||(R.fullName="Full name is required"),N.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email)&&(R.email="Please enter a valid email address"),R},[]),oe=y.useCallback(async N=>{N.preventDefault(),Y({text:"",type:"success"}),ae({});const R=H(f);if(Object.keys(R).length>0){ae(R);return}j(!0);try{await le.put("/settings/profile",f),Y({text:"Profile updated successfully!",type:"success"}),await o()}catch(J){Y({text:J.response?.data?.message||"Failed to update profile",type:"error"})}finally{j(!1)}},[f,H,o]),B=y.useCallback(N=>{if(!N)return{score:0,text:"",color:""};let R=0;const J={length:N.length>=8,lowercase:/[a-z]/.test(N),uppercase:/[A-Z]/.test(N),numbers:/\d/.test(N),special:/[!@#$%^&*(),.?":{}|<>]/.test(N)};return R=Object.values(J).filter(Boolean).length,{score:R,...{0:{text:"",color:""},1:{text:"Very Weak",color:"text-red-600"},2:{text:"Weak",color:"text-red-500"},3:{text:"Fair",color:"text-yellow-500"},4:{text:"Good",color:"text-blue-500"},5:{text:"Strong",color:"text-green-500"}}[R],checks:J}},[]),Q=y.useCallback(N=>{const R={};N.currentPassword||(R.currentPassword="Current password is required"),N.newPassword||(R.newPassword="New password is required");const J=B(N.newPassword);return N.newPassword&&J.score<3&&(R.newPassword="Password is too weak. Please include uppercase, lowercase, numbers, and special characters."),N.newPassword!==N.confirmPassword&&(R.confirmPassword="Passwords do not match"),R},[B]),L=y.useCallback(async N=>{N.preventDefault(),Y({text:"",type:"success"}),ae({});const R=Q(g);if(Object.keys(R).length>0){ae(R);return}j(!0);try{await le.post("/settings/change-password",{currentPassword:g.currentPassword,newPassword:g.newPassword}),Y({text:"Password changed successfully!",type:"success"}),_({currentPassword:"",newPassword:"",confirmPassword:""})}catch(J){Y({text:J.response?.data?.message||"Failed to change password",type:"error"})}finally{j(!1)}},[g,Q]);return a.jsxs("div",{className:"space-y-6",children:[T.text&&a.jsx("div",{className:`p-3 rounded ${T.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.text}),a.jsx(Co,{title:"Profile Information",children:a.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("input",{id:"fullName",type:"text",value:f.fullName,onChange:N=>u({...f,fullName:N.target.value}),className:`mt-1 block w-full border rounded-md shadow-sm px-3 py-2 ${b.fullName?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-describedby":b.fullName?"fullName-error":void 0,disabled:A}),b.fullName&&a.jsx("p",{id:"fullName-error",className:"mt-1 text-sm text-red-600",children:b.fullName})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),a.jsx("input",{id:"phone",type:"tel",value:f.phone,onChange:N=>u({...f,phone:N.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm px-3 py-2 focus:border-blue-500 focus:ring-blue-500",disabled:A})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("input",{id:"email",type:"email",value:f.email,onChange:N=>u({...f,email:N.target.value}),className:`mt-1 block w-full border rounded-md shadow-sm px-3 py-2 ${b.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-describedby":b.email?"email-error":void 0,disabled:A,required:!0}),b.email&&a.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",children:b.email})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:A,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[A&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A?"Updating...":"Update Profile"]})})]})}),a.jsx(Co,{title:"Change Password",children:a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),a.jsx("input",{id:"currentPassword",type:"password",value:g.currentPassword,onChange:N=>_({...g,currentPassword:N.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${b.currentPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":b.currentPassword?"currentPassword-error":void 0,disabled:A,required:!0}),b.currentPassword&&a.jsx("p",{id:"currentPassword-error",className:"mt-1 text-sm text-red-600",children:b.currentPassword})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),a.jsx("input",{id:"newPassword",type:"password",value:g.newPassword,onChange:N=>_({...g,newPassword:N.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${b.newPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":b.newPassword?"newPassword-error":"newPassword-help",disabled:A,required:!0}),(()=>{const N=B(g.newPassword);return a.jsxs("div",{className:"mt-2",children:[g.newPassword&&a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Password strength:"}),a.jsx("span",{className:`text-xs font-medium ${N.color}`,children:N.text})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${N.score===1?"bg-red-400 w-1/5":N.score===2?"bg-red-400 w-2/5":N.score===3?"bg-yellow-400 w-3/5":N.score===4?"bg-blue-400 w-4/5":N.score===5?"bg-green-400 w-full":"w-0"}`})}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:a.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[a.jsx("span",{className:N.checks?.length?"text-green-600":"text-gray-400",children:"✓ 8+ characters"}),a.jsx("span",{className:N.checks?.uppercase?"text-green-600":"text-gray-400",children:"✓ Uppercase"}),a.jsx("span",{className:N.checks?.lowercase?"text-green-600":"text-gray-400",children:"✓ Lowercase"}),a.jsx("span",{className:N.checks?.numbers?"text-green-600":"text-gray-400",children:"✓ Numbers"}),a.jsx("span",{className:N.checks?.special?"text-green-600":"text-gray-400",children:"✓ Special chars"})]})})]}),a.jsx("p",{id:"newPassword-help",className:"text-xs text-gray-500",children:"Include uppercase, lowercase, numbers, and special characters"}),b.newPassword&&a.jsx("p",{id:"newPassword-error",className:"mt-1 text-sm text-red-600",children:b.newPassword})]})})()]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),a.jsx("input",{id:"confirmPassword",type:"password",value:g.confirmPassword,onChange:N=>_({...g,confirmPassword:N.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${b.confirmPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":b.confirmPassword?"confirmPassword-error":void 0,disabled:A,required:!0}),b.confirmPassword&&a.jsx("p",{id:"confirmPassword-error",className:"mt-1 text-sm text-red-600",children:b.confirmPassword})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:A,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[A&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A?"Changing...":"Change Password"]})})]})})]})},ip=()=>{const[i,o]=y.useState({maintenanceMode:!1,sessionTimeout:30}),[f,u]=y.useState(!0),[g,_]=y.useState({text:"",type:"success"}),[T,Y]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const b=await le.get("/settings/system");o(ae=>({...ae,...b}))}catch(b){console.error("Failed to load system settings:",b)}finally{u(!1)}})()},[]);const A=y.useCallback(async j=>{j.preventDefault(),_({text:"",type:"success"}),Y(!0);try{await le.put("/settings/system",i),_({text:"Settings saved successfully!",type:"success"})}catch(b){_({text:b.response?.data?.message||"Failed to save settings",type:"error"})}finally{Y(!1)}},[i]);return f?a.jsxs("div",{className:"flex items-center justify-center p-8",role:"status","aria-label":"Loading system settings",children:[a.jsxs("svg",{className:"animate-spin h-6 w-6 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading system settings..."]}):a.jsxs(Co,{title:"System Configuration",children:[g.text&&a.jsx("div",{className:`p-3 mb-4 rounded ${g.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,role:"alert","aria-live":"polite",children:g.text}),a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"maintenanceMode",className:"font-medium text-gray-700",children:"Maintenance Mode"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Prevents non-admins from accessing the system."})]}),a.jsx("input",{id:"maintenanceMode",type:"checkbox",checked:i.maintenanceMode,onChange:j=>o({...i,maintenanceMode:j.target.checked}),className:"h-4 w-4 rounded text-blue-600 border-gray-300"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"sessionTimeout",className:"block text-sm font-medium text-gray-700",children:"Session Timeout (minutes)"}),a.jsx("input",{id:"sessionTimeout",type:"number",value:i.sessionTimeout,onChange:j=>o({...i,sessionTimeout:parseInt(j.target.value)||30}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{type:"submit",disabled:T,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[T&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),T?"Saving...":"Save System Settings"]})})]})]})};function cp(){const[i,o]=y.useState("profile"),{user:f}=vs(),u=y.useMemo(()=>[{id:"profile",label:"Profile"},f?.role==="admin"&&{id:"system",label:"System"}].filter(Boolean),[f?.role]),g=y.useCallback(_=>{o(_)},[]);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:u.map(_=>a.jsx("button",{onClick:()=>g(_.id),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i===_.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,role:"tab","aria-selected":i===_.id,"aria-controls":`${_.id}-panel`,children:_.label},_.id))})}),a.jsxs("div",{role:"tabpanel",children:[i==="profile"&&a.jsx("div",{id:"profile-panel","aria-labelledby":"profile-tab",children:a.jsx(rp,{})}),i==="system"&&f?.role==="admin"&&a.jsx("div",{id:"system-panel","aria-labelledby":"system-tab",children:a.jsx(ip,{})})]})]})}function op(){const[i,o]=y.useState([]),[f,u]=y.useState(!0),[g,_]=y.useState(!1),[T,Y]=y.useState(null),[A,j]=y.useState(""),[b,ae]=y.useState("all"),[H,oe]=y.useState("overview"),[B,Q]=y.useState([]),[L,N]=y.useState(!1),[R,J]=y.useState(null),[ie,$]=y.useState({name:"",code:"",description:"",color:"blue",machine_types:[]}),[I,ue]=y.useState(!1),[se,X]=y.useState(!1),[P,Ee]=y.useState(null),[re,we]=y.useState({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),[ce,w]=y.useState({backup_frequency:"daily",session_timeout:24,max_login_attempts:5,maintenance_mode:!1}),p=(h,W="success")=>{Y({message:h,type:W}),setTimeout(()=>Y(null),3e3)},k=async(h=!1)=>{h?_(!0):u(!0);try{const[W,Me]=await Promise.all([le.get("/users"),le.get("/environments").catch(()=>[])]);o(W),Q(Me)}catch(W){console.error("Failed to load data:",W),p("Failed to load users","danger")}finally{u(!1),_(!1)}},E=()=>{k(!0)};y.useEffect(()=>{k()},[]);const V=async h=>{h.preventDefault();try{await le.post("/users",re),ue(!1),we({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),k(),p("User created successfully")}catch(W){p("Failed to create user: "+W.message,"danger")}},m=async h=>{h.preventDefault();try{await le.put(`/users/${P.id}`,re),ue(!1),Ee(null),we({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),k(),p("User updated successfully")}catch(W){p("Failed to update user: "+W.message,"danger")}},q=async h=>{if(window.confirm("Are you sure you want to delete this user?"))try{await le.delete(`/users/${h}`),k(),p("User deleted successfully")}catch(W){p("Failed to delete user: "+W.message,"danger")}},Z=h=>{Ee(h),we({username:h.username,email:h.email,password:"",role:h.role,employee_code:h.employee_code||"",company:h.company||"Workforce"}),ue(!0)},ee=async h=>{h.preventDefault();try{await le.post("/environments",ie),N(!1),$({name:"",code:"",description:"",color:"blue",machine_types:[]}),k(),p("Environment created successfully")}catch(W){p("Failed to create environment: "+W.message,"danger")}},ne=async h=>{h.preventDefault();try{await le.put(`/environments/${R.id}`,ie),N(!1),J(null),$({name:"",code:"",description:"",color:"blue",machine_types:[]}),k(),p("Environment updated successfully")}catch(W){p("Failed to update environment: "+W.message,"danger")}},ye=async h=>{if(window.confirm("Are you sure you want to delete this environment? This action cannot be undone."))try{await le.delete(`/environments/${h}`),k(),p("Environment deleted successfully")}catch(W){p("Failed to delete environment: "+W.message,"danger")}},me=h=>{J(h);let W=[];try{W=typeof h.machine_types=="string"?JSON.parse(h.machine_types):h.machine_types||[]}catch(Me){console.error("Failed to parse machine types:",Me),W=[]}$({name:h.name,code:h.code,description:h.description||"",color:h.color||"blue",machine_types:W}),N(!0)},Oe=y.useMemo(()=>{let h=i;return b!=="all"&&(h=h.filter(W=>W.role===b)),A&&(h=h.filter(W=>W.username.toLowerCase().includes(A.toLowerCase())||W.email.toLowerCase().includes(A.toLowerCase())||W.employee_code&&W.employee_code.toLowerCase().includes(A.toLowerCase()))),h},[i,b,A]),be=y.useMemo(()=>{const h=i.length,W=i.filter(He=>He.is_active!==0).length,Me=i.filter(He=>He.role==="admin").length,D=i.filter(He=>He.role==="supervisor").length,fe=i.filter(He=>He.role==="operator").length,Xe=i.filter(He=>He.role==="viewer").length;return{total:h,active:W,admins:Me,supervisors:D,operators:fe,viewers:Xe}},[i]),Be=h=>{const Me={admin:{variant:"danger",icon:ei},supervisor:{variant:"warning",icon:Wt},operator:{variant:"info",icon:Ie},viewer:{variant:"default",icon:Xa}}[h]||{variant:"default",icon:Ie},D=Me.icon;return a.jsxs(dt,{variant:Me.variant,children:[a.jsx(D,{className:"w-3 h-3 mr-1"}),h.toUpperCase()]})},Ye=h=>a.jsxs(dt,{variant:h?"success":"danger",children:[h?a.jsx(Wt,{className:"w-3 h-3 mr-1"}):a.jsx(og,{className:"w-3 h-3 mr-1"}),h?"ACTIVE":"INACTIVE"]}),et=()=>a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ie,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:be.total})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wt,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:be.active})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ei,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Admins"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:be.admins})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wt,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Supervisors"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:be.supervisors})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ie,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Operators"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:be.operators})]})]})}),a.jsx(Ne,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Xa,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Viewers"}),a.jsx("p",{className:"text-2xl font-bold text-gray-600",children:be.viewers})]})]})})]}),$e=({title:h,description:W,icon:Me,onClick:D,color:fe="gray"})=>{const Xe={blue:"border-blue-200 bg-blue-50 hover:bg-blue-100 text-blue-600",green:"border-green-200 bg-green-50 hover:bg-green-100 text-green-600",yellow:"border-yellow-200 bg-yellow-50 hover:bg-yellow-100 text-yellow-600",red:"border-red-200 bg-red-50 hover:bg-red-100 text-red-600",purple:"border-purple-200 bg-purple-50 hover:bg-purple-100 text-purple-600",gray:"border-gray-200 bg-gray-50 hover:bg-gray-100 text-gray-600"};return a.jsx(Ne,{className:`p-6 border-l-4 cursor-pointer transition-all duration-300 hover:shadow-lg ${Xe[fe]}`,onClick:D,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Me,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:h}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:W})]})]})})};return f&&i.length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(lt,{className:"w-5 h-5 animate-spin"}),"Loading admin panel..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[T&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${T.type==="success"?"bg-green-100 text-green-800 border border-green-200":T.type==="danger"?"bg-red-100 text-red-800 border border-red-200":T.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:T.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Panel"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system settings, users, and administration"})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(xe,{onClick:E,disabled:g,variant:"outline",children:[a.jsx(lt,{className:`w-4 h-4 mr-2 ${g?"animate-spin":""}`}),"Refresh"]})})]}),a.jsx(Ne,{className:"p-1",children:a.jsx("div",{className:"flex gap-1",children:[{id:"overview",label:"Overview",icon:Na},{id:"users",label:"User Management",icon:Ie},{id:"environments",label:"Environments",icon:Jt},{id:"settings",label:"System Settings",icon:Jt},{id:"tools",label:"Admin Tools",icon:ni}].map(h=>{const W=h.icon;return a.jsxs("button",{onClick:()=>oe(h.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${H===h.id?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[a.jsx(W,{className:"w-4 h-4"}),h.label]},h.id)})})}),H==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(et,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx($e,{title:"User Management",description:"Add, edit, and manage user accounts",icon:Ie,onClick:()=>oe("users"),color:"blue"}),a.jsx($e,{title:"System Settings",description:"Configure system parameters",icon:Jt,onClick:()=>oe("settings"),color:"green"}),a.jsx($e,{title:"Database Backup",description:"Backup and restore data",icon:C0,onClick:()=>p("Backup functionality coming soon","info"),color:"yellow"}),a.jsx($e,{title:"Activity Logs",description:"View system activity and logs",icon:Dt,onClick:()=>p("Activity logs coming soon","info"),color:"purple"}),a.jsx($e,{title:"System Reports",description:"Generate comprehensive reports",icon:Na,onClick:()=>p("Reports functionality coming soon","info"),color:"red"}),a.jsx($e,{title:"Maintenance Tools",description:"System maintenance and utilities",icon:ni,onClick:()=>oe("tools"),color:"gray"})]})]}),H==="users"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(et,{}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),a.jsxs(xe,{onClick:()=>ue(!0),children:[a.jsx(So,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),a.jsx(Ne,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:A,onChange:h=>j(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ri,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{value:b,onChange:h=>ae(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsx("div",{className:"flex items-center justify-center md:justify-start",children:a.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",Oe.length," of ",i.length," users"]})})]})}),a.jsx(Ne,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Username","Email","Employee Code","Role","Status","Last Login","Actions"].map(h=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:h},h))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Oe.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"7",className:"text-center py-10",children:[a.jsx(Ie,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No users found"}),a.jsxs(xe,{onClick:()=>ue(!0),size:"sm",children:[a.jsx(So,{className:"w-4 h-4 mr-2"}),"Add First User"]})]})}):Oe.map(h=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.username})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:h.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:h.employee_code||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Be(h.role)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ye(h.is_active)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:h.last_login?new Date(h.last_login).toLocaleDateString():"Never"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[a.jsx(xe,{onClick:()=>Z(h),size:"sm",variant:"outline",children:a.jsx(si,{className:"w-4 h-4"})}),a.jsx(xe,{onClick:()=>q(h.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:a.jsx(Qs,{className:"w-4 h-4"})})]})]},h.id))})]})})})]}),H==="environments"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Environment Management"}),a.jsx("p",{className:"text-gray-600",children:"Configure production environments and their machine types"})]}),a.jsxs(xe,{onClick:()=>{$({name:"",code:"",description:"",color:"blue",machine_types:[]}),J(null),N(!0)},children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add Environment"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:B.length===0?a.jsxs(Ne,{className:"col-span-full p-12 text-center",children:[a.jsx(Jt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No environments configured"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production environment to get started"}),a.jsxs(xe,{onClick:()=>{$({name:"",code:"",description:"",color:"blue",machine_types:[]}),J(null),N(!0)},children:[a.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Add First Environment"]})]}):B.map(h=>a.jsxs(Ne,{className:`p-6 border-l-4 border-${h.color||"blue"}-200 hover:shadow-lg transition-all duration-300`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:h.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-2 uppercase font-mono",children:h.code}),h.description&&a.jsx("p",{className:"text-sm text-gray-600",children:h.description})]}),a.jsx(dt,{variant:h.color==="blue"?"info":h.color==="green"?"success":h.color==="yellow"?"warning":"default",children:h.code})]}),(()=>{let W=[];try{W=typeof h.machine_types=="string"?JSON.parse(h.machine_types):h.machine_types||[]}catch(Me){console.error("Failed to parse machine types:",Me),W=[]}return W&&W.length>0&&a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Machine Types:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[W.slice(0,3).map((Me,D)=>a.jsx(dt,{variant:"default",size:"sm",children:Me},D)),W.length>3&&a.jsxs(dt,{variant:"default",size:"sm",children:["+",W.length-3," more"]})]})]})})(),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(xe,{onClick:()=>me(h),variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(si,{className:"w-4 h-4 mr-1"}),"Edit"]}),a.jsx(xe,{onClick:()=>ye(h.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",children:a.jsx(Qs,{className:"w-4 h-4"})})]})]},h.id))})]}),H==="settings"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"System Settings"}),a.jsx("p",{className:"text-gray-600",children:"Configure system parameters and preferences"})]}),a.jsx(Ne,{className:"p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),a.jsxs("select",{value:ce.backup_frequency,onChange:h=>w({...ce,backup_frequency:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"hourly",children:"Hourly"}),a.jsx("option",{value:"daily",children:"Daily"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"monthly",children:"Monthly"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (hours)"}),a.jsx("input",{type:"number",value:ce.session_timeout,onChange:h=>w({...ce,session_timeout:parseInt(h.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"72"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Login Attempts"}),a.jsx("input",{type:"number",value:ce.max_login_attempts,onChange:h=>w({...ce,max_login_attempts:parseInt(h.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"3",max:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Mode"}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("button",{onClick:()=>w({...ce,maintenance_mode:!ce.maintenance_mode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${ce.maintenance_mode?"bg-blue-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ce.maintenance_mode?"translate-x-6":"translate-x-1"}`})}),a.jsx("span",{className:"text-sm text-gray-600",children:ce.maintenance_mode?"Enabled":"Disabled"})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsxs(xe,{onClick:()=>p("Settings saved successfully"),children:[a.jsx(Tn,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})})]}),H==="tools"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Admin Tools"}),a.jsx("p",{className:"text-gray-600",children:"System maintenance and administrative utilities"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx($e,{title:"Export Users",description:"Export user data to CSV/Excel",icon:xa,onClick:()=>p("Export functionality coming soon","info"),color:"blue"}),a.jsx($e,{title:"Import Users",description:"Import users from CSV/Excel",icon:Of,onClick:()=>p("Import functionality coming soon","info"),color:"green"}),a.jsx($e,{title:"Clear Cache",description:"Clear system cache and temporary files",icon:lt,onClick:()=>p("Cache cleared successfully"),color:"yellow"}),a.jsx($e,{title:"System Health",description:"Check system health and status",icon:Dt,onClick:()=>p("System health check completed","success"),color:"purple"}),a.jsx($e,{title:"Security Audit",description:"Run security audit and checks",icon:ei,onClick:()=>p("Security audit initiated","info"),color:"red"}),a.jsx($e,{title:"Log Analysis",description:"Analyze system logs and errors",icon:Na,onClick:()=>p("Log analysis coming soon","info"),color:"gray"})]})]}),L&&a.jsx(zt,{title:R?"Edit Environment":"Add New Environment",onClose:()=>{N(!1),J(null),$({name:"",code:"",description:"",color:"blue",machine_types:[]})},children:a.jsxs("form",{onSubmit:R?ne:ee,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Name"}),a.jsx("input",{type:"text",placeholder:"e.g. Blending Department",value:ie.name,onChange:h=>$({...ie,name:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Code"}),a.jsx("input",{type:"text",placeholder:"e.g. blending",value:ie.code,onChange:h=>$({...ie,code:h.target.value.toLowerCase().replace(/\s+/g,"_")}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used internally (lowercase, no spaces)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx("textarea",{placeholder:"Brief description of this environment",value:ie.description,onChange:h=>$({...ie,description:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),a.jsxs("select",{value:ie.color,onChange:h=>$({...ie,color:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"blue",children:"Blue"}),a.jsx("option",{value:"green",children:"Green"}),a.jsx("option",{value:"yellow",children:"Yellow"}),a.jsx("option",{value:"purple",children:"Purple"}),a.jsx("option",{value:"red",children:"Red"}),a.jsx("option",{value:"gray",children:"Gray"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Types"}),a.jsx("textarea",{placeholder:"Enter machine types, one per line (e.g., Bulk Line, Canning line, etc.)",value:ie.machine_types.join(`
`),onChange:h=>$({...ie,machine_types:h.target.value.split(`
`).filter(W=>W.trim())}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"One machine type per line"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(xe,{type:"button",onClick:()=>{N(!1),J(null),$({name:"",code:"",description:"",color:"blue",machine_types:[]})},variant:"outline",children:"Cancel"}),a.jsxs(xe,{type:"submit",children:[R?a.jsx(Tn,{className:"w-4 h-4 mr-2"}):a.jsx(Pt,{className:"w-4 h-4 mr-2"}),R?"Update Environment":"Create Environment"]})]})]})}),I&&a.jsx(zt,{title:P?"Edit User":"Add New User",onClose:()=>{ue(!1),Ee(null),we({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"})},children:a.jsxs("form",{onSubmit:P?m:V,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),a.jsx("input",{type:"text",placeholder:"Username",value:re.username,onChange:h=>we({...re,username:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Code"}),a.jsx("input",{type:"text",placeholder:"1234",value:re.employee_code,onChange:h=>we({...re,employee_code:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",placeholder:"user@example.com",value:re.email,onChange:h=>we({...re,email:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",P&&"(leave blank to keep current)"]}),a.jsx("input",{type:"password",placeholder:"Password",value:re.password,onChange:h=>we({...re,password:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!P})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:re.role,onChange:h=>we({...re,role:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),a.jsx("input",{type:"text",placeholder:"Company name",value:re.company,onChange:h=>we({...re,company:h.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(xe,{type:"button",onClick:()=>{ue(!1),Ee(null),we({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"})},variant:"outline",children:"Cancel"}),a.jsxs(xe,{type:"submit",children:[P?a.jsx(Tn,{className:"w-4 h-4 mr-2"}):a.jsx(So,{className:"w-4 h-4 mr-2"}),P?"Update User":"Create User"]})]})]})})]})}const Lf=(i,o)=>{const f=i.map(Y=>Object.values(Y).join(",")).join(`
`),g=Object.keys(i[0]||{}).join(",")+`
`+f,_=new Blob([g],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a");T.href=URL.createObjectURL(_),T.download=o,T.click()},dp=(i,o)=>{const f=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),u=document.createElement("a");u.href=URL.createObjectURL(f),u.download=o,u.click()},up=(i,o)=>{if(!window.XLSX){console.warn("XLSX library not available, falling back to CSV export");const j=[...i.supervisors.map(b=>({Type:"Supervisor","Employee Code":b.employee_code||"N/A",Name:b.fullName||b.name,Machine:"N/A",Position:"Supervisor",Shift:b.shift,Company:"N/A",Status:b.status,Date:o})),...i.assignments.map(b=>({Type:"Employee","Employee Code":b.employee_code||"N/A",Name:ci(b),Machine:b.machine||"N/A",Position:b.position?b.position:b.role?b.role:"Operator",Shift:b.shift,Company:b.company||"N/A",Status:b.status,Date:o})),...i.attendance.map(b=>({Type:"Attendance",Name:b.name,"Employee Code":"N/A",Machine:"N/A","Production Area":b.production_area||"N/A",Position:b.position||"N/A",Shift:b.shift,Status:b.status,Date:o}))];Lf(j,`labour-layout-${o}.csv`);return}const f=window.XLSX.utils.book_new(),u=new Date(o),g=u.toLocaleDateString("en-US",{weekday:"long"}),_=u.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),T=[];T.push(["DAILY LABOUR LAYOUT REPORT"]),T.push([]),T.push(["Day of Week:",g]),T.push(["Date:",_]),T.push(["Total Supervisors:",i.summary.total_supervisors||0]),T.push(["Total Assignments:",i.summary.total_assignments||0]),T.push(["Total Attendance Records:",i.summary.total_attendance||0]),T.push([]),i.supervisors.length>0&&(T.push(["SUPERVISORS ON DUTY"]),T.push(["Employee Code","Name","Area","Position","Shift","Status"]),i.supervisors.forEach(j=>{T.push([j.employee_code||"N/A",j.fullName||j.name,"Supervision","Supervisor",j.shift,j.status])})),i.assignments.length>0&&(T.push([]),T.push(["ASSIGNED EMPLOYEES"]),T.push(["Employee Code","Name","Machine","Position","Shift","Company","Status"]),i.assignments.forEach(j=>{T.push([j.employee_code||"N/A",j.fullName||j.name,j.machine||"N/A",j.position?j.position:j.role?j.role:"Operator",j.shift,j.company||"N/A",j.status])})),i.attendance.length>0&&(T.push([]),T.push(["ATTENDANCE RECORDS"]),T.push(["Name","Production Area","Position","Shift","Status"]),i.attendance.forEach(j=>{T.push([j.name,j.production_area||"N/A",j.position||"N/A",j.shift,j.status])}));const Y=window.XLSX.utils.aoa_to_sheet(T),A=[{wch:20},{wch:18},{wch:15},{wch:10},{wch:12}];Y["!cols"]=A,window.XLSX.utils.book_append_sheet(f,Y,"Labour Layout"),window.XLSX.writeFile(f,`labour-layout-${o}.xlsx`)};function mp(){const[i,o]=y.useState({supervisors:[],assignments:[],attendance:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}}),[f,u]=y.useState(!0),[g,_]=y.useState(()=>{const R=new URLSearchParams(window.location.search).get("date");return R||new Date().toISOString().split("T")[0]}),[T,Y]=y.useState(!1),[A,j]=y.useState("excel"),[b,ae]=y.useState("all"),[H,oe]=y.useState("all"),B=async N=>{u(!0);try{const R=await le.get("/labour/roster?date="+N);o(R)}catch(R){console.error("Failed to fetch roster for "+N+":",R);try{const J=await le.get("/labour/today");o({supervisors:[],assignments:[],attendance:J,machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:J.length,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}})}catch(J){console.error("Failed to fetch roster:",J),alert("Failed to load roster. Please check the server connection."),o({supervisors:[],assignments:[],attendance:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}})}}finally{u(!1)}};y.useEffect(()=>{B(g)},[g]);const Q=async N=>{try{await le.put("/labour/verify/"+N),B(g)}catch(R){alert("Failed to verify worker: "+R.message)}},L=async()=>{try{if(u(!0),A==="excel")up(i,g),alert(`Exported labour layout for ${g}`);else{const N=[...i.supervisors.map(J=>({Type:"Supervisor",Name:J.fullName||J.name,"Employee Code":J.employee_code||"N/A",Machine:"N/A","Production Area":"Supervision",Position:J.position,Shift:J.shift,Status:J.status,Date:g})),...i.assignments.map(J=>({Type:"Employee",Name:ci(J),"Employee Code":J.employee_code||"N/A",Machine:J.machine||"N/A","Production Area":J.production_area||"N/A",Position:J.position,Shift:J.shift,Status:J.status,Date:g})),...i.attendance.map(J=>({Type:"Attendance",Name:J.name,"Employee Code":"N/A",Machine:"N/A","Production Area":J.production_area||"N/A",Position:J.position||"N/A",Shift:J.shift,Status:J.status,Date:g}))],R=`labour-layout-${g}.${A}`;A==="csv"?Lf(N,R):dp(N,R),alert(`Exported ${N.length} records to ${A.toUpperCase()}`)}Y(!1)}catch(N){console.error("Export error:",N),alert("Export failed: "+N.message)}finally{u(!1)}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-200 text-sm mb-2",children:[a.jsx("span",{className:"cursor-pointer hover:text-white transition-colors",onClick:()=>window.location.href="/labor-planner?date="+g,children:"Labor Planner"}),a.jsx("span",{children:">"}),a.jsx("span",{className:"text-white font-medium",children:"Layout View"}),a.jsx("span",{className:"ml-2 px-2 py-1 bg-green-500 bg-opacity-20 text-green-200 rounded-full text-xs",children:"Live Data"})]}),a.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[a.jsx(Ie,{className:"w-8 h-8"}),"Daily Labour Layout"]}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Real-time workforce management and reporting"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(Ya,{className:"w-4 h-4"}),a.jsx("input",{type:"date",value:g,onChange:N=>_(N.target.value),className:"bg-transparent text-white placeholder-blue-200 border-none outline-none text-sm font-medium"})]}),a.jsxs("button",{onClick:()=>window.location.href="/labor-planner?date="+g,className:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(li,{className:"w-4 h-4"}),"Plan Workforce"]}),a.jsxs("button",{onClick:()=>Y(!0),className:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(xa,{className:"w-4 h-4"}),"Export"]}),a.jsxs("button",{onClick:()=>B(g),className:"bg-white bg-opacity-10 hover:bg-white hover:bg-opacity-20 backdrop-blur-sm px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(lt,{className:"w-4 h-4"}),"Refresh"]})]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-blue-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Supervisors"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_supervisors||0})]}),a.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:a.jsx(Wt,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-green-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-600",children:"Assignments"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_assignments||0})]}),a.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:a.jsx(ti,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Machines Active"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_machines_in_use||0})]}),a.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:a.jsx(Jt,{className:"w-6 h-6 text-orange-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Attendance"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_attendance||0})]}),a.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:a.jsx(Xa,{className:"w-6 h-6 text-purple-600"})})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Workforce Overview"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[g," • ",(i.summary?.total_supervisors||0)+(i.summary?.total_assignments||0)+(i.summary?.total_attendance||0)+(i.summary?.total_machines_in_use||0)," total records"]})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("select",{value:b,onChange:N=>ae(N.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Shifts"}),a.jsx("option",{value:"day",children:"Day Shift"}),a.jsx("option",{value:"night",children:"Night Shift"})]})}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("select",{value:H,onChange:N=>oe(N.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"Machine [all]"}),Array.from(new Set(i.assignments?.map(N=>N.machine).filter(N=>N))).sort().map((N,R)=>a.jsx("option",{value:N,children:N},R))]})})]})]})})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:a.jsx("div",{className:"p-6",children:f?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-500 mt-3",children:"Loading workforce data..."})]}):a.jsxs("div",{className:"space-y-8",children:[i.supervisors&&i.supervisors.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(Ie,{className:"w-5 h-5 text-blue-600"})}),"Supervisors on Duty"]}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee Code"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Area"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Position"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-blue-100",children:i.supervisors.filter(N=>b==="all"?!0:N.shift===b).map(N=>a.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600 font-mono font-semibold",children:N.employee_code||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:a.jsx(Ie,{className:"w-4 h-4 text-blue-600"})}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:N.fullName||N.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:"Supervision"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 font-medium",children:"Supervisor"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${N.shift==="day"?"bg-amber-100 text-amber-800":"bg-indigo-100 text-indigo-800"}`,children:N.shift==="day"?"Day Shift":"Night Shift"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-800",children:N.status})})]},`supervisor-${N.id}`))})]})})})]}),i.assignments&&i.assignments.filter(N=>{const R=b==="all"?!0:N.shift===b,J=H==="all"?!0:N.machine===H;return R&&J}).length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:a.jsx(ti,{className:"w-5 h-5 text-green-600"})}),"Assigned Employees"]}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee Code"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Machine"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Position"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Company"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:i.assignments.filter(N=>{const R=b==="all"?!0:N.shift===b,J=H==="all"?!0:N.machine===H;return R&&J}).map(N=>a.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600 font-mono font-semibold",children:N.employee_code||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-green-100 rounded-full p-2 mr-3",children:a.jsx(Ie,{className:"w-4 h-4 text-green-600"})}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:N.fullName||N.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 font-medium",children:N.machine||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:N.position?N.position:N.role?N.role:"Operator"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${N.shift==="day"?"bg-amber-100 text-amber-800":"bg-indigo-100 text-indigo-800"}`,children:N.shift==="day"?"Day Shift":"Night Shift"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:N.company||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${N.status==="present"?"bg-emerald-100 text-emerald-800":N.status==="absent"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:N.status})})]},`assignment-${N.id}`))})]})})})]}),i.attendance&&i.attendance.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[a.jsx(Wt,{className:"w-5 h-5"}),"Attendance Records"]}),a.jsx("div",{className:"bg-purple-50 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-purple-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Production Area"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Position"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Shift"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Status"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-purple-100",children:i.attendance.map(N=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:N.name}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600",children:N.production_area||"N/A"}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600",children:N.position||"N/A"}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600",children:N.shift}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N.status==="present"?"bg-green-100 text-green-800":N.status==="absent"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:N.status})}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:N.status==="pending"&&a.jsx("button",{onClick:()=>Q(N.id),className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:"Verify Arrival"})})]},`attendance-${N.id}`))})]})})]}),(i.supervisors?i.supervisors.length:0)===0&&(i.assignments?i.assignments.length:0)===0&&(i.attendance?i.attendance.length:0)===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Ie,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsxs("p",{children:["No labour data found for ",g]}),a.jsx("p",{className:"text-sm",children:"Try selecting a different date or check if data has been entered for this date."})]})]})})})]})]}),T&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export Labour Layout"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),a.jsxs("select",{value:A,onChange:N=>j(N.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[a.jsx("option",{value:"excel",children:"Excel (.xlsx)"}),a.jsx("option",{value:"csv",children:"CSV (.csv)"}),a.jsx("option",{value:"json",children:"JSON (.json)"})]})]})}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{onClick:L,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Export"})]})]})})]})}const Cf=()=>Ft.formatSASTDate(Ft.getCurrentSASTTime()),Hf=(i,o)=>{const f="data:text/csv;charset=utf-8,"+[Object.keys(i[0]).join(","),...i.map(_=>Object.values(_).join(","))].join(`
`),u=encodeURI(f),g=document.createElement("a");g.setAttribute("href",u),g.setAttribute("download",o),document.body.appendChild(g),g.click(),document.body.removeChild(g)},fp=(i,o)=>{const f=JSON.stringify(i,null,2),u=new Blob([f],{type:"application/json"}),g=URL.createObjectURL(u),_=document.createElement("a");_.href=g,_.download=o,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(g)},hp=(i,o,f,u,g)=>{if(!window.XLSX){console.warn("XLSX library not available, falling back to CSV export"),Hf(i.map(B=>{const Q=f.find(N=>N.id===B.employee_id),L=o.find(N=>N.id==B.machine_id);return{"Employee Code":Q?.employee_code||"N/A",Name:Q?.fullName||Q?.username||"N/A",Machine:L?.name||`Machine ${B.machine_id}`,Role:Q?.role||"N/A",Shift:B.shift||"N/A",Company:Q?.company||"N/A"}}),`labor-schedule-${u}.csv`);return}const _=new Date(u),T=_.toLocaleDateString("en-US",{weekday:"long"}),Y=_.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),A=window.XLSX.utils.book_new(),j=[];j.push(["LABOR SCHEDULE REPORT"]),j.push([]),j.push(["Day of Week:",T]),j.push(["Date:",Y]),j.push(["Supervisors on Duty:",g.length>0?g.map(B=>B.fullName||B.username).join(", "):"Not Assigned"]),j.push([]),j.push([]),j.push(["Employee Code","Full Name","Machine","Role","Shift","Company","Attendance"]),i.forEach(B=>{const Q=f.find(N=>N.id===B.employee_id),L=o.find(N=>N.id==B.machine_id);if(Q){let N="Pending";B.status==="present"?N="Present":B.status==="absent"?N="Absent":B.status==="planned"&&(N="Planned"),j.push([Q.employee_code||"N/A",Q.fullName||Q.username||"N/A",L?.name||`Machine ${B.machine_id}`,(Q.role||"N/A").charAt(0).toUpperCase()+(Q.role||"N/A").slice(1),(B.shift||"N/A").charAt(0).toUpperCase()+(B.shift||"N/A").slice(1),Q.company||"N/A",N])}});const b=window.XLSX.utils.aoa_to_sheet(j);b["!cols"]=[{wch:15},{wch:25},{wch:20},{wch:15},{wch:12},{wch:15},{wch:12}];const ae=window.XLSX.utils.decode_range(b["!ref"]);b.A1&&(b.A1.s={font:{bold:!0,sz:16,color:{rgb:"1F4E79"}},alignment:{horizontal:"center"}});for(let B=2;B<=4;B++){const Q=`A${B+1}`,L=`B${B+1}`;b[Q]&&(b[Q].s={font:{bold:!0},fill:{fgColor:{rgb:"F2F2F2"}}}),b[L]&&(b[L].s={font:{bold:!1},fill:{fgColor:{rgb:"F9F9F9"}}})}const H=8;for(let B=0;B<7;B++){const Q=window.XLSX.utils.encode_cell({r:H-1,c:B});b[Q]&&(b[Q].s={font:{bold:!0,color:{rgb:"FFFFFF"}},fill:{fgColor:{rgb:"4472C4"}},alignment:{horizontal:"center"},border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}})}for(let B=H;B<ae.e.r;B++){const L=(B-H)%2===0?"FFFFFF":"F8F9FA";for(let N=0;N<7;N++){const R=window.XLSX.utils.encode_cell({r:B,c:N});if(b[R]){let J=L;if(N===6){const ie=b[R].v;ie==="Present"?J="D4EDDA":ie==="Absent"?J="F8D7DA":ie==="Planned"&&(J="FFF3CD")}b[R].s={fill:{fgColor:{rgb:J}},border:{top:{style:"thin",color:{rgb:"E0E0E0"}},bottom:{style:"thin",color:{rgb:"E0E0E0"}},left:{style:"thin",color:{rgb:"E0E0E0"}},right:{style:"thin",color:{rgb:"E0E0E0"}}},alignment:{horizontal:N===1?"left":"center"},font:N===6&&b[R].v==="Present"?{bold:!0}:void 0}}}}b["!merges"]=[{s:{r:0,c:0},e:{r:0,c:6}}],window.XLSX.utils.book_append_sheet(A,b,"Labor Schedule");const oe=`Labor-Schedule-${u}.xlsx`;window.XLSX.writeFile(A,oe)},vt=({children:i,onClick:o,className:f="",variant:u="primary",disabled:g=!1,size:_="md",...T})=>{const Y={primary:"bg-blue-600 text-white hover:bg-blue-700 shadow-sm",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300",danger:"bg-red-600 text-white hover:bg-red-700 shadow-sm",success:"bg-green-600 text-white hover:bg-green-700 shadow-sm",warning:"bg-yellow-500 text-white hover:bg-yellow-600 shadow-sm",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 border border-transparent hover:border-gray-300",outline:"bg-white text-blue-600 border border-blue-600 hover:bg-blue-50"},A={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"};return a.jsx("button",{onClick:o,className:`${A[_]} rounded-lg font-medium transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ${Y[u]} ${f}`,disabled:g,...T,children:i})},Mn=({children:i,onClose:o,title:f,size:u="default"})=>{const g={sm:"max-w-md",default:"max-w-4xl",lg:"max-w-6xl",xl:"max-w-7xl"};return a.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:o,children:a.jsxs("div",{className:`bg-white rounded-xl w-full ${g[u]} max-h-[90vh] flex flex-col`,onClick:_=>_.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:f}),a.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 p-1 rounded-lg hover:bg-gray-100",children:a.jsx(ha,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:i})]})})},Ef=({children:i,variant:o="default",size:f="sm"})=>{const u={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"},g={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"};return a.jsx("span",{className:`${g[f]} rounded-full font-medium ${u[o]}`,children:i})};function xp(){const[i,o]=y.useState("planning"),[f,u]=y.useState([]),[g,_]=y.useState([]),[T,Y]=y.useState([]),[A,j]=y.useState(!0),[b,ae]=y.useState({show:!1,message:"",type:"success"}),[H,oe]=y.useState(null),[B,Q]=y.useState(""),[L,N]=y.useState("day"),[R,J]=y.useState(()=>{const te=new URLSearchParams(window.location.search).get("date");return te||Cf()}),[ie,$]=y.useState(!1),[I,ue]=y.useState(""),[se,X]=y.useState(!1),[P,Ee]=y.useState([]),[re,we]=y.useState({}),[ce,w]=y.useState(Cf()),[p,k]=y.useState(""),[E,V]=y.useState(null),[m,q]=y.useState(!1),[Z,ee]=y.useState("excel"),[ne,ye]=y.useState({start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[me,Oe]=y.useState([]),[be,Be]=y.useState(!1),[Ye,et]=y.useState(!1),[$e,h]=y.useState([]),[W,Me]=y.useState({}),[D,fe]=y.useState(!1),[Xe,He]=y.useState(!1),[Re,Et]=y.useState({startDate:"",endDate:"",template:"current_week",applyToShifts:["day","night"],copyFrom:""}),[On,Dl]=y.useState({machine:"",shift:"",employee:"",status:""}),tt=y.useCallback(async x=>{j(!0);try{const[te,de,he,ve]=await Promise.all([le.get("/machines"),le.get("/users"),le.get(`/planner/assignments?date=${x}`),le.get(`/planner/supervisors?date=${x}&shift=${L}`)]);u(te);const Te=de.filter(Ce=>Ce.role!=="admin").map(Ce=>({...Ce,displayName:ci(Ce),formattedCode:qf(Ce.employee_code),formattedRole:tp(Ce.role)}));_(Te),Y(he),Oe(ve)}catch(te){De("Failed to load initial data: "+te.message,"danger"),console.error(te)}finally{j(!1)}},[L]),ga=y.useCallback(async()=>{fe(!0);try{const te=(await le.get("/machines")).filter(he=>he.shift_cycle_enabled);h(te);const de={};for(const he of te)try{const ve=await le.get(`/machines/${he.id}/assignments/${R}`);de[he.id]=ve}catch(ve){console.warn(`Failed to load assignments for machine ${he.id}:`,ve),de[he.id]={enabled:!1,assignments:[]}}Me(de)}catch(x){console.error("Failed to load shift cycle data:",x),De("Failed to load shift cycle data: "+x.message,"danger")}finally{fe(!1)}},[R]),Ns=(x,te,de)=>{if(!x)return"rest";const he=new Date(x),ve=new Date(te),Ce=(Math.floor((ve-he)/(1e3*60*60*24))+de)%6;return Ce===0||Ce===1?"day":Ce===2||Ce===3?"night":"rest"},kt=x=>{if(!x.cycle_start_date)return{dayShift:[],nightShift:[],resting:["A","B","C"]};const de=[{letter:"A",offset:0},{letter:"B",offset:2},{letter:"C",offset:4}].reduce((he,ve)=>{const Te=Ns(x.cycle_start_date,R,ve.offset);return he[Te].push(ve.letter),he},{day:[],night:[],rest:[]});return{dayShift:de.day,nightShift:de.night,resting:de.rest}};y.useEffect(()=>{tt(i==="attendance"?ce:R),i==="planning"&&Ye&&ga()},[R,ce,i,L,tt,Ye,ga]);const Ot=y.useMemo(()=>T.filter(x=>x.machine_id==B&&x.shift===L&&x.assignment_date===R),[T,B,L,R]),pt=y.useMemo(()=>T.filter(x=>x.assignment_date===ce),[T,ce]),kl=y.useMemo(()=>g.filter(x=>{if(Ot.some(he=>he.employee_id===x.id))return!1;if(!I)return!0;const de=I.toLowerCase();return x.username?.toLowerCase().includes(de)||x.fullName?.toLowerCase().includes(de)||x.employee_code?.toLowerCase().includes(de)||x.role?.toLowerCase().includes(de)}),[g,I,Ot]),Rn=y.useMemo(()=>g.filter(x=>!p||x.username.toLowerCase().includes(p.toLowerCase())||x.employee_code&&x.employee_code.toLowerCase().includes(p.toLowerCase())),[g,p]),De=y.useCallback((x,te="success")=>{ae({show:!0,message:x,type:te}),setTimeout(()=>ae({show:!1,message:"",type:"success"}),3e3)},[]),Xs=(x,te=7)=>{const de=[],he=new Date(x);for(let ve=0;ve<te;ve++){const Te=new Date(he);Te.setDate(he.getDate()+ve),de.push(Te.toISOString().split("T")[0])}return de},Gs=()=>{const x=new Date,te=new Date(x),de=(8-x.getDay())%7;te.setDate(x.getDate()+(de===0?7:de));const he=new Date(te);return he.setDate(te.getDate()+4),{start:te.toISOString().split("T")[0],end:he.toISOString().split("T")[0]}},wa=async x=>{try{console.log("Adding supervisor:",{supervisorId:x,selectedDate:R,selectedShift:L}),await le.post("/planner/supervisors",{supervisor_id:x,assignment_date:R,shift:L}),Be(!1);const te=await le.get(`/planner/supervisors?date=${R}&shift=${L}`);Oe(te),De("Supervisor assigned successfully","success")}catch(te){if(console.error("Error adding supervisor:",te),te.response?.data?.errorType==="DOUBLE_SHIFT_CONFLICT"){const de=g.find(Te=>Te.id===x),he=de?.fullName||de?.username||"This supervisor";De(`${he} is already assigned to the ${L==="day"?"night":"day"} shift on ${R}. A supervisor cannot work both shifts on the same day.`,"warning")}else De(te.response?.data?.error||"Failed to assign supervisor","error")}},Vs=async x=>{try{await le.delete(`/planner/supervisors/${x}`);const te=await le.get(`/planner/supervisors?date=${R}&shift=${L}`);Oe(te),De("Supervisor removed successfully","success")}catch(te){De(te.response?.data?.error||"Failed to remove supervisor","error")}},ws=async()=>{try{j(!0);const{startDate:x,endDate:te,template:de,applyToShifts:he,copyFrom:ve}=Re;if(!x||!te){De("Please select both start and end dates","error");return}const Te=Xs(x,Math.ceil((new Date(te)-new Date(x))/(1e3*60*60*24))+1);let Ce=ve;if(de==="current_week")Ce=R;else if(de==="previous_week"){const it=new Date(x);it.setDate(it.getDate()-7),Ce=it.toISOString().split("T")[0]}if(!Ce){De("Please specify a source date to copy from","error");return}console.log("Planning weekly labor:",{sourceDate:Ce,weekDates:Te,applyToShifts:he});let at=[],It=[],Za=[];try{at=await le.get(`/planner/assignments?date=${Ce}`)}catch(it){console.warn("No source assignments found:",it),at=[]}try{It=await le.get(`/planner/supervisors?date=${Ce}&shift=day`)}catch(it){console.warn("No day supervisors found:",it),It=[]}try{Za=await le.get(`/planner/supervisors?date=${Ce}&shift=night`)}catch(it){console.warn("No night supervisors found:",it),Za=[]}if(at.length===0&&It.length===0&&Za.length===0){De(`No assignments or supervisors found for ${Ce} to copy from`,"warning"),He(!1);return}let Hn=0,Ka=0,Sa=0;for(const it of Te)for(const Bt of he)try{const da=at.filter(_a=>_a.shift===Bt);console.log(`Found ${da.length} assignments for ${Bt} shift to copy to ${it}`);for(const _a of da)try{await le.post("/planner/assignments",{employee_id:_a.employee_id,machine_id:_a.machine_id,shift:Bt,assignment_date:it}),Hn++}catch(Aa){console.error("Assignment error:",Aa),Aa.message.includes("already assigned")?Sa++:Ka++}const mt=Bt==="day"?It:Za;console.log(`Found ${mt.length} supervisors for ${Bt} shift to copy to ${it}`);for(const _a of mt)try{await le.post("/planner/supervisors",{supervisor_id:_a.supervisor_id,assignment_date:it,shift:Bt})}catch(Aa){console.error("Supervisor assignment error:",Aa),Aa.message.includes("already assigned")||console.warn("Failed to assign supervisor:",Aa)}}catch(da){console.error(`Error planning for ${it} ${Bt}:`,da),Ka++}He(!1),tt(R);let Ss=`Planned labor for ${Te.length} days: ${Hn} successful`;Sa>0&&(Ss+=`, ${Sa} skipped (already assigned)`),Ka>0&&(Ss+=`, ${Ka} failed`);const Wa=Ka>0?"warning":"success";De(Ss,Wa)}catch(x){console.error("Weekly planning error:",x),De("Failed to plan weekly labor: "+x.message,"error")}finally{j(!1)}},oi=()=>{const x=Gs();Et({...Re,startDate:x.start,endDate:x.end,copyFrom:R}),He(!0)},zn=async(x,te="Packer")=>{const de=T.find(he=>he.employee_id===x&&he.assignment_date===R&&he.shift===L);if(de){const he=g.find(at=>at.id===x),ve=he?.fullName||he?.username||"This employee",Ce=f.find(at=>at.id===de.machine_id)?.name||"another machine";return De(`${ve} is already assigned to ${Ce} for ${R} (${L} shift). Please remove their existing assignment first.`,"warning")}if(!B)return De("Please select a machine first","danger");if(!R)return De("Please select a date first","danger");try{console.log("Assigning employee:",{employee_id:x,machine_id:B,shift:L,assignment_date:R});const he=await le.post("/planner/assignments",{employee_id:x,machine_id:B,shift:L,assignment_date:R,job_role:te});tt(R),De("Employee assigned successfully")}catch(he){if(console.error("Assignment error:",he),he.response?.data?.errorType==="DUPLICATE_ASSIGNMENT"){const ve=g.find(at=>at.id===x),Te=ve?.fullName||ve?.username||"This employee",Ce=T.find(at=>at.employee_id===x&&at.assignment_date===R&&at.shift===L);if(Ce){const It=f.find(Za=>Za.id===Ce.machine_id)?.name||"another machine";De(`${Te} is already assigned to ${It} for ${R} (${L} shift). Please remove their existing assignment first.`,"warning")}else De(`${Te} is already assigned to a machine for ${R} (${L} shift). Please remove their existing assignment first.`,"warning")}else if(he.response?.data?.errorType==="DOUBLE_SHIFT_CONFLICT"){const ve=g.find(at=>at.id===x),Te=ve?.fullName||ve?.username||"This employee";De(`${Te} is already assigned to the ${L==="day"?"night":"day"} shift on ${R}. An employee cannot work both shifts on the same day.`,"warning")}else{const ve=he.response?.data?.error||he.message||"Failed to assign employee";De(`Assignment failed: ${ve}`,"danger")}}},Un=async()=>{if(P.length===0)return De("Please select at least one employee","warning");if(!B)return De("Please select a machine first","danger");if(!R)return De("Please select a date first","danger");try{const x=P.map(te=>{const de=re[te]||"Packer";return le.post("/planner/assignments",{employee_id:te,machine_id:B,shift:L,assignment_date:R,job_role:de})});await Promise.all(x),$(!1),Ee([]),we({}),X(!1),tt(R),De(`Successfully assigned ${P.length} employees`,"success")}catch(x){console.error("Bulk assignment error:",x),x.response?.data?.errorType==="DOUBLE_SHIFT_CONFLICT"?De("One or more employees are already assigned to the opposite shift on this date","warning"):x.response?.data?.errorType==="DUPLICATE_ASSIGNMENT"?De("One or more employees are already assigned to a machine for this date and shift","warning"):De("Some assignments failed. Please check and try again.","danger")}},Ol=async x=>{try{await le.delete(`/planner/assignments/${x}`),tt(R),De("Assignment removed")}catch{De("Failed to remove assignment","danger")}},Va=async(x,te)=>{try{await le.patch(`/planner/assignments/${x}`,{status:te}),tt(ce),De(`Attendance updated to ${te}`)}catch{De("Failed to update status","danger")}},di=async()=>{try{const{id:x,...te}=E;console.log("Updating worker:",x,te);const de=await le.put(`/users/${x}`,te);console.log("Update response:",de),_(he=>he.map(ve=>ve.id===x?{...ve,...te}:ve)),tt(R),V(null),De("Worker updated successfully")}catch(x){console.error("Worker update error:",x),De(`Failed to update worker: ${x.message}`,"danger")}},qn=async()=>{try{if(j(!0),Z==="excel"){const x=ne.start,te=T.filter(de=>de.assignment_date===x);hp(te,f,g,x,me),De(`Exported labor schedule for ${x}`,"success")}else{const te=(await le.get("/planner/assignments",{params:{startDate:ne.start,endDate:ne.end}})).map(he=>({"Assignment ID":he.id,Date:he.assignment_date,Machine:he.machine_name||`Machine ${he.machine_id}`,Employee:he.fullName||he.username,"Employee Code":he.employee_code,Shift:he.shift,Status:he.status,Role:he.role,Company:he.company})),de=`labor-assignments-${ne.start}-to-${ne.end}.${Z}`;Z==="csv"?Hf(te,de):fp(te,de),De(`Exported ${te.length} assignments to ${Z.toUpperCase()}`,"success")}q(!1)}catch(x){De("Export failed: "+x.message,"danger")}finally{j(!1)}},Ln=async()=>{const x=T.filter(ve=>ve.assignment_date===R),te=me;if(x.length+te.length===0){De("No assignments or supervisors found for this date","warning");return}const he=te.length>0?`Are you sure you want to cancel all ${x.length} assignments and ${te.length} supervisor assignments for ${R}? This action cannot be undone.`:`Are you sure you want to cancel all ${x.length} assignments for ${R}? This action cannot be undone.`;if(window.confirm(he))try{const ve=[];x.forEach(Ce=>{ve.push(le.delete(`/planner/assignments/${Ce.id}`))}),te.forEach(Ce=>{ve.push(le.delete(`/planner/supervisors/${Ce.id}`))}),await Promise.all(ve),tt(R);const Te=te.length>0?`Cancelled ${x.length} assignments and ${te.length} supervisor assignments for ${R}`:`Cancelled ${x.length} assignments for ${R}`;De(Te,"success")}catch(ve){De("Failed to cancel assignments: "+ve.message,"danger")}};return A?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(lt,{className:"w-5 h-5 animate-spin"}),"Loading Labor Planner..."]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[a.jsx("span",{className:"text-blue-600 font-medium",children:"Planning Mode"}),a.jsx("span",{children:"›"}),a.jsx("span",{className:"cursor-pointer hover:text-blue-600",onClick:()=>window.location.href=`/labour-layout?date=${R}`,children:"View Layout"})]}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Labor Planner"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Streamlined workforce management"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(vt,{variant:"outline",size:"sm",onClick:()=>window.location.href=`/labour-layout?date=${R}`,children:[a.jsx(Xa,{className:"w-4 h-4"}),"View Layout"]}),a.jsx(vt,{variant:"ghost",size:"sm",onClick:()=>q(!0),children:a.jsx(xa,{className:"w-4 h-4"})}),a.jsx(vt,{variant:"ghost",size:"sm",onClick:()=>tt(i==="attendance"?ce:R),children:a.jsx(lt,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"flex gap-0 bg-white rounded-xl shadow-sm border border-gray-100 p-1",children:[{id:"planning",label:"Planning",icon:ti},{id:"attendance",label:"Attendance",icon:Wt},{id:"workers",label:"Workers",icon:Ie}].map(x=>{const te=x.icon;return a.jsxs("button",{onClick:()=>o(x.id),className:`flex items-center justify-center gap-2 px-6 py-3 rounded-lg font-medium transition-all flex-1 ${i===x.id?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[a.jsx(te,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:x.label})]},x.id)})})]}),i==="planning"&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ya,{className:"w-4 h-4 text-gray-400"}),a.jsx("input",{type:"date",value:R,onChange:x=>J(x.target.value),className:"border-0 bg-transparent text-gray-700 font-medium focus:ring-0 p-0"})]}),a.jsx("div",{className:"h-5 w-px bg-gray-200"}),a.jsxs("select",{value:L,onChange:x=>N(x.target.value),className:"border-0 bg-transparent text-gray-700 font-medium focus:ring-0 p-0 text-sm",children:[a.jsx("option",{value:"day",children:"Day Shift"}),a.jsx("option",{value:"night",children:"Night Shift"})]}),a.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>{et(!Ye),Ye||ga()},className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${Ye?"bg-indigo-100 text-indigo-700 border border-indigo-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(_o,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"2-2-2 Cycle"}),$e.length>0&&a.jsx("span",{className:"bg-indigo-600 text-white text-xs px-2 py-1 rounded-full ml-1",children:$e.length})]}),a.jsxs(vt,{variant:"ghost",size:"sm",onClick:oi,children:[a.jsx(Ya,{className:"w-4 h-4"}),"Weekly"]}),a.jsxs(vt,{variant:"ghost",size:"sm",onClick:()=>Be(!0),children:[a.jsx(Wt,{className:"w-4 h-4"}),"Supervisors"]}),a.jsxs(vt,{variant:"danger",size:"sm",onClick:Ln,children:[a.jsx(ha,{className:"w-4 h-4"}),"Cancel Day"]})]})]})}),Ye&&a.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(_o,{className:"w-5 h-5 text-indigo-600"}),"2-2-2 Shift Cycle Management"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Automatic crew rotation: 2 days day shift → 2 days night shift → 2 days rest"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[D&&a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(lt,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"text-sm",children:"Loading..."})]}),a.jsx("button",{onClick:()=>et(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-white rounded-lg transition-colors",children:a.jsx(ha,{className:"w-4 h-4"})})]})]}),$e.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx($t,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Shift Cycles Configured"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Enable 2-2-2 shift cycles on machines to see automatic crew rotation here."}),a.jsx("button",{onClick:()=>window.location.href="/machines",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Configure Machines →"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:$e.map(x=>{const te=kt(x),de=(x.operators_per_shift||0)+(x.hopper_loaders_per_shift||0)+(x.packers_per_shift||0);return a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:x.name}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Dt,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Active Cycle"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),a.jsx("span",{className:"text-sm font-medium",children:"Day Shift"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-bold text-blue-700",children:te.dayShift.length>0?`Crew ${te.dayShift.join(", ")}`:"No crew assigned"}),a.jsxs("div",{className:"text-xs text-blue-600",children:[de," people needed"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 bg-indigo-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),a.jsx("span",{className:"text-sm font-medium",children:"Night Shift"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-bold text-indigo-700",children:te.nightShift.length>0?`Crew ${te.nightShift.join(", ")}`:"No crew assigned"}),a.jsxs("div",{className:"text-xs text-indigo-600",children:[de," people needed"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full"}),a.jsx("span",{className:"text-sm font-medium",children:"Rest"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-medium text-gray-600",children:te.resting.length>0?`Crew ${te.resting.join(", ")}`:"All crews working"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Off duty"})]})]})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium text-blue-600",children:x.operators_per_shift==null?"N/A":x.operators_per_shift===0?"Auto":x.operators_per_shift}),a.jsx("div",{className:"text-gray-500",children:"Operators"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium text-orange-600",children:x.hopper_loaders_per_shift==null?"N/A":x.hopper_loaders_per_shift===0?"Auto":x.hopper_loaders_per_shift}),a.jsx("div",{className:"text-gray-500",children:"Loaders"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium text-green-600",children:x.packers_per_shift==null?"N/A":x.packers_per_shift===0?"Auto":x.packers_per_shift}),a.jsx("div",{className:"text-gray-500",children:"Packers"})]})]})}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsxs("button",{onClick:()=>window.location.href=`/machines?edit=${x.id}`,className:"flex-1 px-3 py-2 text-xs bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(li,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),a.jsxs("button",{onClick:()=>window.location.href="/labour-layout?date="+R,className:"flex-1 px-3 py-2 text-xs bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors",children:[a.jsx(Xa,{className:"w-3 h-3 inline mr-1"}),"View Layout"]})]})]},x.id)})}),a.jsx("div",{className:"mt-6 p-4 bg-white rounded-lg border border-indigo-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(U0,{className:"w-5 h-5 text-indigo-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"How 2-2-2 Cycle Works"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:"3 staggered crews"})," (A, B, C) ensure continuous 24/7 operations"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Each crew rotates:"})," 2 days day shift → 2 days night shift → 2 days rest"]}),a.jsxs("p",{children:["• ",a.jsx("strong",{children:"Perfect coverage:"})," Every day has exactly 1 crew on day + 1 crew on night shift"]}),a.jsxs("p",{children:["• ",a.jsxs("strong",{children:["Date: ",R]})," - Assignments shown for selected date"]})]})]})]})})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:f.map(x=>{const te=T.filter(he=>he.machine_id==x.id&&he.shift===L&&he.assignment_date===R).length,de=B==x.id;return a.jsxs("div",{onClick:()=>Q(x.id),className:`p-3 rounded-lg border-2 cursor-pointer transition-all hover:shadow-md ${de?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:x.name}),a.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${te>0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:te})]}),a.jsx("p",{className:"text-xs text-gray-500",children:x.type}),a.jsx("p",{className:"text-xs text-gray-400",children:x.environment})]},x.id)})}),B&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(Jt,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:f.find(x=>x.id==B)?.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[Ot.length," workers • ",L," shift"]})]})]}),a.jsxs(vt,{onClick:()=>$(!0),size:"sm",children:[a.jsx(Pt,{className:"w-4 h-4"}),"Add"]})]}),Ot.length>0?a.jsx("div",{className:"space-y-2",children:Ot.map(x=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 font-medium text-xs",children:x.employee_code?.slice(0,2)||x.username?.slice(0,2).toUpperCase()})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 text-xs",children:x.fullName||x.username}),a.jsxs("p",{className:"text-xs text-gray-500",children:[x.employee_code," • ",x.role,x.job_role&&` • ${x.job_role}`]})]})]}),a.jsx(vt,{variant:"ghost",size:"sm",onClick:()=>Ol(x.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-1",children:a.jsx(ha,{className:"w-3 h-3"})})]},x.id))}):a.jsxs("div",{className:"text-center py-6",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",children:a.jsx(Ie,{className:"w-6 h-6 text-gray-400"})}),a.jsx("p",{className:"text-gray-500 text-xs",children:"No workers assigned"}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:'Use the "Add" button above to assign workers'})]})]})]}),i==="attendance"&&a.jsx("div",{className:"flex-1 p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl",children:a.jsx(Wt,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Attendance Tracking"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Monitor daily attendance and presence"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ya,{className:"w-5 h-5 text-slate-500"}),a.jsx("input",{type:"date",value:ce,onChange:x=>w(x.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-medium"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center",children:a.jsx(ut,{className:"w-4 h-4 text-emerald-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-emerald-900",children:"Present"}),a.jsx("p",{className:"text-xl font-bold text-emerald-700",children:pt.filter(x=>x.status==="present").length})]})]})}),a.jsx("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:a.jsx(ha,{className:"w-4 h-4 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:"Absent"}),a.jsx("p",{className:"text-xl font-bold text-red-700",children:pt.filter(x=>x.status==="absent").length})]})]})}),a.jsx("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center",children:a.jsx(Sf,{className:"w-4 h-4 text-amber-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Pending"}),a.jsx("p",{className:"text-xl font-bold text-amber-700",children:pt.filter(x=>x.status==="planned"||!x.status).length})]})]})})]}),a.jsx("div",{className:"space-y-3",children:pt.map(x=>a.jsx("div",{className:"bg-slate-50 rounded-lg border border-slate-200 p-4 hover:bg-slate-100 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:x.employee_code?.slice(0,2)||x.username?.slice(0,2).toUpperCase()})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-900 text-lg",children:x.fullName||x.username}),a.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[a.jsx("span",{className:"text-sm text-slate-600",children:x.employee_code}),a.jsx("span",{className:"text-sm text-slate-400",children:"•"}),a.jsx("span",{className:"text-sm text-slate-600",children:x.machine_name}),x.job_role&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-sm text-slate-400",children:"•"}),a.jsx("span",{className:"text-sm font-medium text-blue-600",children:x.job_role})]}),a.jsx("span",{className:"text-sm text-slate-400",children:"•"}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.shift==="day"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[x.shift," shift"]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${x.status==="present"?"bg-emerald-100 text-emerald-700":x.status==="absent"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:x.status==="present"?"Present":x.status==="absent"?"Absent":"Pending"})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Va(x.id,"present"),className:`p-2 rounded-lg border transition-all ${x.status==="present"?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-slate-200 text-slate-600 hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-600"}`,children:a.jsx(ut,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Va(x.id,"absent"),className:`p-2 rounded-lg border transition-all ${x.status==="absent"?"bg-red-500 border-red-500 text-white":"bg-white border-slate-200 text-slate-600 hover:bg-red-50 hover:border-red-200 hover:text-red-600"}`,children:a.jsx(ha,{className:"w-4 h-4"})})]})]})},x.id))}),pt.length===0&&a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Wt,{className:"w-10 h-10 text-slate-400"})}),a.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:"No assignments found"}),a.jsx("p",{className:"text-slate-500 mb-4",children:"No scheduled assignments for this date"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Check the planning board to create assignments first"})]})]})}),i==="workers"&&a.jsx("div",{className:"flex-1 p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-600 rounded-xl",children:a.jsx(Ie,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Team Management"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Manage employee information and roles"})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"relative",children:[a.jsx(kn,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search employees...",value:p,onChange:x=>k(x.target.value),className:"pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]})})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{role:"supervisor",bgClass:"bg-purple-50",borderClass:"border-purple-200",iconClass:"bg-purple-100",iconTextClass:"text-purple-600",titleClass:"text-purple-900",countClass:"text-purple-700"},{role:"operator",bgClass:"bg-green-50",borderClass:"border-green-200",iconClass:"bg-green-100",iconTextClass:"text-green-600",titleClass:"text-green-900",countClass:"text-green-700"},{role:"packer",bgClass:"bg-blue-50",borderClass:"border-blue-200",iconClass:"bg-blue-100",iconTextClass:"text-blue-600",titleClass:"text-blue-900",countClass:"text-blue-700"},{role:"technician",bgClass:"bg-amber-50",borderClass:"border-amber-200",iconClass:"bg-amber-100",iconTextClass:"text-amber-600",titleClass:"text-amber-900",countClass:"text-amber-700"}].map(({role:x,bgClass:te,borderClass:de,iconClass:he,iconTextClass:ve,titleClass:Te,countClass:Ce})=>{const at=Rn.filter(It=>It.role===x).length;return a.jsx("div",{className:`${te} rounded-lg p-4 border ${de}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-8 h-8 ${he} rounded-lg flex items-center justify-center`,children:a.jsx(Ie,{className:`w-4 h-4 ${ve}`})}),a.jsxs("div",{children:[a.jsxs("p",{className:`text-sm font-medium ${Te} capitalize`,children:[x,"s"]}),a.jsx("p",{className:`text-xl font-bold ${Ce}`,children:at})]})]})},x)})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Rn.map(x=>{const te=Ot.some(de=>de.employee_id===x.id);return a.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all hover:shadow-md ${te?"border-green-200 bg-green-50":"border-slate-200 bg-white hover:border-slate-300"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium",children:x.employee_code?.slice(0,2)||x.username?.slice(0,2).toUpperCase()})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-slate-900",children:x.fullName||(x.username?x.username.replace(/\./g," ").replace(/\b\w/g,de=>de.toUpperCase()):"N/A")}),a.jsx("p",{className:"text-sm text-slate-600",children:x.employee_code})]})]}),a.jsx("button",{onClick:()=>V(x),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(li,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Role:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.role==="supervisor"?"bg-purple-100 text-purple-700":x.role==="operator"?"bg-green-100 text-green-700":x.role==="packer"?"bg-blue-100 text-blue-700":x.role==="technician"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:x.role?.charAt(0).toUpperCase()+x.role?.slice(1)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Company:"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:x.company||"N/A"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Status:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${te?"bg-green-100 text-green-700":"bg-slate-100 text-slate-700"}`,children:te?"Assigned":"Available"})]})]})]},x.id)})}),kl.length===0&&a.jsxs("div",{className:"col-span-full text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ie,{className:"w-10 h-10 text-slate-400"})}),a.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:"No employees found"}),a.jsx("p",{className:"text-slate-500 mb-4",children:"No employees match your search criteria"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Try adjusting your search terms or check if employees exist"})]})]})}),ie&&a.jsx(Mn,{title:"Assign Employees to Machine",onClose:()=>{$(!1),Ee([]),we({}),X(!1)},size:"xl",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 max-w-md",children:a.jsx("input",{type:"text",placeholder:"Search...",value:I,onChange:x=>ue(x.target.value),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[P.length>0&&a.jsxs(Ef,{variant:"info",className:"px-3 py-1",children:[P.length," selected"]}),a.jsx(vt,{variant:"outline",size:"sm",onClick:()=>{Ee([]),we({})},children:"Clear All"}),a.jsxs(vt,{onClick:Un,disabled:P.length===0,className:"min-w-[120px]",children:["Assign Selected (",P.length,")"]})]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto space-y-3",children:kl.map(x=>{const te=P.includes(x.id);return a.jsx("div",{className:`p-4 rounded-lg border transition-all ${te?"bg-blue-50 border-blue-300":"hover:bg-gray-50 border-gray-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"checkbox",checked:te,onChange:de=>{if(de.target.checked)Ee([...P,x.id]),we({...re,[x.id]:"Packer"});else{const he=P.filter(Te=>Te!==x.id),ve={...re};delete ve[x.id],Ee(he),we(ve)}},className:"w-5 h-5 text-blue-600 rounded"}),a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:a.jsx(Ie,{className:"w-6 h-6 text-gray-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-lg",children:x.fullName||x.username}),a.jsxs("p",{className:"text-sm text-gray-500",children:[x.employee_code," • ",x.role]})]})]}),te&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Job Role:"}),a.jsxs("select",{value:re[x.id]||"Packer",onChange:de=>we({...re,[x.id]:de.target.value}),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Packer",children:"Packer"}),a.jsx("option",{value:"Operator",children:"Operator"}),a.jsx("option",{value:"Operator(AR)",children:"Operator(AR)"}),a.jsx("option",{value:"Hopper Loader",children:"Hopper Loader"})]})]}),!te&&a.jsx(vt,{onClick:()=>zn(x.id,"Packer"),variant:"outline",size:"sm",children:"Quick Assign as Packer"})]})},x.id)})}),kl.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Ie,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No employees found matching your search"})]}),P.length>0&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Assignment Summary:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:["Packer","Operator","Operator(AR)","Hopper Loader"].map(x=>{const te=P.filter(de=>re[de]===x).length;return te>0?a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"font-medium",children:[x==="Hopper Loader"?"Hopper Loaders":x+"s",":"]}),a.jsx("span",{className:"text-blue-700",children:te})]},x):null})})]})]})}),m&&a.jsx(Mn,{title:"Export Labor Assignments",onClose:()=>q(!1),children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),a.jsx("input",{type:"date",value:ne.start,onChange:x=>ye({...ne,start:x.target.value}),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),a.jsx("input",{type:"date",value:ne.end,onChange:x=>ye({...ne,end:x.target.value}),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:()=>ee("excel"),className:`p-4 border-2 rounded-lg text-center transition-all relative ${Z==="excel"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 hover:border-green-300 hover:bg-green-50"}`,children:[a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx(Ef,{variant:"success",size:"sm",children:"Recommended"})}),a.jsx(ai,{className:"w-6 h-6 mx-auto mb-2 text-green-600"}),a.jsx("p",{className:"font-medium",children:"Excel Template"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Professional format"})]}),a.jsxs("button",{onClick:()=>ee("csv"),className:`p-4 border-2 rounded-lg text-center transition-all ${Z==="csv"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx(ai,{className:"w-6 h-6 mx-auto mb-2"}),a.jsx("p",{className:"font-medium",children:"CSV"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Spreadsheet format"})]}),a.jsxs("button",{onClick:()=>ee("json"),className:`p-4 border-2 rounded-lg text-center transition-all ${Z==="json"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx(Jt,{className:"w-6 h-6 mx-auto mb-2"}),a.jsx("p",{className:"font-medium",children:"JSON"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Data format"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Export Preview"}),Z==="excel"?a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{className:"mb-2",children:"Professional Excel template will include:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Header:"})," Day of week, date, supervisor on duty"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Work Table:"})," Employee code, full name, machine, role, shift, company, attendance"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Attendance Status:"})," Present (green), Absent (red), Planned (yellow)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Formatting:"})," Colors, borders, proper column widths"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Date:"})," ",ne.start]})]})]}):a.jsxs("p",{className:"text-sm text-gray-600",children:["This will export all labor assignments between ",ne.start," and ",ne.end,"in ",Z.toUpperCase()," format."]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(vt,{variant:"secondary",onClick:()=>q(!1),children:"Cancel"}),a.jsx(vt,{onClick:qn,disabled:A,children:A?a.jsxs(a.Fragment,{children:[a.jsx(lt,{className:"w-4 h-4 animate-spin"}),"Exporting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(xa,{className:"w-4 h-4"}),"Export Data"]})})]})]})}),E&&a.jsx(Mn,{title:"Edit Worker",onClose:()=>V(null),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Code"}),a.jsx("input",{value:E.employee_code||"",onChange:x=>V({...E,employee_code:x.target.value}),placeholder:"Employee Code",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{value:E.username||E.fullName||"",onChange:x=>V({...E,username:x.target.value}),placeholder:"Full Name",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),a.jsx("input",{value:E.company||"",onChange:x=>V({...E,company:x.target.value}),placeholder:"Company",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:E.role||"",onChange:x=>V({...E,role:x.target.value}),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"operator(ar)",children:"Operator(AR)"}),a.jsx("option",{value:"hopper_loader",children:"Hopper Loader"}),a.jsx("option",{value:"packer",children:"Packer"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"technician",children:"Technician"}),a.jsx("option",{value:"quality_inspector",children:"Quality Inspector"}),a.jsx("option",{value:"maintenance",children:"Maintenance"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(vt,{variant:"secondary",onClick:()=>V(null),className:"flex-1",children:"Cancel"}),a.jsxs(vt,{onClick:di,className:"flex-1",children:[a.jsx(Tn,{className:"w-4 h-4"}),"Save Changes"]})]})]})}),be&&a.jsx(Mn,{title:"Manage Supervisors",onClose:()=>Be(!1),size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[me.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Currently Assigned Supervisors (",L," shift, ",R,")"]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:me.map(x=>{const te=g.find(de=>de.id===x.supervisor_id);return a.jsx("div",{className:"p-3 border rounded-lg bg-green-50 border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Wt,{className:"w-4 h-4 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:te?.fullName||te?.username||"Unknown"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[te?.employee_code," • ",te?.role," • Assigned"]})]})]}),a.jsx(vt,{variant:"ghost",size:"sm",onClick:()=>Vs(x.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:a.jsx(ha,{className:"w-4 h-4"})})]})},x.id)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Available Supervisors to Assign"}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:g.filter(x=>x.role==="supervisor"||x.role==="admin").filter(x=>!me.some(te=>te.supervisor_id===x.id)).map(x=>a.jsx("div",{className:"p-3 border rounded-lg cursor-pointer transition-all border-gray-200 hover:border-blue-300 hover:bg-blue-50",onClick:()=>wa(x.id),children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(Wt,{className:"w-4 h-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:x.fullName||x.username}),a.jsxs("p",{className:"text-sm text-gray-500",children:[x.employee_code," • ",x.role]})]})]})},x.id))})]}),g.filter(x=>x.role==="supervisor"||x.role==="admin").filter(x=>!me.some(te=>te.supervisor_id===x.id)).length===0&&a.jsx("p",{className:"text-center text-gray-500 py-4",children:"All available supervisors are already assigned."}),a.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:a.jsx(vt,{variant:"secondary",onClick:()=>Be(!1),children:"Close"})})]})}),Xe&&a.jsx(Mn,{title:"Plan Weekly Labor",onClose:()=>He(!1),children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Date"}),a.jsx("input",{type:"date",value:Re.startDate,onChange:x=>Et({...Re,startDate:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Date"}),a.jsx("input",{type:"date",value:Re.endDate,onChange:x=>Et({...Re,endDate:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Copy Template From"}),a.jsxs("select",{value:Re.template,onChange:x=>Et({...Re,template:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsxs("option",{value:"current_week",children:["Current Day (",R,")"]}),a.jsx("option",{value:"previous_week",children:"Previous Week"}),a.jsx("option",{value:"custom",children:"Custom Date"})]})]}),Re.template==="custom"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Copy From Date"}),a.jsx("input",{type:"date",value:Re.copyFrom,onChange:x=>Et({...Re,copyFrom:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apply to Shifts"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:Re.applyToShifts.includes("day"),onChange:x=>{const te=x.target.checked?[...Re.applyToShifts,"day"]:Re.applyToShifts.filter(de=>de!=="day");Et({...Re,applyToShifts:te})},className:"mr-2"}),"Day Shift (6AM - 6PM)"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:Re.applyToShifts.includes("night"),onChange:x=>{const te=x.target.checked?[...Re.applyToShifts,"night"]:Re.applyToShifts.filter(de=>de!=="night");Et({...Re,applyToShifts:te})},className:"mr-2"}),"Night Shift (6PM - 6AM)"]})]})]}),Re.startDate&&Re.endDate&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Planning Summary"}),a.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Date Range:"})," ",Re.startDate," to ",Re.endDate]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Days:"})," ",Math.ceil((new Date(Re.endDate)-new Date(Re.startDate))/(1e3*60*60*24))+1]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Shifts:"})," ",Re.applyToShifts.join(", ")]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Source:"})," ",Re.template==="current_week"?`Current day (${R})`:Re.template==="previous_week"?"Previous week":`Custom date (${Re.copyFrom})`]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(vt,{variant:"secondary",onClick:()=>He(!1),children:"Cancel"}),a.jsxs(vt,{onClick:ws,disabled:!Re.startDate||!Re.endDate||Re.applyToShifts.length===0,className:"bg-green-600 hover:bg-green-700",children:[a.jsx(Ya,{className:"w-4 h-4"}),"Plan Labor"]})]})]})}),b.show&&a.jsx("div",{className:`fixed bottom-6 right-6 z-50 p-4 rounded-lg shadow-lg border max-w-sm ${b.type==="success"?"bg-green-50 border-green-200 text-green-800":b.type==="warning"?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-red-50 border-red-200 text-red-800"}`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[b.type==="success"&&a.jsx(ut,{className:"w-5 h-5 text-green-600"}),b.type==="warning"&&a.jsx(Sf,{className:"w-5 h-5 text-yellow-600"}),b.type==="danger"&&a.jsx(ha,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"font-medium",children:b.message})]})})]})}const $f=[{path:"/",component:Rf,title:"Dashboard"},{path:"/production",component:Pg,title:"Production Monitor"},{path:"/labour-layout",component:mp,title:"Labour Layout"},{path:"/labor-planner",component:xp,name:"Labor Planner"},{path:"/orders",component:ep,title:"Production Orders"},{path:"/machines",component:ap,title:"Machine Management"},{path:"/analytics",component:sp,title:"Analytics & Reports"},{path:"/shift-reports",component:lp,title:"Shift Reports"},{path:"/users",component:np,title:"User Management"},{path:"/settings",component:cp,title:"Settings"},{path:"/admin",component:op,title:"Admin Panel"}];$f.forEach(i=>To.addRoute(i));To.init();function gp(){const{isAuthenticated:i,loading:o,user:f}=vs(),[u,g]=y.useState(window.location.pathname),{handleSessionExpiring:_,handleSessionExpired:T}=Tg();if(y.useEffect(()=>{const b=H=>g(H.path),ae=window.EventBus.on("router:navigation",b);return()=>{ae()}},[]),o)return a.jsx("div",{className:"h-screen flex items-center justify-center text-xl bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading Production Management System..."})]})});if(!i)return a.jsx(Af,{children:a.jsx(_g,{})});const Y=$f.find(b=>b.path===u),A=Y?Y.component:Rf,j=Y?Y.name||Y.title:"Dashboard";return a.jsx(Af,{children:a.jsxs(Sg,{title:j,children:[a.jsx(A,{}),a.jsx(Cg,{}),i&&a.jsx(Mg,{onSessionExpiring:_,onSessionExpired:T})]})})}const pp=document.getElementById("root"),yp=l0.createRoot(pp);yp.render(a.jsx(ys.StrictMode,{children:a.jsx(Df,{children:a.jsx(gp,{})})}));
