(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const p of m)if(p.type==="childList")for(const N of p.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&d(N)}).observe(document,{childList:!0,subtree:!0});function u(m){const p={};return m.integrity&&(p.integrity=m.integrity),m.referrerPolicy&&(p.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?p.credentials="include":m.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(m){if(m.ep)return;m.ep=!0;const p=u(m);fetch(m.href,p)}})();function Co(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var go={exports:{}},An={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0;function ox(){if(S0)return An;S0=1;var i=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function u(d,m,p){var N=null;if(p!==void 0&&(N=""+p),m.key!==void 0&&(N=""+m.key),"key"in m){p={};for(var A in m)A!=="key"&&(p[A]=m[A])}else p=m;return m=p.ref,{$$typeof:i,type:d,key:N,ref:m!==void 0?m:null,props:p}}return An.Fragment=c,An.jsx=u,An.jsxs=u,An}var _0;function dx(){return _0||(_0=1,go.exports=ox()),go.exports}var t=dx(),po={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0;function ux(){if(E0)return Ee;E0=1;var i=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),N=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),Z=Symbol.iterator;function D(b){return b===null||typeof b!="object"?null:(b=Z&&b[Z]||b["@@iterator"],typeof b=="function"?b:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,L={};function y(b,$,R){this.props=b,this.context=$,this.refs=L,this.updater=R||W}y.prototype.isReactComponent={},y.prototype.setState=function(b,$){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,$,"setState")},y.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function Q(){}Q.prototype=y.prototype;function E(b,$,R){this.props=b,this.context=$,this.refs=L,this.updater=R||W}var le=E.prototype=new Q;le.constructor=E,C(le,y.prototype),le.isPureReactComponent=!0;var P=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},me=Object.prototype.hasOwnProperty;function Se(b,$,R,V,K,xe){return R=xe.ref,{$$typeof:i,type:b,key:$,ref:R!==void 0?R:null,props:xe}}function He(b,$){return Se(b.type,$,void 0,void 0,void 0,b.props)}function ee(b){return typeof b=="object"&&b!==null&&b.$$typeof===i}function ae(b){var $={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(R){return $[R]})}var ue=/\/+/g;function se(b,$){return typeof b=="object"&&b!==null&&b.key!=null?ae(""+b.key):$.toString(36)}function ce(){}function k(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(ce,ce):(b.status="pending",b.then(function($){b.status==="pending"&&(b.status="fulfilled",b.value=$)},function($){b.status==="pending"&&(b.status="rejected",b.reason=$)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function F(b,$,R,V,K){var xe=typeof b;(xe==="undefined"||xe==="boolean")&&(b=null);var ie=!1;if(b===null)ie=!0;else switch(xe){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(b.$$typeof){case i:case c:ie=!0;break;case x:return ie=b._init,F(ie(b._payload),$,R,V,K)}}if(ie)return K=K(b),ie=V===""?"."+se(b,0):V,P(K)?(R="",ie!=null&&(R=ie.replace(ue,"$&/")+"/"),F(K,$,R,"",function(Ue){return Ue})):K!=null&&(ee(K)&&(K=He(K,R+(K.key==null||b&&b.key===K.key?"":(""+K.key).replace(ue,"$&/")+"/")+ie)),$.push(K)),1;ie=0;var Ae=V===""?".":V+":";if(P(b))for(var ye=0;ye<b.length;ye++)V=b[ye],xe=Ae+se(V,ye),ie+=F(V,$,R,xe,K);else if(ye=D(b),typeof ye=="function")for(b=ye.call(b),ye=0;!(V=b.next()).done;)V=V.value,xe=Ae+se(V,ye++),ie+=F(V,$,R,xe,K);else if(xe==="object"){if(typeof b.then=="function")return F(k(b),$,R,V,K);throw $=String(b),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ie}function S(b,$,R){if(b==null)return b;var V=[],K=0;return F(b,V,"","",function(xe){return $.call(R,xe,K++)}),V}function X(b){if(b._status===-1){var $=b._result;$=$(),$.then(function(R){(b._status===0||b._status===-1)&&(b._status=1,b._result=R)},function(R){(b._status===0||b._status===-1)&&(b._status=2,b._result=R)}),b._status===-1&&(b._status=0,b._result=$)}if(b._status===1)return b._result.default;throw b._result}var O=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)};function B(){}return Ee.Children={map:S,forEach:function(b,$,R){S(b,function(){$.apply(this,arguments)},R)},count:function(b){var $=0;return S(b,function(){$++}),$},toArray:function(b){return S(b,function($){return $})||[]},only:function(b){if(!ee(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Ee.Component=y,Ee.Fragment=u,Ee.Profiler=m,Ee.PureComponent=E,Ee.StrictMode=d,Ee.Suspense=j,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(b){return H.H.useMemoCache(b)}},Ee.cache=function(b){return function(){return b.apply(null,arguments)}},Ee.cloneElement=function(b,$,R){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var V=C({},b.props),K=b.key,xe=void 0;if($!=null)for(ie in $.ref!==void 0&&(xe=void 0),$.key!==void 0&&(K=""+$.key),$)!me.call($,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&$.ref===void 0||(V[ie]=$[ie]);var ie=arguments.length-2;if(ie===1)V.children=R;else if(1<ie){for(var Ae=Array(ie),ye=0;ye<ie;ye++)Ae[ye]=arguments[ye+2];V.children=Ae}return Se(b.type,K,void 0,void 0,xe,V)},Ee.createContext=function(b){return b={$$typeof:N,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:p,_context:b},b},Ee.createElement=function(b,$,R){var V,K={},xe=null;if($!=null)for(V in $.key!==void 0&&(xe=""+$.key),$)me.call($,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(K[V]=$[V]);var ie=arguments.length-2;if(ie===1)K.children=R;else if(1<ie){for(var Ae=Array(ie),ye=0;ye<ie;ye++)Ae[ye]=arguments[ye+2];K.children=Ae}if(b&&b.defaultProps)for(V in ie=b.defaultProps,ie)K[V]===void 0&&(K[V]=ie[V]);return Se(b,xe,void 0,void 0,null,K)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(b){return{$$typeof:A,render:b}},Ee.isValidElement=ee,Ee.lazy=function(b){return{$$typeof:x,_payload:{_status:-1,_result:b},_init:X}},Ee.memo=function(b,$){return{$$typeof:g,type:b,compare:$===void 0?null:$}},Ee.startTransition=function(b){var $=H.T,R={};H.T=R;try{var V=b(),K=H.S;K!==null&&K(R,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(B,O)}catch(xe){O(xe)}finally{H.T=$}},Ee.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Ee.use=function(b){return H.H.use(b)},Ee.useActionState=function(b,$,R){return H.H.useActionState(b,$,R)},Ee.useCallback=function(b,$){return H.H.useCallback(b,$)},Ee.useContext=function(b){return H.H.useContext(b)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(b,$){return H.H.useDeferredValue(b,$)},Ee.useEffect=function(b,$,R){var V=H.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(b,$)},Ee.useId=function(){return H.H.useId()},Ee.useImperativeHandle=function(b,$,R){return H.H.useImperativeHandle(b,$,R)},Ee.useInsertionEffect=function(b,$){return H.H.useInsertionEffect(b,$)},Ee.useLayoutEffect=function(b,$){return H.H.useLayoutEffect(b,$)},Ee.useMemo=function(b,$){return H.H.useMemo(b,$)},Ee.useOptimistic=function(b,$){return H.H.useOptimistic(b,$)},Ee.useReducer=function(b,$,R){return H.H.useReducer(b,$,R)},Ee.useRef=function(b){return H.H.useRef(b)},Ee.useState=function(b){return H.H.useState(b)},Ee.useSyncExternalStore=function(b,$,R){return H.H.useSyncExternalStore(b,$,R)},Ee.useTransition=function(){return H.H.useTransition()},Ee.version="19.1.0",Ee}var A0;function Do(){return A0||(A0=1,po.exports=ux()),po.exports}var f=Do();const gs=Co(f);var yo={exports:{}},Mn={},bo={exports:{}},vo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M0;function mx(){return M0||(M0=1,function(i){function c(S,X){var O=S.length;S.push(X);e:for(;0<O;){var B=O-1>>>1,b=S[B];if(0<m(b,X))S[B]=X,S[O]=b,O=B;else break e}}function u(S){return S.length===0?null:S[0]}function d(S){if(S.length===0)return null;var X=S[0],O=S.pop();if(O!==X){S[0]=O;e:for(var B=0,b=S.length,$=b>>>1;B<$;){var R=2*(B+1)-1,V=S[R],K=R+1,xe=S[K];if(0>m(V,O))K<b&&0>m(xe,V)?(S[B]=xe,S[K]=O,B=K):(S[B]=V,S[R]=O,B=R);else if(K<b&&0>m(xe,O))S[B]=xe,S[K]=O,B=K;else break e}}return X}function m(S,X){var O=S.sortIndex-X.sortIndex;return O!==0?O:S.id-X.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;i.unstable_now=function(){return p.now()}}else{var N=Date,A=N.now();i.unstable_now=function(){return N.now()-A}}var j=[],g=[],x=1,Z=null,D=3,W=!1,C=!1,L=!1,y=!1,Q=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function P(S){for(var X=u(g);X!==null;){if(X.callback===null)d(g);else if(X.startTime<=S)d(g),X.sortIndex=X.expirationTime,c(j,X);else break;X=u(g)}}function H(S){if(L=!1,P(S),!C)if(u(j)!==null)C=!0,me||(me=!0,se());else{var X=u(g);X!==null&&F(H,X.startTime-S)}}var me=!1,Se=-1,He=5,ee=-1;function ae(){return y?!0:!(i.unstable_now()-ee<He)}function ue(){if(y=!1,me){var S=i.unstable_now();ee=S;var X=!0;try{e:{C=!1,L&&(L=!1,E(Se),Se=-1),W=!0;var O=D;try{t:{for(P(S),Z=u(j);Z!==null&&!(Z.expirationTime>S&&ae());){var B=Z.callback;if(typeof B=="function"){Z.callback=null,D=Z.priorityLevel;var b=B(Z.expirationTime<=S);if(S=i.unstable_now(),typeof b=="function"){Z.callback=b,P(S),X=!0;break t}Z===u(j)&&d(j),P(S)}else d(j);Z=u(j)}if(Z!==null)X=!0;else{var $=u(g);$!==null&&F(H,$.startTime-S),X=!1}}break e}finally{Z=null,D=O,W=!1}X=void 0}}finally{X?se():me=!1}}}var se;if(typeof le=="function")se=function(){le(ue)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,k=ce.port2;ce.port1.onmessage=ue,se=function(){k.postMessage(null)}}else se=function(){Q(ue,0)};function F(S,X){Se=Q(function(){S(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(S){S.callback=null},i.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):He=0<S?Math.floor(1e3/S):5},i.unstable_getCurrentPriorityLevel=function(){return D},i.unstable_next=function(S){switch(D){case 1:case 2:case 3:var X=3;break;default:X=D}var O=D;D=X;try{return S()}finally{D=O}},i.unstable_requestPaint=function(){y=!0},i.unstable_runWithPriority=function(S,X){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var O=D;D=S;try{return X()}finally{D=O}},i.unstable_scheduleCallback=function(S,X,O){var B=i.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?B+O:B):O=B,S){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=O+b,S={id:x++,callback:X,priorityLevel:S,startTime:O,expirationTime:b,sortIndex:-1},O>B?(S.sortIndex=O,c(g,S),u(j)===null&&S===u(g)&&(L?(E(Se),Se=-1):L=!0,F(H,O-B))):(S.sortIndex=b,c(j,S),C||W||(C=!0,me||(me=!0,se()))),S},i.unstable_shouldYield=ae,i.unstable_wrapCallback=function(S){var X=D;return function(){var O=D;D=X;try{return S.apply(this,arguments)}finally{D=O}}}}(vo)),vo}var T0;function hx(){return T0||(T0=1,bo.exports=mx()),bo.exports}var jo={exports:{}},Rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0;function fx(){if(C0)return Rt;C0=1;var i=Do();function c(j){var g="https://react.dev/errors/"+j;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)g+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+j+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var d={d:{f:u,r:function(){throw Error(c(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},m=Symbol.for("react.portal");function p(j,g,x){var Z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:Z==null?null:""+Z,children:j,containerInfo:g,implementation:x}}var N=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(j,g){if(j==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Rt.createPortal=function(j,g){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(c(299));return p(j,g,null,x)},Rt.flushSync=function(j){var g=N.T,x=d.p;try{if(N.T=null,d.p=2,j)return j()}finally{N.T=g,d.p=x,d.d.f()}},Rt.preconnect=function(j,g){typeof j=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,d.d.C(j,g))},Rt.prefetchDNS=function(j){typeof j=="string"&&d.d.D(j)},Rt.preinit=function(j,g){if(typeof j=="string"&&g&&typeof g.as=="string"){var x=g.as,Z=A(x,g.crossOrigin),D=typeof g.integrity=="string"?g.integrity:void 0,W=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;x==="style"?d.d.S(j,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:Z,integrity:D,fetchPriority:W}):x==="script"&&d.d.X(j,{crossOrigin:Z,integrity:D,fetchPriority:W,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Rt.preinitModule=function(j,g){if(typeof j=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var x=A(g.as,g.crossOrigin);d.d.M(j,{crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&d.d.M(j)},Rt.preload=function(j,g){if(typeof j=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var x=g.as,Z=A(x,g.crossOrigin);d.d.L(j,x,{crossOrigin:Z,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Rt.preloadModule=function(j,g){if(typeof j=="string")if(g){var x=A(g.as,g.crossOrigin);d.d.m(j,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:x,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else d.d.m(j)},Rt.requestFormReset=function(j){d.d.r(j)},Rt.unstable_batchedUpdates=function(j,g){return j(g)},Rt.useFormState=function(j,g,x){return N.H.useFormState(j,g,x)},Rt.useFormStatus=function(){return N.H.useHostTransitionStatus()},Rt.version="19.1.0",Rt}var D0;function L0(){if(D0)return jo.exports;D0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),jo.exports=fx(),jo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function xx(){if(O0)return Mn;O0=1;var i=hx(),c=Do(),u=L0();function d(e){var a="https://react.dev/errors/"+e;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function p(e){var a=e,s=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(s=a.return),e=a.return;while(e)}return a.tag===3?s:null}function N(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function A(e){if(p(e)!==e)throw Error(d(188))}function j(e){var a=e.alternate;if(!a){if(a=p(e),a===null)throw Error(d(188));return a!==e?null:e}for(var s=e,l=a;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return A(n),e;if(r===l)return A(n),a;r=r.sibling}throw Error(d(188))}if(s.return!==l.return)s=n,l=r;else{for(var o=!1,h=n.child;h;){if(h===s){o=!0,s=n,l=r;break}if(h===l){o=!0,l=n,s=r;break}h=h.sibling}if(!o){for(h=r.child;h;){if(h===s){o=!0,s=r,l=n;break}if(h===l){o=!0,l=r,s=n;break}h=h.sibling}if(!o)throw Error(d(189))}}if(s.alternate!==l)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:a}function g(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e;for(e=e.child;e!==null;){if(a=g(e),a!==null)return a;e=e.sibling}return null}var x=Object.assign,Z=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),le=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),He=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=ue&&e[ue]||e["@@iterator"],typeof e=="function"?e:null)}var ce=Symbol.for("react.client.reference");function k(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ce?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case y:return"Profiler";case L:return"StrictMode";case H:return"Suspense";case me:return"SuspenseList";case ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case W:return"Portal";case le:return(e.displayName||"Context")+".Provider";case E:return(e._context.displayName||"Context")+".Consumer";case P:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Se:return a=e.displayName||null,a!==null?a:k(e.type)||"Memo";case He:a=e._payload,e=e._init;try{return k(e(a))}catch{}}return null}var F=Array.isArray,S=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},B=[],b=-1;function $(e){return{current:e}}function R(e){0>b||(e.current=B[b],B[b]=null,b--)}function V(e,a){b++,B[b]=e.current,e.current=a}var K=$(null),xe=$(null),ie=$(null),Ae=$(null);function ye(e,a){switch(V(ie,a),V(xe,e),V(K,null),a.nodeType){case 9:case 11:e=(e=a.documentElement)&&(e=e.namespaceURI)?Fm(e):0;break;default:if(e=a.tagName,a=a.namespaceURI)a=Fm(a),e=Im(a,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}R(K),V(K,e)}function Ue(){R(K),R(xe),R(ie)}function Me(e){e.memoizedState!==null&&V(Ae,e);var a=K.current,s=Im(a,e.type);a!==s&&(V(xe,e),V(K,s))}function $e(e){xe.current===e&&(R(K),R(xe)),Ae.current===e&&(R(Ae),Nn._currentValue=O)}var ht=Object.prototype.hasOwnProperty,Ve=i.unstable_scheduleCallback,yt=i.unstable_cancelCallback,ve=i.unstable_shouldYield,Be=i.unstable_requestPaint,pe=i.unstable_now,ga=i.unstable_getCurrentPriorityLevel,M=i.unstable_ImmediatePriority,ne=i.unstable_UserBlockingPriority,Te=i.unstable_NormalPriority,Pe=i.unstable_LowPriority,pa=i.unstable_IdlePriority,ea=i.log,vs=i.unstable_setDisableYieldValue,bt=null,ft=null;function Fe(e){if(typeof ea=="function"&&vs(e),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(bt,e)}catch{}}var _=Math.clz32?Math.clz32:st,de=Math.log,Ie=Math.LN2;function st(e){return e>>>=0,e===0?32:31-(de(e)/Ie|0)|0}var nt=256,vt=4194304;function rt(e){var a=e&42;if(a!==0)return a;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Xa(e,a,s){var l=e.pendingLanes;if(l===0)return 0;var n=0,r=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var h=l&134217727;return h!==0?(l=h&~r,l!==0?n=rt(l):(o&=h,o!==0?n=rt(o):s||(s=h&~e,s!==0&&(n=rt(s))))):(h=l&~r,h!==0?n=rt(h):o!==0?n=rt(o):s||(s=l&~e,s!==0&&(n=rt(s)))),n===0?0:a!==0&&a!==n&&(a&r)===0&&(r=n&-n,s=a&-a,r>=s||r===32&&(s&4194048)!==0)?a:n}function Gt(e,a){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&a)===0}function v(e,a){switch(e){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function re(){var e=nt;return nt<<=1,(nt&4194048)===0&&(nt=256),e}function jt(){var e=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),e}function ta(e){for(var a=[],s=0;31>s;s++)a.push(e);return a}function _a(e,a){e.pendingLanes|=a,a!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Cl(e,a,s,l,n,r){var o=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var h=e.entanglements,w=e.expirationTimes,q=e.hiddenUpdates;for(s=o&~s;0<s;){var J=31-_(s),te=1<<J;h[J]=0,w[J]=-1;var Y=q[J];if(Y!==null)for(q[J]=null,J=0;J<Y.length;J++){var G=Y[J];G!==null&&(G.lane&=-536870913)}s&=~te}l!==0&&Dl(e,l,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(o&~a))}function Dl(e,a,s){e.pendingLanes|=a,e.suspendedLanes&=~a;var l=31-_(a);e.entangledLanes|=a,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194090}function li(e,a){var s=e.entangledLanes|=a;for(e=e.entanglements;s;){var l=31-_(s),n=1<<l;n&a|e[l]&a&&(e[l]|=a),s&=~n}}function ni(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ri(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ho(){var e=X.p;return e!==0?e:(e=window.event,e===void 0?32:y0(e.type))}function J0(e,a){var s=X.p;try{return X.p=e,a()}finally{X.p=s}}var Za=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Za,Ht="__reactProps$"+Za,Qs="__reactContainer$"+Za,ii="__reactEvents$"+Za,F0="__reactListeners$"+Za,I0="__reactHandles$"+Za,$o="__reactResources$"+Za,Ol="__reactMarker$"+Za;function ci(e){delete e[Ot],delete e[Ht],delete e[ii],delete e[F0],delete e[I0]}function Gs(e){var a=e[Ot];if(a)return a;for(var s=e.parentNode;s;){if(a=s[Qs]||s[Ot]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(e=s0(e);e!==null;){if(s=e[Ot])return s;e=s0(e)}return a}e=s,s=e.parentNode}return null}function Vs(e){if(e=e[Ot]||e[Qs]){var a=e.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return e}return null}function kl(e){var a=e.tag;if(a===5||a===26||a===27||a===6)return e.stateNode;throw Error(d(33))}function Xs(e){var a=e[$o];return a||(a=e[$o]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function St(e){e[Ol]=!0}var Bo=new Set,Yo={};function js(e,a){Zs(e,a),Zs(e+"Capture",a)}function Zs(e,a){for(Yo[e]=a,e=0;e<a.length;e++)Bo.add(a[e])}var eh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qo={},Go={};function th(e){return ht.call(Go,e)?!0:ht.call(Qo,e)?!1:eh.test(e)?Go[e]=!0:(Qo[e]=!0,!1)}function $n(e,a,s){if(th(a))if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(a);return}}e.setAttribute(a,""+s)}}function Bn(e,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttribute(a,""+s)}}function Ea(e,a,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(a,s,""+l)}}var oi,Vo;function Ws(e){if(oi===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);oi=a&&a[1]||"",Vo=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oi+e+Vo}var di=!1;function ui(e,a){if(!e||di)return"";di=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(G){var Y=G}Reflect.construct(e,[],te)}else{try{te.call()}catch(G){Y=G}e.call(te.prototype)}}else{try{throw Error()}catch(G){Y=G}(te=e())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(G){if(G&&Y&&typeof G.stack=="string")return[G.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),o=r[0],h=r[1];if(o&&h){var w=o.split(`
`),q=h.split(`
`);for(n=l=0;l<w.length&&!w[l].includes("DetermineComponentFrameRoot");)l++;for(;n<q.length&&!q[n].includes("DetermineComponentFrameRoot");)n++;if(l===w.length||n===q.length)for(l=w.length-1,n=q.length-1;1<=l&&0<=n&&w[l]!==q[n];)n--;for(;1<=l&&0<=n;l--,n--)if(w[l]!==q[n]){if(l!==1||n!==1)do if(l--,n--,0>n||w[l]!==q[n]){var J=`
`+w[l].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=l&&0<=n);break}}}finally{di=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Ws(s):""}function ah(e){switch(e.tag){case 26:case 27:case 5:return Ws(e.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return ui(e.type,!1);case 11:return ui(e.type.render,!1);case 1:return ui(e.type,!0);case 31:return Ws("Activity");default:return""}}function Xo(e){try{var a="";do a+=ah(e),e=e.return;while(e);return a}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function aa(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zo(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function sh(e){var a=Zo(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),l=""+e[a];if(!e.hasOwnProperty(a)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return n.call(this)},set:function(o){l=""+o,r.call(this,o)}}),Object.defineProperty(e,a,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(o){l=""+o},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function Yn(e){e._valueTracker||(e._valueTracker=sh(e))}function Wo(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return e&&(l=Zo(e)?e.checked?"true":"false":e.value),e=l,e!==s?(a.setValue(e),!0):!1}function Qn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var lh=/[\n"\\]/g;function sa(e){return e.replace(lh,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function mi(e,a,s,l,n,r,o,h){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),a!=null?o==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+aa(a)):e.value!==""+aa(a)&&(e.value=""+aa(a)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),a!=null?hi(e,o,aa(a)):s!=null?hi(e,o,aa(s)):l!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.name=""+aa(h):e.removeAttribute("name")}function Ko(e,a,s,l,n,r,o,h){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),a!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||a!=null))return;s=s!=null?""+aa(s):"",a=a!=null?""+aa(a):s,h||a===e.value||(e.value=a),e.defaultValue=a}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=h?e.checked:!!l,e.defaultChecked=!!l,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function hi(e,a,s){a==="number"&&Qn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ks(e,a,s,l){if(e=e.options,a){a={};for(var n=0;n<s.length;n++)a["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=a.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&l&&(e[s].defaultSelected=!0)}else{for(s=""+aa(s),a=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}a!==null||e[n].disabled||(a=e[n])}a!==null&&(a.selected=!0)}}function Po(e,a,s){if(a!=null&&(a=""+aa(a),a!==e.value&&(e.value=a),s==null)){e.defaultValue!==a&&(e.defaultValue=a);return}e.defaultValue=s!=null?""+aa(s):""}function Jo(e,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(d(92));if(F(l)){if(1<l.length)throw Error(d(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=aa(a),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function Ps(e,a){if(a){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=a;return}}e.textContent=a}var nh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fo(e,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="":l?e.setProperty(a,s):typeof s!="number"||s===0||nh.has(a)?a==="float"?e.cssFloat=s:e[a]=(""+s).trim():e[a]=s+"px"}function Io(e,a,s){if(a!=null&&typeof a!="object")throw Error(d(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in a)l=a[n],a.hasOwnProperty(n)&&s[n]!==l&&Fo(e,n,l)}else for(var r in a)a.hasOwnProperty(r)&&Fo(e,r,a[r])}function fi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ih=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gn(e){return ih.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var xi=null;function gi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Js=null,Fs=null;function ed(e){var a=Vs(e);if(a&&(e=a.stateNode)){var s=e[Ht]||null;e:switch(e=a.stateNode,a.type){case"input":if(mi(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+sa(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==e&&l.form===e.form){var n=l[Ht]||null;if(!n)throw Error(d(90));mi(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===e.form&&Wo(l)}break e;case"textarea":Po(e,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&Ks(e,!!s.multiple,a,!1)}}}var pi=!1;function td(e,a,s){if(pi)return e(a,s);pi=!0;try{var l=e(a);return l}finally{if(pi=!1,(Js!==null||Fs!==null)&&(Tr(),Js&&(a=Js,e=Fs,Fs=Js=null,ed(a),e)))for(a=0;a<e.length;a++)ed(e[a])}}function Rl(e,a){var s=e.stateNode;if(s===null)return null;var l=s[Ht]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,a,typeof s));return s}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yi=!1;if(Aa)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){yi=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{yi=!1}var Wa=null,bi=null,Vn=null;function ad(){if(Vn)return Vn;var e,a=bi,s=a.length,l,n="value"in Wa?Wa.value:Wa.textContent,r=n.length;for(e=0;e<s&&a[e]===n[e];e++);var o=s-e;for(l=1;l<=o&&a[s-l]===n[r-l];l++);return Vn=n.slice(e,1<l?1-l:void 0)}function Xn(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Zn(){return!0}function sd(){return!1}function $t(e){function a(s,l,n,r,o){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(s=e[h],this[h]=s?s(r):r[h]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Zn:sd,this.isPropagationStopped=sd,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),a}var Ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wn=$t(Ns),zl=x({},Ns,{view:0,detail:0}),ch=$t(zl),vi,ji,Ll,Kn=x({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ll&&(Ll&&e.type==="mousemove"?(vi=e.screenX-Ll.screenX,ji=e.screenY-Ll.screenY):ji=vi=0,Ll=e),vi)},movementY:function(e){return"movementY"in e?e.movementY:ji}}),ld=$t(Kn),oh=x({},Kn,{dataTransfer:0}),dh=$t(oh),uh=x({},zl,{relatedTarget:0}),Ni=$t(uh),mh=x({},Ns,{animationName:0,elapsedTime:0,pseudoElement:0}),hh=$t(mh),fh=x({},Ns,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xh=$t(fh),gh=x({},Ns,{data:0}),nd=$t(gh),ph={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vh(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=bh[e])?!!a[e]:!1}function wi(){return vh}var jh=x({},zl,{key:function(e){if(e.key){var a=ph[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Xn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wi,charCode:function(e){return e.type==="keypress"?Xn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nh=$t(jh),wh=x({},Kn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rd=$t(wh),Sh=x({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wi}),_h=$t(Sh),Eh=x({},Ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ah=$t(Eh),Mh=x({},Kn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Th=$t(Mh),Ch=x({},Ns,{newState:0,oldState:0}),Dh=$t(Ch),Oh=[9,13,27,32],Si=Aa&&"CompositionEvent"in window,ql=null;Aa&&"documentMode"in document&&(ql=document.documentMode);var kh=Aa&&"TextEvent"in window&&!ql,id=Aa&&(!Si||ql&&8<ql&&11>=ql),cd=" ",od=!1;function dd(e,a){switch(e){case"keyup":return Oh.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ud(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Is=!1;function Rh(e,a){switch(e){case"compositionend":return ud(a);case"keypress":return a.which!==32?null:(od=!0,cd);case"textInput":return e=a.data,e===cd&&od?null:e;default:return null}}function Uh(e,a){if(Is)return e==="compositionend"||!Si&&dd(e,a)?(e=ad(),Vn=bi=Wa=null,Is=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return id&&a.locale!=="ko"?null:a.data;default:return null}}var zh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function md(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!zh[e.type]:a==="textarea"}function hd(e,a,s,l){Js?Fs?Fs.push(l):Fs=[l]:Js=l,a=Ur(a,"onChange"),0<a.length&&(s=new Wn("onChange","change",null,s,l),e.push({event:s,listeners:a}))}var Hl=null,$l=null;function Lh(e){Zm(e,0)}function Pn(e){var a=kl(e);if(Wo(a))return e}function fd(e,a){if(e==="change")return a}var xd=!1;if(Aa){var _i;if(Aa){var Ei="oninput"in document;if(!Ei){var gd=document.createElement("div");gd.setAttribute("oninput","return;"),Ei=typeof gd.oninput=="function"}_i=Ei}else _i=!1;xd=_i&&(!document.documentMode||9<document.documentMode)}function pd(){Hl&&(Hl.detachEvent("onpropertychange",yd),$l=Hl=null)}function yd(e){if(e.propertyName==="value"&&Pn($l)){var a=[];hd(a,$l,e,gi(e)),td(Lh,a)}}function qh(e,a,s){e==="focusin"?(pd(),Hl=a,$l=s,Hl.attachEvent("onpropertychange",yd)):e==="focusout"&&pd()}function Hh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pn($l)}function $h(e,a){if(e==="click")return Pn(a)}function Bh(e,a){if(e==="input"||e==="change")return Pn(a)}function Yh(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Vt=typeof Object.is=="function"?Object.is:Yh;function Bl(e,a){if(Vt(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var s=Object.keys(e),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!ht.call(a,n)||!Vt(e[n],a[n]))return!1}return!0}function bd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vd(e,a){var s=bd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=a&&l>=a)return{node:s,offset:a-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=bd(s)}}function jd(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?jd(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Nd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var a=Qn(e.document);a instanceof e.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)e=a.contentWindow;else break;a=Qn(e.document)}return a}function Ai(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}var Qh=Aa&&"documentMode"in document&&11>=document.documentMode,el=null,Mi=null,Yl=null,Ti=!1;function wd(e,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ti||el==null||el!==Qn(l)||(l=el,"selectionStart"in l&&Ai(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Yl&&Bl(Yl,l)||(Yl=l,l=Ur(Mi,"onSelect"),0<l.length&&(a=new Wn("onSelect","select",null,a,s),e.push({event:a,listeners:l}),a.target=el)))}function ws(e,a){var s={};return s[e.toLowerCase()]=a.toLowerCase(),s["Webkit"+e]="webkit"+a,s["Moz"+e]="moz"+a,s}var tl={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},Ci={},Sd={};Aa&&(Sd=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Ss(e){if(Ci[e])return Ci[e];if(!tl[e])return e;var a=tl[e],s;for(s in a)if(a.hasOwnProperty(s)&&s in Sd)return Ci[e]=a[s];return e}var _d=Ss("animationend"),Ed=Ss("animationiteration"),Ad=Ss("animationstart"),Gh=Ss("transitionrun"),Vh=Ss("transitionstart"),Xh=Ss("transitioncancel"),Md=Ss("transitionend"),Td=new Map,Di="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Di.push("scrollEnd");function ma(e,a){Td.set(e,a),js(a,[e])}var Cd=new WeakMap;function la(e,a){if(typeof e=="object"&&e!==null){var s=Cd.get(e);return s!==void 0?s:(a={value:e,source:a,stack:Xo(a)},Cd.set(e,a),a)}return{value:e,source:a,stack:Xo(a)}}var na=[],al=0,Oi=0;function Jn(){for(var e=al,a=Oi=al=0;a<e;){var s=na[a];na[a++]=null;var l=na[a];na[a++]=null;var n=na[a];na[a++]=null;var r=na[a];if(na[a++]=null,l!==null&&n!==null){var o=l.pending;o===null?n.next=n:(n.next=o.next,o.next=n),l.pending=n}r!==0&&Dd(s,n,r)}}function Fn(e,a,s,l){na[al++]=e,na[al++]=a,na[al++]=s,na[al++]=l,Oi|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function ki(e,a,s,l){return Fn(e,a,s,l),In(e)}function sl(e,a){return Fn(e,null,null,a),In(e)}function Dd(e,a,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var n=!1,r=e.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&a!==null&&(n=31-_(s),e=r.hiddenUpdates,l=e[n],l===null?e[n]=[a]:l.push(a),a.lane=s|536870912),r):null}function In(e){if(50<fn)throw fn=0,Hc=null,Error(d(185));for(var a=e.return;a!==null;)e=a,a=e.return;return e.tag===3?e.stateNode:null}var ll={};function Zh(e,a,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(e,a,s,l){return new Zh(e,a,s,l)}function Ri(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ma(e,a){var s=e.alternate;return s===null?(s=Xt(e.tag,a,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=a,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,a=e.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Od(e,a){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=a,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,a=s.dependencies,e.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),e}function er(e,a,s,l,n,r){var o=0;if(l=e,typeof e=="function")Ri(e)&&(o=1);else if(typeof e=="string")o=Pf(e,s,K.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ee:return e=Xt(31,s,a,n),e.elementType=ee,e.lanes=r,e;case C:return _s(s.children,n,r,a);case L:o=8,n|=24;break;case y:return e=Xt(12,s,a,n|2),e.elementType=y,e.lanes=r,e;case H:return e=Xt(13,s,a,n),e.elementType=H,e.lanes=r,e;case me:return e=Xt(19,s,a,n),e.elementType=me,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:case le:o=10;break e;case E:o=9;break e;case P:o=11;break e;case Se:o=14;break e;case He:o=16,l=null;break e}o=29,s=Error(d(130,e===null?"null":typeof e,"")),l=null}return a=Xt(o,s,a,n),a.elementType=e,a.type=l,a.lanes=r,a}function _s(e,a,s,l){return e=Xt(7,e,l,a),e.lanes=s,e}function Ui(e,a,s){return e=Xt(6,e,null,a),e.lanes=s,e}function zi(e,a,s){return a=Xt(4,e.children!==null?e.children:[],e.key,a),a.lanes=s,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}var nl=[],rl=0,tr=null,ar=0,ra=[],ia=0,Es=null,Ta=1,Ca="";function As(e,a){nl[rl++]=ar,nl[rl++]=tr,tr=e,ar=a}function kd(e,a,s){ra[ia++]=Ta,ra[ia++]=Ca,ra[ia++]=Es,Es=e;var l=Ta;e=Ca;var n=32-_(l)-1;l&=~(1<<n),s+=1;var r=32-_(a)+n;if(30<r){var o=n-n%5;r=(l&(1<<o)-1).toString(32),l>>=o,n-=o,Ta=1<<32-_(a)+n|s<<n|l,Ca=r+e}else Ta=1<<r|s<<n|l,Ca=e}function Li(e){e.return!==null&&(As(e,1),kd(e,1,0))}function qi(e){for(;e===tr;)tr=nl[--rl],nl[rl]=null,ar=nl[--rl],nl[rl]=null;for(;e===Es;)Es=ra[--ia],ra[ia]=null,Ca=ra[--ia],ra[ia]=null,Ta=ra[--ia],ra[ia]=null}var zt=null,it=null,qe=!1,Ms=null,ya=!1,Hi=Error(d(519));function Ts(e){var a=Error(d(418,""));throw Vl(la(a,e)),Hi}function Rd(e){var a=e.stateNode,s=e.type,l=e.memoizedProps;switch(a[Ot]=e,a[Ht]=l,s){case"dialog":Re("cancel",a),Re("close",a);break;case"iframe":case"object":case"embed":Re("load",a);break;case"video":case"audio":for(s=0;s<gn.length;s++)Re(gn[s],a);break;case"source":Re("error",a);break;case"img":case"image":case"link":Re("error",a),Re("load",a);break;case"details":Re("toggle",a);break;case"input":Re("invalid",a),Ko(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Yn(a);break;case"select":Re("invalid",a);break;case"textarea":Re("invalid",a),Jo(a,l.value,l.defaultValue,l.children),Yn(a)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||Jm(a.textContent,s)?(l.popover!=null&&(Re("beforetoggle",a),Re("toggle",a)),l.onScroll!=null&&Re("scroll",a),l.onScrollEnd!=null&&Re("scrollend",a),l.onClick!=null&&(a.onclick=zr),a=!0):a=!1,a||Ts(e)}function Ud(e){for(zt=e.return;zt;)switch(zt.tag){case 5:case 13:ya=!1;return;case 27:case 3:ya=!0;return;default:zt=zt.return}}function Ql(e){if(e!==zt)return!1;if(!qe)return Ud(e),qe=!0,!1;var a=e.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||to(e.type,e.memoizedProps)),s=!s),s&&it&&Ts(e),Ud(e),a===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(a===0){it=fa(e.nextSibling);break e}a--}else s!=="$"&&s!=="$!"&&s!=="$?"||a++;e=e.nextSibling}it=null}}else a===27?(a=it,ds(e.type)?(e=no,no=null,it=e):it=a):it=zt?fa(e.stateNode.nextSibling):null;return!0}function Gl(){it=zt=null,qe=!1}function zd(){var e=Ms;return e!==null&&(Qt===null?Qt=e:Qt.push.apply(Qt,e),Ms=null),e}function Vl(e){Ms===null?Ms=[e]:Ms.push(e)}var $i=$(null),Cs=null,Da=null;function Ka(e,a,s){V($i,a._currentValue),a._currentValue=s}function Oa(e){e._currentValue=$i.current,R($i)}function Bi(e,a,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),e===s)break;e=e.return}}function Yi(e,a,s,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var o=n.child;r=r.firstContext;e:for(;r!==null;){var h=r;r=n;for(var w=0;w<a.length;w++)if(h.context===a[w]){r.lanes|=s,h=r.alternate,h!==null&&(h.lanes|=s),Bi(r.return,s,e),l||(o=null);break e}r=h.next}}else if(n.tag===18){if(o=n.return,o===null)throw Error(d(341));o.lanes|=s,r=o.alternate,r!==null&&(r.lanes|=s),Bi(o,s,e),o=null}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}}function Xl(e,a,s,l){e=null;for(var n=a,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var o=n.alternate;if(o===null)throw Error(d(387));if(o=o.memoizedProps,o!==null){var h=n.type;Vt(n.pendingProps.value,o.value)||(e!==null?e.push(h):e=[h])}}else if(n===Ae.current){if(o=n.alternate,o===null)throw Error(d(387));o.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Nn):e=[Nn])}n=n.return}e!==null&&Yi(a,e,s,l),a.flags|=262144}function sr(e){for(e=e.firstContext;e!==null;){if(!Vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ds(e){Cs=e,Da=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function kt(e){return Ld(Cs,e)}function lr(e,a){return Cs===null&&Ds(e),Ld(e,a)}function Ld(e,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},Da===null){if(e===null)throw Error(d(308));Da=a,e.dependencies={lanes:0,firstContext:a},e.flags|=524288}else Da=Da.next=a;return s}var Wh=typeof AbortController<"u"?AbortController:function(){var e=[],a=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){a.aborted=!0,e.forEach(function(s){return s()})}},Kh=i.unstable_scheduleCallback,Ph=i.unstable_NormalPriority,Nt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qi(){return{controller:new Wh,data:new Map,refCount:0}}function Zl(e){e.refCount--,e.refCount===0&&Kh(Ph,function(){e.controller.abort()})}var Wl=null,Gi=0,il=0,cl=null;function Jh(e,a){if(Wl===null){var s=Wl=[];Gi=0,il=Xc(),cl={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Gi++,a.then(qd,qd),a}function qd(){if(--Gi===0&&Wl!==null){cl!==null&&(cl.status="fulfilled");var e=Wl;Wl=null,il=0,cl=null;for(var a=0;a<e.length;a++)(0,e[a])()}}function Fh(e,a){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return e.then(function(){l.status="fulfilled",l.value=a;for(var n=0;n<s.length;n++)(0,s[n])(a)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var Hd=S.S;S.S=function(e,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Jh(e,a),Hd!==null&&Hd(e,a)};var Os=$(null);function Vi(){var e=Os.current;return e!==null?e:Je.pooledCache}function nr(e,a){a===null?V(Os,Os.current):V(Os,a.pool)}function $d(){var e=Vi();return e===null?null:{parent:Nt._currentValue,pool:e}}var Kl=Error(d(460)),Bd=Error(d(474)),rr=Error(d(542)),Xi={then:function(){}};function Yd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ir(){}function Qd(e,a,s){switch(s=e[s],s===void 0?e.push(a):s!==a&&(a.then(ir,ir),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Vd(e),e;default:if(typeof a.status=="string")a.then(ir,ir);else{if(e=Je,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=a,e.status="pending",e.then(function(l){if(a.status==="pending"){var n=a;n.status="fulfilled",n.value=l}},function(l){if(a.status==="pending"){var n=a;n.status="rejected",n.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw e=a.reason,Vd(e),e}throw Pl=a,Kl}}var Pl=null;function Gd(){if(Pl===null)throw Error(d(459));var e=Pl;return Pl=null,e}function Vd(e){if(e===Kl||e===rr)throw Error(d(483))}var Pa=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wi(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ja(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fa(e,a,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Qe&2)!==0){var n=l.pending;return n===null?a.next=a:(a.next=n.next,n.next=a),l.pending=a,a=In(e),Dd(e,null,s),a}return Fn(e,l,a,s),In(e)}function Jl(e,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=e.pendingLanes,s|=l,a.lanes=s,li(e,s)}}function Ki(e,a){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var o={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?n=r=o:r=r.next=o,s=s.next}while(s!==null);r===null?n=r=a:r=r.next=a}else n=r=a;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=a:e.next=a,s.lastBaseUpdate=a}var Pi=!1;function Fl(){if(Pi){var e=cl;if(e!==null)throw e}}function Il(e,a,s,l){Pi=!1;var n=e.updateQueue;Pa=!1;var r=n.firstBaseUpdate,o=n.lastBaseUpdate,h=n.shared.pending;if(h!==null){n.shared.pending=null;var w=h,q=w.next;w.next=null,o===null?r=q:o.next=q,o=w;var J=e.alternate;J!==null&&(J=J.updateQueue,h=J.lastBaseUpdate,h!==o&&(h===null?J.firstBaseUpdate=q:h.next=q,J.lastBaseUpdate=w))}if(r!==null){var te=n.baseState;o=0,J=q=w=null,h=r;do{var Y=h.lane&-536870913,G=Y!==h.lane;if(G?(ze&Y)===Y:(l&Y)===Y){Y!==0&&Y===il&&(Pi=!0),J!==null&&(J=J.next={lane:0,tag:h.tag,payload:h.payload,callback:null,next:null});e:{var _e=e,je=h;Y=a;var We=s;switch(je.tag){case 1:if(_e=je.payload,typeof _e=="function"){te=_e.call(We,te,Y);break e}te=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=je.payload,Y=typeof _e=="function"?_e.call(We,te,Y):_e,Y==null)break e;te=x({},te,Y);break e;case 2:Pa=!0}}Y=h.callback,Y!==null&&(e.flags|=64,G&&(e.flags|=8192),G=n.callbacks,G===null?n.callbacks=[Y]:G.push(Y))}else G={lane:Y,tag:h.tag,payload:h.payload,callback:h.callback,next:null},J===null?(q=J=G,w=te):J=J.next=G,o|=Y;if(h=h.next,h===null){if(h=n.shared.pending,h===null)break;G=h,h=G.next,G.next=null,n.lastBaseUpdate=G,n.shared.pending=null}}while(!0);J===null&&(w=te),n.baseState=w,n.firstBaseUpdate=q,n.lastBaseUpdate=J,r===null&&(n.shared.lanes=0),rs|=o,e.lanes=o,e.memoizedState=te}}function Xd(e,a){if(typeof e!="function")throw Error(d(191,e));e.call(a)}function Zd(e,a){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Xd(s[e],a)}var ol=$(null),cr=$(0);function Wd(e,a){e=Ha,V(cr,e),V(ol,a),Ha=e|a.baseLanes}function Ji(){V(cr,Ha),V(ol,ol.current)}function Fi(){Ha=cr.current,R(ol),R(cr)}var Ia=0,Ce=null,Xe=null,xt=null,or=!1,dl=!1,ks=!1,dr=0,en=0,ul=null,Ih=0;function dt(){throw Error(d(321))}function Ii(e,a){if(a===null)return!1;for(var s=0;s<a.length&&s<e.length;s++)if(!Vt(e[s],a[s]))return!1;return!0}function ec(e,a,s,l,n,r){return Ia=r,Ce=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,S.H=e===null||e.memoizedState===null?Du:Ou,ks=!1,r=s(l,n),ks=!1,dl&&(r=Pd(a,s,l,n)),Kd(e),r}function Kd(e){S.H=gr;var a=Xe!==null&&Xe.next!==null;if(Ia=0,xt=Xe=Ce=null,or=!1,en=0,ul=null,a)throw Error(d(300));e===null||_t||(e=e.dependencies,e!==null&&sr(e)&&(_t=!0))}function Pd(e,a,s,l){Ce=e;var n=0;do{if(dl&&(ul=null),en=0,dl=!1,25<=n)throw Error(d(301));if(n+=1,xt=Xe=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}S.H=rf,r=a(s,l)}while(dl);return r}function ef(){var e=S.H,a=e.useState()[0];return a=typeof a.then=="function"?tn(a):a,e=e.useState()[0],(Xe!==null?Xe.memoizedState:null)!==e&&(Ce.flags|=1024),a}function tc(){var e=dr!==0;return dr=0,e}function ac(e,a,s){a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~s}function sc(e){if(or){for(e=e.memoizedState;e!==null;){var a=e.queue;a!==null&&(a.pending=null),e=e.next}or=!1}Ia=0,xt=Xe=Ce=null,dl=!1,en=dr=0,ul=null}function Bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ce.memoizedState=xt=e:xt=xt.next=e,xt}function gt(){if(Xe===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var a=xt===null?Ce.memoizedState:xt.next;if(a!==null)xt=a,Xe=e;else{if(e===null)throw Ce.alternate===null?Error(d(467)):Error(d(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},xt===null?Ce.memoizedState=xt=e:xt=xt.next=e}return xt}function lc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tn(e){var a=en;return en+=1,ul===null&&(ul=[]),e=Qd(ul,e,a),a=Ce,(xt===null?a.memoizedState:xt.next)===null&&(a=a.alternate,S.H=a===null||a.memoizedState===null?Du:Ou),e}function ur(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return tn(e);if(e.$$typeof===le)return kt(e)}throw Error(d(438,String(e)))}function nc(e){var a=null,s=Ce.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(n){return n.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=lc(),Ce.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(e),l=0;l<e;l++)s[l]=ae;return a.index++,s}function ka(e,a){return typeof a=="function"?a(e):a}function mr(e){var a=gt();return rc(a,Xe,e)}function rc(e,a,s){var l=e.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=s;var n=e.baseQueue,r=l.pending;if(r!==null){if(n!==null){var o=n.next;n.next=r.next,r.next=o}a.baseQueue=n=r,l.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{a=n.next;var h=o=null,w=null,q=a,J=!1;do{var te=q.lane&-536870913;if(te!==q.lane?(ze&te)===te:(Ia&te)===te){var Y=q.revertLane;if(Y===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),te===il&&(J=!0);else if((Ia&Y)===Y){q=q.next,Y===il&&(J=!0);continue}else te={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},w===null?(h=w=te,o=r):w=w.next=te,Ce.lanes|=Y,rs|=Y;te=q.action,ks&&s(r,te),r=q.hasEagerState?q.eagerState:s(r,te)}else Y={lane:te,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},w===null?(h=w=Y,o=r):w=w.next=Y,Ce.lanes|=te,rs|=te;q=q.next}while(q!==null&&q!==a);if(w===null?o=r:w.next=h,!Vt(r,e.memoizedState)&&(_t=!0,J&&(s=cl,s!==null)))throw s;e.memoizedState=r,e.baseState=o,e.baseQueue=w,l.lastRenderedState=r}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function ic(e){var a=gt(),s=a.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var l=s.dispatch,n=s.pending,r=a.memoizedState;if(n!==null){s.pending=null;var o=n=n.next;do r=e(r,o.action),o=o.next;while(o!==n);Vt(r,a.memoizedState)||(_t=!0),a.memoizedState=r,a.baseQueue===null&&(a.baseState=r),s.lastRenderedState=r}return[r,l]}function Jd(e,a,s){var l=Ce,n=gt(),r=qe;if(r){if(s===void 0)throw Error(d(407));s=s()}else s=a();var o=!Vt((Xe||n).memoizedState,s);o&&(n.memoizedState=s,_t=!0),n=n.queue;var h=eu.bind(null,l,n,e);if(an(2048,8,h,[e]),n.getSnapshot!==a||o||xt!==null&&xt.memoizedState.tag&1){if(l.flags|=2048,ml(9,hr(),Id.bind(null,l,n,s,a),null),Je===null)throw Error(d(349));r||(Ia&124)!==0||Fd(l,a,s)}return s}function Fd(e,a,s){e.flags|=16384,e={getSnapshot:a,value:s},a=Ce.updateQueue,a===null?(a=lc(),Ce.updateQueue=a,a.stores=[e]):(s=a.stores,s===null?a.stores=[e]:s.push(e))}function Id(e,a,s,l){a.value=s,a.getSnapshot=l,tu(a)&&au(e)}function eu(e,a,s){return s(function(){tu(a)&&au(e)})}function tu(e){var a=e.getSnapshot;e=e.value;try{var s=a();return!Vt(e,s)}catch{return!0}}function au(e){var a=sl(e,2);a!==null&&Jt(a,e,2)}function cc(e){var a=Bt();if(typeof e=="function"){var s=e;if(e=s(),ks){Fe(!0);try{s()}finally{Fe(!1)}}}return a.memoizedState=a.baseState=e,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:e},a}function su(e,a,s,l){return e.baseState=s,rc(e,Xe,typeof l=="function"?l:ka)}function tf(e,a,s,l,n){if(xr(e))throw Error(d(485));if(e=a.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};S.T!==null?s(!0):r.isTransition=!1,l(r),s=a.pending,s===null?(r.next=a.pending=r,lu(a,r)):(r.next=s.next,a.pending=s.next=r)}}function lu(e,a){var s=a.action,l=a.payload,n=e.state;if(a.isTransition){var r=S.T,o={};S.T=o;try{var h=s(n,l),w=S.S;w!==null&&w(o,h),nu(e,a,h)}catch(q){oc(e,a,q)}finally{S.T=r}}else try{r=s(n,l),nu(e,a,r)}catch(q){oc(e,a,q)}}function nu(e,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){ru(e,a,l)},function(l){return oc(e,a,l)}):ru(e,a,s)}function ru(e,a,s){a.status="fulfilled",a.value=s,iu(a),e.state=s,a=e.pending,a!==null&&(s=a.next,s===a?e.pending=null:(s=s.next,a.next=s,lu(e,s)))}function oc(e,a,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,iu(a),a=a.next;while(a!==l)}e.action=null}function iu(e){e=e.listeners;for(var a=0;a<e.length;a++)(0,e[a])()}function cu(e,a){return a}function ou(e,a){if(qe){var s=Je.formState;if(s!==null){e:{var l=Ce;if(qe){if(it){t:{for(var n=it,r=ya;n.nodeType!==8;){if(!r){n=null;break t}if(n=fa(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){it=fa(n.nextSibling),l=n.data==="F!";break e}}Ts(l)}l=!1}l&&(a=s[0])}}return s=Bt(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:a},s.queue=l,s=Mu.bind(null,Ce,l),l.dispatch=s,l=cc(!1),r=fc.bind(null,Ce,!1,l.queue),l=Bt(),n={state:a,dispatch:null,action:e,pending:null},l.queue=n,s=tf.bind(null,Ce,n,r,s),n.dispatch=s,l.memoizedState=e,[a,s,!1]}function du(e){var a=gt();return uu(a,Xe,e)}function uu(e,a,s){if(a=rc(e,a,cu)[0],e=mr(ka)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=tn(a)}catch(o){throw o===Kl?rr:o}else l=a;a=gt();var n=a.queue,r=n.dispatch;return s!==a.memoizedState&&(Ce.flags|=2048,ml(9,hr(),af.bind(null,n,s),null)),[l,r,e]}function af(e,a){e.action=a}function mu(e){var a=gt(),s=Xe;if(s!==null)return uu(a,s,e);gt(),a=a.memoizedState,s=gt();var l=s.queue.dispatch;return s.memoizedState=e,[a,l,!1]}function ml(e,a,s,l){return e={tag:e,create:s,deps:l,inst:a,next:null},a=Ce.updateQueue,a===null&&(a=lc(),Ce.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,a.lastEffect=e),e}function hr(){return{destroy:void 0,resource:void 0}}function hu(){return gt().memoizedState}function fr(e,a,s,l){var n=Bt();l=l===void 0?null:l,Ce.flags|=e,n.memoizedState=ml(1|a,hr(),s,l)}function an(e,a,s,l){var n=gt();l=l===void 0?null:l;var r=n.memoizedState.inst;Xe!==null&&l!==null&&Ii(l,Xe.memoizedState.deps)?n.memoizedState=ml(a,r,s,l):(Ce.flags|=e,n.memoizedState=ml(1|a,r,s,l))}function fu(e,a){fr(8390656,8,e,a)}function xu(e,a){an(2048,8,e,a)}function gu(e,a){return an(4,2,e,a)}function pu(e,a){return an(4,4,e,a)}function yu(e,a){if(typeof a=="function"){e=e();var s=a(e);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function bu(e,a,s){s=s!=null?s.concat([e]):null,an(4,4,yu.bind(null,a,e),s)}function dc(){}function vu(e,a){var s=gt();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&Ii(a,l[1])?l[0]:(s.memoizedState=[e,a],e)}function ju(e,a){var s=gt();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&Ii(a,l[1]))return l[0];if(l=e(),ks){Fe(!0);try{e()}finally{Fe(!1)}}return s.memoizedState=[l,a],l}function uc(e,a,s){return s===void 0||(Ia&1073741824)!==0?e.memoizedState=a:(e.memoizedState=s,e=Sm(),Ce.lanes|=e,rs|=e,s)}function Nu(e,a,s,l){return Vt(s,a)?s:ol.current!==null?(e=uc(e,s,l),Vt(e,a)||(_t=!0),e):(Ia&42)===0?(_t=!0,e.memoizedState=s):(e=Sm(),Ce.lanes|=e,rs|=e,a)}function wu(e,a,s,l,n){var r=X.p;X.p=r!==0&&8>r?r:8;var o=S.T,h={};S.T=h,fc(e,!1,a,s);try{var w=n(),q=S.S;if(q!==null&&q(h,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var J=Fh(w,l);sn(e,a,J,Pt(e))}else sn(e,a,l,Pt(e))}catch(te){sn(e,a,{then:function(){},status:"rejected",reason:te},Pt())}finally{X.p=r,S.T=o}}function sf(){}function mc(e,a,s,l){if(e.tag!==5)throw Error(d(476));var n=Su(e).queue;wu(e,n,a,O,s===null?sf:function(){return _u(e),s(l)})}function Su(e){var a=e.memoizedState;if(a!==null)return a;a={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:O},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:s},next:null},e.memoizedState=a,e=e.alternate,e!==null&&(e.memoizedState=a),a}function _u(e){var a=Su(e).next.queue;sn(e,a,{},Pt())}function hc(){return kt(Nn)}function Eu(){return gt().memoizedState}function Au(){return gt().memoizedState}function lf(e){for(var a=e.return;a!==null;){switch(a.tag){case 24:case 3:var s=Pt();e=Ja(s);var l=Fa(a,e,s);l!==null&&(Jt(l,a,s),Jl(l,a,s)),a={cache:Qi()},e.payload=a;return}a=a.return}}function nf(e,a,s){var l=Pt();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},xr(e)?Tu(a,s):(s=ki(e,a,s,l),s!==null&&(Jt(s,e,l),Cu(s,a,l)))}function Mu(e,a,s){var l=Pt();sn(e,a,s,l)}function sn(e,a,s,l){var n={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(xr(e))Tu(a,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=a.lastRenderedReducer,r!==null))try{var o=a.lastRenderedState,h=r(o,s);if(n.hasEagerState=!0,n.eagerState=h,Vt(h,o))return Fn(e,a,n,0),Je===null&&Jn(),!1}catch{}finally{}if(s=ki(e,a,n,l),s!==null)return Jt(s,e,l),Cu(s,a,l),!0}return!1}function fc(e,a,s,l){if(l={lane:2,revertLane:Xc(),action:l,hasEagerState:!1,eagerState:null,next:null},xr(e)){if(a)throw Error(d(479))}else a=ki(e,s,l,2),a!==null&&Jt(a,e,2)}function xr(e){var a=e.alternate;return e===Ce||a!==null&&a===Ce}function Tu(e,a){dl=or=!0;var s=e.pending;s===null?a.next=a:(a.next=s.next,s.next=a),e.pending=a}function Cu(e,a,s){if((s&4194048)!==0){var l=a.lanes;l&=e.pendingLanes,s|=l,a.lanes=s,li(e,s)}}var gr={readContext:kt,use:ur,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt},Du={readContext:kt,use:ur,useCallback:function(e,a){return Bt().memoizedState=[e,a===void 0?null:a],e},useContext:kt,useEffect:fu,useImperativeHandle:function(e,a,s){s=s!=null?s.concat([e]):null,fr(4194308,4,yu.bind(null,a,e),s)},useLayoutEffect:function(e,a){return fr(4194308,4,e,a)},useInsertionEffect:function(e,a){fr(4,2,e,a)},useMemo:function(e,a){var s=Bt();a=a===void 0?null:a;var l=e();if(ks){Fe(!0);try{e()}finally{Fe(!1)}}return s.memoizedState=[l,a],l},useReducer:function(e,a,s){var l=Bt();if(s!==void 0){var n=s(a);if(ks){Fe(!0);try{s(a)}finally{Fe(!1)}}}else n=a;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=nf.bind(null,Ce,e),[l.memoizedState,e]},useRef:function(e){var a=Bt();return e={current:e},a.memoizedState=e},useState:function(e){e=cc(e);var a=e.queue,s=Mu.bind(null,Ce,a);return a.dispatch=s,[e.memoizedState,s]},useDebugValue:dc,useDeferredValue:function(e,a){var s=Bt();return uc(s,e,a)},useTransition:function(){var e=cc(!1);return e=wu.bind(null,Ce,e.queue,!0,!1),Bt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,a,s){var l=Ce,n=Bt();if(qe){if(s===void 0)throw Error(d(407));s=s()}else{if(s=a(),Je===null)throw Error(d(349));(ze&124)!==0||Fd(l,a,s)}n.memoizedState=s;var r={value:s,getSnapshot:a};return n.queue=r,fu(eu.bind(null,l,r,e),[e]),l.flags|=2048,ml(9,hr(),Id.bind(null,l,r,s,a),null),s},useId:function(){var e=Bt(),a=Je.identifierPrefix;if(qe){var s=Ca,l=Ta;s=(l&~(1<<32-_(l)-1)).toString(32)+s,a="«"+a+"R"+s,s=dr++,0<s&&(a+="H"+s.toString(32)),a+="»"}else s=Ih++,a="«"+a+"r"+s.toString(32)+"»";return e.memoizedState=a},useHostTransitionStatus:hc,useFormState:ou,useActionState:ou,useOptimistic:function(e){var a=Bt();a.memoizedState=a.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=fc.bind(null,Ce,!0,s),s.dispatch=a,[e,a]},useMemoCache:nc,useCacheRefresh:function(){return Bt().memoizedState=lf.bind(null,Ce)}},Ou={readContext:kt,use:ur,useCallback:vu,useContext:kt,useEffect:xu,useImperativeHandle:bu,useInsertionEffect:gu,useLayoutEffect:pu,useMemo:ju,useReducer:mr,useRef:hu,useState:function(){return mr(ka)},useDebugValue:dc,useDeferredValue:function(e,a){var s=gt();return Nu(s,Xe.memoizedState,e,a)},useTransition:function(){var e=mr(ka)[0],a=gt().memoizedState;return[typeof e=="boolean"?e:tn(e),a]},useSyncExternalStore:Jd,useId:Eu,useHostTransitionStatus:hc,useFormState:du,useActionState:du,useOptimistic:function(e,a){var s=gt();return su(s,Xe,e,a)},useMemoCache:nc,useCacheRefresh:Au},rf={readContext:kt,use:ur,useCallback:vu,useContext:kt,useEffect:xu,useImperativeHandle:bu,useInsertionEffect:gu,useLayoutEffect:pu,useMemo:ju,useReducer:ic,useRef:hu,useState:function(){return ic(ka)},useDebugValue:dc,useDeferredValue:function(e,a){var s=gt();return Xe===null?uc(s,e,a):Nu(s,Xe.memoizedState,e,a)},useTransition:function(){var e=ic(ka)[0],a=gt().memoizedState;return[typeof e=="boolean"?e:tn(e),a]},useSyncExternalStore:Jd,useId:Eu,useHostTransitionStatus:hc,useFormState:mu,useActionState:mu,useOptimistic:function(e,a){var s=gt();return Xe!==null?su(s,Xe,e,a):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:nc,useCacheRefresh:Au},hl=null,ln=0;function pr(e){var a=ln;return ln+=1,hl===null&&(hl=[]),Qd(hl,e,a)}function nn(e,a){a=a.props.ref,e.ref=a!==void 0?a:null}function yr(e,a){throw a.$$typeof===Z?Error(d(525)):(e=Object.prototype.toString.call(a),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)))}function ku(e){var a=e._init;return a(e._payload)}function Ru(e){function a(U,T){if(e){var z=U.deletions;z===null?(U.deletions=[T],U.flags|=16):z.push(T)}}function s(U,T){if(!e)return null;for(;T!==null;)a(U,T),T=T.sibling;return null}function l(U){for(var T=new Map;U!==null;)U.key!==null?T.set(U.key,U):T.set(U.index,U),U=U.sibling;return T}function n(U,T){return U=Ma(U,T),U.index=0,U.sibling=null,U}function r(U,T,z){return U.index=z,e?(z=U.alternate,z!==null?(z=z.index,z<T?(U.flags|=67108866,T):z):(U.flags|=67108866,T)):(U.flags|=1048576,T)}function o(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function h(U,T,z,I){return T===null||T.tag!==6?(T=Ui(z,U.mode,I),T.return=U,T):(T=n(T,z),T.return=U,T)}function w(U,T,z,I){var fe=z.type;return fe===C?J(U,T,z.props.children,I,z.key):T!==null&&(T.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===He&&ku(fe)===T.type)?(T=n(T,z.props),nn(T,z),T.return=U,T):(T=er(z.type,z.key,z.props,null,U.mode,I),nn(T,z),T.return=U,T)}function q(U,T,z,I){return T===null||T.tag!==4||T.stateNode.containerInfo!==z.containerInfo||T.stateNode.implementation!==z.implementation?(T=zi(z,U.mode,I),T.return=U,T):(T=n(T,z.children||[]),T.return=U,T)}function J(U,T,z,I,fe){return T===null||T.tag!==7?(T=_s(z,U.mode,I,fe),T.return=U,T):(T=n(T,z),T.return=U,T)}function te(U,T,z){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Ui(""+T,U.mode,z),T.return=U,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case D:return z=er(T.type,T.key,T.props,null,U.mode,z),nn(z,T),z.return=U,z;case W:return T=zi(T,U.mode,z),T.return=U,T;case He:var I=T._init;return T=I(T._payload),te(U,T,z)}if(F(T)||se(T))return T=_s(T,U.mode,z,null),T.return=U,T;if(typeof T.then=="function")return te(U,pr(T),z);if(T.$$typeof===le)return te(U,lr(U,T),z);yr(U,T)}return null}function Y(U,T,z,I){var fe=T!==null?T.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return fe!==null?null:h(U,T,""+z,I);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case D:return z.key===fe?w(U,T,z,I):null;case W:return z.key===fe?q(U,T,z,I):null;case He:return fe=z._init,z=fe(z._payload),Y(U,T,z,I)}if(F(z)||se(z))return fe!==null?null:J(U,T,z,I,null);if(typeof z.then=="function")return Y(U,T,pr(z),I);if(z.$$typeof===le)return Y(U,T,lr(U,z),I);yr(U,z)}return null}function G(U,T,z,I,fe){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return U=U.get(z)||null,h(T,U,""+I,fe);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case D:return U=U.get(I.key===null?z:I.key)||null,w(T,U,I,fe);case W:return U=U.get(I.key===null?z:I.key)||null,q(T,U,I,fe);case He:var Oe=I._init;return I=Oe(I._payload),G(U,T,z,I,fe)}if(F(I)||se(I))return U=U.get(z)||null,J(T,U,I,fe,null);if(typeof I.then=="function")return G(U,T,z,pr(I),fe);if(I.$$typeof===le)return G(U,T,z,lr(T,I),fe);yr(T,I)}return null}function _e(U,T,z,I){for(var fe=null,Oe=null,be=T,we=T=0,At=null;be!==null&&we<z.length;we++){be.index>we?(At=be,be=null):At=be.sibling;var Le=Y(U,be,z[we],I);if(Le===null){be===null&&(be=At);break}e&&be&&Le.alternate===null&&a(U,be),T=r(Le,T,we),Oe===null?fe=Le:Oe.sibling=Le,Oe=Le,be=At}if(we===z.length)return s(U,be),qe&&As(U,we),fe;if(be===null){for(;we<z.length;we++)be=te(U,z[we],I),be!==null&&(T=r(be,T,we),Oe===null?fe=be:Oe.sibling=be,Oe=be);return qe&&As(U,we),fe}for(be=l(be);we<z.length;we++)At=G(be,U,we,z[we],I),At!==null&&(e&&At.alternate!==null&&be.delete(At.key===null?we:At.key),T=r(At,T,we),Oe===null?fe=At:Oe.sibling=At,Oe=At);return e&&be.forEach(function(xs){return a(U,xs)}),qe&&As(U,we),fe}function je(U,T,z,I){if(z==null)throw Error(d(151));for(var fe=null,Oe=null,be=T,we=T=0,At=null,Le=z.next();be!==null&&!Le.done;we++,Le=z.next()){be.index>we?(At=be,be=null):At=be.sibling;var xs=Y(U,be,Le.value,I);if(xs===null){be===null&&(be=At);break}e&&be&&xs.alternate===null&&a(U,be),T=r(xs,T,we),Oe===null?fe=xs:Oe.sibling=xs,Oe=xs,be=At}if(Le.done)return s(U,be),qe&&As(U,we),fe;if(be===null){for(;!Le.done;we++,Le=z.next())Le=te(U,Le.value,I),Le!==null&&(T=r(Le,T,we),Oe===null?fe=Le:Oe.sibling=Le,Oe=Le);return qe&&As(U,we),fe}for(be=l(be);!Le.done;we++,Le=z.next())Le=G(be,U,we,Le.value,I),Le!==null&&(e&&Le.alternate!==null&&be.delete(Le.key===null?we:Le.key),T=r(Le,T,we),Oe===null?fe=Le:Oe.sibling=Le,Oe=Le);return e&&be.forEach(function(cx){return a(U,cx)}),qe&&As(U,we),fe}function We(U,T,z,I){if(typeof z=="object"&&z!==null&&z.type===C&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case D:e:{for(var fe=z.key;T!==null;){if(T.key===fe){if(fe=z.type,fe===C){if(T.tag===7){s(U,T.sibling),I=n(T,z.props.children),I.return=U,U=I;break e}}else if(T.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===He&&ku(fe)===T.type){s(U,T.sibling),I=n(T,z.props),nn(I,z),I.return=U,U=I;break e}s(U,T);break}else a(U,T);T=T.sibling}z.type===C?(I=_s(z.props.children,U.mode,I,z.key),I.return=U,U=I):(I=er(z.type,z.key,z.props,null,U.mode,I),nn(I,z),I.return=U,U=I)}return o(U);case W:e:{for(fe=z.key;T!==null;){if(T.key===fe)if(T.tag===4&&T.stateNode.containerInfo===z.containerInfo&&T.stateNode.implementation===z.implementation){s(U,T.sibling),I=n(T,z.children||[]),I.return=U,U=I;break e}else{s(U,T);break}else a(U,T);T=T.sibling}I=zi(z,U.mode,I),I.return=U,U=I}return o(U);case He:return fe=z._init,z=fe(z._payload),We(U,T,z,I)}if(F(z))return _e(U,T,z,I);if(se(z)){if(fe=se(z),typeof fe!="function")throw Error(d(150));return z=fe.call(z),je(U,T,z,I)}if(typeof z.then=="function")return We(U,T,pr(z),I);if(z.$$typeof===le)return We(U,T,lr(U,z),I);yr(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,T!==null&&T.tag===6?(s(U,T.sibling),I=n(T,z),I.return=U,U=I):(s(U,T),I=Ui(z,U.mode,I),I.return=U,U=I),o(U)):s(U,T)}return function(U,T,z,I){try{ln=0;var fe=We(U,T,z,I);return hl=null,fe}catch(be){if(be===Kl||be===rr)throw be;var Oe=Xt(29,be,null,U.mode);return Oe.lanes=I,Oe.return=U,Oe}finally{}}}var fl=Ru(!0),Uu=Ru(!1),ca=$(null),ba=null;function es(e){var a=e.alternate;V(wt,wt.current&1),V(ca,e),ba===null&&(a===null||ol.current!==null||a.memoizedState!==null)&&(ba=e)}function zu(e){if(e.tag===22){if(V(wt,wt.current),V(ca,e),ba===null){var a=e.alternate;a!==null&&a.memoizedState!==null&&(ba=e)}}else ts()}function ts(){V(wt,wt.current),V(ca,ca.current)}function Ra(e){R(ca),ba===e&&(ba=null),R(wt)}var wt=$(0);function br(e){for(var a=e;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||lo(s)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function xc(e,a,s,l){a=e.memoizedState,s=s(l,a),s=s==null?a:x({},a,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var gc={enqueueSetState:function(e,a,s){e=e._reactInternals;var l=Pt(),n=Ja(l);n.payload=a,s!=null&&(n.callback=s),a=Fa(e,n,l),a!==null&&(Jt(a,e,l),Jl(a,e,l))},enqueueReplaceState:function(e,a,s){e=e._reactInternals;var l=Pt(),n=Ja(l);n.tag=1,n.payload=a,s!=null&&(n.callback=s),a=Fa(e,n,l),a!==null&&(Jt(a,e,l),Jl(a,e,l))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var s=Pt(),l=Ja(s);l.tag=2,a!=null&&(l.callback=a),a=Fa(e,l,s),a!==null&&(Jt(a,e,s),Jl(a,e,s))}};function Lu(e,a,s,l,n,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,r,o):a.prototype&&a.prototype.isPureReactComponent?!Bl(s,l)||!Bl(n,r):!0}function qu(e,a,s,l){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==e&&gc.enqueueReplaceState(a,a.state,null)}function Rs(e,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(e=e.defaultProps){s===a&&(s=x({},s));for(var n in e)s[n]===void 0&&(s[n]=e[n])}return s}var vr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Hu(e){vr(e)}function $u(e){console.error(e)}function Bu(e){vr(e)}function jr(e,a){try{var s=e.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Yu(e,a,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function pc(e,a,s){return s=Ja(s),s.tag=3,s.payload={element:null},s.callback=function(){jr(e,a)},s}function Qu(e){return e=Ja(e),e.tag=3,e}function Gu(e,a,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;e.payload=function(){return n(r)},e.callback=function(){Yu(a,s,l)}}var o=s.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Yu(a,s,l),typeof n!="function"&&(is===null?is=new Set([this]):is.add(this));var h=l.stack;this.componentDidCatch(l.value,{componentStack:h!==null?h:""})})}function cf(e,a,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&Xl(a,s,n,!0),s=ca.current,s!==null){switch(s.tag){case 13:return ba===null?Bc():s.alternate===null&&ct===0&&(ct=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===Xi?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),Qc(e,l,n)),!1;case 22:return s.flags|=65536,l===Xi?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),Qc(e,l,n)),!1}throw Error(d(435,s.tag))}return Qc(e,l,n),Bc(),!1}if(qe)return a=ca.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=n,l!==Hi&&(e=Error(d(422),{cause:l}),Vl(la(e,s)))):(l!==Hi&&(a=Error(d(423),{cause:l}),Vl(la(a,s))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=la(l,s),n=pc(e.stateNode,l,n),Ki(e,n),ct!==4&&(ct=2)),!1;var r=Error(d(520),{cause:l});if(r=la(r,s),hn===null?hn=[r]:hn.push(r),ct!==4&&(ct=2),a===null)return!0;l=la(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,e=n&-n,s.lanes|=e,e=pc(s.stateNode,l,e),Ki(s,e),!1;case 1:if(a=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(is===null||!is.has(r))))return s.flags|=65536,n&=-n,s.lanes|=n,n=Qu(n),Gu(n,e,s,l),Ki(s,n),!1}s=s.return}while(s!==null);return!1}var Vu=Error(d(461)),_t=!1;function Mt(e,a,s,l){a.child=e===null?Uu(a,null,s,l):fl(a,e.child,s,l)}function Xu(e,a,s,l,n){s=s.render;var r=a.ref;if("ref"in l){var o={};for(var h in l)h!=="ref"&&(o[h]=l[h])}else o=l;return Ds(a),l=ec(e,a,s,o,r,n),h=tc(),e!==null&&!_t?(ac(e,a,n),Ua(e,a,n)):(qe&&h&&Li(a),a.flags|=1,Mt(e,a,l,n),a.child)}function Zu(e,a,s,l,n){if(e===null){var r=s.type;return typeof r=="function"&&!Ri(r)&&r.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=r,Wu(e,a,r,l,n)):(e=er(s.type,null,l,a,a.mode,n),e.ref=a.ref,e.return=a,a.child=e)}if(r=e.child,!_c(e,n)){var o=r.memoizedProps;if(s=s.compare,s=s!==null?s:Bl,s(o,l)&&e.ref===a.ref)return Ua(e,a,n)}return a.flags|=1,e=Ma(r,l),e.ref=a.ref,e.return=a,a.child=e}function Wu(e,a,s,l,n){if(e!==null){var r=e.memoizedProps;if(Bl(r,l)&&e.ref===a.ref)if(_t=!1,a.pendingProps=l=r,_c(e,n))(e.flags&131072)!==0&&(_t=!0);else return a.lanes=e.lanes,Ua(e,a,n)}return yc(e,a,s,l,n)}function Ku(e,a,s){var l=a.pendingProps,n=l.children,r=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((a.flags&128)!==0){if(l=r!==null?r.baseLanes|s:s,e!==null){for(n=a.child=e.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;a.childLanes=r&~l}else a.childLanes=0,a.child=null;return Pu(e,a,l,s)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},e!==null&&nr(a,r!==null?r.cachePool:null),r!==null?Wd(a,r):Ji(),zu(a);else return a.lanes=a.childLanes=536870912,Pu(e,a,r!==null?r.baseLanes|s:s,s)}else r!==null?(nr(a,r.cachePool),Wd(a,r),ts(),a.memoizedState=null):(e!==null&&nr(a,null),Ji(),ts());return Mt(e,a,n,s),a.child}function Pu(e,a,s,l){var n=Vi();return n=n===null?null:{parent:Nt._currentValue,pool:n},a.memoizedState={baseLanes:s,cachePool:n},e!==null&&nr(a,null),Ji(),zu(a),e!==null&&Xl(e,a,l,!0),null}function Nr(e,a){var s=a.ref;if(s===null)e!==null&&e.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(a.flags|=4194816)}}function yc(e,a,s,l,n){return Ds(a),s=ec(e,a,s,l,void 0,n),l=tc(),e!==null&&!_t?(ac(e,a,n),Ua(e,a,n)):(qe&&l&&Li(a),a.flags|=1,Mt(e,a,s,n),a.child)}function Ju(e,a,s,l,n,r){return Ds(a),a.updateQueue=null,s=Pd(a,l,s,n),Kd(e),l=tc(),e!==null&&!_t?(ac(e,a,r),Ua(e,a,r)):(qe&&l&&Li(a),a.flags|=1,Mt(e,a,s,r),a.child)}function Fu(e,a,s,l,n){if(Ds(a),a.stateNode===null){var r=ll,o=s.contextType;typeof o=="object"&&o!==null&&(r=kt(o)),r=new s(l,r),a.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=gc,a.stateNode=r,r._reactInternals=a,r=a.stateNode,r.props=l,r.state=a.memoizedState,r.refs={},Zi(a),o=s.contextType,r.context=typeof o=="object"&&o!==null?kt(o):ll,r.state=a.memoizedState,o=s.getDerivedStateFromProps,typeof o=="function"&&(xc(a,s,o,l),r.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&gc.enqueueReplaceState(r,r.state,null),Il(a,l,r,n),Fl(),r.state=a.memoizedState),typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(e===null){r=a.stateNode;var h=a.memoizedProps,w=Rs(s,h);r.props=w;var q=r.context,J=s.contextType;o=ll,typeof J=="object"&&J!==null&&(o=kt(J));var te=s.getDerivedStateFromProps;J=typeof te=="function"||typeof r.getSnapshotBeforeUpdate=="function",h=a.pendingProps!==h,J||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(h||q!==o)&&qu(a,r,l,o),Pa=!1;var Y=a.memoizedState;r.state=Y,Il(a,l,r,n),Fl(),q=a.memoizedState,h||Y!==q||Pa?(typeof te=="function"&&(xc(a,s,te,l),q=a.memoizedState),(w=Pa||Lu(a,s,w,l,Y,q,o))?(J||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(a.flags|=4194308)):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=q),r.props=l,r.state=q,r.context=o,l=w):(typeof r.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{r=a.stateNode,Wi(e,a),o=a.memoizedProps,J=Rs(s,o),r.props=J,te=a.pendingProps,Y=r.context,q=s.contextType,w=ll,typeof q=="object"&&q!==null&&(w=kt(q)),h=s.getDerivedStateFromProps,(q=typeof h=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==te||Y!==w)&&qu(a,r,l,w),Pa=!1,Y=a.memoizedState,r.state=Y,Il(a,l,r,n),Fl();var G=a.memoizedState;o!==te||Y!==G||Pa||e!==null&&e.dependencies!==null&&sr(e.dependencies)?(typeof h=="function"&&(xc(a,s,h,l),G=a.memoizedState),(J=Pa||Lu(a,s,J,l,Y,G,w)||e!==null&&e.dependencies!==null&&sr(e.dependencies))?(q||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,G,w),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,G,w)),typeof r.componentDidUpdate=="function"&&(a.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&Y===e.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&Y===e.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=G),r.props=l,r.state=G,r.context=w,l=J):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&Y===e.memoizedState||(a.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&Y===e.memoizedState||(a.flags|=1024),l=!1)}return r=l,Nr(e,a),l=(a.flags&128)!==0,r||l?(r=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),a.flags|=1,e!==null&&l?(a.child=fl(a,e.child,null,n),a.child=fl(a,null,s,n)):Mt(e,a,s,n),a.memoizedState=r.state,e=a.child):e=Ua(e,a,n),e}function Iu(e,a,s,l){return Gl(),a.flags|=256,Mt(e,a,s,l),a.child}var bc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vc(e){return{baseLanes:e,cachePool:$d()}}function jc(e,a,s){return e=e!==null?e.childLanes&~s:0,a&&(e|=oa),e}function em(e,a,s){var l=a.pendingProps,n=!1,r=(a.flags&128)!==0,o;if((o=r)||(o=e!==null&&e.memoizedState===null?!1:(wt.current&2)!==0),o&&(n=!0,a.flags&=-129),o=(a.flags&32)!==0,a.flags&=-33,e===null){if(qe){if(n?es(a):ts(),qe){var h=it,w;if(w=h){e:{for(w=h,h=ya;w.nodeType!==8;){if(!h){h=null;break e}if(w=fa(w.nextSibling),w===null){h=null;break e}}h=w}h!==null?(a.memoizedState={dehydrated:h,treeContext:Es!==null?{id:Ta,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},w=Xt(18,null,null,0),w.stateNode=h,w.return=a,a.child=w,zt=a,it=null,w=!0):w=!1}w||Ts(a)}if(h=a.memoizedState,h!==null&&(h=h.dehydrated,h!==null))return lo(h)?a.lanes=32:a.lanes=536870912,null;Ra(a)}return h=l.children,l=l.fallback,n?(ts(),n=a.mode,h=wr({mode:"hidden",children:h},n),l=_s(l,n,s,null),h.return=a,l.return=a,h.sibling=l,a.child=h,n=a.child,n.memoizedState=vc(s),n.childLanes=jc(e,o,s),a.memoizedState=bc,l):(es(a),Nc(a,h))}if(w=e.memoizedState,w!==null&&(h=w.dehydrated,h!==null)){if(r)a.flags&256?(es(a),a.flags&=-257,a=wc(e,a,s)):a.memoizedState!==null?(ts(),a.child=e.child,a.flags|=128,a=null):(ts(),n=l.fallback,h=a.mode,l=wr({mode:"visible",children:l.children},h),n=_s(n,h,s,null),n.flags|=2,l.return=a,n.return=a,l.sibling=n,a.child=l,fl(a,e.child,null,s),l=a.child,l.memoizedState=vc(s),l.childLanes=jc(e,o,s),a.memoizedState=bc,a=n);else if(es(a),lo(h)){if(o=h.nextSibling&&h.nextSibling.dataset,o)var q=o.dgst;o=q,l=Error(d(419)),l.stack="",l.digest=o,Vl({value:l,source:null,stack:null}),a=wc(e,a,s)}else if(_t||Xl(e,a,s,!1),o=(s&e.childLanes)!==0,_t||o){if(o=Je,o!==null&&(l=s&-s,l=(l&42)!==0?1:ni(l),l=(l&(o.suspendedLanes|s))!==0?0:l,l!==0&&l!==w.retryLane))throw w.retryLane=l,sl(e,l),Jt(o,e,l),Vu;h.data==="$?"||Bc(),a=wc(e,a,s)}else h.data==="$?"?(a.flags|=192,a.child=e.child,a=null):(e=w.treeContext,it=fa(h.nextSibling),zt=a,qe=!0,Ms=null,ya=!1,e!==null&&(ra[ia++]=Ta,ra[ia++]=Ca,ra[ia++]=Es,Ta=e.id,Ca=e.overflow,Es=a),a=Nc(a,l.children),a.flags|=4096);return a}return n?(ts(),n=l.fallback,h=a.mode,w=e.child,q=w.sibling,l=Ma(w,{mode:"hidden",children:l.children}),l.subtreeFlags=w.subtreeFlags&65011712,q!==null?n=Ma(q,n):(n=_s(n,h,s,null),n.flags|=2),n.return=a,l.return=a,l.sibling=n,a.child=l,l=n,n=a.child,h=e.child.memoizedState,h===null?h=vc(s):(w=h.cachePool,w!==null?(q=Nt._currentValue,w=w.parent!==q?{parent:q,pool:q}:w):w=$d(),h={baseLanes:h.baseLanes|s,cachePool:w}),n.memoizedState=h,n.childLanes=jc(e,o,s),a.memoizedState=bc,l):(es(a),s=e.child,e=s.sibling,s=Ma(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,e!==null&&(o=a.deletions,o===null?(a.deletions=[e],a.flags|=16):o.push(e)),a.child=s,a.memoizedState=null,s)}function Nc(e,a){return a=wr({mode:"visible",children:a},e.mode),a.return=e,e.child=a}function wr(e,a){return e=Xt(22,e,null,a),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function wc(e,a,s){return fl(a,e.child,null,s),e=Nc(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function tm(e,a,s){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a),Bi(e.return,a,s)}function Sc(e,a,s,l,n){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n}:(r.isBackwards=a,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=s,r.tailMode=n)}function am(e,a,s){var l=a.pendingProps,n=l.revealOrder,r=l.tail;if(Mt(e,a,l.children,s),l=wt.current,(l&2)!==0)l=l&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tm(e,s,a);else if(e.tag===19)tm(e,s,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(V(wt,l),n){case"forwards":for(s=a.child,n=null;s!==null;)e=s.alternate,e!==null&&br(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=a.child,a.child=null):(n=s.sibling,s.sibling=null),Sc(a,!1,n,s,r);break;case"backwards":for(s=null,n=a.child,a.child=null;n!==null;){if(e=n.alternate,e!==null&&br(e)===null){a.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}Sc(a,!0,s,null,r);break;case"together":Sc(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ua(e,a,s){if(e!==null&&(a.dependencies=e.dependencies),rs|=a.lanes,(s&a.childLanes)===0)if(e!==null){if(Xl(e,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(e!==null&&a.child!==e.child)throw Error(d(153));if(a.child!==null){for(e=a.child,s=Ma(e,e.pendingProps),a.child=s,s.return=a;e.sibling!==null;)e=e.sibling,s=s.sibling=Ma(e,e.pendingProps),s.return=a;s.sibling=null}return a.child}function _c(e,a){return(e.lanes&a)!==0?!0:(e=e.dependencies,!!(e!==null&&sr(e)))}function of(e,a,s){switch(a.tag){case 3:ye(a,a.stateNode.containerInfo),Ka(a,Nt,e.memoizedState.cache),Gl();break;case 27:case 5:Me(a);break;case 4:ye(a,a.stateNode.containerInfo);break;case 10:Ka(a,a.type,a.memoizedProps.value);break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(es(a),a.flags|=128,null):(s&a.child.childLanes)!==0?em(e,a,s):(es(a),e=Ua(e,a,s),e!==null?e.sibling:null);es(a);break;case 19:var n=(e.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(Xl(e,a,s,!1),l=(s&a.childLanes)!==0),n){if(l)return am(e,a,s);a.flags|=128}if(n=a.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),V(wt,wt.current),l)break;return null;case 22:case 23:return a.lanes=0,Ku(e,a,s);case 24:Ka(a,Nt,e.memoizedState.cache)}return Ua(e,a,s)}function sm(e,a,s){if(e!==null)if(e.memoizedProps!==a.pendingProps)_t=!0;else{if(!_c(e,s)&&(a.flags&128)===0)return _t=!1,of(e,a,s);_t=(e.flags&131072)!==0}else _t=!1,qe&&(a.flags&1048576)!==0&&kd(a,ar,a.index);switch(a.lanes=0,a.tag){case 16:e:{e=a.pendingProps;var l=a.elementType,n=l._init;if(l=n(l._payload),a.type=l,typeof l=="function")Ri(l)?(e=Rs(l,e),a.tag=1,a=Fu(null,a,l,e,s)):(a.tag=0,a=yc(null,a,l,e,s));else{if(l!=null){if(n=l.$$typeof,n===P){a.tag=11,a=Xu(null,a,l,e,s);break e}else if(n===Se){a.tag=14,a=Zu(null,a,l,e,s);break e}}throw a=k(l)||l,Error(d(306,a,""))}}return a;case 0:return yc(e,a,a.type,a.pendingProps,s);case 1:return l=a.type,n=Rs(l,a.pendingProps),Fu(e,a,l,n,s);case 3:e:{if(ye(a,a.stateNode.containerInfo),e===null)throw Error(d(387));l=a.pendingProps;var r=a.memoizedState;n=r.element,Wi(e,a),Il(a,l,null,s);var o=a.memoizedState;if(l=o.cache,Ka(a,Nt,l),l!==r.cache&&Yi(a,[Nt],s,!0),Fl(),l=o.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:o.cache},a.updateQueue.baseState=r,a.memoizedState=r,a.flags&256){a=Iu(e,a,l,s);break e}else if(l!==n){n=la(Error(d(424)),a),Vl(n),a=Iu(e,a,l,s);break e}else{switch(e=a.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(it=fa(e.firstChild),zt=a,qe=!0,Ms=null,ya=!0,s=Uu(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Gl(),l===n){a=Ua(e,a,s);break e}Mt(e,a,l,s)}a=a.child}return a;case 26:return Nr(e,a),e===null?(s=i0(a.type,null,a.pendingProps,null))?a.memoizedState=s:qe||(s=a.type,e=a.pendingProps,l=Lr(ie.current).createElement(s),l[Ot]=a,l[Ht]=e,Ct(l,s,e),St(l),a.stateNode=l):a.memoizedState=i0(a.type,e.memoizedProps,a.pendingProps,e.memoizedState),null;case 27:return Me(a),e===null&&qe&&(l=a.stateNode=l0(a.type,a.pendingProps,ie.current),zt=a,ya=!0,n=it,ds(a.type)?(no=n,it=fa(l.firstChild)):it=n),Mt(e,a,a.pendingProps.children,s),Nr(e,a),e===null&&(a.flags|=4194304),a.child;case 5:return e===null&&qe&&((n=l=it)&&(l=Lf(l,a.type,a.pendingProps,ya),l!==null?(a.stateNode=l,zt=a,it=fa(l.firstChild),ya=!1,n=!0):n=!1),n||Ts(a)),Me(a),n=a.type,r=a.pendingProps,o=e!==null?e.memoizedProps:null,l=r.children,to(n,r)?l=null:o!==null&&to(n,o)&&(a.flags|=32),a.memoizedState!==null&&(n=ec(e,a,ef,null,null,s),Nn._currentValue=n),Nr(e,a),Mt(e,a,l,s),a.child;case 6:return e===null&&qe&&((e=s=it)&&(s=qf(s,a.pendingProps,ya),s!==null?(a.stateNode=s,zt=a,it=null,e=!0):e=!1),e||Ts(a)),null;case 13:return em(e,a,s);case 4:return ye(a,a.stateNode.containerInfo),l=a.pendingProps,e===null?a.child=fl(a,null,l,s):Mt(e,a,l,s),a.child;case 11:return Xu(e,a,a.type,a.pendingProps,s);case 7:return Mt(e,a,a.pendingProps,s),a.child;case 8:return Mt(e,a,a.pendingProps.children,s),a.child;case 12:return Mt(e,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,Ka(a,a.type,l.value),Mt(e,a,l.children,s),a.child;case 9:return n=a.type._context,l=a.pendingProps.children,Ds(a),n=kt(n),l=l(n),a.flags|=1,Mt(e,a,l,s),a.child;case 14:return Zu(e,a,a.type,a.pendingProps,s);case 15:return Wu(e,a,a.type,a.pendingProps,s);case 19:return am(e,a,s);case 31:return l=a.pendingProps,s=a.mode,l={mode:l.mode,children:l.children},e===null?(s=wr(l,s),s.ref=a.ref,a.child=s,s.return=a,a=s):(s=Ma(e.child,l),s.ref=a.ref,a.child=s,s.return=a,a=s),a;case 22:return Ku(e,a,s);case 24:return Ds(a),l=kt(Nt),e===null?(n=Vi(),n===null&&(n=Je,r=Qi(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=s),n=r),a.memoizedState={parent:l,cache:n},Zi(a),Ka(a,Nt,n)):((e.lanes&s)!==0&&(Wi(e,a),Il(a,null,null,s),Fl()),n=e.memoizedState,r=a.memoizedState,n.parent!==l?(n={parent:l,cache:l},a.memoizedState=n,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=n),Ka(a,Nt,l)):(l=r.cache,Ka(a,Nt,l),l!==n.cache&&Yi(a,[Nt],s,!0))),Mt(e,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(d(156,a.tag))}function za(e){e.flags|=4}function lm(e,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!m0(a)){if(a=ca.current,a!==null&&((ze&4194048)===ze?ba!==null:(ze&62914560)!==ze&&(ze&536870912)===0||a!==ba))throw Pl=Xi,Bd;e.flags|=8192}}function Sr(e,a){a!==null&&(e.flags|=4),e.flags&16384&&(a=e.tag!==22?jt():536870912,e.lanes|=a,yl|=a)}function rn(e,a){if(!qe)switch(e.tailMode){case"hidden":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function lt(e){var a=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(a)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=s,a}function df(e,a,s){var l=a.pendingProps;switch(qi(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(a),null;case 1:return lt(a),null;case 3:return s=a.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Oa(Nt),Ue(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ql(a)?za(a):e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,zd())),lt(a),null;case 26:return s=a.memoizedState,e===null?(za(a),s!==null?(lt(a),lm(a,s)):(lt(a),a.flags&=-16777217)):s?s!==e.memoizedState?(za(a),lt(a),lm(a,s)):(lt(a),a.flags&=-16777217):(e.memoizedProps!==l&&za(a),lt(a),a.flags&=-16777217),null;case 27:$e(a),s=ie.current;var n=a.type;if(e!==null&&a.stateNode!=null)e.memoizedProps!==l&&za(a);else{if(!l){if(a.stateNode===null)throw Error(d(166));return lt(a),null}e=K.current,Ql(a)?Rd(a):(e=l0(n,l,s),a.stateNode=e,za(a))}return lt(a),null;case 5:if($e(a),s=a.type,e!==null&&a.stateNode!=null)e.memoizedProps!==l&&za(a);else{if(!l){if(a.stateNode===null)throw Error(d(166));return lt(a),null}if(e=K.current,Ql(a))Rd(a);else{switch(n=Lr(ie.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?n.createElement(s,{is:l.is}):n.createElement(s)}}e[Ot]=a,e[Ht]=l;e:for(n=a.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}a.stateNode=e;e:switch(Ct(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&za(a)}}return lt(a),a.flags&=-16777217,null;case 6:if(e&&a.stateNode!=null)e.memoizedProps!==l&&za(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(d(166));if(e=ie.current,Ql(a)){if(e=a.stateNode,s=a.memoizedProps,l=null,n=zt,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[Ot]=a,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Jm(e.nodeValue,s)),e||Ts(a)}else e=Lr(e).createTextNode(l),e[Ot]=a,a.stateNode=e}return lt(a),null;case 13:if(l=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Ql(a),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(d(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(d(317));n[Ot]=a}else Gl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;lt(a),n=!1}else n=zd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return a.flags&256?(Ra(a),a):(Ra(a),null)}if(Ra(a),(a.flags&128)!==0)return a.lanes=s,a;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=a.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var r=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)}return s!==e&&s&&(a.child.flags|=8192),Sr(a,a.updateQueue),lt(a),null;case 4:return Ue(),e===null&&Pc(a.stateNode.containerInfo),lt(a),null;case 10:return Oa(a.type),lt(a),null;case 19:if(R(wt),n=a.memoizedState,n===null)return lt(a),null;if(l=(a.flags&128)!==0,r=n.rendering,r===null)if(l)rn(n,!1);else{if(ct!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(r=br(e),r!==null){for(a.flags|=128,rn(n,!1),e=r.updateQueue,a.updateQueue=e,Sr(a,e),a.subtreeFlags=0,e=s,s=a.child;s!==null;)Od(s,e),s=s.sibling;return V(wt,wt.current&1|2),a.child}e=e.sibling}n.tail!==null&&pe()>Ar&&(a.flags|=128,l=!0,rn(n,!1),a.lanes=4194304)}else{if(!l)if(e=br(r),e!==null){if(a.flags|=128,l=!0,e=e.updateQueue,a.updateQueue=e,Sr(a,e),rn(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!qe)return lt(a),null}else 2*pe()-n.renderingStartTime>Ar&&s!==536870912&&(a.flags|=128,l=!0,rn(n,!1),a.lanes=4194304);n.isBackwards?(r.sibling=a.child,a.child=r):(e=n.last,e!==null?e.sibling=r:a.child=r,n.last=r)}return n.tail!==null?(a=n.tail,n.rendering=a,n.tail=a.sibling,n.renderingStartTime=pe(),a.sibling=null,e=wt.current,V(wt,l?e&1|2:e&1),a):(lt(a),null);case 22:case 23:return Ra(a),Fi(),l=a.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(lt(a),a.subtreeFlags&6&&(a.flags|=8192)):lt(a),s=a.updateQueue,s!==null&&Sr(a,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),e!==null&&R(Os),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),Oa(Nt),lt(a),null;case 25:return null;case 30:return null}throw Error(d(156,a.tag))}function uf(e,a){switch(qi(a),a.tag){case 1:return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return Oa(Nt),Ue(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 26:case 27:case 5:return $e(a),null;case 13:if(Ra(a),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(d(340));Gl()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return R(wt),null;case 4:return Ue(),null;case 10:return Oa(a.type),null;case 22:case 23:return Ra(a),Fi(),e!==null&&R(Os),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 24:return Oa(Nt),null;case 25:return null;default:return null}}function nm(e,a){switch(qi(a),a.tag){case 3:Oa(Nt),Ue();break;case 26:case 27:case 5:$e(a);break;case 4:Ue();break;case 13:Ra(a);break;case 19:R(wt);break;case 10:Oa(a.type);break;case 22:case 23:Ra(a),Fi(),e!==null&&R(Os);break;case 24:Oa(Nt)}}function cn(e,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&e)===e){l=void 0;var r=s.create,o=s.inst;l=r(),o.destroy=l}s=s.next}while(s!==n)}}catch(h){Ke(a,a.return,h)}}function as(e,a,s){try{var l=a.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&e)===e){var o=l.inst,h=o.destroy;if(h!==void 0){o.destroy=void 0,n=a;var w=s,q=h;try{q()}catch(J){Ke(n,w,J)}}}l=l.next}while(l!==r)}}catch(J){Ke(a,a.return,J)}}function rm(e){var a=e.updateQueue;if(a!==null){var s=e.stateNode;try{Zd(a,s)}catch(l){Ke(e,e.return,l)}}}function im(e,a,s){s.props=Rs(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Ke(e,a,l)}}function on(e,a){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(n){Ke(e,a,n)}}function va(e,a){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){Ke(e,a,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){Ke(e,a,n)}else s.current=null}function cm(e){var a=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){Ke(e,e.return,n)}}function Ec(e,a,s){try{var l=e.stateNode;Of(l,e.type,s,a),l[Ht]=a}catch(n){Ke(e,e.return,n)}}function om(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ds(e.type)||e.tag===4}function Ac(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ds(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mc(e,a,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(e),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=zr));else if(l!==4&&(l===27&&ds(e.type)&&(s=e.stateNode,a=null),e=e.child,e!==null))for(Mc(e,a,s),e=e.sibling;e!==null;)Mc(e,a,s),e=e.sibling}function _r(e,a,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,a?s.insertBefore(e,a):s.appendChild(e);else if(l!==4&&(l===27&&ds(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(_r(e,a,s),e=e.sibling;e!==null;)_r(e,a,s),e=e.sibling}function dm(e){var a=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,n=a.attributes;n.length;)a.removeAttributeNode(n[0]);Ct(a,l,s),a[Ot]=e,a[Ht]=s}catch(r){Ke(e,e.return,r)}}var La=!1,ut=!1,Tc=!1,um=typeof WeakSet=="function"?WeakSet:Set,Et=null;function mf(e,a){if(e=e.containerInfo,Ic=Qr,e=Nd(e),Ai(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var o=0,h=-1,w=-1,q=0,J=0,te=e,Y=null;t:for(;;){for(var G;te!==s||n!==0&&te.nodeType!==3||(h=o+n),te!==r||l!==0&&te.nodeType!==3||(w=o+l),te.nodeType===3&&(o+=te.nodeValue.length),(G=te.firstChild)!==null;)Y=te,te=G;for(;;){if(te===e)break t;if(Y===s&&++q===n&&(h=o),Y===r&&++J===l&&(w=o),(G=te.nextSibling)!==null)break;te=Y,Y=te.parentNode}te=G}s=h===-1||w===-1?null:{start:h,end:w}}else s=null}s=s||{start:0,end:0}}else s=null;for(eo={focusedElem:e,selectionRange:s},Qr=!1,Et=a;Et!==null;)if(a=Et,e=a.child,(a.subtreeFlags&1024)!==0&&e!==null)e.return=a,Et=e;else for(;Et!==null;){switch(a=Et,r=a.alternate,e=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,s=a,n=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var _e=Rs(s.type,n,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(_e,r),l.__reactInternalSnapshotBeforeUpdate=e}catch(je){Ke(s,s.return,je)}}break;case 3:if((e&1024)!==0){if(e=a.stateNode.containerInfo,s=e.nodeType,s===9)so(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":so(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=a.sibling,e!==null){e.return=a.return,Et=e;break}Et=a.return}}function mm(e,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ss(e,s),l&4&&cn(5,s);break;case 1:if(ss(e,s),l&4)if(e=s.stateNode,a===null)try{e.componentDidMount()}catch(o){Ke(s,s.return,o)}else{var n=Rs(s.type,a.memoizedProps);a=a.memoizedState;try{e.componentDidUpdate(n,a,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Ke(s,s.return,o)}}l&64&&rm(s),l&512&&on(s,s.return);break;case 3:if(ss(e,s),l&64&&(e=s.updateQueue,e!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{Zd(e,a)}catch(o){Ke(s,s.return,o)}}break;case 27:a===null&&l&4&&dm(s);case 26:case 5:ss(e,s),a===null&&l&4&&cm(s),l&512&&on(s,s.return);break;case 12:ss(e,s);break;case 13:ss(e,s),l&4&&xm(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=jf.bind(null,s),Hf(e,s))));break;case 22:if(l=s.memoizedState!==null||La,!l){a=a!==null&&a.memoizedState!==null||ut,n=La;var r=ut;La=l,(ut=a)&&!r?ls(e,s,(s.subtreeFlags&8772)!==0):ss(e,s),La=n,ut=r}break;case 30:break;default:ss(e,s)}}function hm(e){var a=e.alternate;a!==null&&(e.alternate=null,hm(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&ci(a)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,Yt=!1;function qa(e,a,s){for(s=s.child;s!==null;)fm(e,a,s),s=s.sibling}function fm(e,a,s){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(bt,s)}catch{}switch(s.tag){case 26:ut||va(s,a),qa(e,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ut||va(s,a);var l=at,n=Yt;ds(s.type)&&(at=s.stateNode,Yt=!1),qa(e,a,s),yn(s.stateNode),at=l,Yt=n;break;case 5:ut||va(s,a);case 6:if(l=at,n=Yt,at=null,qa(e,a,s),at=l,Yt=n,at!==null)if(Yt)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(s.stateNode)}catch(r){Ke(s,a,r)}else try{at.removeChild(s.stateNode)}catch(r){Ke(s,a,r)}break;case 18:at!==null&&(Yt?(e=at,a0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),En(e)):a0(at,s.stateNode));break;case 4:l=at,n=Yt,at=s.stateNode.containerInfo,Yt=!0,qa(e,a,s),at=l,Yt=n;break;case 0:case 11:case 14:case 15:ut||as(2,s,a),ut||as(4,s,a),qa(e,a,s);break;case 1:ut||(va(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&im(s,a,l)),qa(e,a,s);break;case 21:qa(e,a,s);break;case 22:ut=(l=ut)||s.memoizedState!==null,qa(e,a,s),ut=l;break;default:qa(e,a,s)}}function xm(e,a){if(a.memoizedState===null&&(e=a.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{En(e)}catch(s){Ke(a,a.return,s)}}function hf(e){switch(e.tag){case 13:case 19:var a=e.stateNode;return a===null&&(a=e.stateNode=new um),a;case 22:return e=e.stateNode,a=e._retryCache,a===null&&(a=e._retryCache=new um),a;default:throw Error(d(435,e.tag))}}function Cc(e,a){var s=hf(e);a.forEach(function(l){var n=Nf.bind(null,e,l);s.has(l)||(s.add(l),l.then(n,n))})}function Zt(e,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],r=e,o=a,h=o;e:for(;h!==null;){switch(h.tag){case 27:if(ds(h.type)){at=h.stateNode,Yt=!1;break e}break;case 5:at=h.stateNode,Yt=!1;break e;case 3:case 4:at=h.stateNode.containerInfo,Yt=!0;break e}h=h.return}if(at===null)throw Error(d(160));fm(r,o,n),at=null,Yt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)gm(a,e),a=a.sibling}var ha=null;function gm(e,a){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zt(a,e),Wt(e),l&4&&(as(3,e,e.return),cn(3,e),as(5,e,e.return));break;case 1:Zt(a,e),Wt(e),l&512&&(ut||s===null||va(s,s.return)),l&64&&La&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=ha;if(Zt(a,e),Wt(e),l&512&&(ut||s===null||va(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[Ol]||r[Ot]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),Ct(r,l,s),r[Ot]=e,St(r),l=r;break e;case"link":var o=d0("link","href",n).get(l+(s.href||""));if(o){for(var h=0;h<o.length;h++)if(r=o[h],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){o.splice(h,1);break t}}r=n.createElement(l),Ct(r,l,s),n.head.appendChild(r);break;case"meta":if(o=d0("meta","content",n).get(l+(s.content||""))){for(h=0;h<o.length;h++)if(r=o[h],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){o.splice(h,1);break t}}r=n.createElement(l),Ct(r,l,s),n.head.appendChild(r);break;default:throw Error(d(468,l))}r[Ot]=e,St(r),l=r}e.stateNode=l}else u0(n,e.type,e.stateNode);else e.stateNode=o0(n,l,e.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?u0(n,e.type,e.stateNode):o0(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ec(e,e.memoizedProps,s.memoizedProps)}break;case 27:Zt(a,e),Wt(e),l&512&&(ut||s===null||va(s,s.return)),s!==null&&l&4&&Ec(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Zt(a,e),Wt(e),l&512&&(ut||s===null||va(s,s.return)),e.flags&32){n=e.stateNode;try{Ps(n,"")}catch(G){Ke(e,e.return,G)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,Ec(e,n,s!==null?s.memoizedProps:n)),l&1024&&(Tc=!0);break;case 6:if(Zt(a,e),Wt(e),l&4){if(e.stateNode===null)throw Error(d(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(G){Ke(e,e.return,G)}}break;case 3:if($r=null,n=ha,ha=qr(a.containerInfo),Zt(a,e),ha=n,Wt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{En(a.containerInfo)}catch(G){Ke(e,e.return,G)}Tc&&(Tc=!1,pm(e));break;case 4:l=ha,ha=qr(e.stateNode.containerInfo),Zt(a,e),Wt(e),ha=l;break;case 12:Zt(a,e),Wt(e);break;case 13:Zt(a,e),Wt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(zc=pe()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Cc(e,l)));break;case 22:n=e.memoizedState!==null;var w=s!==null&&s.memoizedState!==null,q=La,J=ut;if(La=q||n,ut=J||w,Zt(a,e),ut=J,La=q,Wt(e),l&8192)e:for(a=e.stateNode,a._visibility=n?a._visibility&-2:a._visibility|1,n&&(s===null||w||La||ut||Us(e)),s=null,a=e;;){if(a.tag===5||a.tag===26){if(s===null){w=s=a;try{if(r=w.stateNode,n)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{h=w.stateNode;var te=w.memoizedProps.style,Y=te!=null&&te.hasOwnProperty("display")?te.display:null;h.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(G){Ke(w,w.return,G)}}}else if(a.tag===6){if(s===null){w=a;try{w.stateNode.nodeValue=n?"":w.memoizedProps}catch(G){Ke(w,w.return,G)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===e)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Cc(e,s))));break;case 19:Zt(a,e),Wt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Cc(e,l)));break;case 30:break;case 21:break;default:Zt(a,e),Wt(e)}}function Wt(e){var a=e.flags;if(a&2){try{for(var s,l=e.return;l!==null;){if(om(l)){s=l;break}l=l.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var n=s.stateNode,r=Ac(e);_r(e,r,n);break;case 5:var o=s.stateNode;s.flags&32&&(Ps(o,""),s.flags&=-33);var h=Ac(e);_r(e,h,o);break;case 3:case 4:var w=s.stateNode.containerInfo,q=Ac(e);Mc(e,q,w);break;default:throw Error(d(161))}}catch(J){Ke(e,e.return,J)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function pm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var a=e;pm(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),e=e.sibling}}function ss(e,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)mm(e,a.alternate,a),a=a.sibling}function Us(e){for(e=e.child;e!==null;){var a=e;switch(a.tag){case 0:case 11:case 14:case 15:as(4,a,a.return),Us(a);break;case 1:va(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&im(a,a.return,s),Us(a);break;case 27:yn(a.stateNode);case 26:case 5:va(a,a.return),Us(a);break;case 22:a.memoizedState===null&&Us(a);break;case 30:Us(a);break;default:Us(a)}e=e.sibling}}function ls(e,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,n=e,r=a,o=r.flags;switch(r.tag){case 0:case 11:case 15:ls(n,r,s),cn(4,r);break;case 1:if(ls(n,r,s),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(q){Ke(l,l.return,q)}if(l=r,n=l.updateQueue,n!==null){var h=l.stateNode;try{var w=n.shared.hiddenCallbacks;if(w!==null)for(n.shared.hiddenCallbacks=null,n=0;n<w.length;n++)Xd(w[n],h)}catch(q){Ke(l,l.return,q)}}s&&o&64&&rm(r),on(r,r.return);break;case 27:dm(r);case 26:case 5:ls(n,r,s),s&&l===null&&o&4&&cm(r),on(r,r.return);break;case 12:ls(n,r,s);break;case 13:ls(n,r,s),s&&o&4&&xm(n,r);break;case 22:r.memoizedState===null&&ls(n,r,s),on(r,r.return);break;case 30:break;default:ls(n,r,s)}a=a.sibling}}function Dc(e,a){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(e=a.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Zl(s))}function Oc(e,a){e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Zl(e))}function ja(e,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ym(e,a,s,l),a=a.sibling}function ym(e,a,s,l){var n=a.flags;switch(a.tag){case 0:case 11:case 15:ja(e,a,s,l),n&2048&&cn(9,a);break;case 1:ja(e,a,s,l);break;case 3:ja(e,a,s,l),n&2048&&(e=null,a.alternate!==null&&(e=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==e&&(a.refCount++,e!=null&&Zl(e)));break;case 12:if(n&2048){ja(e,a,s,l),e=a.stateNode;try{var r=a.memoizedProps,o=r.id,h=r.onPostCommit;typeof h=="function"&&h(o,a.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){Ke(a,a.return,w)}}else ja(e,a,s,l);break;case 13:ja(e,a,s,l);break;case 23:break;case 22:r=a.stateNode,o=a.alternate,a.memoizedState!==null?r._visibility&2?ja(e,a,s,l):dn(e,a):r._visibility&2?ja(e,a,s,l):(r._visibility|=2,xl(e,a,s,l,(a.subtreeFlags&10256)!==0)),n&2048&&Dc(o,a);break;case 24:ja(e,a,s,l),n&2048&&Oc(a.alternate,a);break;default:ja(e,a,s,l)}}function xl(e,a,s,l,n){for(n=n&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var r=e,o=a,h=s,w=l,q=o.flags;switch(o.tag){case 0:case 11:case 15:xl(r,o,h,w,n),cn(8,o);break;case 23:break;case 22:var J=o.stateNode;o.memoizedState!==null?J._visibility&2?xl(r,o,h,w,n):dn(r,o):(J._visibility|=2,xl(r,o,h,w,n)),n&&q&2048&&Dc(o.alternate,o);break;case 24:xl(r,o,h,w,n),n&&q&2048&&Oc(o.alternate,o);break;default:xl(r,o,h,w,n)}a=a.sibling}}function dn(e,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=e,l=a,n=l.flags;switch(l.tag){case 22:dn(s,l),n&2048&&Dc(l.alternate,l);break;case 24:dn(s,l),n&2048&&Oc(l.alternate,l);break;default:dn(s,l)}a=a.sibling}}var un=8192;function gl(e){if(e.subtreeFlags&un)for(e=e.child;e!==null;)bm(e),e=e.sibling}function bm(e){switch(e.tag){case 26:gl(e),e.flags&un&&e.memoizedState!==null&&Ff(ha,e.memoizedState,e.memoizedProps);break;case 5:gl(e);break;case 3:case 4:var a=ha;ha=qr(e.stateNode.containerInfo),gl(e),ha=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=un,un=16777216,gl(e),un=a):gl(e));break;default:gl(e)}}function vm(e){var a=e.alternate;if(a!==null&&(e=a.child,e!==null)){a.child=null;do a=e.sibling,e.sibling=null,e=a;while(e!==null)}}function mn(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Et=l,Nm(l,e)}vm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jm(e),e=e.sibling}function jm(e){switch(e.tag){case 0:case 11:case 15:mn(e),e.flags&2048&&as(9,e,e.return);break;case 3:mn(e);break;case 12:mn(e);break;case 22:var a=e.stateNode;e.memoizedState!==null&&a._visibility&2&&(e.return===null||e.return.tag!==13)?(a._visibility&=-3,Er(e)):mn(e);break;default:mn(e)}}function Er(e){var a=e.deletions;if((e.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];Et=l,Nm(l,e)}vm(e)}for(e=e.child;e!==null;){switch(a=e,a.tag){case 0:case 11:case 15:as(8,a,a.return),Er(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,Er(a));break;default:Er(a)}e=e.sibling}}function Nm(e,a){for(;Et!==null;){var s=Et;switch(s.tag){case 0:case 11:case 15:as(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Zl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Et=l;else e:for(s=e;Et!==null;){l=Et;var n=l.sibling,r=l.return;if(hm(l),l===s){Et=null;break e}if(n!==null){n.return=r,Et=n;break e}Et=r}}}var ff={getCacheForType:function(e){var a=kt(Nt),s=a.data.get(e);return s===void 0&&(s=e(),a.data.set(e,s)),s}},xf=typeof WeakMap=="function"?WeakMap:Map,Qe=0,Je=null,ke=null,ze=0,Ge=0,Kt=null,ns=!1,pl=!1,kc=!1,Ha=0,ct=0,rs=0,zs=0,Rc=0,oa=0,yl=0,hn=null,Qt=null,Uc=!1,zc=0,Ar=1/0,Mr=null,is=null,Tt=0,cs=null,bl=null,vl=0,Lc=0,qc=null,wm=null,fn=0,Hc=null;function Pt(){if((Qe&2)!==0&&ze!==0)return ze&-ze;if(S.T!==null){var e=il;return e!==0?e:Xc()}return Ho()}function Sm(){oa===0&&(oa=(ze&536870912)===0||qe?re():536870912);var e=ca.current;return e!==null&&(e.flags|=32),oa}function Jt(e,a,s){(e===Je&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)&&(jl(e,0),os(e,ze,oa,!1)),_a(e,s),((Qe&2)===0||e!==Je)&&(e===Je&&((Qe&2)===0&&(zs|=s),ct===4&&os(e,ze,oa,!1)),Na(e))}function _m(e,a,s){if((Qe&6)!==0)throw Error(d(327));var l=!s&&(a&124)===0&&(a&e.expiredLanes)===0||Gt(e,a),n=l?yf(e,a):Yc(e,a,!0),r=l;do{if(n===0){pl&&!l&&os(e,a,0,!1);break}else{if(s=e.current.alternate,r&&!gf(s)){n=Yc(e,a,!1),r=!1;continue}if(n===2){if(r=a,e.errorRecoveryDisabledLanes&r)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){a=o;e:{var h=e;n=hn;var w=h.current.memoizedState.isDehydrated;if(w&&(jl(h,o).flags|=256),o=Yc(h,o,!1),o!==2){if(kc&&!w){h.errorRecoveryDisabledLanes|=r,zs|=r,n=4;break e}r=Qt,Qt=n,r!==null&&(Qt===null?Qt=r:Qt.push.apply(Qt,r))}n=o}if(r=!1,n!==2)continue}}if(n===1){jl(e,0),os(e,a,0,!0);break}e:{switch(l=e,r=n,r){case 0:case 1:throw Error(d(345));case 4:if((a&4194048)!==a)break;case 6:os(l,a,oa,!ns);break e;case 2:Qt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((a&62914560)===a&&(n=zc+300-pe(),10<n)){if(os(l,a,oa,!ns),Xa(l,0,!0)!==0)break e;l.timeoutHandle=e0(Em.bind(null,l,s,Qt,Mr,Uc,a,oa,zs,yl,ns,r,2,-0,0),n);break e}Em(l,s,Qt,Mr,Uc,a,oa,zs,yl,ns,r,0,-0,0)}}break}while(!0);Na(e)}function Em(e,a,s,l,n,r,o,h,w,q,J,te,Y,G){if(e.timeoutHandle=-1,te=a.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(jn={stylesheets:null,count:0,unsuspend:Jf},bm(a),te=If(),te!==null)){e.cancelPendingCommit=te(km.bind(null,e,a,r,s,l,n,o,h,w,J,1,Y,G)),os(e,r,o,!q);return}km(e,a,r,s,l,n,o,h,w)}function gf(e){for(var a=e;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],r=n.getSnapshot;n=n.value;try{if(!Vt(r(),n))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function os(e,a,s,l){a&=~Rc,a&=~zs,e.suspendedLanes|=a,e.pingedLanes&=~a,l&&(e.warmLanes|=a),l=e.expirationTimes;for(var n=a;0<n;){var r=31-_(n),o=1<<r;l[r]=-1,n&=~o}s!==0&&Dl(e,s,a)}function Tr(){return(Qe&6)===0?(xn(0),!1):!0}function $c(){if(ke!==null){if(Ge===0)var e=ke.return;else e=ke,Da=Cs=null,sc(e),hl=null,ln=0,e=ke;for(;e!==null;)nm(e.alternate,e),e=e.return;ke=null}}function jl(e,a){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Rf(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),$c(),Je=e,ke=s=Ma(e.current,null),ze=a,Ge=0,Kt=null,ns=!1,pl=Gt(e,a),kc=!1,yl=oa=Rc=zs=rs=ct=0,Qt=hn=null,Uc=!1,(a&8)!==0&&(a|=a&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=a;0<l;){var n=31-_(l),r=1<<n;a|=e[n],l&=~r}return Ha=a,Jn(),s}function Am(e,a){Ce=null,S.H=gr,a===Kl||a===rr?(a=Gd(),Ge=3):a===Bd?(a=Gd(),Ge=4):Ge=a===Vu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Kt=a,ke===null&&(ct=1,jr(e,la(a,e.current)))}function Mm(){var e=S.H;return S.H=gr,e===null?gr:e}function Tm(){var e=S.A;return S.A=ff,e}function Bc(){ct=4,ns||(ze&4194048)!==ze&&ca.current!==null||(pl=!0),(rs&134217727)===0&&(zs&134217727)===0||Je===null||os(Je,ze,oa,!1)}function Yc(e,a,s){var l=Qe;Qe|=2;var n=Mm(),r=Tm();(Je!==e||ze!==a)&&(Mr=null,jl(e,a)),a=!1;var o=ct;e:do try{if(Ge!==0&&ke!==null){var h=ke,w=Kt;switch(Ge){case 8:$c(),o=6;break e;case 3:case 2:case 9:case 6:ca.current===null&&(a=!0);var q=Ge;if(Ge=0,Kt=null,Nl(e,h,w,q),s&&pl){o=0;break e}break;default:q=Ge,Ge=0,Kt=null,Nl(e,h,w,q)}}pf(),o=ct;break}catch(J){Am(e,J)}while(!0);return a&&e.shellSuspendCounter++,Da=Cs=null,Qe=l,S.H=n,S.A=r,ke===null&&(Je=null,ze=0,Jn()),o}function pf(){for(;ke!==null;)Cm(ke)}function yf(e,a){var s=Qe;Qe|=2;var l=Mm(),n=Tm();Je!==e||ze!==a?(Mr=null,Ar=pe()+500,jl(e,a)):pl=Gt(e,a);e:do try{if(Ge!==0&&ke!==null){a=ke;var r=Kt;t:switch(Ge){case 1:Ge=0,Kt=null,Nl(e,a,r,1);break;case 2:case 9:if(Yd(r)){Ge=0,Kt=null,Dm(a);break}a=function(){Ge!==2&&Ge!==9||Je!==e||(Ge=7),Na(e)},r.then(a,a);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Yd(r)?(Ge=0,Kt=null,Dm(a)):(Ge=0,Kt=null,Nl(e,a,r,7));break;case 5:var o=null;switch(ke.tag){case 26:o=ke.memoizedState;case 5:case 27:var h=ke;if(!o||m0(o)){Ge=0,Kt=null;var w=h.sibling;if(w!==null)ke=w;else{var q=h.return;q!==null?(ke=q,Cr(q)):ke=null}break t}}Ge=0,Kt=null,Nl(e,a,r,5);break;case 6:Ge=0,Kt=null,Nl(e,a,r,6);break;case 8:$c(),ct=6;break e;default:throw Error(d(462))}}bf();break}catch(J){Am(e,J)}while(!0);return Da=Cs=null,S.H=l,S.A=n,Qe=s,ke!==null?0:(Je=null,ze=0,Jn(),ct)}function bf(){for(;ke!==null&&!ve();)Cm(ke)}function Cm(e){var a=sm(e.alternate,e,Ha);e.memoizedProps=e.pendingProps,a===null?Cr(e):ke=a}function Dm(e){var a=e,s=a.alternate;switch(a.tag){case 15:case 0:a=Ju(s,a,a.pendingProps,a.type,void 0,ze);break;case 11:a=Ju(s,a,a.pendingProps,a.type.render,a.ref,ze);break;case 5:sc(a);default:nm(s,a),a=ke=Od(a,Ha),a=sm(s,a,Ha)}e.memoizedProps=e.pendingProps,a===null?Cr(e):ke=a}function Nl(e,a,s,l){Da=Cs=null,sc(a),hl=null,ln=0;var n=a.return;try{if(cf(e,n,a,s,ze)){ct=1,jr(e,la(s,e.current)),ke=null;return}}catch(r){if(n!==null)throw ke=n,r;ct=1,jr(e,la(s,e.current)),ke=null;return}a.flags&32768?(qe||l===1?e=!0:pl||(ze&536870912)!==0?e=!1:(ns=e=!0,(l===2||l===9||l===3||l===6)&&(l=ca.current,l!==null&&l.tag===13&&(l.flags|=16384))),Om(a,e)):Cr(a)}function Cr(e){var a=e;do{if((a.flags&32768)!==0){Om(a,ns);return}e=a.return;var s=df(a.alternate,a,Ha);if(s!==null){ke=s;return}if(a=a.sibling,a!==null){ke=a;return}ke=a=e}while(a!==null);ct===0&&(ct=5)}function Om(e,a){do{var s=uf(e.alternate,e);if(s!==null){s.flags&=32767,ke=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(e=e.sibling,e!==null)){ke=e;return}ke=e=s}while(e!==null);ct=6,ke=null}function km(e,a,s,l,n,r,o,h,w){e.cancelPendingCommit=null;do Dr();while(Tt!==0);if((Qe&6)!==0)throw Error(d(327));if(a!==null){if(a===e.current)throw Error(d(177));if(r=a.lanes|a.childLanes,r|=Oi,Cl(e,s,r,o,h,w),e===Je&&(ke=Je=null,ze=0),bl=a,cs=e,vl=s,Lc=r,qc=n,wm=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wf(Te,function(){return qm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=S.T,S.T=null,n=X.p,X.p=2,o=Qe,Qe|=4;try{mf(e,a,s)}finally{Qe=o,X.p=n,S.T=l}}Tt=1,Rm(),Um(),zm()}}function Rm(){if(Tt===1){Tt=0;var e=cs,a=bl,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=S.T,S.T=null;var l=X.p;X.p=2;var n=Qe;Qe|=4;try{gm(a,e);var r=eo,o=Nd(e.containerInfo),h=r.focusedElem,w=r.selectionRange;if(o!==h&&h&&h.ownerDocument&&jd(h.ownerDocument.documentElement,h)){if(w!==null&&Ai(h)){var q=w.start,J=w.end;if(J===void 0&&(J=q),"selectionStart"in h)h.selectionStart=q,h.selectionEnd=Math.min(J,h.value.length);else{var te=h.ownerDocument||document,Y=te&&te.defaultView||window;if(Y.getSelection){var G=Y.getSelection(),_e=h.textContent.length,je=Math.min(w.start,_e),We=w.end===void 0?je:Math.min(w.end,_e);!G.extend&&je>We&&(o=We,We=je,je=o);var U=vd(h,je),T=vd(h,We);if(U&&T&&(G.rangeCount!==1||G.anchorNode!==U.node||G.anchorOffset!==U.offset||G.focusNode!==T.node||G.focusOffset!==T.offset)){var z=te.createRange();z.setStart(U.node,U.offset),G.removeAllRanges(),je>We?(G.addRange(z),G.extend(T.node,T.offset)):(z.setEnd(T.node,T.offset),G.addRange(z))}}}}for(te=[],G=h;G=G.parentNode;)G.nodeType===1&&te.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<te.length;h++){var I=te[h];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Qr=!!Ic,eo=Ic=null}finally{Qe=n,X.p=l,S.T=s}}e.current=a,Tt=2}}function Um(){if(Tt===2){Tt=0;var e=cs,a=bl,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=S.T,S.T=null;var l=X.p;X.p=2;var n=Qe;Qe|=4;try{mm(e,a.alternate,a)}finally{Qe=n,X.p=l,S.T=s}}Tt=3}}function zm(){if(Tt===4||Tt===3){Tt=0,Be();var e=cs,a=bl,s=vl,l=wm;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Tt=5:(Tt=0,bl=cs=null,Lm(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(is=null),ri(s),a=a.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(bt,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=S.T,n=X.p,X.p=2,S.T=null;try{for(var r=e.onRecoverableError,o=0;o<l.length;o++){var h=l[o];r(h.value,{componentStack:h.stack})}}finally{S.T=a,X.p=n}}(vl&3)!==0&&Dr(),Na(e),n=e.pendingLanes,(s&4194090)!==0&&(n&42)!==0?e===Hc?fn++:(fn=0,Hc=e):fn=0,xn(0)}}function Lm(e,a){(e.pooledCacheLanes&=a)===0&&(a=e.pooledCache,a!=null&&(e.pooledCache=null,Zl(a)))}function Dr(e){return Rm(),Um(),zm(),qm()}function qm(){if(Tt!==5)return!1;var e=cs,a=Lc;Lc=0;var s=ri(vl),l=S.T,n=X.p;try{X.p=32>s?32:s,S.T=null,s=qc,qc=null;var r=cs,o=vl;if(Tt=0,bl=cs=null,vl=0,(Qe&6)!==0)throw Error(d(331));var h=Qe;if(Qe|=4,jm(r.current),ym(r,r.current,o,s),Qe=h,xn(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(bt,r)}catch{}return!0}finally{X.p=n,S.T=l,Lm(e,a)}}function Hm(e,a,s){a=la(s,a),a=pc(e.stateNode,a,2),e=Fa(e,a,2),e!==null&&(_a(e,2),Na(e))}function Ke(e,a,s){if(e.tag===3)Hm(e,e,s);else for(;a!==null;){if(a.tag===3){Hm(a,e,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(is===null||!is.has(l))){e=la(s,e),s=Qu(2),l=Fa(a,s,2),l!==null&&(Gu(s,l,a,e),_a(l,2),Na(l));break}}a=a.return}}function Qc(e,a,s){var l=e.pingCache;if(l===null){l=e.pingCache=new xf;var n=new Set;l.set(a,n)}else n=l.get(a),n===void 0&&(n=new Set,l.set(a,n));n.has(s)||(kc=!0,n.add(s),e=vf.bind(null,e,a,s),a.then(e,e))}function vf(e,a,s){var l=e.pingCache;l!==null&&l.delete(a),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Je===e&&(ze&s)===s&&(ct===4||ct===3&&(ze&62914560)===ze&&300>pe()-zc?(Qe&2)===0&&jl(e,0):Rc|=s,yl===ze&&(yl=0)),Na(e)}function $m(e,a){a===0&&(a=jt()),e=sl(e,a),e!==null&&(_a(e,a),Na(e))}function jf(e){var a=e.memoizedState,s=0;a!==null&&(s=a.retryLane),$m(e,s)}function Nf(e,a){var s=0;switch(e.tag){case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(a),$m(e,s)}function wf(e,a){return Ve(e,a)}var Or=null,wl=null,Gc=!1,kr=!1,Vc=!1,Ls=0;function Na(e){e!==wl&&e.next===null&&(wl===null?Or=wl=e:wl=wl.next=e),kr=!0,Gc||(Gc=!0,_f())}function xn(e,a){if(!Vc&&kr){Vc=!0;do for(var s=!1,l=Or;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var o=l.suspendedLanes,h=l.pingedLanes;r=(1<<31-_(42|e)+1)-1,r&=n&~(o&~h),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,Gm(l,r))}else r=ze,r=Xa(l,l===Je?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||Gt(l,r)||(s=!0,Gm(l,r));l=l.next}while(s);Vc=!1}}function Sf(){Bm()}function Bm(){kr=Gc=!1;var e=0;Ls!==0&&(kf()&&(e=Ls),Ls=0);for(var a=pe(),s=null,l=Or;l!==null;){var n=l.next,r=Ym(l,a);r===0?(l.next=null,s===null?Or=n:s.next=n,n===null&&(wl=s)):(s=l,(e!==0||(r&3)!==0)&&(kr=!0)),l=n}xn(e)}function Ym(e,a){for(var s=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var o=31-_(r),h=1<<o,w=n[o];w===-1?((h&s)===0||(h&l)!==0)&&(n[o]=v(h,a)):w<=a&&(e.expiredLanes|=h),r&=~h}if(a=Je,s=ze,s=Xa(e,e===a?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===a&&(Ge===2||Ge===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&yt(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Gt(e,s)){if(a=s&-s,a===e.callbackPriority)return a;switch(l!==null&&yt(l),ri(s)){case 2:case 8:s=ne;break;case 32:s=Te;break;case 268435456:s=pa;break;default:s=Te}return l=Qm.bind(null,e),s=Ve(s,l),e.callbackPriority=a,e.callbackNode=s,a}return l!==null&&l!==null&&yt(l),e.callbackPriority=2,e.callbackNode=null,2}function Qm(e,a){if(Tt!==0&&Tt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Dr()&&e.callbackNode!==s)return null;var l=ze;return l=Xa(e,e===Je?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(_m(e,l,a),Ym(e,pe()),e.callbackNode!=null&&e.callbackNode===s?Qm.bind(null,e):null)}function Gm(e,a){if(Dr())return null;_m(e,a,!0)}function _f(){Uf(function(){(Qe&6)!==0?Ve(M,Sf):Bm()})}function Xc(){return Ls===0&&(Ls=re()),Ls}function Vm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Gn(""+e)}function Xm(e,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,e.id&&s.setAttribute("form",e.id),a.parentNode.insertBefore(s,a),e=new FormData(e),s.parentNode.removeChild(s),e}function Ef(e,a,s,l,n){if(a==="submit"&&s&&s.stateNode===n){var r=Vm((n[Ht]||null).action),o=l.submitter;o&&(a=(a=o[Ht]||null)?Vm(a.formAction):o.getAttribute("formAction"),a!==null&&(r=a,o=null));var h=new Wn("action","action",null,l,n);e.push({event:h,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ls!==0){var w=o?Xm(n,o):new FormData(n);mc(s,{pending:!0,data:w,method:n.method,action:r},null,w)}}else typeof r=="function"&&(h.preventDefault(),w=o?Xm(n,o):new FormData(n),mc(s,{pending:!0,data:w,method:n.method,action:r},r,w))},currentTarget:n}]})}}for(var Zc=0;Zc<Di.length;Zc++){var Wc=Di[Zc],Af=Wc.toLowerCase(),Mf=Wc[0].toUpperCase()+Wc.slice(1);ma(Af,"on"+Mf)}ma(_d,"onAnimationEnd"),ma(Ed,"onAnimationIteration"),ma(Ad,"onAnimationStart"),ma("dblclick","onDoubleClick"),ma("focusin","onFocus"),ma("focusout","onBlur"),ma(Gh,"onTransitionRun"),ma(Vh,"onTransitionStart"),ma(Xh,"onTransitionCancel"),ma(Md,"onTransitionEnd"),Zs("onMouseEnter",["mouseout","mouseover"]),Zs("onMouseLeave",["mouseout","mouseover"]),Zs("onPointerEnter",["pointerout","pointerover"]),Zs("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gn));function Zm(e,a){a=(a&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],n=l.event;l=l.listeners;e:{var r=void 0;if(a)for(var o=l.length-1;0<=o;o--){var h=l[o],w=h.instance,q=h.currentTarget;if(h=h.listener,w!==r&&n.isPropagationStopped())break e;r=h,n.currentTarget=q;try{r(n)}catch(J){vr(J)}n.currentTarget=null,r=w}else for(o=0;o<l.length;o++){if(h=l[o],w=h.instance,q=h.currentTarget,h=h.listener,w!==r&&n.isPropagationStopped())break e;r=h,n.currentTarget=q;try{r(n)}catch(J){vr(J)}n.currentTarget=null,r=w}}}}function Re(e,a){var s=a[ii];s===void 0&&(s=a[ii]=new Set);var l=e+"__bubble";s.has(l)||(Wm(a,e,2,!1),s.add(l))}function Kc(e,a,s){var l=0;a&&(l|=4),Wm(s,e,l,a)}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Pc(e){if(!e[Rr]){e[Rr]=!0,Bo.forEach(function(s){s!=="selectionchange"&&(Tf.has(s)||Kc(s,!1,e),Kc(s,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Rr]||(a[Rr]=!0,Kc("selectionchange",!1,a))}}function Wm(e,a,s,l){switch(y0(a)){case 2:var n=ax;break;case 8:n=sx;break;default:n=uo}s=n.bind(null,a,s,e),n=void 0,!yi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(a,s,{capture:!0,passive:n}):e.addEventListener(a,s,!0):n!==void 0?e.addEventListener(a,s,{passive:n}):e.addEventListener(a,s,!1)}function Jc(e,a,s,l,n){var r=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var o=l.tag;if(o===3||o===4){var h=l.stateNode.containerInfo;if(h===n)break;if(o===4)for(o=l.return;o!==null;){var w=o.tag;if((w===3||w===4)&&o.stateNode.containerInfo===n)return;o=o.return}for(;h!==null;){if(o=Gs(h),o===null)return;if(w=o.tag,w===5||w===6||w===26||w===27){l=r=o;continue e}h=h.parentNode}}l=l.return}td(function(){var q=r,J=gi(s),te=[];e:{var Y=Td.get(e);if(Y!==void 0){var G=Wn,_e=e;switch(e){case"keypress":if(Xn(s)===0)break e;case"keydown":case"keyup":G=Nh;break;case"focusin":_e="focus",G=Ni;break;case"focusout":_e="blur",G=Ni;break;case"beforeblur":case"afterblur":G=Ni;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=_h;break;case _d:case Ed:case Ad:G=hh;break;case Md:G=Ah;break;case"scroll":case"scrollend":G=ch;break;case"wheel":G=Th;break;case"copy":case"cut":case"paste":G=xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=rd;break;case"toggle":case"beforetoggle":G=Dh}var je=(a&4)!==0,We=!je&&(e==="scroll"||e==="scrollend"),U=je?Y!==null?Y+"Capture":null:Y;je=[];for(var T=q,z;T!==null;){var I=T;if(z=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||z===null||U===null||(I=Rl(T,U),I!=null&&je.push(pn(T,I,z))),We)break;T=T.return}0<je.length&&(Y=new G(Y,_e,null,s,J),te.push({event:Y,listeners:je}))}}if((a&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",Y&&s!==xi&&(_e=s.relatedTarget||s.fromElement)&&(Gs(_e)||_e[Qs]))break e;if((G||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,G?(_e=s.relatedTarget||s.toElement,G=q,_e=_e?Gs(_e):null,_e!==null&&(We=p(_e),je=_e.tag,_e!==We||je!==5&&je!==27&&je!==6)&&(_e=null)):(G=null,_e=q),G!==_e)){if(je=ld,I="onMouseLeave",U="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(je=rd,I="onPointerLeave",U="onPointerEnter",T="pointer"),We=G==null?Y:kl(G),z=_e==null?Y:kl(_e),Y=new je(I,T+"leave",G,s,J),Y.target=We,Y.relatedTarget=z,I=null,Gs(J)===q&&(je=new je(U,T+"enter",_e,s,J),je.target=z,je.relatedTarget=We,I=je),We=I,G&&_e)t:{for(je=G,U=_e,T=0,z=je;z;z=Sl(z))T++;for(z=0,I=U;I;I=Sl(I))z++;for(;0<T-z;)je=Sl(je),T--;for(;0<z-T;)U=Sl(U),z--;for(;T--;){if(je===U||U!==null&&je===U.alternate)break t;je=Sl(je),U=Sl(U)}je=null}else je=null;G!==null&&Km(te,Y,G,je,!1),_e!==null&&We!==null&&Km(te,We,_e,je,!0)}}e:{if(Y=q?kl(q):window,G=Y.nodeName&&Y.nodeName.toLowerCase(),G==="select"||G==="input"&&Y.type==="file")var fe=fd;else if(md(Y))if(xd)fe=Bh;else{fe=Hh;var Oe=qh}else G=Y.nodeName,!G||G.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?q&&fi(q.elementType)&&(fe=fd):fe=$h;if(fe&&(fe=fe(e,q))){hd(te,fe,s,J);break e}Oe&&Oe(e,Y,q),e==="focusout"&&q&&Y.type==="number"&&q.memoizedProps.value!=null&&hi(Y,"number",Y.value)}switch(Oe=q?kl(q):window,e){case"focusin":(md(Oe)||Oe.contentEditable==="true")&&(el=Oe,Mi=q,Yl=null);break;case"focusout":Yl=Mi=el=null;break;case"mousedown":Ti=!0;break;case"contextmenu":case"mouseup":case"dragend":Ti=!1,wd(te,s,J);break;case"selectionchange":if(Qh)break;case"keydown":case"keyup":wd(te,s,J)}var be;if(Si)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Is?dd(e,s)&&(we="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(we="onCompositionStart");we&&(id&&s.locale!=="ko"&&(Is||we!=="onCompositionStart"?we==="onCompositionEnd"&&Is&&(be=ad()):(Wa=J,bi="value"in Wa?Wa.value:Wa.textContent,Is=!0)),Oe=Ur(q,we),0<Oe.length&&(we=new nd(we,e,null,s,J),te.push({event:we,listeners:Oe}),be?we.data=be:(be=ud(s),be!==null&&(we.data=be)))),(be=kh?Rh(e,s):Uh(e,s))&&(we=Ur(q,"onBeforeInput"),0<we.length&&(Oe=new nd("onBeforeInput","beforeinput",null,s,J),te.push({event:Oe,listeners:we}),Oe.data=be)),Ef(te,e,q,s,J)}Zm(te,a)})}function pn(e,a,s){return{instance:e,listener:a,currentTarget:s}}function Ur(e,a){for(var s=a+"Capture",l=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=Rl(e,s),n!=null&&l.unshift(pn(e,n,r)),n=Rl(e,a),n!=null&&l.push(pn(e,n,r))),e.tag===3)return l;e=e.return}return[]}function Sl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Km(e,a,s,l,n){for(var r=a._reactName,o=[];s!==null&&s!==l;){var h=s,w=h.alternate,q=h.stateNode;if(h=h.tag,w!==null&&w===l)break;h!==5&&h!==26&&h!==27||q===null||(w=q,n?(q=Rl(s,r),q!=null&&o.unshift(pn(s,q,w))):n||(q=Rl(s,r),q!=null&&o.push(pn(s,q,w)))),s=s.return}o.length!==0&&e.push({event:a,listeners:o})}var Cf=/\r\n?/g,Df=/\u0000|\uFFFD/g;function Pm(e){return(typeof e=="string"?e:""+e).replace(Cf,`
`).replace(Df,"")}function Jm(e,a){return a=Pm(a),Pm(e)===a}function zr(){}function Ze(e,a,s,l,n,r){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Ps(e,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Ps(e,""+l);break;case"className":Bn(e,"class",l);break;case"tabIndex":Bn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(e,s,l);break;case"style":Io(e,l,r);break;case"data":if(a!=="object"){Bn(e,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Gn(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(a!=="input"&&Ze(e,a,"name",n.name,n,null),Ze(e,a,"formEncType",n.formEncType,n,null),Ze(e,a,"formMethod",n.formMethod,n,null),Ze(e,a,"formTarget",n.formTarget,n,null)):(Ze(e,a,"encType",n.encType,n,null),Ze(e,a,"method",n.method,n,null),Ze(e,a,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Gn(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=zr);break;case"onScroll":l!=null&&Re("scroll",e);break;case"onScrollEnd":l!=null&&Re("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Gn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":Re("beforetoggle",e),Re("toggle",e),$n(e,"popover",l);break;case"xlinkActuate":Ea(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ea(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ea(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ea(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ea(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ea(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ea(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ea(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ea(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":$n(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=rh.get(s)||s,$n(e,s,l))}}function Fc(e,a,s,l,n,r){switch(s){case"style":Io(e,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Ps(e,l):(typeof l=="number"||typeof l=="bigint")&&Ps(e,""+l);break;case"onScroll":l!=null&&Re("scroll",e);break;case"onScrollEnd":l!=null&&Re("scrollend",e);break;case"onClick":l!=null&&(e.onclick=zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),a=s.slice(2,n?s.length-7:void 0),r=e[Ht]||null,r=r!=null?r[s]:null,typeof r=="function"&&e.removeEventListener(a,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(a,l,n);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):$n(e,s,l)}}}function Ct(e,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",e),Re("load",e);var l=!1,n=!1,r;for(r in s)if(s.hasOwnProperty(r)){var o=s[r];if(o!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Ze(e,a,r,o,s,null)}}n&&Ze(e,a,"srcSet",s.srcSet,s,null),l&&Ze(e,a,"src",s.src,s,null);return;case"input":Re("invalid",e);var h=r=o=n=null,w=null,q=null;for(l in s)if(s.hasOwnProperty(l)){var J=s[l];if(J!=null)switch(l){case"name":n=J;break;case"type":o=J;break;case"checked":w=J;break;case"defaultChecked":q=J;break;case"value":r=J;break;case"defaultValue":h=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(d(137,a));break;default:Ze(e,a,l,J,s,null)}}Ko(e,r,h,w,q,o,n,!1),Yn(e);return;case"select":Re("invalid",e),l=o=r=null;for(n in s)if(s.hasOwnProperty(n)&&(h=s[n],h!=null))switch(n){case"value":r=h;break;case"defaultValue":o=h;break;case"multiple":l=h;default:Ze(e,a,n,h,s,null)}a=r,s=o,e.multiple=!!l,a!=null?Ks(e,!!l,a,!1):s!=null&&Ks(e,!!l,s,!0);return;case"textarea":Re("invalid",e),r=n=l=null;for(o in s)if(s.hasOwnProperty(o)&&(h=s[o],h!=null))switch(o){case"value":l=h;break;case"defaultValue":n=h;break;case"children":r=h;break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(d(91));break;default:Ze(e,a,o,h,s,null)}Jo(e,l,n,r),Yn(e);return;case"option":for(w in s)if(s.hasOwnProperty(w)&&(l=s[w],l!=null))switch(w){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(e,a,w,l,s,null)}return;case"dialog":Re("beforetoggle",e),Re("toggle",e),Re("cancel",e),Re("close",e);break;case"iframe":case"object":Re("load",e);break;case"video":case"audio":for(l=0;l<gn.length;l++)Re(gn[l],e);break;case"image":Re("error",e),Re("load",e);break;case"details":Re("toggle",e);break;case"embed":case"source":case"link":Re("error",e),Re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in s)if(s.hasOwnProperty(q)&&(l=s[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,a));default:Ze(e,a,q,l,s,null)}return;default:if(fi(a)){for(J in s)s.hasOwnProperty(J)&&(l=s[J],l!==void 0&&Fc(e,a,J,l,s,void 0));return}}for(h in s)s.hasOwnProperty(h)&&(l=s[h],l!=null&&Ze(e,a,h,l,s,null))}function Of(e,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,o=null,h=null,w=null,q=null,J=null;for(G in s){var te=s[G];if(s.hasOwnProperty(G)&&te!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":w=te;default:l.hasOwnProperty(G)||Ze(e,a,G,null,l,te)}}for(var Y in l){var G=l[Y];if(te=s[Y],l.hasOwnProperty(Y)&&(G!=null||te!=null))switch(Y){case"type":r=G;break;case"name":n=G;break;case"checked":q=G;break;case"defaultChecked":J=G;break;case"value":o=G;break;case"defaultValue":h=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(d(137,a));break;default:G!==te&&Ze(e,a,Y,G,l,te)}}mi(e,o,h,w,q,J,r,n);return;case"select":G=o=h=Y=null;for(r in s)if(w=s[r],s.hasOwnProperty(r)&&w!=null)switch(r){case"value":break;case"multiple":G=w;default:l.hasOwnProperty(r)||Ze(e,a,r,null,l,w)}for(n in l)if(r=l[n],w=s[n],l.hasOwnProperty(n)&&(r!=null||w!=null))switch(n){case"value":Y=r;break;case"defaultValue":h=r;break;case"multiple":o=r;default:r!==w&&Ze(e,a,n,r,l,w)}a=h,s=o,l=G,Y!=null?Ks(e,!!s,Y,!1):!!l!=!!s&&(a!=null?Ks(e,!!s,a,!0):Ks(e,!!s,s?[]:"",!1));return;case"textarea":G=Y=null;for(h in s)if(n=s[h],s.hasOwnProperty(h)&&n!=null&&!l.hasOwnProperty(h))switch(h){case"value":break;case"children":break;default:Ze(e,a,h,null,l,n)}for(o in l)if(n=l[o],r=s[o],l.hasOwnProperty(o)&&(n!=null||r!=null))switch(o){case"value":Y=n;break;case"defaultValue":G=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(d(91));break;default:n!==r&&Ze(e,a,o,n,l,r)}Po(e,Y,G);return;case"option":for(var _e in s)if(Y=s[_e],s.hasOwnProperty(_e)&&Y!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":e.selected=!1;break;default:Ze(e,a,_e,null,l,Y)}for(w in l)if(Y=l[w],G=s[w],l.hasOwnProperty(w)&&Y!==G&&(Y!=null||G!=null))switch(w){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:Ze(e,a,w,Y,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in s)Y=s[je],s.hasOwnProperty(je)&&Y!=null&&!l.hasOwnProperty(je)&&Ze(e,a,je,null,l,Y);for(q in l)if(Y=l[q],G=s[q],l.hasOwnProperty(q)&&Y!==G&&(Y!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(d(137,a));break;default:Ze(e,a,q,Y,l,G)}return;default:if(fi(a)){for(var We in s)Y=s[We],s.hasOwnProperty(We)&&Y!==void 0&&!l.hasOwnProperty(We)&&Fc(e,a,We,void 0,l,Y);for(J in l)Y=l[J],G=s[J],!l.hasOwnProperty(J)||Y===G||Y===void 0&&G===void 0||Fc(e,a,J,Y,l,G);return}}for(var U in s)Y=s[U],s.hasOwnProperty(U)&&Y!=null&&!l.hasOwnProperty(U)&&Ze(e,a,U,null,l,Y);for(te in l)Y=l[te],G=s[te],!l.hasOwnProperty(te)||Y===G||Y==null&&G==null||Ze(e,a,te,Y,l,G)}var Ic=null,eo=null;function Lr(e){return e.nodeType===9?e:e.ownerDocument}function Fm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Im(e,a){if(e===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&a==="foreignObject"?0:e}function to(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ao=null;function kf(){var e=window.event;return e&&e.type==="popstate"?e===ao?!1:(ao=e,!0):(ao=null,!1)}var e0=typeof setTimeout=="function"?setTimeout:void 0,Rf=typeof clearTimeout=="function"?clearTimeout:void 0,t0=typeof Promise=="function"?Promise:void 0,Uf=typeof queueMicrotask=="function"?queueMicrotask:typeof t0<"u"?function(e){return t0.resolve(null).then(e).catch(zf)}:e0;function zf(e){setTimeout(function(){throw e})}function ds(e){return e==="head"}function a0(e,a){var s=a,l=0,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(0<l&&8>l){s=l;var o=e.ownerDocument;if(s&1&&yn(o.documentElement),s&2&&yn(o.body),s&4)for(s=o.head,yn(s),o=s.firstChild;o;){var h=o.nextSibling,w=o.nodeName;o[Ol]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&o.rel.toLowerCase()==="stylesheet"||s.removeChild(o),o=h}}if(n===0){e.removeChild(r),En(a);return}n--}else s==="$"||s==="$?"||s==="$!"?n++:l=s.charCodeAt(0)-48;else l=0;s=r}while(s);En(a)}function so(e){var a=e.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":so(s),ci(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Lf(e,a,s,l){for(;e.nodeType===1;){var n=s;if(e.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ol])switch(a){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(a==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=fa(e.nextSibling),e===null)break}return null}function qf(e,a,s){if(a==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=fa(e.nextSibling),e===null))return null;return e}function lo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Hf(e,a){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function fa(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return e}var no=null;function s0(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(a===0)return e;a--}else s==="/$"&&a++}e=e.previousSibling}return null}function l0(e,a,s){switch(a=Lr(s),e){case"html":if(e=a.documentElement,!e)throw Error(d(452));return e;case"head":if(e=a.head,!e)throw Error(d(453));return e;case"body":if(e=a.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function yn(e){for(var a=e.attributes;a.length;)e.removeAttributeNode(a[0]);ci(e)}var da=new Map,n0=new Set;function qr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var $a=X.d;X.d={f:$f,r:Bf,D:Yf,C:Qf,L:Gf,m:Vf,X:Zf,S:Xf,M:Wf};function $f(){var e=$a.f(),a=Tr();return e||a}function Bf(e){var a=Vs(e);a!==null&&a.tag===5&&a.type==="form"?_u(a):$a.r(e)}var _l=typeof document>"u"?null:document;function r0(e,a,s){var l=_l;if(l&&typeof a=="string"&&a){var n=sa(a);n='link[rel="'+e+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),n0.has(n)||(n0.add(n),e={rel:e,crossOrigin:s,href:a},l.querySelector(n)===null&&(a=l.createElement("link"),Ct(a,"link",e),St(a),l.head.appendChild(a)))}}function Yf(e){$a.D(e),r0("dns-prefetch",e,null)}function Qf(e,a){$a.C(e,a),r0("preconnect",e,a)}function Gf(e,a,s){$a.L(e,a,s);var l=_l;if(l&&e&&a){var n='link[rel="preload"][as="'+sa(a)+'"]';a==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+sa(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+sa(s.imageSizes)+'"]')):n+='[href="'+sa(e)+'"]';var r=n;switch(a){case"style":r=El(e);break;case"script":r=Al(e)}da.has(r)||(e=x({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:e,as:a},s),da.set(r,e),l.querySelector(n)!==null||a==="style"&&l.querySelector(bn(r))||a==="script"&&l.querySelector(vn(r))||(a=l.createElement("link"),Ct(a,"link",e),St(a),l.head.appendChild(a)))}}function Vf(e,a){$a.m(e,a);var s=_l;if(s&&e){var l=a&&typeof a.as=="string"?a.as:"script",n='link[rel="modulepreload"][as="'+sa(l)+'"][href="'+sa(e)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Al(e)}if(!da.has(r)&&(e=x({rel:"modulepreload",href:e},a),da.set(r,e),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(vn(r)))return}l=s.createElement("link"),Ct(l,"link",e),St(l),s.head.appendChild(l)}}}function Xf(e,a,s){$a.S(e,a,s);var l=_l;if(l&&e){var n=Xs(l).hoistableStyles,r=El(e);a=a||"default";var o=n.get(r);if(!o){var h={loading:0,preload:null};if(o=l.querySelector(bn(r)))h.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":a},s),(s=da.get(r))&&ro(e,s);var w=o=l.createElement("link");St(w),Ct(w,"link",e),w._p=new Promise(function(q,J){w.onload=q,w.onerror=J}),w.addEventListener("load",function(){h.loading|=1}),w.addEventListener("error",function(){h.loading|=2}),h.loading|=4,Hr(o,a,l)}o={type:"stylesheet",instance:o,count:1,state:h},n.set(r,o)}}}function Zf(e,a){$a.X(e,a);var s=_l;if(s&&e){var l=Xs(s).hoistableScripts,n=Al(e),r=l.get(n);r||(r=s.querySelector(vn(n)),r||(e=x({src:e,async:!0},a),(a=da.get(n))&&io(e,a),r=s.createElement("script"),St(r),Ct(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function Wf(e,a){$a.M(e,a);var s=_l;if(s&&e){var l=Xs(s).hoistableScripts,n=Al(e),r=l.get(n);r||(r=s.querySelector(vn(n)),r||(e=x({src:e,async:!0,type:"module"},a),(a=da.get(n))&&io(e,a),r=s.createElement("script"),St(r),Ct(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function i0(e,a,s,l){var n=(n=ie.current)?qr(n):null;if(!n)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=El(s.href),s=Xs(n).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=El(s.href);var r=Xs(n).hoistableStyles,o=r.get(e);if(o||(n=n.ownerDocument||n,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,o),(r=n.querySelector(bn(e)))&&!r._p&&(o.instance=r,o.state.loading=5),da.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},da.set(e,s),r||Kf(n,e,s,o.state))),a&&l===null)throw Error(d(528,""));return o}if(a&&l!==null)throw Error(d(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Al(s),s=Xs(n).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function El(e){return'href="'+sa(e)+'"'}function bn(e){return'link[rel="stylesheet"]['+e+"]"}function c0(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Kf(e,a,s,l){e.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=e.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Ct(a,"link",s),St(a),e.head.appendChild(a))}function Al(e){return'[src="'+sa(e)+'"]'}function vn(e){return"script[async]"+e}function o0(e,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=e.querySelector('style[data-href~="'+sa(s.href)+'"]');if(l)return a.instance=l,St(l),l;var n=x({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),St(l),Ct(l,"style",n),Hr(l,s.precedence,e),a.instance=l;case"stylesheet":n=El(s.href);var r=e.querySelector(bn(n));if(r)return a.state.loading|=4,a.instance=r,St(r),r;l=c0(s),(n=da.get(n))&&ro(l,n),r=(e.ownerDocument||e).createElement("link"),St(r);var o=r;return o._p=new Promise(function(h,w){o.onload=h,o.onerror=w}),Ct(r,"link",l),a.state.loading|=4,Hr(r,s.precedence,e),a.instance=r;case"script":return r=Al(s.src),(n=e.querySelector(vn(r)))?(a.instance=n,St(n),n):(l=s,(n=da.get(r))&&(l=x({},s),io(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),St(n),Ct(n,"link",l),e.head.appendChild(n),a.instance=n);case"void":return null;default:throw Error(d(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,Hr(l,s.precedence,e));return a.instance}function Hr(e,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,o=0;o<l.length;o++){var h=l[o];if(h.dataset.precedence===a)r=h;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(e,a.firstChild))}function ro(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.title==null&&(e.title=a.title)}function io(e,a){e.crossOrigin==null&&(e.crossOrigin=a.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=a.referrerPolicy),e.integrity==null&&(e.integrity=a.integrity)}var $r=null;function d0(e,a,s){if($r===null){var l=new Map,n=$r=new Map;n.set(s,l)}else n=$r,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),n=0;n<s.length;n++){var r=s[n];if(!(r[Ol]||r[Ot]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(a)||"";o=e+o;var h=l.get(o);h?h.push(r):l.set(o,[r])}}return l}function u0(e,a,s){e=e.ownerDocument||e,e.head.insertBefore(s,a==="title"?e.querySelector("head > title"):null)}function Pf(e,a,s){if(s===1||a.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return e=a.disabled,typeof a.precedence=="string"&&e==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function m0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var jn=null;function Jf(){}function Ff(e,a,s){if(jn===null)throw Error(d(475));var l=jn;if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var n=El(s.href),r=e.querySelector(bn(n));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Br.bind(l),e.then(l,l)),a.state.loading|=4,a.instance=r,St(r);return}r=e.ownerDocument||e,s=c0(s),(n=da.get(n))&&ro(s,n),r=r.createElement("link"),St(r);var o=r;o._p=new Promise(function(h,w){o.onload=h,o.onerror=w}),Ct(r,"link",s),a.instance=r}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(a,e),(e=a.state.preload)&&(a.state.loading&3)===0&&(l.count++,a=Br.bind(l),e.addEventListener("load",a),e.addEventListener("error",a))}}function If(){if(jn===null)throw Error(d(475));var e=jn;return e.stylesheets&&e.count===0&&co(e,e.stylesheets),0<e.count?function(a){var s=setTimeout(function(){if(e.stylesheets&&co(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Br(){if(this.count--,this.count===0){if(this.stylesheets)co(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Yr=null;function co(e,a){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Yr=new Map,a.forEach(ex,e),Yr=null,Br.call(e))}function ex(e,a){if(!(a.state.loading&4)){var s=Yr.get(e);if(s)var l=s.get(null);else{s=new Map,Yr.set(e,s);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var o=n[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(s.set(o.dataset.precedence,o),l=o)}l&&s.set(null,l)}n=a.instance,o=n.getAttribute("data-precedence"),r=s.get(o)||l,r===l&&s.set(null,n),s.set(o,n),this.count++,l=Br.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),a.state.loading|=4}}var Nn={$$typeof:le,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function tx(e,a,s,l,n,r,o,h){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.hiddenUpdates=ta(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=h,this.incompleteTransitions=new Map}function h0(e,a,s,l,n,r,o,h,w,q,J,te){return e=new tx(e,a,s,o,h,w,q,te),a=1,r===!0&&(a|=24),r=Xt(3,null,null,a),e.current=r,r.stateNode=e,a=Qi(),a.refCount++,e.pooledCache=a,a.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:a},Zi(r),e}function f0(e){return e?(e=ll,e):ll}function x0(e,a,s,l,n,r){n=f0(n),l.context===null?l.context=n:l.pendingContext=n,l=Ja(a),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=Fa(e,l,a),s!==null&&(Jt(s,e,a),Jl(s,e,a))}function g0(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<a?s:a}}function oo(e,a){g0(e,a),(e=e.alternate)&&g0(e,a)}function p0(e){if(e.tag===13){var a=sl(e,67108864);a!==null&&Jt(a,e,67108864),oo(e,67108864)}}var Qr=!0;function ax(e,a,s,l){var n=S.T;S.T=null;var r=X.p;try{X.p=2,uo(e,a,s,l)}finally{X.p=r,S.T=n}}function sx(e,a,s,l){var n=S.T;S.T=null;var r=X.p;try{X.p=8,uo(e,a,s,l)}finally{X.p=r,S.T=n}}function uo(e,a,s,l){if(Qr){var n=mo(l);if(n===null)Jc(e,a,l,Gr,s),b0(e,l);else if(nx(n,e,a,s,l))l.stopPropagation();else if(b0(e,l),a&4&&-1<lx.indexOf(e)){for(;n!==null;){var r=Vs(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=rt(r.pendingLanes);if(o!==0){var h=r;for(h.pendingLanes|=2,h.entangledLanes|=2;o;){var w=1<<31-_(o);h.entanglements[1]|=w,o&=~w}Na(r),(Qe&6)===0&&(Ar=pe()+500,xn(0))}}break;case 13:h=sl(r,2),h!==null&&Jt(h,r,2),Tr(),oo(r,2)}if(r=mo(l),r===null&&Jc(e,a,l,Gr,s),r===n)break;n=r}n!==null&&l.stopPropagation()}else Jc(e,a,l,null,s)}}function mo(e){return e=gi(e),ho(e)}var Gr=null;function ho(e){if(Gr=null,e=Gs(e),e!==null){var a=p(e);if(a===null)e=null;else{var s=a.tag;if(s===13){if(e=N(a),e!==null)return e;e=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null)}}return Gr=e,null}function y0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ga()){case M:return 2;case ne:return 8;case Te:case Pe:return 32;case pa:return 268435456;default:return 32}default:return 32}}var fo=!1,us=null,ms=null,hs=null,wn=new Map,Sn=new Map,fs=[],lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b0(e,a){switch(e){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":wn.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sn.delete(a.pointerId)}}function _n(e,a,s,l,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},a!==null&&(a=Vs(a),a!==null&&p0(a)),e):(e.eventSystemFlags|=l,a=e.targetContainers,n!==null&&a.indexOf(n)===-1&&a.push(n),e)}function nx(e,a,s,l,n){switch(a){case"focusin":return us=_n(us,e,a,s,l,n),!0;case"dragenter":return ms=_n(ms,e,a,s,l,n),!0;case"mouseover":return hs=_n(hs,e,a,s,l,n),!0;case"pointerover":var r=n.pointerId;return wn.set(r,_n(wn.get(r)||null,e,a,s,l,n)),!0;case"gotpointercapture":return r=n.pointerId,Sn.set(r,_n(Sn.get(r)||null,e,a,s,l,n)),!0}return!1}function v0(e){var a=Gs(e.target);if(a!==null){var s=p(a);if(s!==null){if(a=s.tag,a===13){if(a=N(s),a!==null){e.blockedOn=a,J0(e.priority,function(){if(s.tag===13){var l=Pt();l=ni(l);var n=sl(s,l);n!==null&&Jt(n,s,l),oo(s,l)}});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Vr(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var s=mo(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);xi=l,s.target.dispatchEvent(l),xi=null}else return a=Vs(s),a!==null&&p0(a),e.blockedOn=s,!1;a.shift()}return!0}function j0(e,a,s){Vr(e)&&s.delete(a)}function rx(){fo=!1,us!==null&&Vr(us)&&(us=null),ms!==null&&Vr(ms)&&(ms=null),hs!==null&&Vr(hs)&&(hs=null),wn.forEach(j0),Sn.forEach(j0)}function Xr(e,a){e.blockedOn===a&&(e.blockedOn=null,fo||(fo=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,rx)))}var Zr=null;function N0(e){Zr!==e&&(Zr=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Zr===e&&(Zr=null);for(var a=0;a<e.length;a+=3){var s=e[a],l=e[a+1],n=e[a+2];if(typeof l!="function"){if(ho(l||s)===null)continue;break}var r=Vs(s);r!==null&&(e.splice(a,3),a-=3,mc(r,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function En(e){function a(w){return Xr(w,e)}us!==null&&Xr(us,e),ms!==null&&Xr(ms,e),hs!==null&&Xr(hs,e),wn.forEach(a),Sn.forEach(a);for(var s=0;s<fs.length;s++){var l=fs[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<fs.length&&(s=fs[0],s.blockedOn===null);)v0(s),s.blockedOn===null&&fs.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],r=s[l+1],o=n[Ht]||null;if(typeof r=="function")o||N0(s);else if(o){var h=null;if(r&&r.hasAttribute("formAction")){if(n=r,o=r[Ht]||null)h=o.formAction;else if(ho(n)!==null)continue}else h=o.action;typeof h=="function"?s[l+1]=h:(s.splice(l,3),l-=3),N0(s)}}}function xo(e){this._internalRoot=e}Wr.prototype.render=xo.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(d(409));var s=a.current,l=Pt();x0(s,l,e,a,null,null)},Wr.prototype.unmount=xo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;x0(e.current,2,null,e,null,null),Tr(),a[Qs]=null}};function Wr(e){this._internalRoot=e}Wr.prototype.unstable_scheduleHydration=function(e){if(e){var a=Ho();e={blockedOn:null,target:e,priority:a};for(var s=0;s<fs.length&&a!==0&&a<fs[s].priority;s++);fs.splice(s,0,e),s===0&&v0(e)}};var w0=c.version;if(w0!=="19.1.0")throw Error(d(527,w0,"19.1.0"));X.findDOMNode=function(e){var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=j(a),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var ix={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kr.isDisabled&&Kr.supportsFiber)try{bt=Kr.inject(ix),ft=Kr}catch{}}return Mn.createRoot=function(e,a){if(!m(e))throw Error(d(299));var s=!1,l="",n=Hu,r=$u,o=Bu,h=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(n=a.onUncaughtError),a.onCaughtError!==void 0&&(r=a.onCaughtError),a.onRecoverableError!==void 0&&(o=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(h=a.unstable_transitionCallbacks)),a=h0(e,1,!1,null,null,s,l,n,r,o,h,null),e[Qs]=a.current,Pc(e),new xo(a)},Mn.hydrateRoot=function(e,a,s){if(!m(e))throw Error(d(299));var l=!1,n="",r=Hu,o=$u,h=Bu,w=null,q=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(o=s.onCaughtError),s.onRecoverableError!==void 0&&(h=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks),s.formState!==void 0&&(q=s.formState)),a=h0(e,1,!0,a,s??null,l,n,r,o,h,w,q),a.context=f0(null),s=a.current,l=Pt(),l=ni(l),n=Ja(l),n.callback=null,Fa(s,n,l),s=l,a.current.lanes=s,_a(a,s),Na(a),e[Qs]=a.current,Pc(e),new Wr(a)},Mn.version="19.1.0",Mn}var k0;function gx(){if(k0)return yo.exports;k0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),yo.exports=xx(),yo.exports}var px=gx();const yx=Co(px);window.APP_CONFIG={APP_NAME:"Production Management System",APP_VERSION:"2.0.0",COMPANY_NAME:"Oracles Africa",COMPANY_EMAIL:"admin@oracles.africa",ENV:window.location.hostname==="localhost"?"development":"production",DEBUG:window.location.hostname==="localhost",API_BASE:"/api",API_TIMEOUT:3e4,API_RETRY_ATTEMPTS:3,API_RETRY_DELAY:1e3,WS_URL:`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}`,WS_RECONNECT_ATTEMPTS:5,WS_RECONNECT_DELAY:1e3,WS_PING_INTERVAL:3e4,TOKEN_KEY:"pms_token",USER_KEY:"pms_user",SESSION_TIMEOUT:6e5,SESSION_WARNING_TIME:3e5,REMEMBER_ME_DURATION:6048e5,ENVIRONMENTS:{BLENDING:"blending",PACKAGING:"packaging"},DEFAULT_ENVIRONMENTS:["blending","packaging"],ORDER_STATUSES:{PENDING:"pending",IN_PROGRESS:"in_progress",STOPPED:"stopped",COMPLETED:"completed"},ORDER_STATUS_FLOW:{pending:["in_progress"],in_progress:["stopped","completed"],stopped:["in_progress","completed"],completed:[]},PRIORITY_LEVELS:{LOW:"low",NORMAL:"normal",HIGH:"high",URGENT:"urgent"},PRIORITY_WEIGHTS:{low:1,normal:2,high:3,urgent:4},MACHINE_STATUSES:{AVAILABLE:"available",IN_USE:"in_use",MAINTENANCE:"maintenance",OFFLINE:"offline",PAUSED:"paused"},MACHINE_STATUS_TRANSITIONS:{available:["in_use","maintenance","offline"],in_use:["paused","available","offline"],paused:["in_use","available"],maintenance:["available","offline"],offline:["available","maintenance"]},USER_ROLES:{ADMIN:"admin",SUPERVISOR:"supervisor",OPERATOR:"operator"},ROLE_PERMISSIONS:{admin:["createOrder","updateOrder","deleteOrder","viewOrders","startProduction","stopProduction","completeOrder","manageMachines","viewMachines","manageUsers","viewUsers","viewAnalytics","exportData","manageSettings"],supervisor:["createOrder","updateOrder","deleteOrder","viewOrders","startProduction","stopProduction","completeOrder","viewMachines","viewAnalytics","exportData"],operator:["viewOrders","startProduction","stopProduction","completeOrder","viewMachines"]},STOP_REASONS:[{value:"equipment_breakdown",label:"Equipment Breakdown",category:"mechanical"},{value:"material_shortage",label:"Material Shortage",category:"supply"},{value:"maintenance",label:"Planned Maintenance",category:"mechanical"},{value:"quality_issue",label:"Quality Issue",category:"quality"},{value:"safety_concern",label:"Safety Concern",category:"safety"},{value:"operator_break",label:"Operator Break",category:"operational"},{value:"power_outage",label:"Power Outage",category:"infrastructure"},{value:"shift_change",label:"Shift Change",category:"operational"},{value:"other",label:"Other",category:"other"}],STOP_CATEGORIES:{mechanical:{label:"Mechanical",color:"red"},supply:{label:"Supply Chain",color:"orange"},quality:{label:"Quality",color:"yellow"},safety:{label:"Safety",color:"red"},operational:{label:"Operational",color:"blue"},infrastructure:{label:"Infrastructure",color:"purple"},other:{label:"Other",color:"gray"}},WASTE_TYPES:["Raw Material","Packaging Material","Finished Product","Energy","Water","Other"],WASTE_UNITS:[{value:"kg",label:"Kilograms",type:"weight"},{value:"g",label:"Grams",type:"weight"},{value:"tons",label:"Tons",type:"weight"},{value:"units",label:"Units",type:"count"},{value:"liters",label:"Liters",type:"volume"},{value:"ml",label:"Milliliters",type:"volume"},{value:"meters",label:"Meters",type:"length"},{value:"kwh",label:"kWh",type:"energy"}],THEME:{PRIMARY_COLOR:"blue",SECONDARY_COLOR:"gray",SUCCESS_COLOR:"green",WARNING_COLOR:"yellow",ERROR_COLOR:"red",INFO_COLOR:"blue"},PAGE_SIZE_OPTIONS:[10,25,50,100],DEFAULT_PAGE_SIZE:25,TOAST_DURATION:5e3,TOAST_POSITION:"top-right",MODAL_SIZES:{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-6xl"},TIMEZONE:{name:"SAST",fullName:"South African Standard Time",offset:"+02:00",offsetMinutes:120,olsonName:"Africa/Johannesburg",displayInUI:!0},DATE_FORMATS:{display:{date:"YYYY-MM-DD",time:"HH:mm:ss",datetime:"YYYY-MM-DD HH:mm:ss",datetimeShort:"YYYY-MM-DD HH:mm",friendly:"DD MMM YYYY",friendlyWithTime:"DD MMM YYYY, HH:mm SAST"},input:{date:"YYYY-MM-DD",time:"HH:mm",datetime:"YYYY-MM-DDTHH:mm"},api:{iso:"YYYY-MM-DDTHH:mm:ss.SSSZ"}},DATE_FORMAT:{dateStyle:"short",timeStyle:"short"},DATE_FORMAT_LONG:{dateStyle:"long",timeStyle:"medium"},LOCALE:"en-ZA",BUSINESS_HOURS:{timezone:"SAST",workDays:[1,2,3,4,5],startTime:"08:00",endTime:"17:00",lunchBreak:{start:"12:00",end:"13:00"},breaks:[{name:"Morning Tea",start:"10:00",end:"10:15"},{name:"Afternoon Tea",start:"15:00",end:"15:15"}]},SHIFTS:{day:{name:"Day Shift",start:"06:00",end:"14:00",timezone:"SAST"},afternoon:{name:"Afternoon Shift",start:"14:00",end:"22:00",timezone:"SAST"},night:{name:"Night Shift",start:"22:00",end:"06:00",timezone:"SAST"}},UPLOAD:{MAX_FILE_SIZE:10*1024*1024,CHUNK_SIZE:1024*1024,ALLOWED_EXTENSIONS:["xlsx","xls","csv","pdf","png","jpg","jpeg"],ALLOWED_MIME_TYPES:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv","application/pdf","image/png","image/jpeg"],IMAGE_MAX_WIDTH:2e3,IMAGE_MAX_HEIGHT:2e3,IMAGE_QUALITY:.9},EXPORT_FORMATS:["json","csv","excel","pdf"],EXPORT_BATCH_SIZE:1e3,CACHE_TTL:{SHORT:3e5,MEDIUM:18e5,LONG:36e5,VERY_LONG:864e5},REFRESH_INTERVALS:{ORDERS:3e4,MACHINES:6e4,ANALYTICS:3e5,NOTIFICATIONS:6e4},ANALYTICS:{CHART_COLORS:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],DEFAULT_DATE_RANGE:30,MAX_CHART_POINTS:100,EFFICIENCY_TARGETS:{EXCELLENT:95,GOOD:85,AVERAGE:75,POOR:65}},VALIDATION:{USERNAME_MIN_LENGTH:3,USERNAME_MAX_LENGTH:50,PASSWORD_MIN_LENGTH:6,PASSWORD_MAX_LENGTH:128,ORDER_NUMBER_PATTERN:/^[A-Z0-9-]+$/,EMAIL_PATTERN:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,PHONE_PATTERN:/^[\d\s\-\+\(\)]+$/},BUSINESS_RULES:{MIN_ORDER_QUANTITY:1,MAX_ORDER_QUANTITY:999999,ORDER_NUMBER_PREFIX:"ORD",AUTO_LOGOUT_AFTER_INACTIVITY:!0,REQUIRE_STOP_REASON:!0,REQUIRE_WASTE_TRACKING:!0,ALLOW_NEGATIVE_EFFICIENCY:!1,MAX_CONCURRENT_ORDERS_PER_MACHINE:1},FEATURES:{REAL_TIME_UPDATES:!0,OFFLINE_MODE:!0,EXPORT_FUNCTIONALITY:!0,ADVANCED_ANALYTICS:!0,MACHINE_MAINTENANCE_TRACKING:!0,TIMEZONE_DISPLAY:!0,BUSINESS_HOURS_VALIDATION:!0,SHIFT_TRACKING:!0,QUALITY_CONTROL:!1,INVENTORY_MANAGEMENT:!1,PREDICTIVE_MAINTENANCE:!1},EXTERNAL_SERVICES:{ANALYTICS_ENABLED:!1,ANALYTICS_ID:"",ERROR_TRACKING_ENABLED:!1,ERROR_TRACKING_DSN:"",SUPPORT_EMAIL:"support@oracles.africa",DOCUMENTATION_URL:"https://docs.oracles.africa/pms"},STATUS_COLORS:{pending:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300",dot:"bg-yellow-400"},in_progress:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-300",dot:"bg-blue-400"},stopped:{bg:"bg-red-100",text:"text-red-800",border:"border-red-300",dot:"bg-red-400"},completed:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300",dot:"bg-green-400"}},PRIORITY_COLORS:{low:{bg:"bg-gray-100",text:"text-gray-600",border:"border-gray-300"},normal:{bg:"bg-blue-100",text:"text-blue-600",border:"border-blue-300"},high:{bg:"bg-orange-100",text:"text-orange-600",border:"border-orange-300"},urgent:{bg:"bg-red-100",text:"text-red-600",border:"border-red-300"}},MACHINE_STATUS_COLORS:{available:{bg:"bg-green-100",text:"text-green-800",dot:"bg-green-400"},in_use:{bg:"bg-blue-100",text:"text-blue-800",dot:"bg-blue-400"},paused:{bg:"bg-yellow-100",text:"text-yellow-800",dot:"bg-yellow-400"},maintenance:{bg:"bg-orange-100",text:"text-orange-800",dot:"bg-orange-400"},offline:{bg:"bg-red-100",text:"text-red-800",dot:"bg-red-400"}}};window.APP_CONFIG.ENV==="production"&&(Object.freeze(window.APP_CONFIG),Object.freeze(window.APP_CONFIG.ORDER_STATUSES),Object.freeze(window.APP_CONFIG.PRIORITY_LEVELS),Object.freeze(window.APP_CONFIG.MACHINE_STATUSES),Object.freeze(window.APP_CONFIG.USER_ROLES),Object.freeze(window.APP_CONFIG.ROLE_PERMISSIONS),Object.freeze(window.APP_CONFIG.FEATURES));const bx={events:{},on(i,c){return this.events[i]||(this.events[i]=[]),this.events[i].push(c),()=>{this.off(i,c)}},off(i,c){this.events[i]&&(this.events[i]=this.events[i].filter(u=>u!==c))},emit(i,c){this.events[i]&&this.events[i].forEach(u=>{try{u(c)}catch(d){console.error(`Error in event handler for ${i}:`,d)}})},clear(i){i?delete this.events[i]:this.events={}}};window.EventBus=bx;class vx{constructor(){this.baseURL=window.APP_CONFIG?.API_BASE||"/api",this.retryAttempts=3,this.retryDelay=1e3}getHeaders(){const c={"Content-Type":"application/json"},u=localStorage.getItem("token");return u&&(c.Authorization=`Bearer ${u}`),c}async handleResponse(c){if(!c.ok){if(c.status===401||c.status===403)throw console.log("🔐 Authentication failed - clearing tokens and triggering logout"),localStorage.removeItem("token"),localStorage.removeItem("user_data"),window.EventBus&&window.EventBus.emit("auth:logout"),new Error("Session expired. Please login again.");let u;try{u=await c.json()}catch{u={error:"Request failed",success:!1}}const d=new Error(u.error||u.message||"Request failed");throw d.response={status:c.status,data:u,success:u.success||!1},d}if(c.headers.get("content-length")==="0")return{success:!0,data:null};try{return await c.json()}catch{return{success:!0,data:null}}}async retryRequest(c,u=this.retryAttempts){for(let d=0;d<u;d++)try{return await c()}catch(m){if(m.response?.status===401||m.response?.status===403||m.response?.status===400||d===u-1)throw m;await new Promise(p=>setTimeout(p,this.retryDelay*(d+1))),console.warn(`API request failed, retrying... (${d+1}/${u})`)}}async request(c,u={}){const d=`${this.baseURL}${c}`,m={...u,headers:{...this.getHeaders(),...u.headers},credentials:"include"};return this.retryRequest(async()=>{try{const p=await fetch(d,m);return this.handleResponse(p)}catch(p){throw console.error("API request failed:",{url:d,method:m.method||"GET",error:p.message}),p}})}async get(c,u={}){const d=new URLSearchParams(Object.entries(u).filter(([p,N])=>N!=null)).toString(),m=d?`${c}?${d}`:c;return this.request(m,{method:"GET"})}async post(c,u={}){return this.request(c,{method:"POST",body:JSON.stringify(u)})}async put(c,u={}){return this.request(c,{method:"PUT",body:JSON.stringify(u)})}async patch(c,u={}){return this.request(c,{method:"PATCH",body:JSON.stringify(u)})}async delete(c){return this.request(c,{method:"DELETE"})}async uploadFile(c,u,d=null){const m=new FormData;return m.append("file",u),new Promise((p,N)=>{const A=new XMLHttpRequest,j=localStorage.getItem("token");j&&A.setRequestHeader("Authorization",`Bearer ${j}`),d&&A.upload.addEventListener("progress",g=>{if(g.lengthComputable){const x=g.loaded/g.total*100;d(x)}}),A.addEventListener("load",()=>{if(A.status>=200&&A.status<300)try{const g=JSON.parse(A.responseText);p(g)}catch{p({success:!0})}else N(new Error(`Upload failed: ${A.statusText}`))}),A.addEventListener("error",()=>{N(new Error("Upload failed"))}),A.open("POST",`${this.baseURL}${c}`),A.send(m)})}async login(c,u){const d=await this.post("/auth/login",{username:c,password:u});return d.success&&d.data?.token&&localStorage.setItem("token",d.data.token),d}async logout(){try{await this.post("/auth/logout")}finally{localStorage.removeItem("token"),window.EventBus&&window.EventBus.emit("auth:logout")}}async verifySession(){return this.post("/auth/verify")}async getWebSocketToken(){return this.get("/auth/websocket-token")}async getOrders(c={}){return this.get("/orders",c)}async createOrder(c){return this.post("/orders",c)}async updateOrder(c,u){return this.put(`/orders/${c}`,u)}async deleteOrder(c){return this.delete(`/orders/${c}`)}async startProduction(c,u){return this.post(`/orders/${c}/start`,{machine_id:u})}async stopProduction(c,u,d=""){return this.post(`/orders/${c}/stop`,{reason:u,notes:d})}async pauseProduction(c,u){return this.post(`/orders/${c}/pause`,{reason:u})}async resumeProduction(c){return this.post(`/orders/${c}/resume`)}async completeProduction(c,u={}){return this.post(`/orders/${c}/complete`,u)}async getMachines(c=null){return this.get("/machines",c?{environment:c}:{})}async createMachine(c){return this.post("/machines",c)}async updateMachine(c,u){return this.put(`/machines/${c}`,u)}async updateMachineStatus(c,u){return this.patch(`/machines/${c}/status`,{status:u})}async deleteMachine(c){return this.delete(`/machines/${c}`)}async getMachineStats(){return this.get("/machines/stats")}async getUsers(){return this.get("/users")}async createUser(c){return this.post("/users",c)}async updateUser(c,u){return this.put(`/users/${c}`,u)}async getProductionStatus(){return this.get("/production/status")}async getMachineStatus(){return this.get("/machines/status")}async getActiveOrders(){return this.get("/orders/active")}async getProductionFloorOverview(){return this.get("/production/floor-overview")}async getAnalyticsSummary(c={}){return this.get("/analytics/summary",c)}async getDowntimeAnalytics(c={}){return this.get("/analytics/downtime",c)}async getDowntimeReports(c={}){return this.get("/reports/downtime",c)}async getArchivedOrders(){return this.get("/orders/archived")}async getOrder(c){return this.get(`/orders/${c}`)}async getAnalyticsStops(){return this.get("/analytics/stops")}async getGeneralSettings(){return this.get("/settings/general")}async updateGeneralSettings(c){return this.put("/settings/general",c)}async getLaborAssignments(c=null){return this.get("/planner/assignments",c?{date:c}:{})}async createLaborAssignment(c){return this.post("/planner/assignments",c)}async deleteLaborAssignment(c){return this.delete(`/planner/assignments/${c}`)}async getSupervisors(c=null,u=null){const d={};return c&&(d.date=c),u&&(d.shift=u),this.get("/planner/supervisors",d)}async addSupervisor(c){return this.post("/planner/supervisors",c)}async deleteSupervisor(c){return this.delete(`/planner/supervisors/${c}`)}async getEnvironments(){return this.get("/environments")}async exportData(c,u={}){const d=await fetch(`${this.baseURL}/export/${c}?${new URLSearchParams(u)}`,{headers:this.getHeaders(),credentials:"include"});if(!d.ok)throw new Error("Export failed");return d.blob()}async uploadOrders(c,u=null){return this.uploadFile("/upload-orders",c,u)}async checkHealth(){return this.get("/health")}}const oe=new vx;window.API=oe;class jx{constructor(){this.ws=null,this.connectionId=null,this.connectionState="disconnected",this.isAuthenticated=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.reconnectDelay=1e3,this.heartbeatInterval=3e4,this.messageQueue=[],this.subscriptions=new Set,this.rooms=new Set,this.eventHandlers=new Map,this.metrics={messagesReceived:0,messagesSent:0,reconnections:0,lastPing:null,connectionTime:null},this.heartbeatTimer=null,this.reconnectTimer=null,this.connectionTimeoutTimer=null,console.log("🚀 Enhanced WebSocket Service initialized")}async connect(c=null){return this.connectionState==="connecting"||this.isConnected()?(console.log("⚠️ WebSocket already connecting or connected"),Promise.resolve()):new Promise(async(u,d)=>{try{this.connectionState="connecting",this.emit("connectionStateChanged",{state:"connecting"});const m=c||await this.getWebSocketToken();if(!m){console.log("ℹ️ No authentication token available, skipping WebSocket connection"),this.connectionState="disconnected",this.emit("connectionStateChanged",{state:"disconnected"});return}const p=this.buildWebSocketUrl(m);console.log("🔗 Connecting to:",p),this.ws=new WebSocket(p,m),this.connectionTimeoutTimer=setTimeout(()=>{this.connectionState==="connecting"&&(this.ws.close(),d(new Error("Connection timeout")))},1e4),this.setupEnhancedEventHandlers(u,d)}catch(m){this.handleConnectionError(m),d(m)}})}buildWebSocketUrl(c){return window.location.hostname==="localhost"?(this.authToken=c,"ws://localhost:3000"):(this.authToken=c,"wss://oracles.africa/ws")}setupEnhancedEventHandlers(c,u){const d={value:!1};this.ws.onopen=m=>{this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),console.log("✅ Enhanced WebSocket connected"),this.connectionState="connected",this.metrics.connectionTime=new Date,this.reconnectAttempts=0,this.connectionId=`enh_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.startHeartbeat(),this.processMessageQueue(),this.resubscribeToChannels(),this.emit("connected",{connectionId:this.connectionId,serverTime:new Date().toISOString(),enhanced:!0}),d.value||(d.value=!0,c())},this.ws.onmessage=m=>{try{const p=JSON.parse(m.data);this.metrics.messagesReceived++,this.handleEnhancedMessage(p)}catch(p){console.error("💥 Failed to parse WebSocket message:",p)}},this.ws.onclose=m=>{this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),console.log(`🔌 Enhanced WebSocket disconnected - Code: ${m.code}, Reason: ${m.reason}`),this.handleDisconnection(m),d.value||(d.value=!0,u(new Error(`Connection failed: ${m.code} ${m.reason}`)))},this.ws.onerror=m=>{console.error("💥 Enhanced WebSocket error:",m),d.value||(d.value=!0,u(m))}}handleConnectionError(c){console.error("❌ WebSocket connection error:",c),this.connectionState="disconnected",this.lastError=c,this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),this.metrics.connectionErrors=(this.metrics.connectionErrors||0)+1,this.emit("error",c),c.message&&c.message.includes("token")&&console.warn("🔐 Token-related error, may need re-authentication")}handleEnhancedMessage(c){const{type:u,data:d,room:m,channel:p,priority:N="normal",timestamp:A}=c;switch(console.log(`📨 Enhanced message received: ${u}`,{room:m,channel:p,priority:N}),u){case"welcome":this.isAuthenticated=!0,this.emit("authenticated",d),console.log("🎉 Enhanced WebSocket authenticated:",d.user);break;case"auth_error":console.error("🚫 Authentication failed:",d.error),this.disconnect(),this.emit("auth_error",d);break;case"pong":this.metrics.lastPing=new Date;break;case"room_joined":this.rooms.add(d.room),console.log("🏠 Joined room:",d.room),this.emit("room_joined",d);break;case"room_left":this.rooms.delete(d.room),console.log("🚪 Left room:",d.room),this.emit("room_left",d);break;case"subscription_confirmed":d.channels?.forEach(j=>this.subscriptions.add(j)),this.emit("subscribed",d);break;case"error":console.error("⚠️ Server error:",d.error),this.emit("server_error",d);break;case"order_started":case"order_stopped":case"order_resumed":case"order_completed":this.emit("order_update",{type:u,data:d,timestamp:A,room:m,channel:p}),this.emit(u,{data:d,timestamp:A,room:m,channel:p});break;case"machine_status_changed":this.emit("machine_update",{type:u,data:d,timestamp:A,room:m,channel:p}),this.emit(u,{data:d,timestamp:A,room:m,channel:p});break;case"production_alert":this.emit("alert",{data:d,timestamp:A,priority:N,room:m,channel:p});break;case"user_notification":this.emit("notification",{data:d,timestamp:A,priority:N});break;default:this.emit(u,{data:d,timestamp:A,room:m,channel:p,priority:N});break}}subscribe(c,u=null){if(typeof c=="string"&&(c=[c]),!Array.isArray(c))return;c.forEach(m=>this.subscriptions.add(m));const d={channels:c};u&&(d.room=u,this.rooms.add(u)),this.isConnected()&&this.isAuthenticated?(this.send("subscribe",d),console.log("📺 Subscribing to channels:",c,u?`in room: ${u}`:"")):console.log("📺 Queued subscription (will subscribe when connected):",c)}joinRoom(c){this.isConnected()&&this.isAuthenticated?(this.send("join_room",{room:c}),console.log("🏠 Joining room:",c)):console.log("🏠 Queued room join:",c)}leaveRoom(c){this.isConnected()&&this.isAuthenticated&&(this.send("leave_room",{room:c}),this.rooms.delete(c),console.log("🚪 Leaving room:",c))}send(c,u={},d="normal"){const m={type:c,data:u,priority:d,timestamp:new Date().toISOString(),clientId:this.connectionId};if(!this.isConnected())return this.messageQueue.push(m),console.log("📬 Message queued:",c),!1;try{return this.ws.send(JSON.stringify(m)),this.metrics.messagesSent++,console.log(`📤 Enhanced message sent: ${c}`),!0}catch(p){return console.error("💥 Failed to send message:",p),this.messageQueue.push(m),!1}}processMessageQueue(){if(this.messageQueue.length===0)return;console.log(`📬 Processing ${this.messageQueue.length} queued messages`);const c=[...this.messageQueue];this.messageQueue=[],c.forEach(u=>{this.send(u.type,u.data,u.priority)})}resubscribeToChannels(){if(this.subscriptions.size>0){const c=Array.from(this.subscriptions);this.send("subscribe",{channels:c}),console.log("🔄 Resubscribed to channels:",c)}this.rooms.size>0&&(this.rooms.forEach(c=>{this.send("join_room",{room:c})}),console.log("🔄 Rejoined rooms:",Array.from(this.rooms)))}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=setInterval(()=>{if(this.isConnected()){const c=Date.now();this.send("ping",{clientTime:c})}},this.heartbeatInterval),console.log(`💓 Enhanced heartbeat started (${this.heartbeatInterval}ms)`)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}handleDisconnection(c){this.connectionState="disconnected",this.isAuthenticated=!1,this.stopHeartbeat(),this.emit("disconnected",{code:c.code,reason:c.reason,connectionTime:this.metrics.connectionTime,reconnectAttempts:this.reconnectAttempts}),c.code!==1e3&&c.code!==1001&&this.scheduleReconnect()}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.emit("max_reconnect_attempts");return}const c=this.reconnectDelay*Math.pow(2,this.reconnectAttempts),u=Math.random()*1e3,d=c+u;this.reconnectAttempts++,this.metrics.reconnections++,console.log(`🔄 Scheduling reconnection ${this.reconnectAttempts}/${this.maxReconnectAttempts} in ${Math.round(d)}ms`),this.connectionState="reconnecting",this.emit("connectionStateChanged",{state:"reconnecting",attempt:this.reconnectAttempts,delay:Math.round(d)}),this.reconnectTimer=setTimeout(()=>{this.connect().catch(m=>{console.warn("🔄 Reconnection failed:",m.message)})},d)}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}getConnectionStatus(){return{state:this.connectionState,isConnected:this.isConnected(),isAuthenticated:this.isAuthenticated,connectionId:this.connectionId,subscriptions:Array.from(this.subscriptions),rooms:Array.from(this.rooms),queuedMessages:this.messageQueue.length,metrics:{...this.metrics},reconnectAttempts:this.reconnectAttempts}}disconnect(){console.log("🔌 Disconnecting Enhanced WebSocket"),this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),this.connectionState="disconnected",this.isAuthenticated=!1,this.reconnectAttempts=0,this.connectionId=null,this.messageQueue=[],this.emit("disconnected",{deliberate:!0})}on(c,u){this.eventHandlers.has(c)||this.eventHandlers.set(c,new Set),this.eventHandlers.get(c).add(u),console.log(`👂 Handler registered for: ${c}`)}off(c,u){this.eventHandlers.has(c)&&this.eventHandlers.get(c).delete(u)}emit(c,u){this.eventHandlers.has(c)&&this.eventHandlers.get(c).forEach(d=>{try{d(u)}catch(m){console.error(`💥 Error in event handler for ${c}:`,m)}})}async getWebSocketToken(){try{const c=localStorage.getItem("token"),u={"Content-Type":"application/json"};c&&(u.Authorization=`Bearer ${c}`);const d=await fetch("/api/auth/websocket-token",{method:"GET",credentials:"include",headers:u});if(d.status===401)return console.warn("🚫 Not authenticated for WebSocket"),null;if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);return(await d.json()).token}catch(c){return console.error("Failed to get WebSocket token:",c),null}}getMetrics(){return{...this.metrics,uptime:this.metrics.connectionTime?Date.now()-this.metrics.connectionTime.getTime():0,subscriptionCount:this.subscriptions.size,roomCount:this.rooms.size,handlerCount:Array.from(this.eventHandlers.values()).reduce((c,u)=>c+u.size,0)}}resetMetrics(){this.metrics={messagesReceived:0,messagesSent:0,reconnections:0,lastPing:null,connectionTime:this.metrics.connectionTime}}}const pt=new jx;window.EnhancedWebSocketService=pt;const q0=gs.createContext(null),ys=()=>gs.useContext(q0),H0=({children:i})=>{const[c,u]=gs.useState(null),[d,m]=gs.useState(!0),[p,N]=gs.useState(!1),A=async()=>{m(!0);try{if(!localStorage.getItem("token")){console.log("🔐 No token found in localStorage"),u(null),N(!1),m(!1);return}console.log("🔐 Token found, verifying session...");const W=await window.API.verifySession(),C=W?.data?.user||W?.user;if(C){if(console.log("🔐 Session verified successfully:",C.username),u(C),N(!0),localStorage.setItem("user_data",JSON.stringify(C)),window.EnhancedWebSocketService&&!window.EnhancedWebSocketService.isConnected())try{console.log("🔐 User already authenticated - connecting WebSocket"),await window.EnhancedWebSocketService.connect()}catch(L){console.warn("⚠️ WebSocket connection failed for existing session:",L.message)}}else throw console.log("🔐 Session verification failed - no user data returned"),new Error("No user data returned from session verification")}catch(D){console.log("🔐 Session verification failed:",D.message),u(null),N(!1),localStorage.removeItem("user_data"),localStorage.removeItem("token")}finally{m(!1)}};gs.useEffect(()=>{A();const D=window.EventBus.on("auth:logout",()=>{u(null),N(!1),localStorage.removeItem("user_data"),localStorage.removeItem("token")});return()=>D()},[]);const Z={user:c,login:async(D,W)=>{const C=await window.API.login(D,W);if(C.data?.user&&C.data?.token&&(u(C.data.user),N(!0),localStorage.setItem("user_data",JSON.stringify(C.data.user)),localStorage.setItem("token",C.data.token),window.EnhancedWebSocketService))try{console.log("🔐 Connecting WebSocket after successful login"),await window.EnhancedWebSocketService.connect()}catch(L){console.warn("⚠️ WebSocket connection failed after login:",L.message)}return C},logout:async()=>{try{await window.API.logout()}catch(D){console.error("Logout failed:",D)}finally{if(window.EnhancedWebSocketService)try{console.log("🔌 Disconnecting WebSocket on logout"),window.EnhancedWebSocketService.disconnect()}catch(D){console.warn("⚠️ WebSocket disconnect failed on logout:",D.message)}u(null),N(!1),localStorage.removeItem("user_data"),localStorage.removeItem("token")}},loading:d,isAuthenticated:p,hasRole:D=>c?(Array.isArray(D)?D:[D]).includes(c.role):!1,checkAuth:A};return gs.createElement(q0.Provider,{value:Z},i)};window.useAuth=ys;window.AuthProvider=H0;class Nx{constructor(){this.routes=[],this.currentRoute=null,this.listening=!1}init(){this.listening=!0,window.addEventListener("popstate",c=>{this.handleRouteChange()}),this.handleRouteChange()}addRoute(c){this.routes.push(c)}navigate(c,u={}){c!==window.location.pathname&&(window.history.pushState({},"",c),this.handleRouteChange())}back(){window.history.back()}handleRouteChange(){const c=window.location.pathname,u=this.findRoute(c);this.currentRoute=u,window.EventBus&&window.EventBus.emit("router:navigation",{route:u,path:c,params:u?{}:null})}findRoute(c){return this.routes.find(u=>{if(u.path===c)return!0;const d=u.path.split("/"),m=c.split("/");return d.length!==m.length?!1:d.every((p,N)=>p.startsWith(":")||p===m[N])})}getCurrentRoute(){return{route:this.currentRoute,path:window.location.pathname,params:{},query:this.getQueryParams()}}getQueryParams(){const c=new URLSearchParams(window.location.search),u={};for(const[d,m]of c)u[d]=m;return u}updateQueryParams(c,u=!1){const d=new URL(window.location);Object.entries(c).forEach(([m,p])=>{p==null?d.searchParams.delete(m):d.searchParams.set(m,p)}),u?window.history.replaceState({},"",d):window.history.pushState({},"",d)}isActive(c,u=!1){const d=window.location.pathname;return u?d===c:d.startsWith(c)}link(c){return c}}const Oo=new Nx;window.Router=Oo;const wx=()=>{const[i,c]=React.useState(window.Router.getCurrentRoute());React.useEffect(()=>{const p=N=>{c({route:N.route,path:N.path,params:N.params||{},query:window.Router.getQueryParams()})};if(window.EventBus)return window.EventBus.on("router:navigation",p)},[]);const u=React.useCallback((p,N)=>{window.Router.navigate(p,N)},[]),d=React.useCallback(()=>{window.Router.back()},[]),m=React.useCallback((p,N)=>{window.Router.updateQueryParams(p,N)},[]);return{route:i.route,path:i.path,params:i.params,query:i.query,navigate:u,back:d,updateQuery:m,isActive:window.Router.isActive.bind(window.Router),link:window.Router.link.bind(window.Router)}};window.useRouter=wx;/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_x=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(c,u,d)=>d?d.toUpperCase():u.toLowerCase()),R0=i=>{const c=_x(i);return c.charAt(0).toUpperCase()+c.slice(1)},$0=(...i)=>i.filter((c,u,d)=>!!c&&c.trim()!==""&&d.indexOf(c)===u).join(" ").trim(),Ex=i=>{for(const c in i)if(c.startsWith("aria-")||c==="role"||c==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ax={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=f.forwardRef(({color:i="currentColor",size:c=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:m="",children:p,iconNode:N,...A},j)=>f.createElement("svg",{ref:j,...Ax,width:c,height:c,stroke:i,strokeWidth:d?Number(u)*24/Number(c):u,className:$0("lucide",m),...!p&&!Ex(A)&&{"aria-hidden":"true"},...A},[...N.map(([g,x])=>f.createElement(g,x)),...Array.isArray(p)?p:[p]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(i,c)=>{const u=f.forwardRef(({className:d,...m},p)=>f.createElement(Mx,{ref:p,iconNode:c,className:$0(`lucide-${Sx(R0(i))}`,`lucide-${i}`,d),...m}));return u.displayName=R0(i),u};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],qt=ge("activity",Tx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Dx=ge("arrow-down",Cx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kx=ge("arrow-left",Ox);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ux=ge("arrow-right",Rx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Lx=ge("arrow-up",zx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],wo=ge("bell",qx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Va=ge("calendar",Hx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ft=ge("chart-column",$x);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Yx=ge("chevron-down",Bx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gx=ge("circle-alert",Qx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ye=ge("circle-check-big",Vx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ir=ge("circle-x",Xx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],So=ge("clipboard-list",Zx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],It=ge("clock",Wx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],_o=ge("cpu",Kx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Jx=ge("database",Px);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ga=ge("download",Fx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],eg=ge("ellipsis-vertical",Ix);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$s=ge("eye",tg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Lt=ge("factory",ag);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],B0=ge("file-text",sg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ai=ge("funnel",lg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],Y0=ge("gauge",ng);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ig=ge("info",rg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],og=ge("layout-dashboard",cg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Eo=ge("lock",dg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],mg=ge("map-pin",ug);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],fg=ge("menu",hg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Rn=ge("moon",xg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],xa=ge("package",gg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],zn=ge("pause",pg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Fr=ge("pen-line",yg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Q0=ge("pen",bg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Ba=ge("play",vg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ua=ge("plus",jg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ot=ge("refresh-cw",Ng);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Sg=ge("rotate-ccw",wg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cn=ge("save",_g);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],si=ge("search",Eg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ut=ge("settings",Ag);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],On=ge("shield",Mg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Dn=ge("square",Tg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],ei=ge("sun",Cg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ya=ge("target",Dg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Ao=ge("timer",Og);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kn=ge("trash-2",kg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],ko=ge("trending-down",Rg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Hs=ge("trending-up",Ug);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zg=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mt=ge("triangle-alert",zg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],qg=ge("truck",Lg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],G0=ge("upload",Hg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qa=ge("user-check",$g);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],No=ge("user-plus",Bg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Qg=ge("user-x",Yg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vg=ge("user",Gg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],et=ge("users",Xg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Wg=ge("wifi-off",Zg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Pg=ge("wifi",Kg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],ps=ge("wrench",Jg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ml=ge("x",Fg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ln=ge("zap",Ig),ep={calendar:Va,users:et,search:si,plus:ua,check:Ye,x:Ml,clipboard:So,userCheck:Qa,settings:Ut,edit:Q0,save:Cn,trash:kn,upload:G0,download:Ga,activity:qt,package:xa,shield:On,dashboard:og,moreVertical:eg,clock:It,barChart3:Ft,menu:fg,wifi:Pg,wifiOff:Wg},Sa=({icon:i,size:c=24,className:u=""})=>{const d=ep[i];return d?t.jsx(d,{size:c,className:u}):t.jsx(et,{size:c,className:u})},tp=()=>{const[i,c]=f.useState(navigator.onLine),[u,d]=f.useState("disconnected"),[m,p]=f.useState(new Date);f.useEffect(()=>{const D=()=>{c(!0),p(new Date)},W=()=>{c(!1),p(new Date)};window.addEventListener("online",D),window.addEventListener("offline",W);const C=()=>{d("connected"),p(new Date)},L=()=>{d("disconnected"),p(new Date)},y=()=>{d("reconnecting"),p(new Date)},Q=()=>{d("error"),p(new Date)};if(window.WebSocketService){window.WebSocketService.on("connected",C),window.WebSocketService.on("authenticated",C),window.WebSocketService.on("disconnected",L),window.WebSocketService.on("reconnecting",y),window.WebSocketService.on("error",Q);const le=window.WebSocketService.getStatus();d(le.isConnected?"connected":le.state)}const E=setInterval(()=>{i&&p(new Date)},6e4);return()=>{window.removeEventListener("online",D),window.removeEventListener("offline",W),clearInterval(E),window.WebSocketService&&(window.WebSocketService.off("connected",C),window.WebSocketService.off("authenticated",C),window.WebSocketService.off("disconnected",L),window.WebSocketService.off("reconnecting",y),window.WebSocketService.off("error",Q))}},[i]);const N=i&&u==="connected",A=u==="reconnecting",j=u==="error"||!i;let g,x,Z;return A?(g="bg-yellow-100 text-yellow-800",x="Reconnecting...",Z="wifi"):N?(g="bg-green-100 text-green-800",x="Live",Z="wifi"):j?(g="bg-red-100 text-red-800",x=i?"Connection Error":"Offline",Z="wifiOff"):(g="bg-gray-100 text-gray-800",x="Connecting...",Z="wifi"),t.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs ${g}`,children:[t.jsx(Sa,{icon:Z,size:12,className:`${N?"text-green-600":j?"text-red-600":"text-yellow-600"} ${A?"animate-pulse":""}`}),t.jsx("span",{children:x}),t.jsx("span",{className:"text-gray-500 hidden sm:inline",children:m.toLocaleTimeString()})]})},ap=()=>{const{user:i,logout:c}=ys(),[u,d]=f.useState(!1);return i?t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-3 focus:outline-none",children:[t.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-lg font-semibold text-gray-700",children:i.username?i.username.charAt(0).toUpperCase():"U"})}),t.jsxs("div",{className:"hidden md:block text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:i.username}),t.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i.role})]})]}),u&&t.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:t.jsx("button",{onClick:c,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})})]}):null},sp=({onMenuClick:i})=>t.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:t.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsx("button",{onClick:i,className:"lg:hidden p-3 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Open navigation menu",children:t.jsx(Sa,{icon:"menu",size:24})}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("h1",{className:"text-xl font-semibold text-gray-900 hidden sm:block",children:"Production Management System"}),t.jsx("h1",{className:"text-lg font-semibold text-gray-900 sm:hidden",children:"PMS"}),t.jsx(tp,{})]}),t.jsx(ap,{})]})})}),lp=({isOpen:i,onClose:c})=>{const{user:u}=ys(),m=[{name:"Dashboard",href:"/",icon:"dashboard",priority:"critical",roles:["operator","supervisor","manager","admin"]},{name:"Production Monitor",href:"/production",icon:"activity",priority:"critical",roles:["operator","supervisor","manager","admin"]},{name:"Orders",href:"/orders",icon:"package",priority:"daily",roles:["operator","supervisor","manager","admin"]},{name:"Machines",href:"/machines",icon:"settings",priority:"daily",roles:["operator","supervisor","manager","admin"]},{name:"Labor Layout",href:"/labour-layout",icon:"users",priority:"daily",roles:["supervisor","manager","admin"]},{name:"Labor Planner",href:"/labor-planner",icon:"calendar",priority:"daily",roles:["supervisor","manager","admin"]},{name:"Analytics",href:"/analytics",icon:"barChart3",priority:"management",roles:["manager","admin"]},{name:"Shift Reports",href:"/shift-reports",icon:"clock",priority:"management",roles:["supervisor","manager","admin"]},{name:"Users",href:"/users",icon:"users",priority:"management",roles:["admin"]},{name:"Settings",href:"/settings",icon:"settings",priority:"management",roles:["supervisor","manager","admin"]},{name:"Admin",href:"/admin",icon:"shield",priority:"management",roles:["admin"]}].filter(x=>x.roles.includes(u?.role||"operator")),p=m.filter(x=>x.priority==="critical"),N=m.filter(x=>x.priority==="daily"),A=m.filter(x=>x.priority==="management"),j=(x,Z)=>{x.preventDefault(),window.history.pushState({},"",Z);const D=new PopStateEvent("popstate");window.dispatchEvent(D),c&&c()},g=(x,Z)=>x.length===0?null:t.jsxs("div",{className:"mb-4",children:[Z&&t.jsx("h3",{className:"px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:Z}),t.jsx("div",{className:"space-y-1",children:x.map(D=>t.jsxs("a",{href:D.href,onClick:W=>j(W,D.href),className:`group flex items-center px-3 py-3 text-sm font-medium rounded-md hover:bg-gray-700 hover:text-white transition-colors min-h-[44px] touch-manipulation ${window.location.pathname===D.href?"bg-gray-900 text-white":"text-gray-300"}`,children:[t.jsx(Sa,{icon:D.icon,size:18,className:"mr-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:D.name})]},D.name))})]});return t.jsxs(t.Fragment,{children:[i&&t.jsx("div",{className:"fixed inset-0 bg-black/30 z-30 lg:hidden",onClick:c}),t.jsxs("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-gray-800 text-white transform transition-transform ${i?"translate-x-0":"-translate-x-full"} lg:translate-x-0 lg:static lg:inset-0`,children:[t.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-700",children:[t.jsx("span",{className:"text-white font-semibold text-xl",children:"PMS"}),t.jsx("button",{onClick:c,className:"lg:hidden p-2 text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white rounded-md min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Close navigation menu",children:t.jsx(Sa,{icon:"x",size:20})})]}),t.jsx("div",{className:"px-4 py-3 border-b border-gray-700",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center mr-3",children:t.jsx("span",{className:"text-sm font-semibold text-white",children:u?.username?u.username.charAt(0).toUpperCase():"U"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-white",children:u?.username}),t.jsx("p",{className:"text-xs text-gray-300 capitalize",children:u?.role})]})]})}),t.jsxs("nav",{className:"flex-1 px-2 py-4 overflow-y-auto",children:[g(p,"Critical"),g(N,"Daily Operations"),g(A,"Management")]})]})]})};function np({children:i}){const[c,u]=f.useState(!1);return t.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[t.jsx(lp,{isOpen:c,onClose:()=>u(!1)}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsx(sp,{onMenuClick:()=>u(!0)}),t.jsx("main",{className:"flex-1 overflow-y-auto",children:t.jsx("div",{className:"py-6",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})]})}function rp(){const[i,c]=f.useState({username:"",password:""}),[u,d]=f.useState(""),[m,p]=f.useState(!1),{login:N}=ys(),A=async g=>{g.preventDefault(),d(""),p(!0);try{await N(i.username,i.password)}catch(x){d(x.message||"Login failed. Please try again.")}finally{p(!1)}},j=g=>x=>{c(Z=>({...Z,[g]:x.target.value})),u&&d("")};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:t.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Production Management"}),t.jsx("p",{className:"text-gray-600",children:"Sign in to continue"})]}),t.jsxs("form",{onSubmit:A,className:"space-y-6",children:[u&&t.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded",children:u}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),t.jsx("input",{type:"text",value:i.username,onChange:j("username"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,autoFocus:!0,disabled:m})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),t.jsx("input",{type:"password",value:i.password,onChange:j("password"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,disabled:m})]}),t.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-200 disabled:opacity-50",children:m?"Signing in...":"Sign In"})]})]})})}const ip=({notification:i,onClose:c})=>{const{type:u,title:d,message:m,timestamp:p}=i;f.useEffect(()=>{const j=setTimeout(()=>{c()},5e3);return()=>clearTimeout(j)},[c]);const N=()=>{switch(u){case"order_started":return"bg-blue-50 border-blue-200 text-blue-800";case"order_completed":return"bg-green-50 border-green-200 text-green-800";case"order_stopped":return"bg-red-50 border-red-200 text-red-800";case"order_resumed":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"machine_status_changed":return"bg-purple-50 border-purple-200 text-purple-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},A=()=>{switch(u){case"order_started":return"activity";case"order_completed":return"check";case"order_stopped":return"x";case"order_resumed":return"activity";case"machine_status_changed":return"settings";default:return"info"}};return t.jsx("div",{className:`mb-3 p-4 rounded-lg border-l-4 shadow-md transition-all duration-300 ${N()}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Sa,{icon:A(),size:20,className:"mt-0.5 mr-3 flex-shrink-0"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-semibold text-sm",children:d}),t.jsx("p",{className:"text-sm mt-1 text-gray-600",children:m}),t.jsx("p",{className:"text-xs mt-2 text-gray-500",children:new Date(p).toLocaleTimeString()})]}),t.jsx("button",{onClick:c,className:"ml-3 flex-shrink-0 text-gray-400 hover:text-gray-600",children:t.jsx(Sa,{icon:"x",size:16})})]})})},cp=()=>{const[i,c]=f.useState([]),[u,d]=f.useState(!1),m=f.useRef({});f.useEffect(()=>{if(!window.WebSocketService){console.warn("WebSocket service not available");return}const j=()=>{d(!0),window.WebSocketService.subscribe(["orders","machines","notifications"])},g=()=>{d(!1)},x=C=>{const{type:L,data:y,timestamp:Q}=C;let E,le;switch(L){case"order_started":E="Production Started",le=`Order ${y.order.order_number} started on ${y.order.machine_name} by ${y.operator}`;break;case"order_stopped":E="Production Stopped",le=`Order ${y.order.order_number} stopped - ${y.reason}`;break;case"order_resumed":E="Production Resumed",le=`Order ${y.order.order_number} resumed by ${y.resumed_by}`;break;case"order_completed":E="Order Completed",le=`Order ${y.order.order_number} completed (${y.efficiency.toFixed(1)}% efficiency)`;break;default:E="Order Update",le=`Order ${y.order?.order_number||"Unknown"} has been updated`}p({id:`${L}_${Date.now()}`,type:L,title:E,message:le,timestamp:Q,data:y})},Z=C=>{const{type:L,data:y,timestamp:Q}=C;L==="machine_status_changed"&&p({id:`machine_${y.machine_id}_${Date.now()}`,type:L,title:"Machine Status Changed",message:`Machine status updated to ${y.status}`,timestamp:Q,data:y})},D=C=>{const{data:L,timestamp:y}=C;p({id:`notification_${Date.now()}`,type:"notification",title:L.title||"System Notification",message:L.message||"You have a new notification",timestamp:y,data:L})};return m.current={handleConnected:j,handleDisconnected:g,handleOrderUpdate:x,handleMachineUpdate:Z,handleNotification:D},window.WebSocketService.on("connected",j),window.WebSocketService.on("authenticated",j),window.WebSocketService.on("disconnected",g),window.WebSocketService.on("order_update",x),window.WebSocketService.on("machine_update",Z),window.WebSocketService.on("notification",D),window.WebSocketService.getStatus().isConnected&&j(),()=>{const C=m.current;window.WebSocketService.off("connected",C.handleConnected),window.WebSocketService.off("authenticated",C.handleConnected),window.WebSocketService.off("disconnected",C.handleDisconnected),window.WebSocketService.off("order_update",C.handleOrderUpdate),window.WebSocketService.off("machine_update",C.handleMachineUpdate),window.WebSocketService.off("notification",C.handleNotification)}},[]);const p=j=>{c(g=>[j,...g.slice(0,4)])},N=j=>{c(g=>g.filter(x=>x.id!==j))},A=()=>{c([])};return i.length===0?null:t.jsxs("div",{className:"fixed top-4 right-4 z-50 w-96 max-w-sm",children:[t.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Live Updates"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${u?"bg-green-400":"bg-gray-400"}`}),t.jsx("button",{onClick:A,className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear All"})]})]}),t.jsx("div",{className:"space-y-3 max-h-screen overflow-y-auto",children:i.map(j=>t.jsx(ip,{notification:j,onClose:()=>N(j.id)},j.id))})]})},op=({maxItems:i=10})=>{const[c,u]=f.useState([]),[d,m]=f.useState(!1),p=f.useRef({});return f.useEffect(()=>{if(!window.WebSocketService)return;const N=()=>{m(!0)},A=()=>{m(!1)},j=x=>{const{type:Z,data:D,timestamp:W}=x;let C={id:`${Z}_${Date.now()}`,type:Z,timestamp:W,icon:"activity",color:"text-blue-600",data:D};switch(Z){case"order_started":C.message=`${D.operator} started production of ${D.order.order_number}`,C.icon="activity",C.color="text-blue-600";break;case"order_completed":C.message=`${D.completed_by} completed ${D.order.order_number} (${D.efficiency.toFixed(1)}% efficiency)`,C.icon="check",C.color="text-green-600";break;case"order_stopped":C.message=`${D.stopped_by} stopped ${D.order.order_number} - ${D.reason}`,C.icon="x",C.color="text-red-600";break;case"order_resumed":C.message=`${D.resumed_by} resumed ${D.order.order_number}`,C.icon="activity",C.color="text-yellow-600";break;case"machine_status_changed":C.message=`Machine status changed to ${D.status}`,C.icon="settings",C.color="text-purple-600";break;default:C.message="Unknown activity"}u(L=>[C,...L.slice(0,i-1)])};return p.current={handleConnected:N,handleDisconnected:A,handleActivity:j},window.WebSocketService.on("connected",N),window.WebSocketService.on("authenticated",N),window.WebSocketService.on("disconnected",A),window.WebSocketService.on("order_update",j),window.WebSocketService.on("machine_update",j),window.WebSocketService.getStatus().isConnected&&N(),()=>{const x=p.current;window.WebSocketService.off("connected",x.handleConnected),window.WebSocketService.off("authenticated",x.handleConnected),window.WebSocketService.off("disconnected",x.handleDisconnected),window.WebSocketService.off("order_update",x.handleActivity),window.WebSocketService.off("machine_update",x.handleActivity)}},[i]),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),t.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-400":"bg-gray-400"}`,title:d?"Live updates active":"No live connection"})]}),c.length===0?t.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activity"}):t.jsx("div",{className:"space-y-3",children:c.map(N=>t.jsxs("div",{className:"flex items-start space-x-3",children:[t.jsx(Sa,{icon:N.icon,size:16,className:`mt-0.5 ${N.color}`}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm text-gray-900",children:N.message}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(N.timestamp).toLocaleTimeString()})]})]},N.id))})]})};class U0 extends f.Component{constructor(c){super(c),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(c){return{hasError:!0}}componentDidCatch(c,u){this.setState({error:c,errorInfo:u}),console.error("Error caught by ErrorBoundary:",c,u)}getErrorMessage=c=>{const u={NETWORK_ERROR:{title:"Connection Problem",message:"Check your network connection and try again.",actions:["retry","work_offline"],severity:"warning"},MACHINE_OFFLINE:{title:"Machine Communication Lost",message:"Unable to communicate with selected machine.",actions:["check_machine","contact_maintenance"],severity:"critical"},DATA_SYNC_FAILED:{title:"Data Sync Failed",message:"Your changes may not be saved. Try again.",actions:["retry","save_locally"],severity:"warning"},SESSION_EXPIRED:{title:"Session Expired",message:"Please log in again to continue.",actions:["login"],severity:"warning"}},d=c?.code||(c?.message?.includes("fetch")?"NETWORK_ERROR":c?.message?.includes("session")?"SESSION_EXPIRED":"UNKNOWN");return u[d]||{title:"System Error",message:"An unexpected error occurred. Please try refreshing the page.",actions:["retry","contact_support"],severity:"critical"}};handleErrorAction=c=>{switch(c){case"retry":this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload();break;case"work_offline":this.setState({hasError:!1,error:null,errorInfo:null});break;case"check_machine":window.history.pushState({},"","/machines"),this.setState({hasError:!1,error:null,errorInfo:null});break;case"contact_maintenance":alert("Please contact maintenance team at ext. 1234");break;case"save_locally":console.log("Attempting to save data locally...");break;case"contact_support":alert("Please contact IT support at ext. 5678");break;case"login":localStorage.removeItem("token"),window.location.reload();break;default:console.log("Unknown action:",c)}};render(){if(this.state.hasError){const c=this.getErrorMessage(this.state.error);return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:t.jsx("div",{className:"max-w-md w-full space-y-8",children:t.jsx("div",{className:`p-6 rounded-lg border-l-4 ${c.severity==="critical"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Sa,{icon:"x",size:24,className:`mr-3 mt-1 ${c.severity==="critical"?"text-red-600":"text-yellow-600"}`}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:`font-bold text-lg ${c.severity==="critical"?"text-red-800":"text-yellow-800"}`,children:c.title}),t.jsx("p",{className:`mt-2 ${c.severity==="critical"?"text-red-700":"text-yellow-700"}`,children:c.message}),t.jsx("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row",children:c.actions.map(u=>t.jsx("button",{className:`flex-1 px-4 py-3 rounded text-sm font-medium min-h-[44px] touch-manipulation ${c.severity==="critical"?"bg-red-600 text-white hover:bg-red-700":"bg-yellow-600 text-white hover:bg-yellow-700"}`,onClick:()=>this.handleErrorAction(u),children:u.replace("_"," ").toUpperCase()},u))}),t.jsxs("details",{className:"mt-4",children:[t.jsx("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"Technical Details"}),t.jsxs("div",{className:"mt-2 p-3 bg-gray-100 rounded text-xs font-mono text-gray-700 overflow-auto max-h-32",children:[this.state.error&&this.state.error.toString(),t.jsx("br",{}),this.state.errorInfo?.componentStack||"No component stack available"]})]})]})]})})})})}return this.props.children}}const dp=({onSessionExpiring:i,onSessionExpired:c})=>{const[u,d]=f.useState(null),[m,p]=f.useState(!1),[N,A]=f.useState(!1),j=f.useCallback(async()=>{try{const Z=await oe.get("/auth/session-status"),D=Z.timeRemaining||Z.data?.timeRemaining;D!==void 0&&(d(D),D<3e5&&D>0?(p(!0),i?.(D)):D<=0?(p(!1),c?.()):p(!1))}catch(Z){console.error("Session check failed:",Z),Z.response?.status===401&&c?.()}},[i,c]),g=async()=>{A(!0);try{await oe.post("/auth/extend-session"),p(!1),d(null),console.log("Session extended successfully")}catch(Z){console.error("Failed to extend session:",Z),Z.response?.status===401&&c?.()}finally{A(!1)}};if(f.useEffect(()=>{const Z=setInterval(j,6e4);return j(),()=>clearInterval(Z)},[j]),!m)return null;const x=Math.ceil(u/6e4);return t.jsx("div",{className:"fixed top-4 right-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg z-50 max-w-sm w-full",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Sa,{icon:"clock",size:20,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-yellow-800",children:"Session Expiring"}),t.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["Your session will expire in ",x," minute",x!==1?"s":"","."]}),t.jsxs("div",{className:"mt-3 flex gap-2",children:[t.jsx("button",{onClick:g,disabled:N,className:"flex-1 bg-yellow-600 text-white px-3 py-2 rounded text-sm font-medium hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px] touch-manipulation flex items-center justify-center",children:N?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Extending..."]}):"Extend Session"}),t.jsx("button",{onClick:()=>p(!1),className:"px-3 py-2 text-yellow-700 hover:text-yellow-800 text-sm font-medium min-h-[44px] min-w-[44px] flex items-center justify-center",children:t.jsx(Sa,{icon:"x",size:16})})]})]})]})})},up=()=>{const[i,c]=f.useState("active"),u=f.useCallback(m=>{c("expiring"),console.log(`Session expiring in ${Math.ceil(m/6e4)} minutes`)},[]),d=f.useCallback(()=>{c("expired"),console.log("Session expired, redirecting to login..."),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"},[]);return{sessionStatus:i,handleSessionExpiring:u,handleSessionExpired:d}};function Ro(){const[i,c]=f.useState("disconnected"),[u,d]=f.useState(!1),[m,p]=f.useState(!1),[N,A]=f.useState({});f.useEffect(()=>{(()=>{const P=pt.getConnectionStatus();c(P.state),d(P.isConnected),p(P.isAuthenticated),A(pt.getMetrics())})();const L=setInterval(()=>{A(pt.getMetrics())},3e4),y=P=>{c(P.state)},Q=()=>{d(!0),c("connected")},E=()=>{d(!1),p(!1),c("disconnected")},le=()=>{p(!0)};return pt.on("connectionStateChanged",y),pt.on("connected",Q),pt.on("disconnected",E),pt.on("authenticated",le),()=>{clearInterval(L),pt.off("connectionStateChanged",y),pt.off("connected",Q),pt.off("disconnected",E),pt.off("authenticated",le)}},[]);const j=f.useCallback(async(C=null)=>{try{await pt.connect(C)}catch(L){console.error("Connection failed:",L)}},[]),g=f.useCallback(()=>{pt.disconnect()},[]),x=f.useCallback((C,L,y="normal")=>pt.send(C,L,y),[]),Z=f.useCallback((C,L=null)=>{pt.subscribe(C,L)},[]),D=f.useCallback(C=>{pt.joinRoom(C)},[]),W=f.useCallback(C=>{pt.leaveRoom(C)},[]);return{connectionStatus:i,isConnected:u,isAuthenticated:m,metrics:N,connect:j,disconnect:g,send:x,subscribe:Z,joinRoom:D,leaveRoom:W}}function tt(i,c,u=[]){const d=f.useRef(c);f.useEffect(()=>{d.current=c},u),f.useEffect(()=>{const m=p=>{d.current(p)};return pt.on(i,m),()=>{pt.off(i,m)}},[i])}function Uo(){const[i,c]=f.useState([]),[u,d]=f.useState(null);return tt("order_update",m=>{d({type:m.type,order:m.data.order,timestamp:m.timestamp}),c(p=>{const N=m.data.order?.id;if(!N)return p;const A=p.filter(j=>j.id!==N);return(m.type!=="order_completed"||!m.data.order.archived)&&A.push(m.data.order),A.sort((j,g)=>new Date(g.created_at)-new Date(j.created_at))})},[]),{orders:i,lastUpdate:u,setOrders:c}}function zo(){const[i,c]=f.useState([]),[u,d]=f.useState(null);return tt("machine_update",m=>{d({type:m.type,machine:m.data,timestamp:m.timestamp}),c(p=>{const N=m.data.machine_id;return N?p.map(A=>A.id===N?{...A,status:m.data.status,order_id:m.data.order_id}:A):p})},[]),{machines:i,lastUpdate:u,setMachines:c}}function qn(){const[i,c]=f.useState([]);tt("notification",m=>{const p={id:Date.now(),message:m.data.message||m.data,type:m.data.type||"info",timestamp:m.timestamp,priority:m.priority||"normal"};c(N=>[p,...N.slice(0,49)])},[]),tt("alert",m=>{const p={id:Date.now(),message:m.data.message||m.data,type:"alert",timestamp:m.timestamp,priority:m.priority||"high"};c(N=>[p,...N.slice(0,49)])},[]);const u=f.useCallback(m=>{c(p=>p.filter(N=>N.id!==m))},[]),d=f.useCallback(()=>{c([])},[]);return{notifications:i,clearNotification:u,clearAllNotifications:d,hasUnread:i.some(m=>!m.read)}}function Lo(){const{connectionStatus:i,isConnected:c,isAuthenticated:u,metrics:d}=Ro(),[m,p]=f.useState(!1);tt("connectionStateChanged",g=>{p(g.state==="reconnecting")},[]);const N=()=>{switch(i){case"connected":return u?"green":"yellow";case"connecting":return"blue";case"reconnecting":return"orange";case"error":return"red";default:return"gray"}},A=()=>{switch(i){case"connected":return u?"Connected":"Authenticating";case"connecting":return"Connecting...";case"reconnecting":return"Reconnecting...";case"error":return"Connection Error";default:return"Disconnected"}},j=()=>{switch(i){case"connected":return u?"🟢":"🟡";case"connecting":return"🔵";case"reconnecting":return"🟠";case"error":return"🔴";default:return"⚫"}};return{status:i,isConnected:c,isAuthenticated:u,showReconnecting:m,color:N(),text:A(),icon:j(),metrics:d}}function Bs(){const{connect:i,isConnected:c}=Ro();f.useEffect(()=>{const u=async()=>{try{const m=localStorage.getItem("token");if(!m){console.log("ℹ️ No token found, skipping WebSocket connection");return}const p=await fetch("/api/auth/verify-session",{method:"GET",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},credentials:"include"});p.ok&&!c?(console.log("🔐 User authenticated, connecting WebSocket..."),await i()):p.status===401&&(console.log("🚫 Token expired or invalid, removing from localStorage"),localStorage.removeItem("token"))}catch{console.log("ℹ️ Not authenticated, skipping WebSocket connection"),localStorage.getItem("token")&&(console.log("🧹 Removing potentially invalid token"),localStorage.removeItem("token"))}};localStorage.getItem("token")&&u()},[i,c])}function mp(){const[i,c]=f.useState(!1),[u,d]=f.useState({}),m=Lo(),{connect:p,disconnect:N,send:A}=Ro();return f.useEffect(()=>{const g=()=>{const Z={timestamp:new Date().toISOString(),location:window.location.href,userAgent:navigator.userAgent.substring(0,100)+"...",webSocketSupport:typeof WebSocket<"u",enhancedServiceExists:typeof window.EnhancedWebSocketService<"u",enhancedServiceStatus:window.EnhancedWebSocketService?window.EnhancedWebSocketService.getConnectionStatus():null,cookies:document.cookie?"Present":"None",protocols:window.location.protocol};d(Z)};g();const x=setInterval(g,2e3);return()=>clearInterval(x)},[]),i||window.location.hostname==="localhost"||window.location.search.includes("debug=websocket")||window.localStorage.getItem("websocket-debug")==="true"?t.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-4 max-w-md",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("h3",{className:"font-bold text-sm",children:"WebSocket Debug"}),t.jsx("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700",children:"×"})]}),t.jsxs("div",{className:"space-y-2 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:"Status:"}),t.jsx("span",{className:`px-2 py-1 rounded text-white ${m.isConnected?"bg-green-500":"bg-red-500"}`,children:m.text})]}),t.jsxs("div",{className:"border-t pt-2",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"WebSocket Support:"})," ",u.webSocketSupport?"✅":"❌"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Enhanced Service:"})," ",u.enhancedServiceExists?"✅":"❌"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Protocol:"})," ",u.protocols]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Cookies:"})," ",u.cookies]})]}),u.enhancedServiceStatus&&t.jsxs("div",{className:"border-t pt-2",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Connection ID:"})," ",u.enhancedServiceStatus.connectionId||"None"]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Subscriptions:"})," ",u.enhancedServiceStatus.subscriptions?.length||0]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Rooms:"})," ",u.enhancedServiceStatus.rooms?.length||0]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Queued Messages:"})," ",u.enhancedServiceStatus.queuedMessages||0]})]}),t.jsxs("div",{className:"border-t pt-2 flex gap-2",children:[t.jsx("button",{onClick:()=>p(),className:"px-2 py-1 bg-blue-500 text-white rounded text-xs",disabled:m.isConnected,children:"Connect"}),t.jsx("button",{onClick:()=>N(),className:"px-2 py-1 bg-red-500 text-white rounded text-xs",disabled:!m.isConnected,children:"Disconnect"}),t.jsx("button",{onClick:()=>A("ping"),className:"px-2 py-1 bg-green-500 text-white rounded text-xs",disabled:!m.isConnected,children:"Ping"})]}),t.jsx("div",{className:"border-t pt-2",children:t.jsx("button",{onClick:()=>{console.log("🐛 WebSocket Debug Info:",u),console.log("🐛 Enhanced Service:",window.EnhancedWebSocketService),console.log("🐛 Connection Status:",m)},className:"px-2 py-1 bg-gray-500 text-white rounded text-xs w-full",children:"Log Debug Info"})})]})]}):t.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:t.jsx("button",{onClick:()=>c(!0),className:"bg-gray-800 text-white px-3 py-1 rounded-full text-xs opacity-50 hover:opacity-100",title:"Show WebSocket Debug",children:"WS"})})}function hp(){const[i,c]=f.useState([]);qn(),f.useEffect(()=>{const N=setTimeout(()=>{c(A=>A.slice(0,-1))},5e3);return()=>clearTimeout(N)},[i.length]),tt("user_joined",N=>{u(`${N.data.username} joined the system`,"info")},[]),tt("user_left",N=>{u(`${N.data.username} left the system`,"info")},[]),tt("system_alert",N=>{u(N.data.message,"error")},[]),tt("system_maintenance",N=>{u(`System maintenance: ${N.data.message}`,"warning")},[]);const u=(N,A="info")=>{const j={id:Date.now(),message:N,type:A,timestamp:new Date};c(g=>[j,...g.slice(0,4)])},d=N=>{c(A=>A.filter(j=>j.id!==N))},m=N=>{switch(N){case"success":return t.jsx(Ye,{className:"w-5 h-5 text-green-500"});case"warning":return t.jsx(mt,{className:"w-5 h-5 text-yellow-500"});case"error":return t.jsx(mt,{className:"w-5 h-5 text-red-500"});default:return t.jsx(ig,{className:"w-5 h-5 text-blue-500"})}},p=N=>{switch(N){case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"error":return"bg-red-50 border-red-200 text-red-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return i.length===0?null:t.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:i.map(N=>t.jsxs("div",{className:`flex items-center gap-3 p-4 border rounded-lg shadow-lg max-w-sm animate-slide-in ${p(N.type)}`,children:[m(N.type),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium truncate",children:N.message}),t.jsx("p",{className:"text-xs opacity-75 mt-1",children:N.timestamp.toLocaleTimeString()})]}),t.jsx("button",{onClick:()=>d(N.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:t.jsx(Ml,{className:"w-4 h-4"})})]},N.id))})}var fp=L0();const xp=Co(fp),Dt=({children:i,onClose:c,title:u,size:d="medium",className:m=""})=>{const A=`bg-white rounded-lg shadow-xl transform transition-all duration-300 flex flex-col ${{small:"max-w-md w-full mx-4 max-h-[90vh]",medium:"max-w-2xl w-full mx-4 max-h-[90vh]",large:"max-w-7xl w-full mx-4 max-h-[95vh]",fullscreen:"max-w-[98vw] w-[98vw] h-[95vh]"}[d]} ${m}`;return xp.createPortal(t.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300 p-4",onClick:c,children:t.jsxs("div",{className:A,onClick:j=>j.stopPropagation(),children:[u&&t.jsx("div",{className:"flex-shrink-0 px-6 pt-6 pb-4 border-b border-gray-200",children:t.jsx("h2",{className:"text-xl font-bold text-gray-900",children:u})}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:i})]})}),document.getElementById("portal-root"))},Ne=({children:i,className:c="",...u})=>t.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${c}`,...u,children:i}),he=({children:i,variant:c="default",size:u="md",className:d="",disabled:m=!1,...p})=>{const N="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",A={default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500"},j={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return t.jsx("button",{className:`${N} ${A[c]} ${j[u]} ${d}`,disabled:m,...p,children:i})},De=({children:i,variant:c="default",size:u="md",className:d="",...m})=>{const p="inline-flex items-center font-medium rounded-full",N={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"},A={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"};return t.jsx("span",{className:`${p} ${N[c]} ${A[u]} ${d}`,...m,children:i})};function gp(){const[i,c]=f.useState(!1),{status:u,isConnected:d,isAuthenticated:m,showReconnecting:p,color:N,text:A,icon:j,metrics:g}=Lo(),x=()=>{switch(N){case"green":return"bg-green-500";case"yellow":return"bg-yellow-500";case"blue":return"bg-blue-500";case"orange":return"bg-orange-500";case"red":return"bg-red-500";default:return"bg-gray-500"}},Z=()=>{switch(N){case"green":return"text-green-700";case"yellow":return"text-yellow-700";case"blue":return"text-blue-700";case"orange":return"text-orange-700";case"red":return"text-red-700";default:return"text-gray-700"}},D=W=>{if(!W)return"0s";const C=Math.floor(W/1e3),L=Math.floor(C/60),y=Math.floor(L/60);return y>0?`${y}h ${L%60}m`:L>0?`${L}m ${C%60}s`:`${C}s`};return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 px-3 py-2 rounded-md transition-colors",onClick:()=>c(!i),title:"WebSocket Connection Status",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:`w-3 h-3 rounded-full ${x()}`,children:p&&t.jsx("div",{className:`absolute inset-0 rounded-full ${x()} opacity-75 animate-ping`})})}),t.jsx("span",{className:`text-sm font-medium ${Z()}`,children:A}),g.messagesReceived>0&&t.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:g.messagesReceived}),t.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&t.jsx("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"WebSocket Status"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("span",{className:"text-2xl",children:j}),t.jsx("span",{className:`font-medium ${Z()}`,children:A})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Status:"}),t.jsx("span",{className:`ml-2 font-medium ${Z()}`,children:u})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Authenticated:"}),t.jsx("span",{className:`ml-2 font-medium ${m?"text-green-600":"text-red-600"}`,children:m?"Yes":"No"})]})]}),d&&g&&t.jsxs("div",{className:"border-t pt-3",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Connection Metrics"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[t.jsxs("div",{children:[t.jsx("span",{children:"Messages Received:"}),t.jsx("span",{className:"ml-1 font-medium text-gray-900",children:g.messagesReceived||0})]}),t.jsxs("div",{children:[t.jsx("span",{children:"Messages Sent:"}),t.jsx("span",{className:"ml-1 font-medium text-gray-900",children:g.messagesSent||0})]}),t.jsxs("div",{children:[t.jsx("span",{children:"Reconnections:"}),t.jsx("span",{className:"ml-1 font-medium text-gray-900",children:g.reconnections||0})]}),t.jsxs("div",{children:[t.jsx("span",{children:"Uptime:"}),t.jsx("span",{className:"ml-1 font-medium text-gray-900",children:D(g.uptime)})]}),g.lastPing&&t.jsxs("div",{className:"col-span-2",children:[t.jsx("span",{children:"Last Ping:"}),t.jsx("span",{className:"ml-1 font-medium text-gray-900",children:new Date(g.lastPing).toLocaleTimeString()})]})]})]}),t.jsxs("div",{className:"border-t pt-3 flex space-x-2",children:[t.jsx("button",{onClick:()=>{d?window.EnhancedWebSocketService?.disconnect():window.EnhancedWebSocketService?.connect()},className:`px-3 py-1 text-xs font-medium rounded-md ${d?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:d?"Disconnect":"Connect"}),u==="error"&&t.jsx("button",{onClick:()=>window.EnhancedWebSocketService?.connect(),className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md",children:"Retry"}),t.jsx("button",{onClick:()=>{const W=window.EnhancedWebSocketService?.getMetrics();console.log("WebSocket Metrics:",W),console.log("WebSocket Status:",window.EnhancedWebSocketService?.getConnectionStatus())},className:"px-3 py-1 text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-md",children:"Debug"})]})]})]})})]})}function Hn(){const{icon:i,text:c,color:u}=Lo(),d=()=>{switch(u){case"green":return"text-green-600";case"yellow":return"text-yellow-600";case"blue":return"text-blue-600";case"orange":return"text-orange-600";case"red":return"text-red-600";default:return"text-gray-600"}};return t.jsxs("div",{className:"flex items-center space-x-1",title:`WebSocket: ${c}`,children:[t.jsx("span",{className:"text-sm",children:i}),t.jsx("span",{className:`text-xs font-medium ${d()}`,children:"WS"})]})}const pp=({value:i,duration:c=2e3,prefix:u="",suffix:d="",className:m=""})=>{const[p,N]=f.useState(0),A=f.useRef(null),j=f.useRef(null);return f.useEffect(()=>{const g=x=>{A.current||(A.current=x);const Z=Math.min((x-A.current)/c,1),D=1-Math.pow(1-Z,3);N(Math.floor(D*i)),Z<1&&(j.current=requestAnimationFrame(g))};return i>0?(A.current=null,j.current=requestAnimationFrame(g)):N(0),()=>{j.current&&cancelAnimationFrame(j.current)}},[i,c]),t.jsxs("span",{className:m,children:[u,p.toLocaleString(),d]})},Pr=({title:i,value:c,change:u,icon:d,color:m="blue",target:p,trend:N,sparklineData:A=[]})=>{const[j,g]=f.useState(!1),[x,Z]=f.useState(!1),D=f.useRef(null);f.useEffect(()=>{const L=new IntersectionObserver(([y])=>Z(y.isIntersecting),{threshold:.1});return D.current&&L.observe(D.current),()=>L.disconnect()},[]);const C={blue:{bg:"from-blue-500 to-cyan-500",shadow:"shadow-blue-200",glow:"bg-blue-100",text:"text-blue-700",accent:"border-blue-300"},green:{bg:"from-green-500 to-emerald-500",shadow:"shadow-green-200",glow:"bg-green-100",text:"text-green-700",accent:"border-green-300"},purple:{bg:"from-purple-500 to-indigo-500",shadow:"shadow-purple-200",glow:"bg-purple-100",text:"text-purple-700",accent:"border-purple-300"},orange:{bg:"from-orange-500 to-red-500",shadow:"shadow-orange-200",glow:"bg-orange-100",text:"text-orange-700",accent:"border-orange-300"},pink:{bg:"from-pink-500 to-rose-500",shadow:"shadow-pink-200",glow:"bg-pink-100",text:"text-pink-700",accent:"border-pink-300"}}[m];return t.jsxs("div",{ref:D,className:`group relative overflow-hidden rounded-2xl border ${C.accent} bg-white ${C.shadow} transition-all duration-700 hover:scale-105 hover:shadow-2xl ${x?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{transitionDelay:x?`${Math.random()*300}ms`:"0ms"},children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${C.bg} opacity-5 group-hover:opacity-10 transition-opacity duration-500`}),t.jsx("div",{className:`absolute inset-0 rounded-2xl ${C.glow} opacity-0 group-hover:opacity-20 blur-xl transition-all duration-500 scale-110`}),j&&t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((L,y)=>t.jsx("div",{className:`absolute w-1 h-1 ${C.glow} rounded-full animate-bounce`,style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${y*200}ms`,animationDuration:"2s"}},y))}),t.jsxs("div",{className:"relative p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${C.bg} shadow-lg transform transition-transform duration-300 group-hover:scale-110 group-hover:rotate-6`,children:t.jsx(d,{className:"w-6 h-6 text-white"})}),N&&t.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${N>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[N>0?t.jsx(Lx,{className:"w-3 h-3"}):t.jsx(Dx,{className:"w-3 h-3"}),Math.abs(N),"%"]})]}),t.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-2 group-hover:text-gray-800 transition-colors",children:i}),t.jsx("div",{className:"mb-3",children:t.jsxs("div",{className:`text-3xl font-bold ${C.text} group-hover:text-4xl transition-all duration-300`,children:[t.jsx(pp,{value:parseInt(c)||0}),typeof c=="string"&&c.includes("%")&&"%"]})}),p&&t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[t.jsx("span",{children:"Progress"}),t.jsxs("span",{children:[Math.round(parseInt(c)/p*100),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:t.jsx("div",{className:`h-2 bg-gradient-to-r ${C.bg} rounded-full transition-all duration-1000 ease-out transform origin-left`,style:{width:`${Math.min(parseInt(c)/p*100,100)}%`,transitionDelay:x?"500ms":"0ms"}})})]}),A.length>0&&t.jsx("div",{className:"h-8 flex items-end gap-0.5 opacity-70 group-hover:opacity-100 transition-opacity",children:A.slice(-12).map((L,y)=>t.jsx("div",{className:`w-1 bg-gradient-to-t ${C.bg} rounded-t opacity-60 transition-all duration-300 hover:opacity-100`,style:{height:`${L/Math.max(...A)*100}%`,animationDelay:`${y*50}ms`}},y))}),u!==void 0&&t.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-100",children:[t.jsxs("div",{className:`flex items-center gap-1 text-xs font-medium ${u>=0?"text-green-600":"text-red-600"}`,children:[u>=0?t.jsx(Hs,{className:"w-3 h-3"}):t.jsx(ko,{className:"w-3 h-3"}),Math.abs(u),"%"]}),t.jsx("span",{className:"text-xs text-gray-500",children:"vs last period"})]})]})]})},Mo=({active:i=!1,color:c="green"})=>t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:`w-3 h-3 bg-${c}-500 rounded-full ${i?"animate-pulse":""}`}),i&&t.jsx("div",{className:`absolute inset-0 w-3 h-3 bg-${c}-500 rounded-full animate-ping opacity-75`})]}),z0=({alert:i,index:c})=>{const[u,d]=f.useState(!1);f.useEffect(()=>{const A=setTimeout(()=>d(!0),c*100);return()=>clearTimeout(A)},[c]);const m={critical:{bg:"from-red-500 to-pink-500",border:"border-red-300",icon:mt,pulse:!0,glow:"shadow-red-200"},warning:{bg:"from-yellow-500 to-orange-500",border:"border-yellow-300",icon:It,pulse:!1,glow:"shadow-yellow-200"},info:{bg:"from-blue-500 to-cyan-500",border:"border-blue-300",icon:wo,pulse:!1,glow:"shadow-blue-200"}},p=m[i.type]||m.info,N=p.icon;return t.jsx("div",{className:`transform transition-all duration-500 ${u?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:t.jsx("div",{className:`group relative overflow-hidden rounded-xl border ${p.border} bg-white ${p.glow} hover:shadow-xl transition-all duration-300 hover:scale-102`,children:t.jsxs("div",{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-br ${p.bg} ${p.pulse?"animate-pulse":""}`,children:t.jsx(N,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.message}),t.jsx("p",{className:"text-xs text-gray-500",children:i.time.toLocaleTimeString()})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Mo,{active:i.type==="critical",color:i.type==="critical"?"red":i.type==="warning"?"yellow":"blue"}),t.jsx(De,{variant:i.type==="critical"?"danger":i.type==="warning"?"warning":"info",size:"sm",children:i.type})]})]})})})};function V0(){const[i,c]=f.useState({orders:{total:0,pending:0,in_progress:0,completed:0,paused:0},machines:{total:0,available:0,in_use:0,maintenance:0,offline:0},production:{efficiency:0,output:0,on_time_delivery:0},alerts:{critical:0,warning:0,info:0}}),[u,d]=f.useState([]),[m,p]=f.useState([]),[N,A]=f.useState(!0),[j,g]=f.useState(!1),[x,Z]=f.useState(null),[D,W]=f.useState("today"),[C,L]=f.useState(!1),[y,Q]=f.useState({orders:Array.from({length:20},()=>Math.floor(Math.random()*100)),machines:Array.from({length:20},()=>Math.floor(Math.random()*100)),efficiency:Array.from({length:20},()=>Math.floor(Math.random()*100))}),E=f.useRef(null);Bs();const{lastUpdate:le}=Uo(),{lastUpdate:P}=zo();qn(),f.useEffect(()=>(me(),E.current=setInterval(()=>{me(!0)},3e4),()=>{E.current&&clearInterval(E.current)}),[D]),f.useEffect(()=>{le&&(console.log("Dashboard received order update:",le),me(!0))},[le]),f.useEffect(()=>{P&&(console.log("Dashboard received machine update:",P),me(!0))},[P]),f.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["dashboard","orders","machines","production","alerts"])},[]);const H=(ue,se="success")=>{Z({message:ue,type:se}),setTimeout(()=>Z(null),3e3)},me=async(ue=!1)=>{ue?g(!0):A(!0);try{const[se,ce,k]=await Promise.all([oe.getOrders().catch(()=>[]),oe.getMachines().catch(()=>[]),oe.get("/users").catch(()=>[])]),F={total:se.length,pending:se.filter(V=>V.status==="pending").length,in_progress:se.filter(V=>V.status==="in_progress").length,completed:se.filter(V=>V.status==="completed").length,paused:se.filter(V=>V.status==="paused").length},S={total:ce.length,available:ce.filter(V=>V.status==="available").length,in_use:ce.filter(V=>V.status==="in_use").length,maintenance:ce.filter(V=>V.status==="maintenance").length,offline:ce.filter(V=>V.status==="offline").length},X=se.reduce((V,K)=>V+(parseInt(K.quantity)||0),0),O=se.filter(V=>V.status==="completed").reduce((V,K)=>V+(parseInt(K.actual_quantity||K.quantity)||0),0),B=X>0?Math.round(O/X*100):0,b=Math.round(75+Math.random()*20),$={efficiency:B,output:O,on_time_delivery:b},R=[{message:"Machine M001 efficiency below threshold",type:"warning",time:new Date},{message:"Order ORD-2024-001 completed successfully",type:"info",time:new Date(Date.now()-3e5)},{message:"Quality check required for Batch B123",type:"critical",time:new Date(Date.now()-6e5)}].slice(0,Math.floor(Math.random()*3)+1);c({orders:F,machines:S,production:$,alerts:{critical:1,warning:2,info:1}}),d(se.slice(0,5)),p(R),Q(V=>({orders:[...V.orders.slice(1),F.total],machines:[...V.machines.slice(1),S.in_use],efficiency:[...V.efficiency.slice(1),B]}))}catch(se){console.error("Failed to load dashboard data:",se),H("Failed to load dashboard data","danger")}finally{A(!1),g(!1)}},Se=()=>{me(!0)},He=[{label:"Create Order",icon:ua,action:()=>window.location.href="#/orders",color:"blue"},{label:"View Analytics",icon:Ft,action:()=>window.location.href="#/analytics",color:"purple"},{label:"Manage Machines",icon:Ut,action:()=>window.location.href="#/machines",color:"green"},{label:"Labor Planning",icon:et,action:()=>window.location.href="#/labor-planner",color:"orange"}],ee=f.useMemo(()=>m.filter(ue=>ue.type==="critical").slice(0,3),[m]),ae=({order:ue})=>t.jsxs("div",{className:"group flex items-center justify-between p-4 bg-white border border-gray-200 rounded-xl hover:shadow-lg hover:border-blue-300 transition-all duration-300 hover:scale-102",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-white font-bold text-sm bg-gradient-to-br ${ue.status==="completed"?"from-green-500 to-emerald-500":ue.status==="in_progress"?"from-blue-500 to-cyan-500":ue.status==="paused"?"from-yellow-500 to-orange-500":"from-gray-500 to-slate-500"} shadow-lg group-hover:scale-110 transition-transform duration-300`,children:ue.order_number?.slice(-3)||"N/A"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold text-gray-900 group-hover:text-blue-700 transition-colors",children:ue.order_number}),t.jsx("div",{className:"text-sm text-gray-600",children:ue.product_name}),ue.quantity&&t.jsxs("div",{className:"text-xs text-gray-500",children:[ue.quantity," units"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx(De,{variant:ue.status==="completed"?"success":ue.status==="in_progress"?"info":ue.status==="paused"?"warning":"secondary",className:"mb-2",children:ue.status?.replace("_"," ")}),t.jsx("div",{className:"text-xs text-gray-500",children:ue.created_at?new Date(ue.created_at).toLocaleDateString():"N/A"})]})]});return N?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center space-y-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-20 h-20 border-4 border-blue-200 rounded-full animate-spin border-t-blue-600 mx-auto"}),t.jsx("div",{className:"absolute inset-0 w-20 h-20 border-4 border-purple-200 rounded-full animate-ping mx-auto"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Loading Production Dashboard"}),t.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Initializing real-time manufacturing intelligence system..."}),t.jsx("div",{className:"flex items-center justify-center gap-2",children:[...Array(3)].map((ue,se)=>t.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:`${se*.2}s`}},se))})]})]})}):t.jsxs("div",{className:"min-h-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[t.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200/50 mb-8",children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl shadow-xl",children:t.jsx(Lt,{className:"w-8 h-8 text-white"})}),t.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full animate-pulse shadow-lg"})]}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-purple-900 bg-clip-text text-transparent",children:"Production Dashboard"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time manufacturing intelligence & performance metrics"})]}),t.jsx(Hn,{})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-100 rounded-full",children:[t.jsx(Mo,{active:!0,color:"green"}),t.jsx("span",{className:"font-medium text-green-800",children:"System Online"})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-100 rounded-full",children:[t.jsx(qt,{className:"w-4 h-4 text-blue-600"}),t.jsxs("span",{className:"font-medium text-blue-800",children:[i.orders.in_progress," Active Orders"]})]}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-purple-100 rounded-full",children:[t.jsx(_o,{className:"w-4 h-4 text-purple-600"}),t.jsxs("span",{className:"font-medium text-purple-800",children:[i.machines.in_use," Machines Running"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(he,{onClick:Se,disabled:j,variant:"outline",className:"bg-white/50 backdrop-blur-sm hover:bg-white/80 transition-all duration-300",children:[t.jsx(ot,{className:`w-4 h-4 mr-2 ${j?"animate-spin":""}`}),j?"Updating...":"Refresh"]}),t.jsxs(he,{onClick:()=>L(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all duration-300",children:[t.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Quick Actions"]})]})]})})}),x&&t.jsx("div",{className:`fixed top-20 right-6 p-4 rounded-xl shadow-2xl z-50 backdrop-blur-xl border transform transition-all duration-500 scale-105 ${x.type==="success"?"bg-green-100/90 text-green-800 border-green-300":x.type==="danger"?"bg-red-100/90 text-red-800 border-red-300":x.type==="warning"?"bg-yellow-100/90 text-yellow-800 border-yellow-300":"bg-blue-100/90 text-blue-800 border-blue-300"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:`p-2 rounded-full ${x.type==="success"?"bg-green-200":x.type==="danger"?"bg-red-200":x.type==="warning"?"bg-yellow-200":"bg-blue-200"}`,children:[x.type==="success"&&t.jsx(Ye,{className:"w-5 h-5 text-green-600"}),x.type==="danger"&&t.jsx(mt,{className:"w-5 h-5 text-red-600"}),x.type==="warning"&&t.jsx(mt,{className:"w-5 h-5 text-yellow-600"}),(!x.type||x.type==="info")&&t.jsx(wo,{className:"w-5 h-5 text-blue-600"})]}),t.jsx("span",{className:"font-semibold",children:x.message})]})}),t.jsxs("div",{className:"p-6 space-y-8",children:[ee.length>0&&t.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-2xl p-6 shadow-lg",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"p-2 bg-red-500 rounded-xl animate-pulse",children:t.jsx(mt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-red-900",children:"Critical System Alerts"}),t.jsx(De,{variant:"danger",children:ee.length})]}),t.jsx("div",{className:"space-y-3",children:ee.map((ue,se)=>t.jsx(z0,{alert:ue,index:se},se))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(Pr,{title:"Total Orders",value:i.orders.total,change:5,icon:xa,color:"blue",target:100,trend:8,sparklineData:y.orders}),t.jsx(Pr,{title:"Machine Utilization",value:`${Math.round(i.machines.in_use/Math.max(i.machines.total,1)*100)}%`,change:3,icon:Lt,color:"purple",target:80,trend:-2,sparklineData:y.machines}),t.jsx(Pr,{title:"On-Time Delivery",value:`${i.production.on_time_delivery}%`,change:2,icon:Ya,color:"green",target:95,trend:4,sparklineData:y.efficiency}),t.jsx(Pr,{title:"Active Production",value:i.orders.in_progress,change:-1,icon:qt,color:"orange",target:20,trend:-3,sparklineData:y.orders})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs(Ne,{className:"p-6 bg-white/80 backdrop-blur-sm border border-gray-200/50 shadow-xl rounded-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl",children:t.jsx(xa,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Recent Orders"})]}),t.jsx(De,{variant:"info",className:"px-3 py-1",children:u.length})]}),u.length>0?t.jsx("div",{className:"space-y-4",children:u.map(ue=>t.jsx(ae,{order:ue},ue.id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(xa,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),t.jsx("p",{className:"text-gray-500 text-lg",children:"No recent orders"})]})]}),t.jsxs(Ne,{className:"p-6 bg-white/80 backdrop-blur-sm border border-gray-200/50 shadow-xl rounded-2xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl",children:t.jsx(wo,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"System Alerts"})]}),t.jsx(De,{variant:"warning",className:"px-3 py-1",children:m.length})]}),m.length>0?t.jsx("div",{className:"space-y-4",children:m.map((ue,se)=>t.jsx(z0,{alert:ue,index:se},se))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ye,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),t.jsx("p",{className:"text-gray-500 text-lg",children:"All systems running smoothly"})]})]})]}),t.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200/50 shadow-xl rounded-2xl overflow-hidden",children:[t.jsx("div",{className:"p-6 border-b border-gray-200/50 bg-gradient-to-r from-indigo-50 to-purple-50",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-xl",children:t.jsx(qt,{className:"w-6 h-6 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Live Activity Feed"}),t.jsx(Mo,{active:!0,color:"green"})]})}),t.jsx(op,{maxItems:8})]})]}),C&&t.jsx(Dt,{title:"Quick Actions",onClose:()=>L(!1),className:"backdrop-blur-xl",children:t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"grid grid-cols-2 gap-4",children:He.map((ue,se)=>{const ce=ue.icon;return t.jsx("button",{onClick:()=>{ue.action(),L(!1)},className:`group p-6 rounded-2xl border-2 border-dashed border-gray-300 hover:border-${ue.color}-400 hover:bg-${ue.color}-50 transition-all duration-300 hover:scale-105 hover:shadow-lg`,children:t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("div",{className:`mx-auto w-12 h-12 bg-gradient-to-br from-${ue.color}-500 to-${ue.color}-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300`,children:t.jsx(ce,{className:"w-6 h-6 text-white"})}),t.jsx("div",{className:"font-semibold text-gray-900 group-hover:text-gray-700",children:ue.label})]})},se)})})})})]})}const Tl={name:"SAST",fullName:"South African Standard Time",offset:"+02:00",offsetMinutes:120,offsetHours:2,offsetMS:7200*1e3};function bs(){return new Date(Date.now()+Tl.offsetMS)}function Ys(i){if(!i)return null;const c=typeof i=="string"?new Date(i):i;return isNaN(c.getTime())?null:new Date(c.getTime()+Tl.offsetMS)}function yp(i){if(!i)return null;const c=new Date(i);return isNaN(c.getTime())?null:new Date(c.getTime()-Tl.offsetMS)}function bp(i,c={}){if(!i)return"N/A";const d={...{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},...c},m=Ys(i);return m?m.toLocaleString("en-ZA",d):"N/A"}function Un(i){if(!i)return"";const c=Ys(i);return c?c.toISOString().split("T")[0]:""}function vp(i){if(!i)return"N/A";const c=Ys(i);return c?c.toLocaleString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1}):"N/A"}function jp(i=null){const c=i?Ys(i):bs();if(!c)return"";const u=c.getFullYear(),d=String(c.getMonth()+1).padStart(2,"0"),m=String(c.getDate()).padStart(2,"0"),p=String(c.getHours()).padStart(2,"0"),N=String(c.getMinutes()).padStart(2,"0");return`${u}-${d}-${m}T${p}:${N}`}function Np(i=null){return Un(i||bs())}function wp(){return bs().toISOString()}function Sp(i=null){const c=i||new Date;return new Date(c.getTime()+Tl.offsetMS).toISOString()}function _p(i,c=null){if(!i)return 0;const u=new Date(i),d=c?new Date(c):bs();return Math.round((d.getTime()-u.getTime())/(1e3*60))}function Ep(){return Date.now()+Tl.offsetMS}function Ap(i){if(!i)return!1;const c=Un(i),u=Un(bs());return c===u}function Mp(i=null){const c=i?new Date(i):bs(),u=Ys(c),d=new Date(u);d.setHours(0,0,0,0);const m=new Date(u);return m.setHours(23,59,59,999),{startOfDay:d.toISOString(),endOfDay:m.toISOString()}}function Tp(i){if(i<0)return"0 seconds";const c=Math.floor(i/1e3),u=Math.floor(c/60),d=Math.floor(u/60),m=Math.floor(d/24);return m>0?`${m} day${m!==1?"s":""}, ${d%24} hour${d%24!==1?"s":""}`:d>0?`${d} hour${d!==1?"s":""}, ${u%60} minute${u%60!==1?"s":""}`:u>0?`${u} minute${u!==1?"s":""}, ${c%60} second${c%60!==1?"s":""}`:`${c} second${c!==1?"s":""}`}function Cp(i){const c=Ys(i),d=bs().getTime()-c.getTime(),m=Math.floor(d/(1e3*60)),p=Math.floor(m/60),N=Math.floor(p/24);return Math.abs(m)<1?"just now":Math.abs(m)<60?m>0?`${m} minutes ago`:`in ${Math.abs(m)} minutes`:Math.abs(p)<24?p>0?`${p} hours ago`:`in ${Math.abs(p)} hours`:Math.abs(N)<7?N>0?`${N} days ago`:`in ${Math.abs(N)} days`:Un(i)}const wa={TIMEZONE_CONFIG:Tl,getCurrentSASTTime:bs,toSAST:Ys,convertSASTToUTC:yp,formatSASTDateTime:bp,formatSASTDate:Un,formatSASTTime:vp,getSASTDateTimeLocal:jp,getSASTDateOnly:Np,getCurrentSASTISOString:wp,toSASTDatabaseString:Sp,calculateDurationMinutes:_p,getSASTTimestamp:Ep,isSASTToday:Ap,getSASTDayRange:Mp,formatDuration:Tp,getSASTRelativeTime:Cp},X0=({value:i,duration:c=2e3,prefix:u="",suffix:d="",className:m=""})=>{const[p,N]=f.useState(0),A=f.useRef(null),j=f.useRef(null);return f.useEffect(()=>{const g=x=>{A.current||(A.current=x);const Z=Math.min((x-A.current)/c,1),D=1-Math.pow(1-Z,3);N(Math.floor(D*i)),Z<1&&(j.current=requestAnimationFrame(g))};return A.current=null,j.current=requestAnimationFrame(g),()=>{j.current&&cancelAnimationFrame(j.current)}},[i,c]),t.jsxs("span",{className:m,children:[u,p.toLocaleString(),d]})},Dp=({title:i,value:c,change:u,icon:d,color:m="blue",target:p,trend:N,sparklineData:A=[]})=>{const[j,g]=f.useState(!1),[x,Z]=f.useState(!1),D=f.useRef(null);f.useEffect(()=>{const L=new IntersectionObserver(([y])=>Z(y.isIntersecting),{threshold:.1});return D.current&&L.observe(D.current),()=>L.disconnect()},[]);const W={blue:"from-blue-500 to-cyan-500",green:"from-green-500 to-emerald-500",yellow:"from-yellow-500 to-orange-500",purple:"from-purple-500 to-pink-500",red:"from-red-500 to-pink-500",gray:"from-gray-500 to-slate-500"},C={blue:"bg-gradient-to-br from-blue-50 to-cyan-50",green:"bg-gradient-to-br from-green-50 to-emerald-50",yellow:"bg-gradient-to-br from-yellow-50 to-orange-50",purple:"bg-gradient-to-br from-purple-50 to-pink-50",red:"bg-gradient-to-br from-red-50 to-pink-50",gray:"bg-gradient-to-br from-gray-50 to-slate-50"};return t.jsxs("div",{ref:D,className:`relative overflow-hidden rounded-2xl ${C[m]} backdrop-blur-xl
        border border-white/20 shadow-xl transition-all duration-500 ease-out
        ${j?"transform scale-105 shadow-2xl":"transform scale-100"}
        ${x?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,style:{background:j?"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.05) 100%)":void 0,backdropFilter:"blur(20px)"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${W[m]} opacity-10 
        transition-opacity duration-500 ${j?"opacity-20":"opacity-10"}`}),j&&t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((L,y)=>t.jsx("div",{className:"absolute w-1 h-1 bg-white/30 rounded-full animate-float",style:{left:`${20+Math.random()*60}%`,top:`${20+Math.random()*60}%`,animationDelay:`${y*.2}s`,animationDuration:"3s"}},y))}),t.jsxs("div",{className:"relative p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${W[m]} 
            shadow-lg transform transition-transform duration-300 
            ${j?"scale-110 rotate-3":"scale-100 rotate-0"}`,children:t.jsx(d,{className:"w-6 h-6 text-white"})}),u!==void 0&&t.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold
              ${u>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[t.jsx(Hs,{className:`w-3 h-3 ${u<0?"rotate-180":""}`}),Math.abs(u),"%"]})]}),t.jsxs("div",{className:"mb-2",children:[t.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-1",children:t.jsx(X0,{value:c,duration:2e3,className:"text-transparent bg-clip-text bg-gradient-to-r from-gray-800 to-gray-600"})}),t.jsx("p",{className:"text-sm font-medium text-gray-600",children:i})]}),p&&t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-xs text-gray-500",children:"Progress"}),t.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:[Math.round(c/p*100),"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:t.jsx("div",{className:`h-2 bg-gradient-to-r ${W[m]} rounded-full 
                  transition-all duration-1000 ease-out`,style:{width:`${Math.min(c/p*100,100)}%`,transform:x?"translateX(0)":"translateX(-100%)"}})})]}),A.length>0&&t.jsx("div",{className:"mt-4 h-12 flex items-end justify-between gap-1",children:A.map((L,y)=>{const Q=Math.max(L/Math.max(...A)*100,5);return t.jsx("div",{className:`bg-gradient-to-t ${W[m]} rounded-sm transition-all duration-500 opacity-70`,style:{height:`${Q}%`,width:`${100/A.length-2}%`,animationDelay:`${y*100}ms`}},y)})})]}),t.jsx("div",{className:`absolute inset-0 rounded-2xl transition-opacity duration-300
        ${j?"opacity-100":"opacity-0"}`,style:{background:"radial-gradient(circle at 50% 50%, rgba(255,255,255,0.1) 0%, transparent 70%)",pointerEvents:"none"}})]})},Op=({machine:i,onClick:c})=>{const[u,d]=f.useState(0),[m,p]=f.useState(!1),[N,A]=f.useState(!1),[j,g]=f.useState(!1),x=f.useRef(null);f.useEffect(()=>{const Q=new IntersectionObserver(([E])=>g(E.isIntersecting),{threshold:.1});return x.current&&Q.observe(x.current),()=>Q.disconnect()},[]),f.useEffect(()=>{p(!0);const Q=setTimeout(()=>p(!1),2e3);return()=>clearTimeout(Q)},[i.status,i.order_number]),f.useEffect(()=>{if(i.status==="in_use"){const Q=setInterval(()=>d(E=>E+1),1e3);return()=>clearInterval(Q)}},[i.status]);const Z={available:{gradient:"from-green-500 to-emerald-500",bg:"from-green-50 to-emerald-50",text:"text-green-700",icon:Ye,pulse:"bg-green-500",glow:"shadow-green-500/25"},in_use:{gradient:"from-blue-500 to-cyan-500",bg:"from-blue-50 to-cyan-50",text:"text-blue-700",icon:Ln,pulse:"bg-blue-500",glow:"shadow-blue-500/25"},maintenance:{gradient:"from-yellow-500 to-orange-500",bg:"from-yellow-50 to-orange-50",text:"text-yellow-700",icon:ps,pulse:"bg-yellow-500",glow:"shadow-yellow-500/25"},offline:{gradient:"from-red-500 to-pink-500",bg:"from-red-50 to-pink-50",text:"text-red-700",icon:Ir,pulse:"bg-red-500",glow:"shadow-red-500/25"}},D=Z[i.status]||Z.offline,W=D.icon,C=Z0(i),L=i.status==="in_use",y=i.order_number;return t.jsxs("div",{ref:x,className:`group relative overflow-hidden rounded-2xl backdrop-blur-xl
                border border-white/20 shadow-xl transition-all duration-500 ease-out
                ${y?"cursor-pointer":"cursor-default"}
                ${N?`transform scale-105 shadow-2xl ${D.glow}`:"transform scale-100"}
                ${j?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}
                bg-gradient-to-br ${D.bg}`,style:{background:N?"linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.05) 100%)":void 0,backdropFilter:"blur(20px)",animationDelay:`${Math.random()*200}ms`},onClick:()=>c&&c(i),onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${D.gradient} opacity-5 
                transition-opacity duration-500 ${N?"opacity-15":"opacity-5"}`}),t.jsx("div",{className:`absolute top-4 right-4 w-3 h-3 rounded-full ${D.pulse} 
                ${m?"animate-ping":""} opacity-20`}),t.jsx("div",{className:`absolute top-4 right-4 w-3 h-3 rounded-full ${D.pulse}`}),t.jsxs("div",{className:"relative p-6",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br ${D.gradient} 
                                shadow-lg transform transition-transform duration-300 
                                ${N?"scale-110 rotate-3":"scale-100 rotate-0"}`,children:t.jsx(W,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:i.name}),t.jsx("p",{className:"text-xs text-gray-500",children:i.type})]})]}),t.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold
                            bg-gradient-to-r ${D.gradient} text-white shadow-lg`,children:[i.status.replace("_"," ").toUpperCase(),L&&C>0&&t.jsxs("span",{className:"bg-white/20 px-2 py-0.5 rounded-full",children:[C,"%"]})]})]}),y&&t.jsx($s,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-500 transition-colors ml-2"})]}),y?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:i.order_number}),t.jsx("p",{className:"text-xs text-gray-600 truncate",children:i.product_name})]}),i.order_status==="stopped"&&t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-100 rounded-full",children:[t.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),t.jsx("span",{className:"text-xs font-semibold text-red-700",children:"STOPPED"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Ao,{className:"w-4 h-4"}),t.jsx("span",{className:"text-lg font-mono font-bold",children:kp(i.start_time)}),i.operator&&t.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[t.jsx(et,{className:"w-3 h-3"}),t.jsx("span",{className:"text-xs font-medium truncate max-w-16",children:i.operator})]})]})]}),C>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Efficiency"}),t.jsxs("span",{className:"text-xs font-bold text-gray-800",children:[C,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:t.jsx("div",{className:`h-2 bg-gradient-to-r transition-all duration-1000 ease-out rounded-full ${C>=90?"from-green-500 to-emerald-500":C>=70?"from-yellow-500 to-orange-500":"from-red-500 to-pink-500"}`,style:{width:`${Math.min(C,100)}%`,transform:j?"translateX(0)":"translateX(-100%)"}})})]})]}):t.jsx("div",{className:"flex items-center justify-center h-20",children:t.jsxs("div",{className:"text-center text-gray-400",children:[t.jsx(Lt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-xs font-medium",children:i.status.replace("_"," ").toUpperCase()})]})})]}),t.jsx("div",{className:`absolute inset-0 rounded-2xl transition-opacity duration-300
                ${N?"opacity-100":"opacity-0"}`,style:{background:"linear-gradient(135deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%)",transform:N?"translateX(100%)":"translateX(-100%)",transition:"transform 0.6s ease-out, opacity 0.3s ease-out",pointerEvents:"none"}})]})},kp=i=>{if(!i)return"00:00:00";const c=wa.toSAST(i).getTime(),u=wa.getSASTTimestamp(),d=Math.max(0,u-c),m=Math.floor(d/36e5).toString().padStart(2,"0"),p=Math.floor(d%36e5/6e4).toString().padStart(2,"0"),N=Math.floor(d%6e4/1e3).toString().padStart(2,"0");return`${m}:${p}:${N}`},Z0=i=>{if(!i.start_time||i.status!=="in_use")return 0;const c=new Date(i.start_time).getTime(),d=(Date.now()-c)/36e5*(i.production_rate||60),m=i.actual_quantity||0;return d>0?Math.min(100,Math.round(m/d*100)):0},Rp=({machines:i,activeOrders:c,todayStats:u,efficiency:d})=>{const[m,p]=f.useState(!1),N=f.useRef(null);f.useEffect(()=>{const g=new IntersectionObserver(([x])=>p(x.isIntersecting),{threshold:.1});return N.current&&g.observe(N.current),()=>g.disconnect()},[]);const A=f.useMemo(()=>{const g=i.length,x=i.filter(y=>y.status==="in_use").length,Z=i.filter(y=>y.status==="available").length,D=i.filter(y=>y.status==="maintenance").length,W=i.filter(y=>y.status==="offline").length,C=d||(x>0?Math.round(i.filter(y=>y.status==="in_use").reduce((y,Q)=>y+Z0(Q),0)/x):0),L=g>0?Math.round(x/g*100):0;return{total:g,running:x,available:Z,maintenance:D,offline:W,avgEfficiency:C,utilizationRate:L,activeOrders:c.length,totalOrders:u.total_orders||0,completedOrders:u.completed_orders||0}},[i,c,u,d]),j=[{title:"Total Machines",value:A.total,icon:Lt,color:"gray",change:void 0,target:void 0},{title:"Running Now",value:A.running,icon:Ln,color:"blue",change:void 0,target:A.total,sparklineData:[2,4,3,5,4,6,5,7,6,A.running]},{title:"Available",value:A.available,icon:Ye,color:"green",change:void 0,target:void 0},{title:"Utilization Rate",value:A.utilizationRate,icon:Y0,color:"purple",change:12,target:100,sparklineData:[65,70,68,75,72,78,76,82,79,A.utilizationRate]},{title:"Active Orders",value:A.activeOrders,icon:Ya,color:"yellow",change:8,target:A.totalOrders,sparklineData:[1,2,3,2,4,3,5,4,6,A.activeOrders]},{title:"Maintenance",value:A.maintenance,icon:ps,color:"yellow",change:-3,target:void 0}];return t.jsxs("div",{ref:N,className:"space-y-6",children:[t.jsxs("div",{className:`transition-all duration-700 ${m?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg",children:t.jsx(Ft,{className:"w-6 h-6 text-white"})}),"Production Performance"]}),t.jsx("p",{className:"text-gray-600",children:"Real-time insights into your manufacturing operations"})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:j.map((g,x)=>t.jsx("div",{style:{animationDelay:`${x*100}ms`},children:t.jsx(Dp,{...g})},g.title))})]})},Up=({isOpen:i,onClose:c,orderId:u,orderNumber:d})=>{const[m,p]=f.useState(null),[N,A]=f.useState(!1),[j,g]=f.useState(""),[x,Z]=f.useState(0),D=f.useCallback(async()=>{if(!(!u||!i)){A(!0),g("");try{console.log("Fetching order details for ID:",u);const L=await oe.get("/orders");console.log("Orders response:",L);const Q=(L.data||L||[]).find(le=>le.id==u);if(!Q)throw new Error(`Order with ID ${u} not found`);let E=[];try{const le=await oe.get(`/reports/downtime?order_id=${u}`);if(E=le.records||le.data?.records||[],console.log("Downtime response for order",u,":",le),!Array.isArray(E)||E.length===0){console.log("No stops found for specific order, trying all stops...");const P=await oe.get("/reports/downtime"),H=P.records||P.data?.records||[];console.log("All stops:",H),E=Array.isArray(H)?H.filter(me=>me.order_id==u):[]}}catch(le){console.log("Downtime endpoint error:",le),E=[]}p({order:Q,stops:Array.isArray(E)?E:[]})}catch(L){console.error("Failed to fetch order details:",L),g(L.message||"Failed to load order details")}finally{A(!1)}}},[u,i]);f.useEffect(()=>{D()},[D]),f.useEffect(()=>{if(i&&m?.stops?.some(L=>!L.end_time)){const L=setInterval(()=>Z(y=>y+1),1e3);return()=>clearInterval(L)}},[i,m?.stops]);const W=f.useCallback(L=>!L||!Array.isArray(L)||L.length===0?0:L.reduce((y,Q)=>{if(Q.start_time){const E=new Date(Q.start_time).getTime();let le;return Q.end_time?le=new Date(Q.end_time).getTime():le=Date.now(),y+(le-E)}return y},0),[x]),C=f.useCallback(L=>{if(!L||L===0)return"0m";const y=Math.floor(L/6e4),Q=Math.floor(y/60);return Q>0?`${Q}h ${y%60}m`:`${y}m`},[]);return i?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true",children:t.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md transition-opacity",onClick:c}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"​"}),t.jsxs("div",{className:"inline-block align-bottom bg-white/95 backdrop-blur-xl rounded-3xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full border border-white/20",children:[t.jsxs("div",{className:"bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 px-8 py-6 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(59,130,246,0.1),transparent)]"}),t.jsxs("div",{className:"relative flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-sm rounded-xl",children:t.jsx(Ya,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-white",children:d}),m&&t.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold mt-1 ${m.order.status==="stopped"?"bg-red-500/20 text-red-200 border border-red-500/30":m.order.status==="in_progress"?"bg-blue-500/20 text-blue-200 border border-blue-500/30":m.order.status==="completed"?"bg-green-500/20 text-green-200 border border-green-500/30":"bg-gray-500/20 text-gray-200 border border-gray-500/30"}`,children:[m.order.status==="stopped"&&t.jsx("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"}),m.order.status.replace("_"," ").toUpperCase()]})]})]}),t.jsx("button",{onClick:c,className:"text-white/70 hover:text-white focus:outline-none focus:ring-2 focus:ring-white/20 rounded-xl p-2 hover:bg-white/10 transition-all duration-200",children:t.jsx(Ml,{className:"w-6 h-6"})})]})]}),t.jsxs("div",{className:"p-8",children:[N&&t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ot,{className:"w-6 h-6 animate-spin text-blue-500"}),t.jsx("span",{className:"text-gray-600 font-medium",children:"Loading order details..."})]})}),j&&t.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl mb-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(mt,{className:"w-5 h-5 text-red-500"}),t.jsx("span",{className:"text-red-800 font-medium",children:j})]})}),m&&!N&&t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4 border border-blue-100",children:t.jsxs("div",{className:"text-center",children:[t.jsx(It,{className:"w-6 h-6 text-blue-500 mx-auto mb-2"}),t.jsx("div",{className:"text-lg font-bold text-gray-900",children:m.order.start_time?new Date(m.order.start_time).toLocaleString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1}):"--:--"}),t.jsx("div",{className:"text-sm text-gray-600",children:m.order.start_time?new Date(m.order.start_time).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}):"Started"})]})}),t.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-100",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ya,{className:"w-6 h-6 text-green-500 mx-auto mb-2"}),t.jsx("div",{className:"text-lg font-bold text-gray-900",children:m.order.quantity?.toLocaleString()||"0"}),t.jsx("div",{className:"text-sm text-gray-600",children:"Target Qty"})]})}),t.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ft,{className:"w-6 h-6 text-purple-500 mx-auto mb-2"}),t.jsx("div",{className:"text-lg font-bold text-gray-900",children:(m.order.actual_quantity||0).toLocaleString()}),t.jsx("div",{className:"text-sm text-gray-600",children:"Produced"})]})}),t.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-4 border border-orange-100",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Y0,{className:"w-6 h-6 text-orange-500 mx-auto mb-2"}),t.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[Math.round((m.order.actual_quantity||0)/m.order.quantity*100),"%"]}),t.jsx("div",{className:"text-sm text-gray-600",children:"Complete"})]})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-2xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h4",{className:"text-xl font-bold text-gray-900 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg",children:t.jsx(mt,{className:"w-5 h-5 text-white"})}),"Downtime Analysis"]}),m.order.status==="stopped"&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-100 px-3 py-2 rounded-full border border-red-200",children:[t.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),t.jsx("span",{className:"font-semibold",children:"ACTIVE STOP"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:t.jsx(X0,{value:m.stops.length})}),t.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Stops"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-red-600 mb-2",children:C(W(m.stops))}),t.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Time"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2",children:m.stops.length>0?C(W(m.stops)/m.stops.length):"0m"}),t.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Avg Duration"})]})]})]}),!m.stops||!Array.isArray(m.stops)||m.stops.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:t.jsx(It,{className:"w-8 h-8 text-gray-400"})}),t.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"No stops recorded"}),t.jsx("p",{className:"text-gray-400 text-sm",children:"This order has been running smoothly"})]}):t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-gray-500 to-slate-500 rounded-lg",children:t.jsx(It,{className:"w-5 h-5 text-white"})}),"Stop History (",m.stops.length,")"]}),t.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:(m.stops||[]).map((L,y)=>t.jsx("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl p-4 hover:border-gray-300 hover:shadow-md transition-all duration-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${L.end_time?"bg-gray-400":"bg-red-500 animate-pulse"}`}),t.jsx("span",{className:"font-semibold text-gray-900 text-sm",children:L.reason.replace("_"," ").replace(/\b\w/g,Q=>Q.toUpperCase())}),t.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${L.category==="Equipment"?"bg-red-100 text-red-700 border border-red-200":L.category==="Material"?"bg-orange-100 text-orange-700 border border-orange-200":L.category==="Quality"?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-gray-100 text-gray-700 border border-gray-200"}`,children:L.category||"Other"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[t.jsx("span",{className:"font-mono",children:new Date(L.start_time).toLocaleString("en-ZA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})}),L.end_time&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"→"}),t.jsx("span",{className:"font-mono",children:new Date(L.end_time).toLocaleString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1})})]})]})]}),t.jsxs("div",{className:"text-right ml-4",children:[t.jsx("div",{className:`text-lg font-bold ${L.end_time?"text-gray-900":"text-red-600"}`,children:L.start_time?C(L.end_time?new Date(L.end_time).getTime()-new Date(L.start_time).getTime():Date.now()-new Date(L.start_time).getTime()):t.jsx("span",{className:"text-orange-500",children:"Unknown"})}),t.jsx("div",{className:`text-xs font-medium ${L.end_time?"text-gray-500":"text-red-600"}`,children:L.end_time?"resolved":"ACTIVE"})]})]})},y))})]})]})]}),t.jsx("div",{className:"bg-gray-50/80 backdrop-blur-sm px-8 py-6 border-t border-gray-200",children:t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:c,className:"px-8 py-3 bg-gradient-to-r from-gray-900 to-slate-800 text-white rounded-xl hover:from-gray-800 hover:to-slate-700 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105",children:"Close Details"})})})]})]})}):null};function zp(){const[i,c]=f.useState({activeOrders:[],machineStatus:[],todayStats:{},efficiency:0}),[u,d]=f.useState(!0),[m,p]=f.useState(new Date),[N,A]=f.useState(null),[j,g]=f.useState("all"),[x,Z]=f.useState(!1),[D,W]=f.useState(null),[C,L]=f.useState(!1);Bs(),Uo(),zo(),qn();const y=f.useCallback(async()=>{try{A(null);const P=await oe.get("/production/floor-overview");console.log("Production floor overview data:",P);const H=P.activeOrders||[],me=P.machineStatus||[],Se=P.todayStats||{};console.log("Active orders:",H),console.log("Machine status:",me),console.log("Today stats:",Se),c(P||{})}catch(P){console.error("Failed to fetch production data:",P),A(P.message||"Failed to fetch production data")}finally{d(!1),p(new Date),Z(!1)}},[]),Q=()=>{Z(!0),y()},E=P=>{P.order_id&&P.order_number?(W({id:P.order_id,number:P.order_number,machineId:P.id,machineName:P.name,status:P.status}),L(!0)):console.log("Machine clicked (no assigned order):",P)};f.useEffect(()=>{y();const P=setInterval(y,5e3);return()=>clearInterval(P)},[y]),tt("order_started",P=>{console.log("🟢 Production started:",P.data.order),y(),p(new Date)},[y]),tt("order_stopped",P=>{console.log("🟡 Production stopped:",P.data.order),c(H=>H.map(me=>me.id===P.data.order.machine_id?{...me,status:"available",order_number:null,order_id:null}:me)),p(new Date)},[]),tt("order_resumed",P=>{console.log("🔵 Production resumed:",P.data.order),c(H=>H.map(me=>me.id===P.data.order.machine_id?{...me,status:"in_use",order_number:P.data.order.order_number,order_id:P.data.order.id,start_time:P.data.order.start_time}:me)),p(new Date)},[]),tt("order_completed",P=>{console.log("✅ Production completed:",P.data.order),c(H=>H.map(me=>me.id===P.data.order.machine_id?{...me,status:"available",order_number:null,order_id:null}:me)),p(new Date)},[]),tt("machine_status_changed",P=>{console.log("🔧 Machine status changed:",P.data),c(H=>H.map(me=>me.id===P.data.machine_id?{...me,status:P.data.status}:me)),p(new Date)},[]),f.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["production","orders","machines"])},[]);const le=f.useMemo(()=>{const P=i.machineStatus||[];return j==="all"?P:P.filter(H=>H.status===j)},[i,j]);return u?t.jsx("div",{className:"min-h-96 bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center mb-4 mx-auto animate-pulse",children:t.jsx(Lt,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-600",children:[t.jsx(ot,{className:"w-5 h-5 animate-spin"}),t.jsx("span",{className:"text-lg font-medium",children:"Loading Production Floor Data..."})]})]})}):N?t.jsx("div",{className:"min-h-96 bg-gradient-to-br from-gray-50 to-red-50 flex items-center justify-center p-6",children:t.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-red-200 rounded-2xl p-8 max-w-md mx-auto text-center shadow-2xl",children:[t.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-pink-500 rounded-2xl flex items-center justify-center mb-4 mx-auto",children:t.jsx(mt,{className:"w-8 h-8 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Connection Error"}),t.jsx("p",{className:"text-gray-600 mb-2",children:"Failed to load production data"}),t.jsx("p",{className:"text-red-600 text-sm mb-6",children:N}),t.jsx("button",{onClick:Q,className:"w-full px-6 py-3 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-xl hover:from-red-600 hover:to-pink-600 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105",children:"Try Again"})]})}):t.jsxs("div",{className:"min-h-full bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50",children:[t.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-white/20 mb-8",children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-2xl shadow-lg",children:t.jsx(Lt,{className:"w-8 h-8 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 via-blue-800 to-purple-800 bg-clip-text text-transparent",children:"Production Floor Monitor"}),t.jsxs("p",{className:"text-gray-600 mt-1 flex items-center gap-2",children:["Real-time production monitoring and machine intelligence",t.jsx(Hn,{})]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 bg-white/60 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[t.jsx(ai,{className:"w-4 h-4 text-gray-500"}),t.jsxs("select",{value:j,onChange:P=>g(P.target.value),className:"bg-transparent border-none text-sm font-medium text-gray-700 focus:outline-none cursor-pointer",children:[t.jsx("option",{value:"all",children:"All Machines"}),t.jsx("option",{value:"in_use",children:"🔵 Running"}),t.jsx("option",{value:"available",children:"🟢 Available"}),t.jsx("option",{value:"maintenance",children:"🟡 Maintenance"}),t.jsx("option",{value:"offline",children:"🔴 Offline"})]})]}),t.jsxs("button",{onClick:Q,disabled:x,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl transform hover:scale-105",children:[t.jsx(ot,{className:`w-4 h-4 ${x?"animate-spin":""}`}),x?"Syncing...":"Refresh"]})]})]})})}),t.jsxs("div",{className:"p-6 space-y-8",children:[t.jsx(Rp,{machines:i.machineStatus||[],activeOrders:i.activeOrders||[],todayStats:i.todayStats||{},efficiency:i.efficiency||0}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-teal-500 rounded-lg",children:t.jsx(Ut,{className:"w-6 h-6 text-white"})}),"Machine Status Grid",t.jsxs("span",{className:"text-lg font-normal text-gray-500",children:["(",le.length," machines)"]})]}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Last updated: ",m.toLocaleTimeString()]})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:le.map((P,H)=>t.jsx(Op,{machine:P,onClick:E},P.id))}),le.length===0&&t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-gray-400 to-gray-500 rounded-2xl flex items-center justify-center mx-auto mb-6",children:t.jsx(qt,{className:"w-10 h-10 text-white"})}),t.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Machines Found"}),t.jsx("p",{className:"text-gray-500",children:"No machines match the selected filter criteria"})]})]})]}),t.jsx(Up,{isOpen:C,onClose:()=>L(!1),orderId:D?.id,orderNumber:D?.number}),t.jsx("style",{jsx:!0,children:`
                @keyframes float {
                    0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0; }
                    50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
                }
                .animate-float {
                    animation: float 3s ease-in-out infinite;
                }
            `})]})}const Lp=()=>{const[i,c]=f.useState(!1),[u,d]=f.useState(!1),[m,p]=f.useState({width:0,height:0});return f.useEffect(()=>{const N=()=>{const A=window.innerWidth,j=window.innerHeight;p({width:A,height:j}),c(A<768),d(A>=768&&A<1024)};return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]),{isMobile:i,isTablet:u,screenSize:m,isDesktop:!i&&!u}},qs=({children:i,onClick:c,variant:u="primary",size:d="md",disabled:m=!1,loading:p=!1,icon:N,className:A="",...j})=>{const g={primary:"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 active:bg-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800",success:"bg-green-600 text-white hover:bg-green-700 active:bg-green-800",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 active:bg-gray-100"},x={sm:"px-4 py-2 text-sm min-h-[44px]",md:"px-6 py-3 text-base min-h-[48px]",lg:"px-8 py-4 text-lg min-h-[52px]"};return t.jsxs("button",{onClick:c,disabled:m||p,className:`
        inline-flex items-center justify-center gap-2 font-medium rounded-lg
        transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2
        ${g[u]}
        ${x[d]}
        ${m||p?"opacity-50 cursor-not-allowed":"active:scale-95"}
        ${A}
      `,...j,children:[p?t.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):N&&t.jsx("icon",{className:"w-5 h-5"}),i]})},qp=()=>{const[i,c]=f.useState(!1),[u,d]=f.useState("unknown");return f.useEffect(()=>{const m=()=>{if("memory"in navigator){const p=navigator.memory;p.totalJSHeapSize>p.jsHeapSizeLimit*.8&&c(!0)}if("connection"in navigator){const p=navigator.connection;d(p.effectiveType||"unknown"),(p.effectiveType==="slow-2g"||p.effectiveType==="2g")&&c(!0)}window.matchMedia("(prefers-reduced-motion: reduce)").matches&&c(!0)};if(m(),"connection"in navigator)return navigator.connection.addEventListener("change",m),()=>navigator.connection.removeEventListener("change",m)},[]),{isLowPower:i,connectionType:u,shouldReduceAnimations:i,shouldLazyLoad:u==="slow-2g"||u==="2g"}},Jr={pending:{label:"Pending",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:It,description:"Order created, awaiting machine assignment"},assigned:{label:"Assigned",color:"bg-blue-100 text-blue-800 border-blue-200",icon:Ut,description:"Machine assigned, ready to start production"},in_progress:{label:"In Progress",color:"bg-green-100 text-green-800 border-green-200",icon:Ba,description:"Production actively running"},paused:{label:"Paused",color:"bg-orange-100 text-orange-800 border-orange-200",icon:zn,description:"Production temporarily paused"},stopped:{label:"Stopped",color:"bg-red-100 text-red-800 border-red-200",icon:Dn,description:"Production stopped due to issues"},completed:{label:"Completed",color:"bg-emerald-100 text-emerald-800 border-emerald-200",icon:Ye,description:"Production completed successfully"},cancelled:{label:"Cancelled",color:"bg-gray-400 text-white border-gray-500",icon:Ir,description:"Order cancelled"}},Tn={low:{label:"Low",color:"bg-gray-100 text-gray-800 border-gray-200"},normal:{label:"Normal",color:"bg-blue-100 text-blue-800 border-blue-200"},high:{label:"High",color:"bg-orange-100 text-orange-800 border-orange-200"},urgent:{label:"Urgent",color:"bg-red-100 text-red-800 border-red-200"}},Hp=({orderId:i})=>{const[c,u]=f.useState(null),[d,m]=f.useState(!0);f.useEffect(()=>{i&&p()},[i]);const p=async()=>{try{m(!0);const j=await oe.get(`/orders/${i}/downtime`);u(j)}catch(j){console.error("Failed to load downtime history:",j)}finally{m(!1)}};if(d)return t.jsx("div",{className:"text-center py-4",children:t.jsx("div",{className:"text-gray-500",children:"Loading downtime history..."})});if(!c?.history||c.history.length===0)return t.jsxs("div",{className:"text-center text-gray-500 italic py-8",children:[t.jsx(Ye,{className:"w-12 h-12 mx-auto mb-2 text-green-400"}),t.jsx("p",{children:"No downtime events recorded"}),t.jsx("p",{className:"text-xs mt-1",children:"Production has been running smoothly"})]});const{history:N,summary:A}=c;return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[t.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:A.total_stops}),t.jsx("div",{className:"text-xs text-red-700",children:"Total Stops"})]}),t.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[t.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(A.total_downtime_minutes),"m"]}),t.jsx("div",{className:"text-xs text-orange-700",children:"Total Downtime"})]})]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:N.map((j,g)=>t.jsxs("div",{className:"bg-gray-50 border rounded-lg p-3",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(De,{variant:j.end_time?"success":"warning",size:"sm",children:j.end_time?"Resolved":"Active"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:j.category})]}),t.jsx("div",{className:"text-xs text-gray-500",children:j.duration?`${Math.round(j.duration)}m`:"Active"})]}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Started:"})," ",new Date(j.start_time).toLocaleString()]}),j.end_time&&t.jsxs("div",{children:[t.jsx("strong",{children:"Ended:"})," ",new Date(j.end_time).toLocaleString()]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Reason:"})," ",typeof j.reason=="string"?j.reason:"No reason provided"]}),j.notes&&t.jsxs("div",{children:[t.jsx("strong",{children:"Notes:"})," ",typeof j.notes=="string"?j.notes:"No additional notes"]}),j.resolved_by_name&&t.jsxs("div",{children:[t.jsx("strong",{children:"Resolved By:"})," ",j.resolved_by_name]})]})]},j.id||g))})]})};function $p(){const[i,c]=f.useState([]),[u,d]=f.useState([]),[m,p]=f.useState([]),[N,A]=f.useState([]),[j,g]=f.useState(!0),[x,Z]=f.useState(!1),[D,W]=f.useState(null),[C,L]=f.useState({environment:"all",status:"all",priority:"all",machine:"all",search:"",dateRange:"all"}),[y,Q]=f.useState("active"),[E,le]=f.useState(null),[P,H]=f.useState(!1),[me,Se]=f.useState(!1),[He,ee]=f.useState(!1),[ae,ue]=f.useState(!1),[se,ce]=f.useState(!1),[k,F]=f.useState(!1),[S,X]=f.useState(!1),{isMobile:O}=Lp();qp(),Bs();const{notifications:B,clearNotification:b}=qn(),{lastUpdate:$}=Uo(),[R,V]=f.useState({order_number:"",product_name:"",quantity:"",priority:"normal",environment:"",due_date:"",specifications:"",customer_info:""}),[K,xe]=f.useState({machine_id:null,operator_id:null,batch_number:"",start_notes:""}),[ie,Ae]=f.useState({reason:"Unplanned Stop",category:"Equipment",notes:""}),[ye,Ue]=f.useState({waste_type:"BLND",weight:0,units:0,waste_reason:"",waste_category:"material",recovery_possible:!1,waste_notes:""}),[Me,$e]=f.useState({machine_id:"",scheduled_date:"",shift:"",notes:""});f.useEffect(()=>{ht()},[]),f.useEffect(()=>{$&&Ve()},[$]),tt("order_created",v=>{console.log("🆕 New order created:",v.data),pe(`Order ${v.data.order_number} created successfully`,"success"),Ve()},[]),tt("order_started",v=>{console.log("▶️ Order production started:",v.data),pe(`Production started for Order ${v.data.order_number}`,"success"),Ve()},[]),tt("order_resumed",v=>{console.log("▶️ Order resumed:",v.data),pe(`Order ${v.data.order_number} resumed`,"success"),Ve()},[]),tt("order_stopped",v=>{console.log("⏹️ Order stopped:",v.data),pe(`Order ${v.data.order_number} stopped: ${v.data.reason}`,"error"),Ve()},[]),tt("order_completed",v=>{console.log("✅ Order completed:",v.data),pe(`Order ${v.data.order_number} completed successfully`,"success"),Ve()},[]),tt("machine_reserved",v=>{console.log("🔒 Machine reserved:",v.data),pe(`Machine ${v.data.machine_name} reserved for Order ${v.data.order_number}`,"info"),yt()},[]),tt("downtime_reported",v=>{console.log("⚠️ Downtime reported:",v.data),pe(`Downtime reported: ${v.data.reason}`,"error")},[]);const ht=async()=>{g(!0);try{await Promise.all([Ve(),yt(),ve(),Be()])}catch(v){console.error("Error loading initial data:",v),pe("Failed to load system data","error")}finally{g(!1)}},Ve=async()=>{try{x||g(!0);const v=await oe.get("/orders");c(v?.data||v||[])}catch(v){console.error("Error loading orders:",v),pe("Failed to load orders","error")}finally{g(!1),Z(!1)}},yt=async()=>{try{const v=await oe.get("/machines");d(v?.data||v||[])}catch(v){console.error("Error loading machines:",v)}},ve=async()=>{try{const v=await oe.get("/environments");p(v?.data||v||[])}catch(v){console.error("Error loading environments:",v)}},Be=async()=>{try{const v=await oe.get("/users?roles=operator,supervisor,admin");A(v?.data||v||[])}catch(v){console.error("Error loading operators:",v)}},pe=f.useCallback((v,re="info")=>{W({message:v,type:re,id:Date.now()}),setTimeout(()=>W(null),5e3)},[]),ga=f.useCallback(()=>{Z(!0),Ve()},[]),M=async v=>{v.preventDefault();try{g(!0);const re={...R,order_number:R.order_number||`ORD-${Date.now()}`,created_by:1};await oe.post("/orders",re),H(!1),bt(),pe("Order created successfully","success"),Ve()}catch(re){console.error("Error creating order:",re),pe(re.message||"Failed to create order","error")}finally{g(!1)}},ne=async v=>{if(!K.machine_id){pe("Please select a machine before starting production","error");return}try{g(!0),await oe.post(`/orders/${v.id}/start`,{machine_id:K.machine_id,operator_id:K.operator_id||null,batch_number:K.batch_number||`BAT-${Date.now()}`,start_notes:K.start_notes}),ee(!1),ft(),pe(`Production started for Order ${v.order_number}`,"success"),Ve(),yt()}catch(re){console.error("Error starting production:",re),pe(re.message||"Failed to start production","error")}finally{g(!1)}},Te=async v=>{try{g(!0),await oe.post(`/orders/${v.id}/resume`),pe(`Order ${v.order_number} resumed`,"success"),Ve()}catch(re){console.error("Error resuming production:",re),pe(re.message||"Failed to resume production","error")}finally{g(!1)}},Pe=v=>{le(v),F(!0)},pa=async v=>{if(v.preventDefault(),!!E)try{g(!0),await oe.post(`/orders/${E.id}/stop`,{reason:ie.reason,category:ie.category,notes:ie.notes}),F(!1),Fe(),pe(`Order ${E.order_number} stopped`,"error"),Ve(),yt()}catch(re){console.error("Error stopping production:",re),pe(re.message||"Failed to stop production","error")}finally{g(!1)}},ea=async v=>{if(v.preventDefault(),!E||!Me.machine_id||!Me.scheduled_date||!Me.shift){pe("Please select a machine, date, and shift","error");return}try{g(!0);const re={day:"06:00:00",night:"18:00:00","24hr":"06:00:00"},jt=`${Me.scheduled_date}T${re[Me.shift]}`;await oe.put(`/orders/${E.id}`,{machine_id:Me.machine_id,start_time:jt,shift_type:Me.shift,notes:Me.notes}),X(!1),de(),pe(`Machine assigned to Order ${E.order_number}`,"success"),Ve(),yt()}catch(re){console.error("Error assigning machine:",re),pe(re.message||"Failed to assign machine","error")}finally{g(!1)}},vs=async v=>{try{g(!0);const re={actual_quantity:v.quantity,completion_notes:"Production completed successfully",waste_data:ye.weight>0||ye.units>0&&(ye.waste_type==="PM"||ye.waste_type==="FP")?ye:null};await oe.post(`/orders/${v.id}/complete`,re),ue(!1),_(),pe(`Order ${v.order_number} completed successfully`,"success"),Ve(),yt()}catch(re){console.error("Error completing production:",re),pe(re.message||"Failed to complete production","error")}finally{g(!1)}},bt=()=>{V({order_number:"",product_name:"",quantity:"",priority:"normal",environment:"",due_date:"",specifications:"",customer_info:""})},ft=()=>{xe({machine_id:null,operator_id:null,batch_number:"",start_notes:""})},Fe=()=>{Ae({reason:"Unplanned Stop",category:"Equipment",notes:""})},_=()=>{Ue({waste_type:"BLND",weight:0,units:0,waste_reason:"",waste_category:"material",recovery_possible:!1,waste_notes:""})},de=()=>{$e({machine_id:"",scheduled_date:"",shift:"",notes:""})},Ie=v=>u.filter(re=>re.environment===v&&(re.status==="available"||re.status==="idle")),st=f.useMemo(()=>i.filter(v=>{const re=!C.search||v.order_number?.toLowerCase().includes(C.search.toLowerCase())||v.product_name?.toLowerCase().includes(C.search.toLowerCase())||v.customer_info?.toLowerCase().includes(C.search.toLowerCase()),jt=C.environment==="all"||v.environment===C.environment,ta=C.status==="all"||v.status===C.status,_a=C.priority==="all"||v.priority===C.priority,Cl=C.machine==="all"||v.machine_id?.toString()===C.machine,Dl=v.status==="completed"||v.status==="cancelled";return re&&jt&&ta&&_a&&Cl&&(y==="archive"?Dl:!Dl)}),[i,C,y]),nt=v=>v&&Jr[v]||Jr.pending,vt=v=>v&&Tn[v]||Tn.normal,rt=v=>{if(!v.start_time)return null;const re=new Date(v.start_time),ta=(v.end_time?new Date(v.end_time):new Date)-re,_a=Math.floor(ta/(1e3*60*60)),Cl=Math.floor(ta%(1e3*60*60)/(1e3*60));return`${_a}h ${Cl}m`},Xa=v=>{if(!v||!u||!Array.isArray(u))return"Unknown";const re=u.find(jt=>jt&&jt.id===v);return re&&re.name?re.name:"Unknown"},Gt=v=>{if(!v||!m||!Array.isArray(m))return v||"Unknown";const re=m.find(jt=>jt&&jt.code===v);return re&&re.name?re.name:v};return j&&!x?t.jsxs("div",{className:"flex items-center justify-center p-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-4 text-lg",children:"Loading production system..."})]}):t.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen",children:[t.jsxs("div",{className:"flex flex-row justify-between items-center gap-4 bg-white rounded-xl p-6 shadow-lg border border-gray-200",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[t.jsx(Lt,{className:"w-8 h-8 text-blue-600"}),"Production Orders System"]}),t.jsx("p",{className:"text-gray-600 mt-2",children:"Complete order lifecycle management with real-time tracking"}),t.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(xa,{className:"w-4 h-4"}),st.length," orders"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(qt,{className:"w-4 h-4"}),i.filter(v=>v.status==="in_progress").length," active"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(_o,{className:"w-4 h-4"}),u.filter(v=>v.status==="in_use").length,"/",u.length," machines"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(gp,{}),t.jsx(qs,{onClick:ga,disabled:x,size:O?"sm":"md",variant:"outline",icon:ot,className:`${x?"animate-spin":""} transition-all duration-200`,children:O?"":"Refresh"}),t.jsx(qs,{onClick:()=>H(!0),size:O?"sm":"md",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",icon:ua,children:O?"":"New Order"})]})]}),D&&t.jsx("div",{className:`p-4 rounded-lg border transition-all duration-300 ${D.type==="success"?"bg-green-50 border-green-200 text-green-800":D.type==="error"?"bg-red-50 border-red-200 text-red-800":D.type==="warning"?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"font-medium",children:D.message}),t.jsx("button",{onClick:()=>W(null),className:"text-current hover:opacity-70 transition-opacity",children:"✕"})]})}),B.map((v,re)=>t.jsxs("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800 flex justify-between items-center transition-all duration-300",children:[t.jsx("span",{className:"font-medium",children:v.message}),t.jsx("button",{onClick:()=>b(v.id),className:"text-blue-600 hover:text-blue-800 transition-colors",children:"✕"})]},re)),t.jsx(Ne,{className:"p-6 bg-white shadow-lg border border-gray-200",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",placeholder:"Search orders, products, customers...",value:C.search,onChange:v=>L(re=>({...re,search:v.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),t.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[t.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[t.jsxs("button",{onClick:()=>Q("active"),className:`flex-1 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${y==="active"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(qt,{className:"w-4 h-4 inline mr-2"}),"Active"]}),t.jsxs("button",{onClick:()=>Q("archive"),className:`flex-1 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${y==="archive"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[t.jsx(xa,{className:"w-4 h-4 inline mr-2"}),"Archive"]})]}),t.jsxs("select",{value:C.environment,onChange:v=>L(re=>({...re,environment:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[t.jsx("option",{value:"all",children:"All Environments"}),m.map(v=>t.jsx("option",{value:v.code,children:v.name},v.id))]}),t.jsxs("select",{value:C.status,onChange:v=>L(re=>({...re,status:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[t.jsx("option",{value:"all",children:"All Statuses"}),Object.entries(Jr).map(([v,re])=>t.jsx("option",{value:v,children:re.label},v))]}),t.jsxs("select",{value:C.priority,onChange:v=>L(re=>({...re,priority:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[t.jsx("option",{value:"all",children:"All Priorities"}),Object.entries(Tn).map(([v,re])=>t.jsx("option",{value:v,children:re.label},v))]}),t.jsxs("select",{value:C.machine,onChange:v=>L(re=>({...re,machine:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[t.jsx("option",{value:"all",children:"All Machines"}),u.map(v=>t.jsxs("option",{value:v.id,children:[v.name," (",v.environment,")"]},v.id))]})]})]})}),t.jsxs(Ne,{className:"overflow-hidden bg-white shadow-lg border border-gray-200",children:[t.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[t.jsxs("h3",{className:"font-semibold text-gray-900 text-lg",children:[y==="archive"?"Archived Orders":"Active Orders"," (",st.length,")"]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y==="archive"?"Completed and cancelled orders":"Current production orders"})]}),O?t.jsx("div",{className:"p-4 space-y-4",children:st.map(v=>{const re=nt(v.status),jt=vt(v.priority),ta=re.icon;return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-3 shadow-sm hover:shadow-md transition-shadow duration-200",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-gray-900",children:v.order_number}),t.jsx("p",{className:"text-sm text-gray-600",children:v.product_name}),v.customer_info&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Customer: ",v.customer_info]})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(De,{className:re?.color||"bg-gray-100 text-gray-800 border-gray-200",children:[t.jsx(ta,{className:"w-3 h-3 mr-1"}),re?.label||"Unknown"]})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Quantity:"}),t.jsx("span",{className:"ml-1 font-medium",children:v.quantity})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-500",children:"Environment:"}),t.jsx("span",{className:"ml-1 font-medium",children:Gt(v.environment)})]}),v.machine_id&&t.jsxs("div",{className:"col-span-2",children:[t.jsx("span",{className:"text-gray-500",children:"Machine:"}),t.jsxs("span",{className:"ml-1 font-medium text-blue-600",children:[t.jsx(mg,{className:"w-3 h-3 inline mr-1"}),Xa(v.machine_id)]})]})]}),rt(v)&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[t.jsx(Ao,{className:"w-4 h-4"}),t.jsxs("span",{children:["Runtime: ",rt(v)]})]}),t.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[t.jsx(De,{className:jt?.color||"bg-gray-100 text-gray-800 border-gray-200",children:jt?.label||"Normal"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(qs,{onClick:()=>{le(v),Se(!0)},size:"xs",variant:"outline",icon:$s,children:"View"}),v.status==="pending"&&t.jsx(qs,{onClick:()=>{le(v),ee(!0)},size:"xs",className:"bg-green-600 hover:bg-green-700",icon:Ba,children:"Start"}),v.status==="in_progress"&&t.jsx(t.Fragment,{children:t.jsx(qs,{onClick:()=>Pe(v),size:"xs",className:"bg-red-600 hover:bg-red-700",icon:Dn,children:"Stop"})}),v.status==="stopped"&&t.jsx(qs,{onClick:()=>Te(v),size:"xs",className:"bg-blue-600 hover:bg-blue-700",icon:Ba,children:"Resume"}),(v.status==="in_progress"||v.status==="stopped")&&t.jsx(qs,{onClick:()=>{le(v),ue(!0)},size:"xs",className:"bg-emerald-600 hover:bg-emerald-700",icon:Ye,children:"Complete"})]})]})]},v.id)})}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Info"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Machine"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:st.map(v=>{const re=nt(v.status),jt=vt(v.priority),ta=re.icon;return t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:v.order_number}),t.jsxs("div",{className:"text-sm text-gray-500",children:["Qty: ",v.quantity," | ",Gt(v.environment)]}),t.jsx(De,{className:`mt-1 ${jt?.color||"bg-gray-100 text-gray-800 border-gray-200"}`,children:jt?.label||"Normal"})]})}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsx("div",{className:"text-sm text-gray-900",children:v.product_name}),v.customer_info&&t.jsxs("div",{className:"text-xs text-gray-500",children:["Customer: ",v.customer_info]})]}),t.jsxs("td",{className:"px-6 py-4",children:[t.jsxs(De,{className:re?.color||"bg-gray-100 text-gray-800 border-gray-200",children:[t.jsx(ta,{className:"w-4 h-4 mr-1"}),re?.label||"Unknown"]}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:re?.description||"Status information"}),t.jsxs("div",{className:"space-y-1 mt-2",children:[v.start_time&&t.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[t.jsx(Ao,{className:"w-3 h-3 mr-1"}),rt(v)]}),v.due_date&&t.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[t.jsx(Va,{className:"w-3 h-3 mr-1"}),"Due: ",new Date(v.due_date).toLocaleDateString()]})]})]}),t.jsx("td",{className:"px-6 py-4",children:v.machine_id?t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsx(_o,{className:"w-4 h-4 mr-2 text-blue-600"}),t.jsx("span",{className:"font-medium text-blue-600",children:Xa(v.machine_id)})]}):t.jsx("span",{className:"text-gray-400 text-sm",children:"Not assigned"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"space-y-1",children:[v.status==="in_progress"&&v.quantity&&t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"60%"}})}),v.status==="pending"&&!v.machine_id&&t.jsx("span",{className:"text-amber-600 text-xs",children:"Awaiting machine assignment"}),v.status==="assigned"&&t.jsx("span",{className:"text-blue-600 text-xs",children:"Ready to start"})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(he,{onClick:()=>{le(v),Se(!0)},size:"sm",variant:"outline",children:t.jsx($s,{className:"w-4 h-4"})}),v.status==="pending"&&!v.machine_id&&t.jsxs(he,{onClick:()=>{le(v),X(!0)},size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[t.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Assign Machine"]}),v.status==="pending"&&v.machine_id&&t.jsxs(he,{onClick:()=>{le(v),ee(!0)},size:"sm",className:"bg-green-600 hover:bg-green-700",children:[t.jsx(Ba,{className:"w-4 h-4 mr-1"}),"Start"]}),v.status==="in_progress"&&t.jsx(t.Fragment,{children:t.jsxs(he,{onClick:()=>Pe(v),size:"sm",className:"bg-red-600 hover:bg-red-700",children:[t.jsx(Dn,{className:"w-4 h-4 mr-1"}),"Stop"]})}),v.status==="stopped"&&t.jsxs(he,{onClick:()=>Te(v),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[t.jsx(Ba,{className:"w-4 h-4 mr-1"}),"Resume"]}),(v.status==="in_progress"||v.status==="stopped")&&t.jsxs(he,{onClick:()=>{le(v),ue(!0)},size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",children:[t.jsx(Ye,{className:"w-4 h-4 mr-1"}),"Complete"]})]})})]},v.id)})})]})}),st.length===0&&t.jsxs("div",{className:"p-12 text-center text-gray-500",children:[t.jsx(xa,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),t.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new order to get started"})]})]}),P&&t.jsx(Dt,{title:"Create New Production Order",onClose:()=>{H(!1),bt()},size:"large",children:t.jsxs("form",{onSubmit:M,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Number"}),t.jsx("input",{type:"text",value:R.order_number,onChange:v=>V({...R,order_number:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Auto-generated if empty"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),t.jsx("input",{type:"number",value:R.quantity,onChange:v=>V({...R,quantity:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,min:"1"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),t.jsx("input",{type:"text",value:R.product_name,onChange:v=>V({...R,product_name:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,placeholder:"Enter product name"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),t.jsx("select",{value:R.priority,onChange:v=>V({...R,priority:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:Object.entries(Tn).map(([v,re])=>t.jsx("option",{value:v,children:re.label},v))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment *"}),t.jsxs("select",{value:R.environment,onChange:v=>V({...R,environment:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[t.jsx("option",{value:"",children:"Select Environment"}),m.map(v=>t.jsx("option",{value:v.code,children:v.name},v.id))]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),t.jsx("input",{type:"datetime-local",value:R.due_date,onChange:v=>V({...R,due_date:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Information"}),t.jsx("input",{type:"text",value:R.customer_info,onChange:v=>V({...R,customer_info:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Customer name or reference"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specifications"}),t.jsx("textarea",{value:R.specifications,onChange:v=>V({...R,specifications:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:"4",placeholder:"Product specifications, requirements, or notes..."})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsx(he,{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",disabled:j,children:j?"Creating...":"Create Order"}),t.jsx(he,{type:"button",onClick:()=>{H(!1),bt()},variant:"outline",className:"px-8",children:"Cancel"})]})]})}),He&&E&&t.jsx(Dt,{title:`Start Production - ${E.order_number}`,onClose:()=>{ee(!1),ft()},size:"large",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[t.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Order Details"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700",children:"Product:"}),t.jsx("span",{className:"ml-2 font-medium",children:E.product_name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700",children:"Quantity:"}),t.jsx("span",{className:"ml-2 font-medium",children:E.quantity})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700",children:"Environment:"}),t.jsx("span",{className:"ml-2 font-medium",children:Gt(E.environment)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-blue-700",children:"Priority:"}),t.jsx(De,{className:vt(E.priority)?.color||"bg-gray-100 text-gray-800 border-gray-200",children:vt(E.priority)?.label||"Normal"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Machine *"}),t.jsxs("select",{value:K.machine_id||"",onChange:v=>xe(re=>({...re,machine_id:parseInt(v.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[t.jsx("option",{value:"",children:"Select Machine"}),Ie(E.environment).map(v=>t.jsxs("option",{value:v.id,children:[v.name," (",v.type,") - ",v.status]},v.id))]}),Ie(E.environment).length===0&&t.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["No available machines in ",Gt(E.environment)," environment"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Operator"}),t.jsxs("select",{value:K.operator_id||"",onChange:v=>xe(re=>({...re,operator_id:v.target.value?parseInt(v.target.value):null})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[t.jsx("option",{value:"",children:"Select Operator (Optional)"}),N.map(v=>t.jsxs("option",{value:v.id,children:[v.username," (",v.role,")"]},v.id))]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batch Number"}),t.jsx("input",{type:"text",value:K.batch_number,onChange:v=>xe(re=>({...re,batch_number:v.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:`BAT-${Date.now()}`})]}),t.jsx("div",{})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Notes"}),t.jsx("textarea",{value:K.start_notes,onChange:v=>xe(re=>({...re,start_notes:v.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:"3",placeholder:"Pre-production notes, setup information, or special instructions..."})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsxs(he,{onClick:()=>ne(E),disabled:!K.machine_id||j,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[t.jsx(Ba,{className:"w-4 h-4 mr-2"}),j?"Starting Production...":"Start Production"]}),t.jsx(he,{onClick:()=>{ee(!1),ft()},variant:"outline",className:"px-8",children:"Cancel"})]})]})}),ae&&E&&t.jsx(Dt,{title:`Complete Production - ${E.order_number}`,onClose:()=>{ue(!1),_()},size:"large",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[t.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Production Summary"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-green-700",children:"Order:"}),t.jsx("span",{className:"ml-2 font-medium",children:E.order_number})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-green-700",children:"Product:"}),t.jsx("span",{className:"ml-2 font-medium",children:E.product_name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-green-700",children:"Target Quantity:"}),t.jsx("span",{className:"ml-2 font-medium",children:E.quantity})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-green-700",children:"Runtime:"}),t.jsx("span",{className:"ml-2 font-medium",children:rt(E)||"Calculating..."})]})]})]}),t.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[t.jsxs("h4",{className:"font-medium text-orange-900 mb-3 flex items-center",children:[t.jsx(mt,{className:"w-5 h-5 mr-2"}),"Material Waste Tracking"]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waste Type"}),t.jsxs("select",{value:ye.waste_type||"BLND",onChange:v=>Ue(re=>({...re,waste_type:v.target.value,waste_category:"material"})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[t.jsx("option",{value:"BLND",children:"BLND"}),t.jsx("option",{value:"RM",children:"RM"}),t.jsx("option",{value:"PM",children:"PM"}),t.jsx("option",{value:"FP",children:"FP"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight (kg)"}),t.jsx("input",{type:"number",min:"0",step:"0.1",value:ye.weight||0,onChange:v=>Ue(re=>({...re,weight:parseFloat(v.target.value)||0})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter weight"})]}),(ye.waste_type==="PM"||ye.waste_type==="FP")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Units"}),t.jsx("input",{type:"number",min:"0",step:"1",value:ye.units||0,onChange:v=>Ue(re=>({...re,units:parseInt(v.target.value)||0})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Enter units"})]})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waste Reason"}),t.jsx("input",{type:"text",value:ye.waste_reason||"",onChange:v=>Ue(re=>({...re,waste_reason:v.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Brief description of waste cause"})]}),t.jsx("div",{className:"mt-4",children:t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:ye.recovery_possible||!1,onChange:v=>Ue(re=>({...re,recovery_possible:v.target.checked})),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Material recovery possible"})]})}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),t.jsx("textarea",{value:ye.waste_notes||"",onChange:v=>Ue(re=>({...re,waste_notes:v.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:"2",placeholder:"Additional details about material waste..."})]})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[t.jsxs(he,{onClick:()=>vs(E),disabled:j,className:"flex-1 bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700",children:[t.jsx(Ye,{className:"w-4 h-4 mr-2"}),j?"Completing Production...":"Complete Production"]}),t.jsx(he,{onClick:()=>{ue(!1),_()},variant:"outline",className:"px-8",children:"Cancel"})]})]})}),me&&E&&t.jsx(Dt,{title:`Order Details - ${E.order_number||"Unknown"}`,onClose:()=>{Se(!1),le(null)},size:"fullscreen",children:t.jsxs("div",{className:"p-6 bg-white h-full",children:[t.jsx("div",{className:"mb-6 pb-4 border-b border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:E.product_name||"Unknown Product"}),t.jsxs("p",{className:"text-lg text-gray-700",children:["Order #",E.order_number||"Unknown"]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(De,{className:(nt(E.status)?.color||"bg-gray-100 text-gray-800 border-gray-200")+" px-3 py-1 text-sm font-semibold",children:nt(E.status)?.label||"Unknown"}),t.jsx(De,{className:(vt(E.priority)?.color||"bg-gray-100 text-gray-800 border-gray-200")+" px-3 py-1 text-sm font-semibold",children:vt(E.priority)?.label||"Normal"}),t.jsxs("div",{className:"text-right text-sm",children:[t.jsx("div",{className:"text-gray-500",children:"Created"}),t.jsx("div",{className:"font-semibold",children:E.created_at?new Date(E.created_at).toLocaleDateString():"Unknown"})]})]})]})}),t.jsxs("div",{className:"grid grid-cols-3 gap-6 h-full",children:[t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4 border-b border-blue-200 pb-2",children:"Order Information"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),t.jsx(De,{className:(nt(E.status)?.color||"bg-gray-100 text-gray-800 border-gray-200")+" px-2 py-1 text-xs",children:nt(E.status)?.label||"Unknown"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Target Qty:"}),t.jsx("span",{className:"font-bold text-green-600",children:E.quantity||0})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Actual Qty:"}),t.jsx("span",{className:"font-bold text-blue-600",children:E.actual_quantity||0})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Machine:"}),t.jsx("span",{className:"text-gray-900",children:E.machine_id?Xa(E.machine_id):"Not Assigned"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Operator:"}),t.jsx("span",{className:"text-gray-900",children:E.operator_id?`#${E.operator_id}`:"Not Assigned"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Environment:"}),t.jsx("span",{className:"text-gray-900",children:Gt(E.environment)})]}),E.batch_number&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Batch:"}),t.jsx("span",{className:"text-gray-900",children:E.batch_number})]})]}),t.jsx("h4",{className:"text-lg font-bold text-blue-600 mt-6 mb-4 border-b border-blue-200 pb-2",children:"Timeline"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Created:"}),t.jsx("span",{className:"text-gray-900",children:E.created_at?new Date(E.created_at).toLocaleString():"Unknown"})]}),E.start_time&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Started:"}),t.jsx("span",{className:"text-gray-900",children:new Date(E.start_time).toLocaleString()})]}),E.complete_time&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Completed:"}),t.jsx("span",{className:"text-gray-900",children:new Date(E.complete_time).toLocaleString()})]}),E.stop_time&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-red-700",children:"Stopped:"}),t.jsx("span",{className:"text-red-900",children:new Date(E.stop_time).toLocaleString()})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsx("h3",{className:"text-lg font-bold text-red-600 mb-4 border-b border-red-200 pb-2",children:"Downtime History & Issues"}),t.jsx(Hp,{orderId:E.id}),t.jsx("h4",{className:"text-lg font-bold text-orange-600 mt-6 mb-4 border-b border-orange-200 pb-2",children:"Waste Management"}),E.waste_quantity?t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Type:"}),t.jsx("span",{className:"font-bold text-orange-700",children:typeof E.waste_type=="string"?E.waste_type:"Material"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Quantity:"}),t.jsx("span",{className:"font-bold text-red-600",children:typeof E.waste_quantity=="number"||typeof E.waste_quantity=="string"?E.waste_quantity:"0"})]}),E.waste_notes&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Notes:"}),t.jsx("p",{className:"text-gray-900 mt-1",children:typeof E.waste_notes=="string"?E.waste_notes:"No waste notes available"})]})]})}):t.jsx("div",{className:"text-center text-gray-500 italic py-4",children:"No waste recorded"})]}),t.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsx("h3",{className:"text-lg font-bold text-green-600 mb-4 border-b border-green-200 pb-2",children:"Production Notes"}),E.notes?t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-6",children:t.jsx("p",{className:"text-gray-900 text-sm whitespace-pre-wrap leading-relaxed",children:typeof E.notes=="string"?E.notes:"No notes available"})}):t.jsx("div",{className:"text-center text-gray-500 italic py-4 mb-6",children:"No production notes available"}),E.specifications&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-md font-bold text-purple-600 mb-2 border-b border-purple-200 pb-1",children:"Specifications"}),t.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:t.jsx("p",{className:"text-gray-900 text-sm whitespace-pre-wrap",children:typeof E.specifications=="string"?E.specifications:"No specifications available"})})]}),E.customer_info&&t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-md font-bold text-indigo-600 mb-2 border-b border-indigo-200 pb-1",children:"Customer Info"}),t.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:t.jsx("p",{className:"text-gray-900 text-sm whitespace-pre-wrap",children:typeof E.customer_info=="string"?E.customer_info:"No customer info available"})})]}),t.jsx("div",{className:"mt-auto pt-4",children:t.jsx(he,{onClick:()=>{Se(!1),le(null)},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 text-white py-3 font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Close Details"})})]})]})]})}),k&&E&&t.jsx(Dt,{title:`Stop Production - Order ${E.order_number}`,onClose:()=>{F(!1),le(null),Fe()},size:"medium",children:t.jsxs("form",{onSubmit:pa,className:"space-y-6 p-6",children:[t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Dn,{className:"h-8 w-8 text-red-600"})}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Stop Production"}),t.jsxs("p",{className:"text-sm text-red-700",children:["You are about to stop production for ",t.jsx("strong",{children:E.product_name})]})]})]})}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["Stop Reason ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:ie.reason,onChange:v=>Ae({...ie,reason:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-lg",required:!0,children:[t.jsx("option",{value:"Planned Stop",children:"📅 Planned Stop"}),t.jsx("option",{value:"Unplanned Stop",children:"⚠️ Unplanned Stop"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["Stop Category ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:ie.category,onChange:v=>Ae({...ie,category:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-lg",required:!0,children:[t.jsx("option",{value:"Equipment",children:"🔧 Equipment"}),t.jsx("option",{value:"Material",children:"📦 Material"}),t.jsx("option",{value:"Quality",children:"🎯 Quality"}),t.jsx("option",{value:"Changeover",children:"🔄 Changeover"}),t.jsx("option",{value:"Break",children:"☕ Break"}),t.jsx("option",{value:"Safety",children:"⚠️ Safety"}),t.jsx("option",{value:"Utilities",children:"⚡ Utilities"}),t.jsx("option",{value:"Maintenance",children:"⚙️ Maintenance"}),t.jsx("option",{value:"Other",children:"❓ Other"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Additional Notes"}),t.jsx("textarea",{value:ie.notes,onChange:v=>Ae({...ie,notes:v.target.value}),placeholder:"Provide additional details about the stop reason...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 resize-none"})]}),t.jsxs("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-200",children:[t.jsx(he,{type:"button",onClick:()=>{F(!1),le(null),Fe()},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold",children:"Cancel"}),t.jsxs(he,{type:"submit",disabled:j,className:"px-8 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-semibold flex items-center gap-2 disabled:opacity-50",children:[t.jsx(Dn,{className:"w-5 h-5"}),j?"Stopping...":"Stop Production"]})]})]})}),S&&E&&t.jsx(Dt,{title:`Assign Machine - Order ${E.order_number}`,onClose:()=>{X(!1),le(null),de()},size:"large",children:t.jsxs("form",{onSubmit:ea,className:"space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[t.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Order Details"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Product:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:E.product_name})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Quantity:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:E.quantity})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Environment:"}),t.jsx("span",{className:"ml-2 text-gray-900",children:Gt(E.environment)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Priority:"}),t.jsx(De,{className:`ml-2 ${vt(E.priority)?.color||"bg-gray-100 text-gray-800 border-gray-200"}`,children:vt(E.priority)?.label||"Normal"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Machine *"}),t.jsxs("select",{value:Me.machine_id,onChange:v=>$e({...Me,machine_id:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[t.jsx("option",{value:"",children:"Select Machine"}),Ie(E.environment).map(v=>t.jsxs("option",{value:v.id,children:[v.name," (",v.type,") - ",v.status]},v.id))]}),Ie(E.environment).length===0&&t.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["No available machines in ",Gt(E.environment)," environment"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scheduled Date *"}),t.jsx("input",{type:"date",value:Me.scheduled_date,onChange:v=>$e({...Me,scheduled_date:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shift *"}),t.jsxs("select",{value:Me.shift,onChange:v=>$e({...Me,shift:v.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[t.jsx("option",{value:"",children:"Select Shift"}),t.jsx("option",{value:"day",children:"Day Shift (06:00 - 18:00)"}),t.jsx("option",{value:"night",children:"Night Shift (18:00 - 06:00)"}),t.jsx("option",{value:"24hr",children:"24Hr Shift (Full Day)"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignment Notes"}),t.jsx("textarea",{value:Me.notes,onChange:v=>$e({...Me,notes:v.target.value}),placeholder:"Optional notes about this machine assignment...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]}),t.jsxs("div",{className:"flex gap-3 pt-6",children:[t.jsx(he,{type:"button",onClick:()=>{X(!1),le(null),de()},variant:"outline",className:"px-8",children:"Cancel"}),t.jsx(he,{type:"submit",disabled:!Me.machine_id||!Me.scheduled_date||!Me.shift||j,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:j?"Assigning...":"Assign Machine"})]})]})})]})}const Bp=i=>i.toLowerCase().replace(/\b\w/g,c=>c.toUpperCase()),qo=i=>{if(!i)return"Unknown";const c=i.fullName||i.username||"Unknown";return Bp(c)},Yp=i=>i?i.toUpperCase():"N/A";function Qp(){const[i,c]=f.useState([]),[u,d]=f.useState([]),[m,p]=f.useState([]),[N,A]=f.useState(!0),[j,g]=f.useState(!1),[x,Z]=f.useState("all"),[D,W]=f.useState(""),[C,L]=f.useState("all"),[y,Q]=f.useState(null);Bs(),zo();const{notifications:E,clearNotification:le}=qn(),[P,H]=f.useState(!1),[me,Se]=f.useState(!1),[He,ee]=f.useState(!1),[ae,ue]=f.useState(null),[se,ce]=f.useState({name:"",type:"",environment:"",capacity:100,production_rate:60,shift_cycle_enabled:!1,cycle_start_date:"",operators_per_shift:2,hopper_loaders_per_shift:1,packers_per_shift:3}),[k,F]=f.useState([{letter:"A",offset:0,employees:[]},{letter:"B",offset:2,employees:[]},{letter:"C",offset:4,employees:[]}]),[S,X]=f.useState([]),[O,B]=f.useState(!1);f.useEffect(()=>{u.length>0&&!se.environment&&ce(M=>({...M,environment:u[0].code}))},[u,se.environment]);const b=f.useMemo(()=>{const M={};return Array.isArray(u)&&u.forEach(ne=>{let Te=[];try{Te=typeof ne.machine_types=="string"?JSON.parse(ne.machine_types):ne.machine_types||[]}catch(Pe){console.error("Failed to parse machine types for environment:",ne.name,Pe),Te=[]}M[ne.code]=m.filter(Pe=>Te.includes(Pe.name)).map(Pe=>({id:Pe.id,name:Pe.name,description:Pe.description}))}),M},[u,m]),$={available:{bg:"bg-green-50",text:"text-green-600",border:"border-green-200",icon:Ye},in_use:{bg:"bg-blue-50",text:"text-blue-600",border:"border-blue-200",icon:qt},maintenance:{bg:"bg-yellow-50",text:"text-yellow-600",border:"border-yellow-200",icon:ps},offline:{bg:"bg-red-50",text:"text-red-600",border:"border-red-200",icon:Ir}},R=(M,ne="success")=>{Q({message:M,type:ne}),setTimeout(()=>Q(null),3e3)},V=async()=>{try{const M=await oe.get("/environments"),ne=M?.data?.data||M?.data||[];console.log("🌍 Environments loaded in machines.jsx:",ne),d(ne)}catch(M){console.error("Failed to load environments:",M),R("Failed to load environments","danger")}},K=async()=>{try{const M=await oe.get("/machine-types");p(M)}catch(M){console.error("Failed to load machine types:",M),R("Failed to load machine types","danger")}},xe=async M=>{try{const ne={name:M,description:"Created during machine setup",category:"Production"};await oe.post("/machine-types",ne),K(),R(`Machine type "${M}" created successfully`)}catch(ne){console.error("Error creating machine type:",ne),R(`Failed to create machine type "${M}": `+(ne.response?.data?.error||ne.message),"danger")}},ie=async(M=!1)=>{M?g(!0):A(!0);try{console.log("🔧 Loading machines...");const ne=await oe.get("/machines");console.log("✅ Machines loaded successfully:",ne?.length||0,"machines"),c(ne)}catch(ne){console.error("❌ Failed to load machines:",ne);let Te="Failed to load machines";ne.message.includes("Unexpected token")?Te="Authentication error - please refresh the page and try again":ne.message.includes("unauthorized")||ne.message.includes("Session expired")?Te="Your session has expired. Please log in again.":ne.response?.status===500?Te="Server error - please try again later":Te=`Failed to load machines: ${ne.message}`,R(Te,"danger")}finally{A(!1),g(!1)}},Ae=async()=>{B(!0);try{const M=await oe.get("/users"),ne=M?.data?.data||M?.data||[];console.log("🧑‍💼 Users loaded in machines.jsx:",ne);const Te=ne.map(Pe=>({id:Pe.id,name:qo(Pe),employee_code:Yp(Pe.employee_code)||`EMP${Pe.id.toString().padStart(3,"0")}`,role:Pe.role,is_active:Pe.is_active})).filter(Pe=>Pe.is_active!==!1);X(Te)}catch(M){console.error("Failed to load employees:",M),console.error("Error details:",M.message,M.response),X([]),M.message.includes("unauthorized")||M.message.includes("Session expired")?R("Please log in to manage crew assignments","danger"):R(`Failed to load employees: ${M.message}. You can still configure shift cycles without employee assignments.`,"danger")}finally{B(!1)}},ye=async M=>{try{const ne=await oe.get(`/machines/${M}/crews`);ne.length>0?F(ne):F([{letter:"A",offset:0,employees:[]},{letter:"B",offset:2,employees:[]},{letter:"C",offset:4,employees:[]}])}catch(ne){console.error("Failed to load crews:",ne)}},Ue=()=>{ie(!0)},Me=async M=>{try{await oe.post(`/machines/${M}/crews`,k),R("Crew assignments saved successfully")}catch(ne){console.error("Failed to save crew assignments:",ne),R("Failed to save crew assignments: "+(ne.message||"Unknown error"),"danger")}};f.useEffect(()=>{if(!localStorage.getItem("token")){console.warn("⚠️ No authentication token found, skipping data load");return}V(),K(),ie(),Ae();const ne=setInterval(ie,3e4);return()=>clearInterval(ne)},[]),tt("machine_status_changed",M=>{console.log("🔧 Machine status changed:",M.data),c(ne=>ne.map(Te=>Te.id===M.data.machine_id?{...Te,status:M.data.status,updated_at:new Date().toISOString()}:Te)),R(`Machine ${M.data.machine_name} status changed to ${M.data.status}`,"info")},[]),tt("machine_created",M=>{console.log("🆕 New machine added:",M.data),c(ne=>[...ne,M.data.machine]),R(`New machine "${M.data.machine.name}" added`,"success")},[]),tt("machine_updated",M=>{console.log("📝 Machine updated:",M.data),c(ne=>ne.map(Te=>Te.id===M.data.machine.id?M.data.machine:Te)),R(`Machine "${M.data.machine.name}" updated`,"info")},[]),tt("machine_deleted",M=>{console.log("🗑️ Machine deleted:",M.data),c(ne=>ne.filter(Te=>Te.id!==M.data.machine_id)),R("Machine deleted","warning")},[]),f.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["machines","production"])},[]),f.useEffect(()=>{Array.isArray(E)&&E.forEach(M=>{M.type==="alert"&&M.message.includes("machine")&&(R(M.message,"danger"),le(M.id))})},[E]);const $e=async M=>{M.preventDefault();try{await oe.post("/machines",se),H(!1),ie(),R("Machine added successfully")}catch(ne){R("Failed to add machine: "+(ne.message||"Unknown error"),"danger")}},ht=async M=>{M.preventDefault();try{await oe.put(`/machines/${ae.id}`,se),se.shift_cycle_enabled&&await Me(ae.id),Se(!1),ie(),R("Machine updated successfully")}catch(ne){R("Failed to update machine: "+(ne.message||"Unknown error"),"danger")}},Ve=async M=>{if(window.confirm("Are you sure you want to delete this machine?"))try{await oe.delete(`/machines/${M}`),ie(),R("Machine deleted successfully")}catch(ne){R("Failed to delete machine: "+(ne.message||"Unknown error"),"danger")}},yt=async M=>{try{await oe.patch(`/machines/${ae.id}/status`,{status:M}),ee(!1),ie(),R(`Machine status changed to ${M}`)}catch(ne){R("Failed to update status: "+(ne.message||"Unknown error"),"danger")}},ve=f.useMemo(()=>{let M=Array.isArray(i)?i:[];return x!=="all"&&(M=M.filter(ne=>ne.environment===x)),C!=="all"&&(M=M.filter(ne=>ne.status===C)),D&&(M=M.filter(ne=>ne.name.toLowerCase().includes(D.toLowerCase())||ne.type.toLowerCase().includes(D.toLowerCase()))),M},[i,x,C,D]),Be=f.useMemo(()=>{const M=Array.isArray(i)?i:[],ne=M.length,Te=M.filter(bt=>bt.status==="available").length,Pe=M.filter(bt=>bt.status==="in_use").length,pa=M.filter(bt=>bt.status==="maintenance").length,ea=M.filter(bt=>bt.status==="offline").length,vs=ne>0?Math.round(Pe/ne*100):0;return{total:ne,available:Te,inUse:Pe,maintenance:pa,offline:ea,utilizationRate:vs}},[i]),pe=M=>{const Te=($[M]||$.offline).icon;return t.jsxs(De,{variant:M==="available"?"success":M==="in_use"?"info":M==="maintenance"?"warning":"danger",children:[t.jsx(Te,{className:"w-3 h-3 mr-1"}),M.replace("_"," ").toUpperCase()]})},ga=()=>t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ut,{className:"w-5 h-5 text-gray-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Be.total})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ye,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Available"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:Be.available})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(qt,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"In Use"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Be.inUse})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ps,{className:"w-5 h-5 text-yellow-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Maintenance"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Be.maintenance})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ir,{className:"w-5 h-5 text-red-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Offline"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:Be.offline})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ft,{className:"w-5 h-5 text-purple-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Utilization"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Be.utilizationRate,"%"]})]})]})})]});return N&&i.length===0?t.jsx("div",{className:"p-6 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[t.jsx(ot,{className:"w-5 h-5 animate-spin"}),"Loading machines..."]})}):t.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[y&&t.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${y.type==="success"?"bg-green-100 text-green-800 border border-green-200":y.type==="danger"?"bg-red-100 text-red-800 border border-red-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:y.message}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Machine Management"}),t.jsx(Hn,{})]}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage manufacturing equipment and monitor real-time status"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(he,{onClick:Ue,disabled:j,variant:"outline",children:[t.jsx(ot,{className:`w-4 h-4 mr-2 ${j?"animate-spin":""}`}),"Refresh"]}),t.jsxs(he,{onClick:()=>{ce({name:"",type:"",environment:"blending",capacity:100,production_rate:60}),H(!0)},children:[t.jsx(ua,{className:"w-4 h-4 mr-2"}),"Add Machine"]})]})]}),t.jsx(ga,{}),t.jsx(Ne,{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search machines...",value:D,onChange:M=>W(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ai,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:x,onChange:M=>Z(M.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[t.jsx("option",{value:"all",children:"All Environments"}),u.map(M=>t.jsx("option",{value:M.code,children:M.name},M.id))]})]}),t.jsx("div",{children:t.jsxs("select",{value:C,onChange:M=>L(M.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Statuses"}),t.jsx("option",{value:"available",children:"Available"}),t.jsx("option",{value:"in_use",children:"In Use"}),t.jsx("option",{value:"maintenance",children:"Maintenance"}),t.jsx("option",{value:"offline",children:"Offline"})]})}),t.jsx("div",{className:"flex items-center justify-center md:justify-start",children:t.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",ve.length," of ",i.length," machines"]})})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ve.map(M=>{const ne=$[M.status]||$.offline,Te=ne.icon;return t.jsxs(Ne,{className:`p-6 border-l-4 ${ne.border} hover:shadow-lg transition-all duration-300`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:M.name}),t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:M.type}),t.jsxs("p",{className:"text-xs text-gray-400 capitalize",children:[M.environment," Environment"]})]}),pe(M.status)]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Capacity:"}),t.jsx("span",{className:"font-medium",children:M.capacity})]}),M.production_rate&&t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"Rate:"}),t.jsxs("span",{className:"font-medium",children:[M.production_rate,"/hr"]})]})]}),t.jsxs("div",{className:"space-y-3 mt-4",children:[t.jsxs(he,{onClick:async()=>{ue(M),ce({...M,shift_cycle_enabled:M.shift_cycle_enabled||!1,cycle_start_date:M.cycle_start_date||"",operators_per_shift:M.operators_per_shift==null?"":M.operators_per_shift,hopper_loaders_per_shift:M.hopper_loaders_per_shift==null?"":M.hopper_loaders_per_shift,packers_per_shift:M.packers_per_shift==null?"":M.packers_per_shift}),await ye(M.id),Se(!0)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[t.jsx(Fr,{className:"w-5 h-5"}),"Edit Machine"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(he,{onClick:()=>{ue(M),ee(!0)},variant:"outline",size:"sm",className:"flex-1",children:[t.jsx(Te,{className:"w-4 h-4 mr-1"}),"Status"]}),M.status!=="in_use"&&t.jsx(he,{onClick:()=>Ve(M.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",children:t.jsx(kn,{className:"w-4 h-4"})})]})]})]},M.id)})}),ve.length===0&&t.jsxs(Ne,{className:"p-12 text-center",children:[t.jsx(Ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No machines found"}),t.jsx("p",{className:"text-gray-500 mb-4",children:D||x!=="all"||C!=="all"?"Try adjusting your filters or search term":"Get started by adding your first machine"}),!D&&x==="all"&&C==="all"&&t.jsxs(he,{onClick:()=>{ce({name:"",type:"",environment:"blending",capacity:100,production_rate:60}),H(!0)},children:[t.jsx(ua,{className:"w-4 h-4 mr-2"}),"Add First Machine"]})]}),P&&t.jsx(Dt,{title:"Add New Machine",onClose:()=>H(!1),children:t.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Name"}),t.jsx("input",{type:"text",placeholder:"Enter machine name",value:se.name,onChange:M=>ce({...se,name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),t.jsxs("select",{value:se.environment,onChange:M=>ce({...se,environment:M.target.value,type:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"Select Environment"}),u.map(M=>t.jsx("option",{value:M.code,children:M.name},M.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type"}),t.jsxs("select",{value:se.type,onChange:M=>ce({...se,type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[t.jsx("option",{value:"",children:"Select machine type..."}),(b[se.environment]||[]).map(M=>t.jsx("option",{value:M.name||M,children:M.name||M},M.id||M.name))]}),t.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Or type new machine type and press Enter",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onKeyPress:M=>{if(M.key==="Enter"&&M.target.value.trim()){const ne=M.target.value.trim();ce({...se,type:ne}),xe(ne),M.target.value=""}}}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to create and select new machine type"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),t.jsx("input",{type:"number",placeholder:"100",value:se.capacity,onChange:M=>ce({...se,capacity:parseInt(M.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Rate (/hr)"}),t.jsx("input",{type:"number",placeholder:"60",value:se.production_rate,onChange:M=>ce({...se,production_rate:parseInt(M.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(he,{type:"button",onClick:()=>H(!1),variant:"outline",children:"Cancel"}),t.jsxs(he,{type:"submit",children:[t.jsx(ua,{className:"w-4 h-4 mr-2"}),"Add Machine"]})]})]})}),me&&ae&&t.jsx(Dt,{title:`Edit Machine - ${ae.name}`,onClose:()=>Se(!1),size:"large",children:t.jsxs("div",{className:"p-6",children:[t.jsx("div",{className:"mb-6 pb-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx(Ut,{className:"w-6 h-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Machine Configuration"}),t.jsx("p",{className:"text-gray-600",children:"Update machine settings and assignments"})]})]})}),t.jsxs("form",{onSubmit:ht,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:["Machine Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",placeholder:"Enter machine name",value:se.name,onChange:M=>ce({...se,name:M.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-3",children:["Environment ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:se.environment,onChange:M=>ce({...se,environment:M.target.value,type:""}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg",required:!0,children:[t.jsx("option",{value:"",children:"Select Environment"}),u.map(M=>t.jsx("option",{value:M.code,children:M.name},M.id))]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Changing environment will reset the machine type"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type"}),t.jsx("select",{value:se.type,onChange:M=>ce({...se,type:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:(b[se.environment]||[]).map(M=>t.jsx("option",{value:M.name||M,children:M.name||M},M.id||M.name))}),t.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Or type new machine type and press Enter",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onKeyPress:M=>{if(M.key==="Enter"&&M.target.value.trim()){const ne=M.target.value.trim();ce({...se,type:ne}),xe(ne),M.target.value=""}}}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to create and select new machine type"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),t.jsx("input",{type:"number",placeholder:"Capacity",value:se.capacity,onChange:M=>ce({...se,capacity:parseInt(M.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Rate (/hr)"}),t.jsx("input",{type:"number",placeholder:"Production Rate",value:se.production_rate||"",onChange:M=>ce({...se,production_rate:parseInt(M.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"border-t pt-6 mt-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx(et,{className:"w-5 h-5 text-blue-600"}),"Workforce Requirements"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[t.jsxs("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:[t.jsx(Ut,{className:"w-4 h-4 inline mr-1"}),"Operators per Shift"]}),t.jsx("input",{type:"number",min:"0",max:"10",value:se.operators_per_shift??2,onChange:M=>{const ne=M.target.value===""?"":Math.max(0,parseInt(M.target.value)||0);ce({...se,operators_per_shift:ne})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),t.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Machine operators needed • Blank = N/A, 0 = Automated"})]}),t.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[t.jsxs("label",{className:"block text-sm font-medium text-orange-800 mb-2",children:[t.jsx(Ft,{className:"w-4 h-4 inline mr-1"}),"Hopper Loaders per Shift"]}),t.jsx("input",{type:"number",min:"0",max:"5",value:se.hopper_loaders_per_shift??1,onChange:M=>{const ne=M.target.value===""?"":Math.max(0,parseInt(M.target.value)||0);ce({...se,hopper_loaders_per_shift:ne})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white"}),t.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Material handling staff • Blank = N/A, 0 = Automated"})]}),t.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[t.jsxs("label",{className:"block text-sm font-medium text-green-800 mb-2",children:[t.jsx(Ye,{className:"w-4 h-4 inline mr-1"}),"Packers per Shift"]}),t.jsx("input",{type:"number",min:"0",max:"15",value:se.packers_per_shift??3,onChange:M=>{const ne=M.target.value===""?"":Math.max(0,parseInt(M.target.value)||0);ce({...se,packers_per_shift:ne})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white"}),t.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Packaging staff needed • Blank = N/A, 0 = Automated"})]})]}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"Total Workforce per Shift"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Combined staffing requirement"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(()=>{const M=se.operators_per_shift===""?0:se.operators_per_shift??2,ne=se.hopper_loaders_per_shift===""?0:se.hopper_loaders_per_shift??1,Te=se.packers_per_shift===""?0:se.packers_per_shift??3;return M+ne+Te})()}),t.jsx("div",{className:"text-sm text-gray-500",children:"people"})]})]})}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(Sg,{className:"w-5 h-5 text-indigo-600"}),t.jsx("span",{className:"font-semibold text-gray-900",children:"2-2-2 Shift Cycle"}),t.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"Advanced"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Automatic crew rotation with continuous coverage"}),t.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"Configure detailed scheduling in Labor Planner →"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"checkbox",id:"shift_cycle_enabled",checked:se.shift_cycle_enabled||!1,onChange:M=>ce({...se,shift_cycle_enabled:M.target.checked}),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),t.jsx("label",{htmlFor:"shift_cycle_enabled",className:"text-sm font-medium text-gray-700",children:"Enable"})]})]}),se.shift_cycle_enabled&&t.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border border-indigo-200",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Va,{className:"w-8 h-8 text-indigo-600 mx-auto mb-2"}),t.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Shift Cycle Enabled"}),t.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Configure detailed crew assignments and schedules in the Labor Planner"}),t.jsx("button",{type:"button",onClick:()=>window.location.href="/labor-planner",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:"Open Labor Planner →"})]})})]})]}),t.jsxs("div",{className:"flex justify-end gap-4 pt-8 border-t border-gray-200",children:[t.jsx(he,{type:"button",onClick:()=>Se(!1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold",children:"Cancel"}),t.jsxs(he,{type:"submit",className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold flex items-center gap-2",children:[t.jsx(Ut,{className:"w-5 h-5"}),"Update Machine"]})]})]})]})}),He&&ae&&t.jsx(Dt,{title:"Change Machine Status",onClose:()=>ee(!1),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:ae.name}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Current status: ",pe(ae.status)]})]}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries($).map(([M,ne])=>{const Te=ne.icon;return t.jsxs(he,{onClick:()=>yt(M),variant:ae.status===M?"default":"outline",className:`${ne.bg} ${ne.text} border-2 ${ne.border} h-16 flex flex-col items-center justify-center`,disabled:ae.status===M,children:[t.jsx(Te,{className:"w-5 h-5 mb-1"}),t.jsx("span",{className:"text-xs font-medium",children:M.replace("_"," ").toUpperCase()})]},M)})}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsx(he,{onClick:()=>ee(!1),variant:"outline",children:"Cancel"})})]})})]})}function Gp(){const[i,c]=f.useState(null),[u,d]=f.useState(!0),[m,p]=f.useState(""),[N,A]=f.useState({start_date:wa.formatSASTDate(new Date(Date.now()-10080*60*1e3)),end_date:wa.formatSASTDate(new Date),machine_id:"",category:""}),j=async()=>{d(!0),p("");try{const y=new URLSearchParams;Object.entries(N).forEach(([E,le])=>{le&&y.append(E,le)});const Q=await oe.get(`/reports/downtime?${y}`);c(Q)}catch(y){p("Failed to load downtime data"),console.error("Downtime report error:",y)}finally{d(!1)}};f.useEffect(()=>{j()},[]);const g=(y,Q)=>{A(E=>({...E,[y]:Q}))},x=()=>{j()},Z=()=>{if(!i)return;const y=[["Start Time","End Time","Duration (min)","Reason","Category","Order","Machine","Stopped By","Status"],...i.records.map(P=>[wa.formatSASTDateTime(P.start_time),P.end_time?wa.formatSASTDateTime(P.end_time):"Active",P.duration||"N/A",P.reason,P.category,P.order_number,P.machine_name,P.stopped_by,P.status])].map(P=>P.join(",")).join(`
`),Q=new Blob([y],{type:"text/csv"}),E=window.URL.createObjectURL(Q),le=document.createElement("a");le.href=E,le.download=`downtime-report-${N.start_date}-to-${N.end_date}.csv`,le.click(),window.URL.revokeObjectURL(E)},D=y=>({machine_breakdown:"danger",material_shortage:"warning",quality_issue:"danger",operator_break:"info",shift_change:"info",maintenance:"warning",safety_incident:"danger",power_outage:"danger",other:"default"})[y]||"default";if(u)return t.jsx("div",{className:"p-6 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[t.jsx(It,{className:"w-5 h-5 animate-spin"}),"Loading downtime report..."]})});if(m)return t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"bg-red-100 text-red-800 p-4 rounded-lg",children:[t.jsx(mt,{className:"w-5 h-5 inline mr-2"}),m]})});const{summary:W,category_breakdown:C,records:L}=i||{};return t.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Downtime Report"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Production stop analysis and tracking"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(he,{onClick:x,disabled:u,children:[t.jsx(ai,{className:"w-4 h-4 mr-2"}),"Apply Filters"]}),t.jsxs(he,{onClick:Z,variant:"outline",disabled:!i,children:[t.jsx(Ga,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),t.jsxs(Ne,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),t.jsx("input",{type:"date",value:N.start_date,onChange:y=>g("start_date",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),t.jsx("input",{type:"date",value:N.end_date,onChange:y=>g("end_date",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),t.jsxs("select",{value:N.category,onChange:y=>g("category",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"All Categories"}),t.jsx("option",{value:"Equipment",children:"Equipment"}),t.jsx("option",{value:"Material",children:"Material"}),t.jsx("option",{value:"Quality",children:"Quality"}),t.jsx("option",{value:"Planned",children:"Planned"}),t.jsx("option",{value:"Maintenance",children:"Maintenance"}),t.jsx("option",{value:"Safety",children:"Safety"}),t.jsx("option",{value:"Utilities",children:"Utilities"}),t.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),W&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[t.jsx(Ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ko,{className:"w-8 h-8 text-red-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total Stops"}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:W.total_stops})]})]})}),t.jsx(Ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(It,{className:"w-8 h-8 text-orange-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Active Stops"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:W.active_stops})]})]})}),t.jsx(Ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Ft,{className:"w-8 h-8 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total Downtime"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[W.total_downtime_hours,"h"]})]})]})}),t.jsx(Ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(It,{className:"w-8 h-8 text-purple-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Avg Duration"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[W.average_downtime_minutes,"m"]})]})]})}),t.jsx(Ne,{className:"p-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Va,{className:"w-8 h-8 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Resolved"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:W.resolved_stops})]})]})})]}),C&&t.jsxs(Ne,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Breakdown by Category"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(C).map(([y,Q])=>t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-gray-800",children:y}),t.jsxs("p",{className:"text-sm text-gray-600",children:[Q.count," stops"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[Math.round(Q.total_minutes)," minutes"]})]},y))})]}),t.jsxs(Ne,{children:[t.jsx("div",{className:"p-6 border-b",children:t.jsx("h3",{className:"text-lg font-semibold",children:"Downtime Records"})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:["Start Time","Duration","Reason","Category","Order","Machine","Status","Stopped By"].map(y=>t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:y},y))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L?.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"8",className:"text-center py-10 text-gray-500",children:"No downtime records found for the selected period"})}):L?.map(y=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:wa.formatSASTDateTime(y.start_time)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:y.duration?`${y.duration}m`:"Active"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(De,{variant:D(y.reason),size:"sm",children:y.reason.replace("_"," ").toUpperCase()})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:y.category}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:y.order_number}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:y.machine_name}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx(De,{variant:y.status==="Active"?"warning":"success",size:"sm",children:y.status})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:y.stopped_by})]},y.id))})]})})]})]})}function Vp(){Bs();const[i,c]=f.useState({orders:[],machines:[],assignments:[],employees:[],summary:{},archivedOrders:[]}),[u,d]=f.useState(!0),[m,p]=f.useState(!1),[N,A]=f.useState(null),[j,g]=f.useState("overview"),[x,Z]=f.useState([]),[D,W]=f.useState(null),[C,L]=f.useState(!1),[y,Q]=f.useState(()=>{const k=new Date,F=k.getFullYear(),S=k.getMonth()+1,X=`${F}-${S.toString().padStart(2,"0")}-01`,O=k.toISOString().split("T")[0];return{start_date:X,end_date:O}}),E=(k,F="success")=>{A({message:k,type:F}),setTimeout(()=>A(null),3e3)},le=async(k=!1)=>{k?p(!0):d(!0);try{const F=`${y.start_date}T00:00:00`,S=`${y.end_date}T23:59:59`,X=new URLSearchParams({start_date:F,end_date:S}).toString(),[O,B,b,$,R,V,K]=await Promise.all([oe.get("/orders"),oe.get("/machines"),oe.get(`/analytics/summary?${X}`),oe.get(`/analytics/downtime?${X}`),oe.get(`/reports/downtime?${X}`),oe.get("/users"),oe.get(`/planner/assignments?date=${y.end_date}`)]);c({orders:O||[],machines:B||[],employees:V||[],assignments:K||[],summary:b?.summary||{},downtime:$||{},downtimeRecords:R?.records||[],downtimeSummary:R?.summary||{},categoryBreakdown:R?.category_breakdown||{}})}catch(F){console.error("Failed to load analytics:",F),E("Failed to load analytics data","danger")}finally{d(!1),p(!1)}},P=()=>{le(!0)};f.useEffect(()=>{le()},[y]),f.useEffect(()=>{H()},[y]);const H=async()=>{try{const k=new URLSearchParams({start_date:y.start_date,end_date:y.end_date}).toString(),[F,S]=await Promise.all([oe.get(`/orders/archived?${k}`).catch(()=>[]),oe.get(`/reports/waste?${k}`).catch(()=>[])]),X=F||[];c(O=>({...O,orders:[...O.orders,...X],archivedOrders:X})),Z(S||[]),console.log("Loaded archived orders:",X.length)}catch(k){console.error("Failed to load archived orders:",k);try{const F=new URLSearchParams({start_date:y.start_date,end_date:y.end_date,status:"completed"}).toString(),S=await oe.get(`/orders?${F}&archived=true`);c(X=>({...X,orders:[...X.orders,...S||[]],archivedOrders:S||[]})),console.log("Loaded completed orders from alternative endpoint:",(S||[]).length)}catch(F){console.error("Alternative archived orders endpoint also failed:",F)}}},me=async k=>{try{const F=await oe.get(`/orders/${k.id}/waste`);W({order:k,wasteData:F||[],metrics:F?{totalWeight:F.reduce((S,X)=>S+(X.weight||0),0),itemCount:F.length,categories:[...new Set(F.map(S=>S.item_type))]}:{totalWeight:0,itemCount:0,categories:[]}}),L(!0)}catch(F){console.error("Failed to load waste report:",F),E("Failed to load waste report","danger")}},Se=()=>{const k=i.orders.filter(S=>S.status==="completed"),F=i.archivedOrders||[];return[...k,...F]},He=()=>{try{const k=Se();if(k.length===0){E("No completed orders to export","warning");return}const F=[["Order Number","Product","Completion Date","Target Qty","Actual Qty","Waste Items","Total Waste Weight","Waste Types"],...k.map(B=>{const b=B.waste_data||[],$=b.reduce((V,K)=>V+(K.weight||0),0),R=[...new Set(b.map(V=>V.item_type))].join("; ");return[B.order_number||"N/A",B.product_name||"N/A",B.complete_time?wa.formatSASTDateTime(B.complete_time):"N/A",B.quantity||0,B.actual_quantity||0,b.length,$,R||"No waste recorded"]})].map(B=>B.join(",")).join(`
`),S=new Blob([F],{type:"text/csv"}),X=URL.createObjectURL(S),O=document.createElement("a");O.href=X,O.download=`waste-reports-${y.start_date}-to-${y.end_date}.csv`,O.click(),URL.revokeObjectURL(X),E("Waste reports exported successfully","success")}catch(k){console.error("Export error:",k),E("Failed to export waste reports","danger")}},ee=f.useMemo(()=>{const{orders:k,machines:F}=i,S=k.length,X=k.filter(ve=>ve.status==="pending").length,O=k.filter(ve=>ve.status==="in_progress").length,B=k.filter(ve=>ve.status==="completed").length,b=k.filter(ve=>ve.status==="paused").length,$=S>0?Math.round(B/S*100):0,R=F.length,V=F.filter(ve=>ve.status==="available").length,K=F.filter(ve=>ve.status==="in_use").length,xe=F.filter(ve=>ve.status==="maintenance").length,ie=F.filter(ve=>ve.status==="offline").length,Ae=R>0?Math.round(K/R*100):0,ye=k.reduce((ve,Be)=>ve+(parseInt(Be.quantity)||0),0),Ue=k.filter(ve=>ve.status==="completed").reduce((ve,Be)=>ve+(parseInt(Be.actual_quantity||Be.quantity)||0),0),Me=k.reduce((ve,Be)=>{const pe=Be.priority||"normal";return ve[pe]=(ve[pe]||0)+1,ve},{}),$e=k.reduce((ve,Be)=>{const pe=Be.environment||"unknown";return ve[pe]=(ve[pe]||0)+1,ve},{}),ht=k.reduce((ve,Be)=>{const pe=Be.status||"unknown";return ve[pe]=(ve[pe]||0)+1,ve},{}),Ve=F.reduce((ve,Be)=>{const pe=Be.environment||"unknown";return ve[pe]=(ve[pe]||0)+1,ve},{}),yt=Array.from({length:7},(ve,Be)=>{const pe=new Date;pe.setDate(pe.getDate()-Be);const ga=pe.toISOString().split("T")[0],M=k.filter(ne=>ne.created_at?.startsWith(ga)).length;return{date:ga,count:M}}).reverse();return{totalOrders:S,pendingOrders:X,inProgressOrders:O,completedOrders:B,pausedOrders:b,completionRate:$,totalMachines:R,availableMachines:V,activeMachines:K,maintenanceMachines:xe,offlineMachines:ie,utilizationRate:Ae,totalQuantityOrdered:ye,totalQuantityProduced:Ue,priorityDistribution:Me,environmentDistribution:$e,statusDistribution:ht,machineEnvDistribution:Ve,recentTrend:yt}},[i]),ae=k=>{try{let F,S;if(k==="csv"){F=[["Metric","Value"],["Total Orders",ee.totalOrders],["Completed Orders",ee.completedOrders],["Completion Rate",`${ee.completionRate}%`],["Total Machines",ee.totalMachines],["Active Machines",ee.activeMachines],["Utilization Rate",`${ee.utilizationRate}%`],["Total Quantity Ordered",ee.totalQuantityOrdered],["Total Quantity Produced",ee.totalQuantityProduced]].map($=>$.join(",")).join("\\n"),S=`analytics-${y.start_date}-to-${y.end_date}.csv`;const O=new Blob([F],{type:"text/csv"}),B=URL.createObjectURL(O),b=document.createElement("a");b.href=B,b.download=S,b.click(),URL.revokeObjectURL(B)}else{F=JSON.stringify({metrics:ee,dateRange:y},null,2),S=`analytics-${y.start_date}-to-${y.end_date}.json`;const X=new Blob([F],{type:"application/json"}),O=URL.createObjectURL(X),B=document.createElement("a");B.href=O,B.download=S,B.click(),URL.revokeObjectURL(O)}E(`Analytics exported as ${k.toUpperCase()}`,"success")}catch{E("Failed to export data","danger")}},ue=({data:k,title:F,color:S="#3b82f6"})=>{const X=f.useRef(null);return f.useEffect(()=>{if(!X.current||!k)return;const O=X.current,B=O.getContext("2d"),b=Object.keys(k),$=Object.values(k),R=Math.max(...$,1);if(B.clearRect(0,0,O.width,O.height),b.length===0){B.font="16px sans-serif",B.fillStyle="#9ca3af",B.textAlign="center",B.fillText("No data available",O.width/2,O.height/2),B.font="12px sans-serif",B.fillText("Adjust date range to view data",O.width/2,O.height/2+25);return}const V=O.height-80,K=O.width-80,xe=Math.min(60,K/(b.length*1.5));B.strokeStyle="#f3f4f6",B.lineWidth=1;for(let ie=0;ie<=5;ie++){const Ae=40+ie/5*V;B.beginPath(),B.moveTo(50,Ae),B.lineTo(O.width-20,Ae),B.stroke(),B.font="bold 11px sans-serif",B.fillStyle="#6b7280",B.textAlign="right",B.fillText(Math.round((5-ie)/5*R),45,Ae+4)}b.forEach((ie,Ae)=>{const ye=$[Ae],Ue=ye/R*V,Me=60+Ae*(K/b.length),$e=40+V-Ue,ht=B.createLinearGradient(0,$e,0,$e+Ue);ht.addColorStop(0,S),ht.addColorStop(1,S+"80"),B.fillStyle=ht,B.fillRect(Me,$e,xe,Ue),B.strokeStyle=S,B.lineWidth=1,B.strokeRect(Me,$e,xe,Ue),Ue>20?(B.font="bold 11px sans-serif",B.fillStyle="#ffffff",B.textAlign="center",B.fillText(ye,Me+xe/2,$e+Ue/2+4)):(B.font="bold 11px sans-serif",B.fillStyle="#374151",B.textAlign="center",B.fillText(ye,Me+xe/2,$e-8)),B.save(),B.translate(Me+xe/2,O.height-15),B.rotate(-Math.PI/8),B.font="12px sans-serif",B.fillStyle="#4b5563",B.textAlign="center",B.fillText(ie.charAt(0).toUpperCase()+ie.slice(1),0,0),B.restore()})},[k,S]),t.jsxs(Ne,{className:"p-6 hover:shadow-lg transition-shadow duration-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:S}}),t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:F})]}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:t.jsx("canvas",{ref:X,width:"400",height:"300",className:"w-full h-auto max-w-full"})})]})},se=({data:k,title:F})=>{const S=f.useRef(null),X=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16"];f.useEffect(()=>{if(!S.current||!k)return;const $=S.current,R=$.getContext("2d"),V=$.width/2,K=$.height/2-10,xe=Math.min(V,K)-50;R.clearRect(0,0,$.width,$.height);const ie=Object.values(k),Ae=ie.reduce((Ue,Me)=>Ue+Me,0);if(Ae===0){R.font="16px sans-serif",R.fillStyle="#9ca3af",R.textAlign="center",R.fillText("No data available",V,K),R.font="12px sans-serif",R.fillText("Adjust date range to view data",V,K+25);return}let ye=-Math.PI/2;ie.forEach((Ue,Me)=>{const $e=Ue/Ae*2*Math.PI;R.beginPath(),R.moveTo(V+3,K+3),R.arc(V+3,K+3,xe,ye,ye+$e),R.closePath(),R.fillStyle="rgba(0,0,0,0.1)",R.fill(),ye+=$e}),ye=-Math.PI/2,ie.forEach((Ue,Me)=>{const $e=Ue/Ae*2*Math.PI,ht=X[Me%X.length],Ve=R.createRadialGradient(V,K,0,V,K,xe);Ve.addColorStop(0,ht+"cc"),Ve.addColorStop(1,ht),R.beginPath(),R.moveTo(V,K),R.arc(V,K,xe,ye,ye+$e),R.closePath(),R.fillStyle=Ve,R.fill(),R.strokeStyle="#ffffff",R.lineWidth=3,R.stroke();const yt=ye+$e/2,ve=V+Math.cos(yt)*(xe*.75),Be=K+Math.sin(yt)*(xe*.75),pe=Math.round(Ue/Ae*100);pe>8&&(R.beginPath(),R.arc(ve,Be,18,0,2*Math.PI),R.fillStyle="rgba(255,255,255,0.9)",R.fill(),R.strokeStyle=ht,R.lineWidth=2,R.stroke(),R.font="bold 11px sans-serif",R.fillStyle=ht,R.textAlign="center",R.fillText(`${pe}%`,ve,Be+4)),ye+=$e})},[k]);const O=Object.values(k||{}),B=Object.keys(k||{}),b=O.reduce(($,R)=>$+R,0);return t.jsxs(Ne,{className:"p-6 hover:shadow-lg transition-shadow duration-300",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:F}),t.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-6",children:[t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 flex-shrink-0",children:t.jsx("canvas",{ref:S,width:"300",height:"250",className:"max-w-full h-auto"})}),b>0&&t.jsxs("div",{className:"flex-1 space-y-3",children:[t.jsx("h4",{className:"font-medium text-gray-700 text-sm uppercase tracking-wide",children:"Distribution"}),B.map(($,R)=>{const V=O[R],K=Math.round(V/b*100),xe=X[R%X.length];return t.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:xe}}),t.jsx("span",{className:"font-medium text-gray-700 capitalize",children:$})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"font-bold text-gray-800",children:V}),t.jsxs("div",{className:"text-xs text-gray-500",children:[K,"%"]})]})]},$)})]})]})]})},ce=({title:k,value:F,change:S,icon:X,color:O="gray"})=>{const b={blue:{bg:"bg-blue-50",text:"text-blue-600",border:"border-blue-200",icon:"text-blue-500",gradient:"from-blue-500 to-blue-600"},green:{bg:"bg-green-50",text:"text-green-600",border:"border-green-200",icon:"text-green-500",gradient:"from-green-500 to-green-600"},yellow:{bg:"bg-yellow-50",text:"text-yellow-600",border:"border-yellow-200",icon:"text-yellow-500",gradient:"from-yellow-500 to-yellow-600"},red:{bg:"bg-red-50",text:"text-red-600",border:"border-red-200",icon:"text-red-500",gradient:"from-red-500 to-red-600"},purple:{bg:"bg-purple-50",text:"text-purple-600",border:"border-purple-200",icon:"text-purple-500",gradient:"from-purple-500 to-purple-600"},orange:{bg:"bg-orange-50",text:"text-orange-600",border:"border-orange-200",icon:"text-orange-500",gradient:"from-orange-500 to-orange-600"},gray:{bg:"bg-gray-50",text:"text-gray-600",border:"border-gray-200",icon:"text-gray-500",gradient:"from-gray-500 to-gray-600"}}[O];return t.jsx(Ne,{className:`p-6 border-l-4 ${b.bg} ${b.border} hover:shadow-lg transition-all duration-300 group`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-gray-500 mb-2 font-medium",children:k}),t.jsx("p",{className:"text-3xl font-bold text-gray-800 mb-1 group-hover:scale-105 transition-transform duration-200",children:F}),S!==void 0&&t.jsxs("div",{className:"flex items-center mt-2",children:[S>=0?t.jsx(Hs,{className:"w-4 h-4 text-green-500 mr-1"}):t.jsx(ko,{className:"w-4 h-4 text-red-500 mr-1"}),t.jsxs("span",{className:`text-sm font-medium ${S>=0?"text-green-600":"text-red-600"}`,children:[Math.abs(S),"% from last period"]})]})]}),t.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${b.gradient} shadow-md group-hover:shadow-lg transition-shadow duration-300`,children:t.jsx(X,{className:"w-8 h-8 text-white"})})]})})};return u&&Object.keys(i).length===0?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(ot,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto"}),t.jsx("div",{className:"absolute inset-0 w-12 h-12 border-4 border-blue-200 rounded-full animate-ping mx-auto"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Loading Analytics Dashboard"}),t.jsx("p",{className:"text-gray-600 max-w-md",children:"Gathering insights from your production data..."}),t.jsx("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}):t.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[N&&t.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-xl z-50 transform transition-all duration-300 ease-in-out ${N.type==="success"?"bg-green-100 text-green-800 border border-green-200":N.type==="danger"?"bg-red-100 text-red-800 border border-red-200":N.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:`p-1 rounded-full ${N.type==="success"?"bg-green-200":N.type==="danger"?"bg-red-200":N.type==="warning"?"bg-yellow-200":"bg-blue-200"}`,children:[N.type==="success"&&t.jsx(Ye,{className:"w-4 h-4 text-green-600"}),N.type==="danger"&&t.jsx(mt,{className:"w-4 h-4 text-red-600"}),N.type==="warning"&&t.jsx(mt,{className:"w-4 h-4 text-yellow-600"}),(!N.type||N.type==="info")&&t.jsx(ot,{className:"w-4 h-4 text-blue-600"})]}),t.jsx("span",{className:"font-medium",children:N.message}),t.jsx("button",{onClick:()=>A(null),className:"ml-2 text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx(Ml,{className:"w-4 h-4"})})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-md",children:t.jsx(Ft,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Analytics & Reports"}),t.jsx("p",{className:"text-gray-600 text-sm",children:"Production insights and real-time performance metrics"})]}),t.jsx(Hn,{})]}),t.jsxs("div",{className:"flex gap-4 mt-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsxs("span",{className:"text-gray-600",children:[ee.totalOrders," Total Orders"]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsxs("span",{className:"text-gray-600",children:[ee.activeMachines," Active Machines"]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),t.jsxs("span",{className:"text-gray-600",children:[ee.completionRate,"% Completion Rate"]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(he,{onClick:P,disabled:m,variant:"outline",className:"shadow-sm hover:shadow-md transition-shadow",children:[t.jsx(ot,{className:`w-4 h-4 mr-2 ${m?"animate-spin":""}`}),m?"Updating...":"Refresh"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(he,{onClick:()=>ae("csv"),variant:"outline",size:"sm",className:"shadow-sm hover:shadow-md transition-shadow",children:[t.jsx(Ga,{className:"w-4 h-4 mr-2"}),"CSV"]}),t.jsxs(he,{onClick:()=>ae("json"),variant:"outline",size:"sm",className:"shadow-sm hover:shadow-md transition-shadow",children:[t.jsx(Ga,{className:"w-4 h-4 mr-2"}),"JSON"]})]})]})]})}),t.jsx(Ne,{className:"p-6 shadow-sm",children:t.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:t.jsx(Va,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-gray-800",children:"Date Range Filter"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Select reporting period"})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),t.jsx("input",{type:"date",value:y.start_date,onChange:k=>Q({...y,start_date:k.target.value}),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),t.jsx("input",{type:"date",value:y.end_date,onChange:k=>Q({...y,end_date:k.target.value}),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors shadow-sm"})]})]}),t.jsxs("div",{className:"flex flex-col items-start lg:items-end gap-2",children:[t.jsxs("div",{className:"px-3 py-2 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[t.jsxs("div",{className:"text-sm font-medium text-blue-800",children:[Math.ceil((new Date(y.end_date)-new Date(y.start_date))/(1e3*60*60*24))," days"]}),t.jsx("div",{className:"text-xs text-blue-600",children:"Analysis Period"})]}),m&&t.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600",children:[t.jsx(ot,{className:"w-3 h-3 animate-spin"}),t.jsx("span",{children:"Updating data..."})]})]})]})}),t.jsx(Ne,{className:"p-1 shadow-sm",children:t.jsx("div",{className:"flex gap-1 overflow-x-auto scrollbar-hide",children:[{id:"overview",label:"Overview",icon:Ft,color:"blue"},{id:"orders",label:"Order Analytics",icon:xa,color:"green"},{id:"machines",label:"Machine Analytics",icon:Lt,color:"purple"},{id:"labor",label:"Labor Analytics",icon:et,color:"indigo"},{id:"performance",label:"Performance",icon:Hs,color:"emerald"},{id:"downtime",label:"Downtime Report",icon:mt,color:"red"},{id:"waste-reports",label:"Waste Reports",icon:B0,color:"orange"}].map(k=>{const F=k.icon,S=j===k.id;return t.jsxs("button",{onClick:()=>g(k.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 whitespace-nowrap ${S?`bg-${k.color}-600 text-white shadow-md scale-105`:`text-gray-600 hover:bg-${k.color}-50 hover:text-${k.color}-700 hover:shadow-sm`}`,children:[t.jsx(F,{className:`w-4 h-4 ${S?"animate-pulse":""}`}),k.label]},k.id)})})}),j==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(ce,{title:"Total Orders",value:ee.totalOrders,icon:xa,color:"blue"}),t.jsx(ce,{title:"Completion Rate",value:`${ee.completionRate}%`,icon:Ye,color:"green"}),t.jsx(ce,{title:"Machine Utilization",value:`${ee.utilizationRate}%`,icon:Lt,color:"purple"}),t.jsx(ce,{title:"Active Machines",value:`${ee.activeMachines}/${ee.totalMachines}`,icon:qt,color:"yellow"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(se,{data:ee.statusDistribution,title:"Order Status Distribution"}),t.jsx(ue,{data:ee.environmentDistribution,title:"Orders by Environment",color:"#10b981"})]})]}),j==="orders"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[t.jsx(ce,{title:"Pending Orders",value:ee.pendingOrders,icon:It,color:"gray"}),t.jsx(ce,{title:"In Progress",value:ee.inProgressOrders,icon:Ba,color:"blue"}),t.jsx(ce,{title:"Completed",value:ee.completedOrders,icon:Ye,color:"green"}),t.jsx(ce,{title:"Paused",value:ee.pausedOrders,icon:zn,color:"yellow"}),t.jsx(ce,{title:"Total Quantity",value:ee.totalQuantityOrdered.toLocaleString(),icon:Ya,color:"purple"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(ue,{data:ee.priorityDistribution,title:"Order Priority Distribution",color:"#f59e0b"}),t.jsx(se,{data:ee.environmentDistribution,title:"Orders by Environment"})]})]}),j==="machines"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[t.jsx(ce,{title:"Total Machines",value:ee.totalMachines,icon:Lt,color:"gray"}),t.jsx(ce,{title:"Available",value:ee.availableMachines,icon:Ye,color:"green"}),t.jsx(ce,{title:"In Use",value:ee.activeMachines,icon:qt,color:"blue"}),t.jsx(ce,{title:"Maintenance",value:ee.maintenanceMachines,icon:mt,color:"yellow"}),t.jsx(ce,{title:"Offline",value:ee.offlineMachines,icon:et,color:"red"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsx(se,{data:{Available:ee.availableMachines,"In Use":ee.activeMachines,Maintenance:ee.maintenanceMachines,Offline:ee.offlineMachines},title:"Machine Status Distribution"}),t.jsx(ue,{data:ee.machineEnvDistribution,title:"Machines by Environment",color:"#8b5cf6"})]})]}),j==="performance"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(ce,{title:"Quantity Produced",value:ee.totalQuantityProduced.toLocaleString(),icon:Ya,color:"green"}),t.jsx(ce,{title:"Production Efficiency",value:`${Math.round(ee.totalQuantityProduced/(ee.totalQuantityOrdered||1)*100)}%`,icon:Hs,color:"blue"}),t.jsx(ce,{title:"Avg Orders/Day",value:Math.round(ee.totalOrders/30),icon:xa,color:"purple"}),t.jsx(ce,{title:"Machine Efficiency",value:`${ee.utilizationRate}%`,icon:Lt,color:"yellow"})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6",children:t.jsx(ue,{data:Object.fromEntries(i.downtime?Object.entries(i.downtime):[["No Data",0]]),title:"Downtime by Reason (Minutes)",color:"#ef4444"})}),t.jsxs(Ne,{className:"p-6 hover:shadow-lg transition-shadow duration-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg",children:t.jsx(Hs,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Performance Summary"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Key metrics for current reporting period"})]})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Performance Metric"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Current Value"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Target"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Performance Status"})]})}),t.jsxs("tbody",{className:"bg-white divide-y divide-gray-100",children:[t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:t.jsx(Ye,{className:"w-4 h-4 text-green-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Order Completion Rate"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Completed vs Total Orders"})]})]})}),t.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[t.jsxs("div",{className:"text-lg font-bold text-gray-800",children:[ee.completionRate,"%"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[ee.completedOrders," of ",ee.totalOrders," orders"]})]}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm font-medium text-gray-600",children:"85%"}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsx(De,{variant:ee.completionRate>=85?"success":ee.completionRate>=70?"warning":"danger",children:ee.completionRate>=85?"🎯 Excellent":ee.completionRate>=70?"📈 Good":"⚠️ Needs Improvement"})})]}),t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:t.jsx(Lt,{className:"w-4 h-4 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Machine Utilization"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Active vs Total Machines"})]})]})}),t.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[t.jsxs("div",{className:"text-lg font-bold text-gray-800",children:[ee.utilizationRate,"%"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[ee.activeMachines," of ",ee.totalMachines," active"]})]}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm font-medium text-gray-600",children:"80%"}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsx(De,{variant:ee.utilizationRate>=80?"success":ee.utilizationRate>=60?"warning":"danger",children:ee.utilizationRate>=80?"🎯 Excellent":ee.utilizationRate>=60?"📈 Good":"⚠️ Needs Improvement"})})]}),t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:t.jsx(Ya,{className:"w-4 h-4 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Production Efficiency"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Produced vs Ordered Quantity"})]})]})}),t.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[t.jsxs("div",{className:"text-lg font-bold text-gray-800",children:[Math.round(ee.totalQuantityProduced/(ee.totalQuantityOrdered||1)*100),"%"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[ee.totalQuantityProduced.toLocaleString()," / ",ee.totalQuantityOrdered.toLocaleString()," units"]})]}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-sm font-medium text-gray-600",children:"90%"}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsx(De,{variant:ee.totalQuantityProduced/(ee.totalQuantityOrdered||1)*100>=90?"success":ee.totalQuantityProduced/(ee.totalQuantityOrdered||1)*100>=75?"warning":"danger",children:ee.totalQuantityProduced/(ee.totalQuantityOrdered||1)*100>=90?"🎯 Excellent":ee.totalQuantityProduced/(ee.totalQuantityOrdered||1)*100>=75?"📈 Good":"⚠️ Needs Improvement"})})]})]})]})})]})]}),j==="labor"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx(ce,{title:"Total Employees",value:i.employees.filter(k=>k.role!=="admin").length,icon:et,color:"blue"}),t.jsx(ce,{title:"Assigned Today",value:i.assignments.length,icon:Ye,color:"green"}),t.jsx(ce,{title:"Unique Workers",value:new Set(i.assignments.map(k=>k.employee_id)).size,icon:qt,color:"purple"}),t.jsx(ce,{title:"Utilization",value:`${Math.round(i.assignments.length/Math.max(i.machines.length,1)*100)}%`,icon:Hs,color:"orange"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Ne,{className:"p-6 hover:shadow-lg transition-shadow duration-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:t.jsx(et,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Employee Roles Distribution"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Workforce composition by role"})]})]}),t.jsx("div",{className:"space-y-4",children:["operator","supervisor","packer"].map(k=>{const F=i.employees.filter(b=>b.role===k).length,S=i.employees.filter(b=>b.role!=="admin").length,X=Math.round(F/Math.max(S,1)*100),B={operator:{color:"bg-blue-500",icon:"🔧",label:"Operators"},supervisor:{color:"bg-purple-500",icon:"👨‍💼",label:"Supervisors"},packer:{color:"bg-green-500",icon:"📦",label:"Packers"}}[k];return t.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg",children:B.icon}),t.jsx("span",{className:"text-sm font-semibold text-gray-700",children:B.label})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-lg font-bold text-gray-800",children:F}),t.jsxs("div",{className:"text-xs text-gray-500",children:[X,"%"]})]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full ${B.color} transition-all duration-500 ease-out`,style:{width:`${X}%`}})})]},k)})}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Total Workforce:"}),t.jsxs("span",{className:"font-semibold text-gray-800",children:[i.employees.filter(k=>k.role!=="admin").length," employees"]})]})})]}),t.jsxs(Ne,{className:"p-6 hover:shadow-lg transition-shadow duration-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-orange-500 to-yellow-600 rounded-lg",children:t.jsx(It,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Shift Distribution"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Current assignment coverage"})]})]}),t.jsx("div",{className:"space-y-4",children:["day","night"].map(k=>{const F=i.assignments.filter(B=>B.shift===k).length,S=Math.round(F/Math.max(i.assignments.length,1)*100),O={day:{color:"bg-gradient-to-r from-yellow-400 to-orange-500",icon:"☀️",label:"Day Shift",time:"06:00 - 18:00",bgColor:"bg-yellow-50",textColor:"text-yellow-700"},night:{color:"bg-gradient-to-r from-blue-500 to-indigo-600",icon:"🌙",label:"Night Shift",time:"18:00 - 06:00",bgColor:"bg-blue-50",textColor:"text-blue-700"}}[k];return t.jsxs("div",{className:`p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors ${O.bgColor}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:O.icon}),t.jsxs("div",{children:[t.jsx("div",{className:`text-sm font-semibold ${O.textColor}`,children:O.label}),t.jsx("div",{className:"text-xs text-gray-500",children:O.time})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:`text-lg font-bold ${O.textColor}`,children:F}),t.jsxs("div",{className:"text-xs text-gray-500",children:[S,"% coverage"]})]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:t.jsx("div",{className:`h-3 rounded-full ${O.color} transition-all duration-500 ease-out`,style:{width:`${S}%`}})})]},k)})}),t.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Total Assignments:"}),t.jsxs("span",{className:"font-semibold text-gray-800",children:[i.assignments.length," active"]})]})})]})]}),t.jsxs(Ne,{className:"p-6 hover:shadow-lg transition-shadow duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-lg",children:t.jsx(et,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Current Labor Assignments"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Active assignments for ",new Date().toLocaleDateString()]})]})]}),t.jsxs(De,{variant:"info",className:"px-3 py-1",children:[i.assignments.length," Active"]})]}),i.assignments.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(et,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Assignments"}),t.jsx("p",{className:"text-gray-600",children:"No labor assignments found for the selected date."})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Employee Details"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Assignment"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Shift Schedule"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:i.assignments.slice(0,10).map((k,F)=>{const S=i.employees.find(B=>B.id===k.employee_id),X=i.machines.find(B=>B.id==k.machine_id),O={operator:"bg-blue-50 text-blue-700",supervisor:"bg-purple-50 text-purple-700",packer:"bg-green-50 text-green-700"};return t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:(S?.fullName||S?.username||"U").charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:S?.fullName||S?.username||"Unknown Employee"}),t.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",k.employee_id]})]})]})}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"flex items-center gap-2 mb-1",children:t.jsx(De,{size:"sm",className:O[S?.role]||"bg-gray-50 text-gray-700",children:(S?.role||"N/A").charAt(0).toUpperCase()+(S?.role||"N/A").slice(1)})}),t.jsx("div",{className:"text-sm font-medium text-gray-800",children:X?.name||`Machine ${k.machine_id}`}),t.jsxs("div",{className:"text-xs text-gray-500",children:[X?.environment||"Unknown"," Environment"]})]})}),t.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full ${k.shift==="day"?"bg-yellow-400":"bg-blue-500"}`}),t.jsxs("div",{className:"text-sm font-medium text-gray-800 capitalize",children:[k.shift," Shift"]})]}),t.jsx("div",{className:"text-xs text-gray-500",children:k.shift==="day"?"06:00 - 18:00":"18:00 - 06:00"})]}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs(De,{variant:"success",className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Active"]})})]},F)})})]})}),i.assignments.length>10&&t.jsx("div",{className:"mt-4 text-center",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["Showing 10 of ",i.assignments.length," assignments"]})})]})]}),j==="downtime"&&t.jsx(Gp,{}),j==="waste-reports"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Waste Reports"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View waste tracking data for completed production orders"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs(he,{onClick:He,variant:"outline",children:[t.jsx(Ga,{className:"w-4 h-4 mr-2"}),"Export Waste Data"]}),t.jsxs(he,{onClick:H,variant:"outline",children:[t.jsx(ot,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(ce,{title:"Completed Orders",value:Se().length,icon:Ye,color:"green"}),t.jsx(ce,{title:"Orders with Waste",value:Se().filter(k=>k.waste_data&&k.waste_data.length>0).length,icon:mt,color:"yellow"}),t.jsx(ce,{title:"Total Waste Weight",value:`${Se().reduce((k,F)=>F.waste_data?k+F.waste_data.reduce((S,X)=>S+(X.weight||0),0):k,0).toFixed(2)} kg`,icon:xa,color:"red"}),t.jsx(ce,{title:"Waste Tracking Rate",value:`${Se().length>0?Math.round(Se().filter(k=>k.waste_data&&k.waste_data.length>0).length/Se().length*100):0}%`,icon:Ya,color:"blue"})]}),t.jsxs(Ne,{className:"hover:shadow-lg transition-shadow duration-300",children:[t.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg",children:t.jsx(Ye,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Completed Orders - Waste Tracking"}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Comprehensive waste analysis for ",(i.archivedOrders||[]).length+i.orders.filter(k=>k.status==="completed").length," completed orders"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-bold text-gray-800",children:i.orders.filter(k=>k.status==="completed").length}),t.jsx("div",{className:"text-xs text-gray-500",children:"Orders in period"})]})]})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:["Order","Product","Completion Date","Quantity","Waste Items","Total Waste","Actions"].map(k=>t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:k},k))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:i.orders.filter(k=>k.status==="completed").length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"7",className:"text-center py-16",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"p-4 bg-gray-100 rounded-full mb-4",children:t.jsx(Ye,{className:"w-16 h-16 text-gray-300"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Completed Orders Found"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"No completed orders found for the selected period"}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx(Va,{className:"w-4 h-4"}),t.jsx("span",{children:"Try adjusting the date range to view completed orders"})]})]})})}):i.orders.filter(k=>k.status==="completed").map((k,F)=>{const S=k.waste_data||[],X=S.reduce((B,b)=>B+(b.weight||0),0),O=S.length>0;return t.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:(k.order_number||"O").charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:k.order_number}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Order ID: ",k.id]})]})]})}),t.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-800",children:k.product_name||"N/A"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Product Information"})]}),t.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm font-medium text-gray-800",children:k.complete_time?wa.formatSASTDateTime(k.complete_time):"N/A"}),t.jsx("div",{className:"text-xs text-gray-500",children:"Completion Time"})]}),t.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[t.jsxs("div",{className:"text-sm font-bold text-gray-800",children:[k.actual_quantity||k.quantity||0," units"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",k.quantity||0," units"]}),k.actual_quantity&&k.quantity&&t.jsx("div",{className:`text-xs font-medium ${k.actual_quantity>=k.quantity?"text-green-600":"text-red-600"}`,children:k.actual_quantity>=k.quantity?"✓ Target Met":"⚠ Under Target"})]}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-800",children:S.length}),O?t.jsxs(De,{variant:"warning",size:"sm",className:"flex items-center gap-1",children:[t.jsx(mt,{className:"w-3 h-3"}),"Has Waste"]}):t.jsxs(De,{variant:"success",size:"sm",className:"flex items-center gap-1",children:[t.jsx(Ye,{className:"w-3 h-3"}),"Clean"]})]})}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:O?t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-bold text-red-600",children:[X.toFixed(2)," kg"]}),t.jsx("div",{className:"text-xs text-gray-500 truncate max-w-32",children:[...new Set(S.map(B=>B.item_type))].join(", ")}),t.jsxs("div",{className:"text-xs text-red-500 font-medium",children:[S.length," waste ",S.length===1?"item":"items"]})]}):t.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[t.jsx(Ye,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm",children:"No waste recorded"})]})}),t.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:t.jsxs(he,{onClick:()=>me(k),variant:O?"default":"outline",size:"sm",disabled:!O,className:O?"bg-red-600 hover:bg-red-700 text-white":"",children:[t.jsx($s,{className:"w-4 h-4 mr-1"}),O?"View Details":"No Data"]})})]},k.id||F)})})]})})]}),i.orders.filter(k=>k.status==="completed"&&k.waste_data&&k.waste_data.length>0).length>0&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs(Ne,{className:"p-6",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Waste by Category"}),t.jsx("div",{className:"space-y-3",children:(()=>{const k={};return i.orders.filter(F=>F.status==="completed"&&F.waste_data).forEach(F=>{F.waste_data.forEach(S=>{const X=S.item_type||"Unknown";k[X]=(k[X]||0)+(S.weight||0)})}),Object.entries(k).map(([F,S])=>{const X=Object.values(k).reduce((O,B)=>O+B,0)>0?Math.round(S/Object.values(k).reduce((O,B)=>O+B,0)*100):0;return t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm font-medium text-gray-600",children:F}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"h-2 rounded-full bg-red-500",style:{width:`${X}%`}})}),t.jsxs("span",{className:"text-sm text-gray-500 w-16",children:[S.toFixed(2),"kg"]})]})]},F)})})()})]}),t.jsxs(Ne,{className:"p-6 hover:shadow-lg transition-shadow duration-300",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-red-500 to-orange-600 rounded-lg",children:t.jsx(mt,{className:"w-5 h-5 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"High-Waste Orders"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Orders with highest waste generation"})]})]}),t.jsx("div",{className:"space-y-3",children:i.orders.filter(k=>k.status==="completed"&&k.waste_data&&k.waste_data.length>0).sort((k,F)=>{const S=k.waste_data.reduce((O,B)=>O+(B.weight||0),0);return F.waste_data.reduce((O,B)=>O+(B.weight||0),0)-S}).slice(0,5).length>0?i.orders.filter(k=>k.status==="completed"&&k.waste_data&&k.waste_data.length>0).sort((k,F)=>{const S=k.waste_data.reduce((O,B)=>O+(B.weight||0),0);return F.waste_data.reduce((O,B)=>O+(B.weight||0),0)-S}).slice(0,5).map((k,F)=>{const S=k.waste_data.reduce((O,B)=>O+(B.weight||0),0),X=[...new Set(k.waste_data.map(O=>O.item_type))];return t.jsx("div",{className:"group p-4 border border-gray-200 rounded-lg hover:border-red-300 hover:bg-red-50 transition-all duration-200 cursor-pointer",onClick:()=>me(k),children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-br from-red-500 to-orange-600 rounded-full text-white font-bold text-sm",children:["#",F+1]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900 group-hover:text-red-800",children:k.order_number}),t.jsx("p",{className:"text-sm text-gray-600",children:k.product_name}),t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[X.slice(0,2).map(O=>t.jsx(De,{variant:"warning",size:"xs",children:O},O)),X.length>2&&t.jsxs(De,{variant:"warning",size:"xs",children:["+",X.length-2," more"]})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(mt,{className:"w-4 h-4 text-red-500"}),t.jsxs("span",{className:"text-lg font-bold text-red-600",children:[S.toFixed(2)," kg"]})]}),t.jsxs("div",{className:"text-xs text-gray-500",children:[k.waste_data.length," waste items"]}),t.jsx("div",{className:"text-xs text-red-600 font-medium",children:"Click to view details"})]})]})},k.id)}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ye,{className:"w-12 h-12 mx-auto mb-3 text-green-400"}),t.jsx("p",{className:"text-gray-600",children:"No high-waste orders found"}),t.jsx("p",{className:"text-sm text-gray-500",children:"All completed orders have minimal waste generation"})]})})]})]})]}),D&&t.jsx(Dt,{title:"Waste Report Details",onClose:()=>W(null),size:"lg",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.order.order_number}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-gray-600",children:["Product: ",t.jsx("span",{className:"font-medium",children:D.order.product_name})]}),t.jsxs("p",{className:"text-gray-600",children:["Completed: ",t.jsx("span",{className:"font-medium",children:D.order.complete_time?wa.formatSASTDateTime(D.order.complete_time):"N/A"})]})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-gray-600",children:["Quantity: ",t.jsxs("span",{className:"font-medium",children:[D.order.actual_quantity||D.order.quantity," units"]})]}),t.jsxs("p",{className:"text-gray-600",children:["Target: ",t.jsxs("span",{className:"font-medium",children:[D.order.quantity," units"]})]})]})]})]}),D.wasteData.length>0?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-red-600",children:D.metrics.totalWeight.toFixed(2)}),t.jsx("p",{className:"text-sm text-red-700",children:"Total Weight (kg)"})]}),t.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:D.metrics.itemCount}),t.jsx("p",{className:"text-sm text-yellow-700",children:"Waste Items"})]}),t.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:D.metrics.categories.length}),t.jsx("p",{className:"text-sm text-blue-700",children:"Categories"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Waste Items Breakdown"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight"}),t.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.wasteData.map((k,F)=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:t.jsx(De,{variant:"warning",size:"sm",children:k.item_type})}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:k.description||"No description"}),t.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:k.weight||0}),t.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:k.unit})]},F))})]})})]})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ye,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Waste Recorded"}),t.jsx("p",{className:"text-gray-600",children:"This order was completed without recorded waste."})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t",children:t.jsx(he,{onClick:()=>W(null),variant:"outline",children:"Close"})})]})})]})}function Xp(){const[i,c]=f.useState(null),[u,d]=f.useState([]),[m,p]=f.useState([]),[N,A]=f.useState(!0),[j,g]=f.useState(null),[x,Z]=f.useState("packaging"),[D,W]=f.useState([]),[C,L]=f.useState(!1),[y,Q]=f.useState(null),[E,le]=f.useState(!1),P=(ae,ue="success")=>{g({message:ae,type:ue}),setTimeout(()=>g(null),3e3)},H=()=>{const ae=new Date,ue=ae.getHours(),se=ue>=6&&ue<18?"day":"night",ce=ae.toISOString().split("T")[0];return{type:se,date:ce,...{day:{start:"06:00",end:"18:00",label:"Day Shift"},night:{start:"18:00",end:"06:00",label:"Night Shift"}}[se]}},me=async()=>{try{A(!0);const ae=await oe.get("/environments");W(ae||[]);const ue=await oe.get(`/shifts/current?environment=${x}`);c(ue);const se=await oe.get(`/shifts/reports?environment=${x}&limit=10`);d(se||[]);const ce=H(),k=await oe.get(`/shifts/quantity-updates?shift_date=${ce.date}&shift_type=${ce.type}&environment=${x}`);p(k||[])}catch(ae){console.error("Failed to load shift data:",ae),P("Failed to load shift data","danger")}finally{A(!1)}},Se=async()=>{try{if(le(!0),!i?.id){P("No current shift found","warning");return}const ae=await oe.post(`/shifts/${i.id}/generate`);c(ae.report),P("Shift report generated successfully"),me()}catch(ae){console.error("Failed to generate shift report:",ae),P("Failed to generate shift report","danger")}finally{le(!1)}},He=ae=>{const se=[["Metric","Value"],["Shift Date",ae.shift_date],["Shift Type",ae.shift_type.toUpperCase()],["Environment",ae.environment],["Total Orders",ae.total_orders||0],["Completed Orders",ae.completed_orders||0],["In Progress Orders",ae.in_progress_orders||0],["Stopped Orders",ae.stopped_orders||0],["Total Quantity Produced",ae.total_quantity_produced||0],["Total Stops",ae.total_stops||0],["Total Downtime (minutes)",ae.total_downtime_minutes||0],["OEE Percentage",`${ae.oee_percentage?.toFixed(1)||0}%`],["Efficiency Percentage",`${ae.efficiency_percentage?.toFixed(1)||0}%`],["Quality Percentage",`${ae.quality_percentage?.toFixed(1)||100}%`]].map(S=>S.join(",")).join("\\n"),ce=new Blob([se],{type:"text/csv"}),k=URL.createObjectURL(ce),F=document.createElement("a");F.href=k,F.download=`shift-report-${ae.shift_date}-${ae.shift_type}-${ae.environment}.csv`,F.click(),URL.revokeObjectURL(k),P("Shift report exported successfully")};f.useEffect(()=>{me();const ae=setInterval(me,3e4);return()=>clearInterval(ae)},[x]);const ee=H();return N?t.jsx("div",{className:"p-6 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[t.jsx(ot,{className:"w-5 h-5 animate-spin"}),"Loading shift reports..."]})}):t.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[j&&t.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${j.type==="success"?"bg-green-100 text-green-800 border border-green-200":j.type==="danger"?"bg-red-100 text-red-800 border border-red-200":j.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:j.message}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Shift Reports"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time production shift tracking and automated reporting"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("select",{value:x,onChange:ae=>Z(ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"",children:"All Environments"}),D.map(ae=>t.jsx("option",{value:ae.code,children:ae.name},ae.code))]}),t.jsxs(he,{onClick:me,variant:"outline",children:[t.jsx(ot,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),t.jsxs(Ne,{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),t.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Current Shift - ",ee.label]}),t.jsx(De,{variant:"info",children:ee.date}),t.jsxs(De,{variant:"default",children:[ee.start," - ",ee.end]})]}),t.jsxs(he,{onClick:Se,disabled:E,className:"bg-blue-600 text-white hover:bg-blue-700",children:[E?t.jsx(ot,{className:"w-4 h-4 mr-2 animate-spin"}):t.jsx(Ft,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]}),i&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.total_orders||0}),t.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.completed_orders||0}),t.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.in_progress_orders||0}),t.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),t.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.stopped_orders||0}),t.jsx("div",{className:"text-sm text-gray-600",children:"Stopped"})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(i.total_quantity_produced||0).toLocaleString()}),t.jsx("div",{className:"text-sm text-gray-600",children:"Quantity Produced"})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.oee_percentage?`${i.oee_percentage.toFixed(1)}%`:"0%"}),t.jsx("div",{className:"text-sm text-gray-600",children:"OEE"})]})]})]}),t.jsxs(Ne,{className:"p-6",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[t.jsx(qt,{className:"w-5 h-5"}),"Recent Quantity Updates (",m.length,")"]}),m.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx(Ya,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No quantity updates recorded for current shift"})]}):t.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:m.map((ae,ue)=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-gray-900",children:[ae.order_number," - ",ae.product_name]}),t.jsxs("div",{className:"text-sm text-gray-600",children:[ae.machine_name," • ",ae.updated_by_name]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-bold text-gray-900",children:[ae.previous_quantity," → ",ae.new_quantity]}),t.jsx("div",{className:"text-sm text-gray-500",children:new Date(ae.update_time).toLocaleTimeString()})]})]},ue))})]}),t.jsxs(Ne,{className:"p-6",children:[t.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[t.jsx(B0,{className:"w-5 h-5"}),"Shift Reports History"]}),u.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx(It,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No shift reports available"})]}):t.jsx("div",{className:"space-y-3",children:u.map(ae=>t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-gray-900",children:[ae.shift_date," - ",ae.shift_type.toUpperCase()," Shift"]}),t.jsxs("div",{className:"text-sm text-gray-600",children:[ae.environment," • ",ae.supervisor_name||"No supervisor assigned"]})]}),t.jsxs("div",{className:"flex gap-4 text-sm",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-bold text-blue-600",children:ae.total_orders||0}),t.jsx("div",{className:"text-gray-500",children:"Orders"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-bold text-green-600",children:ae.completed_orders||0}),t.jsx("div",{className:"text-gray-500",children:"Completed"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-bold text-purple-600",children:(ae.total_quantity_produced||0).toLocaleString()}),t.jsx("div",{className:"text-gray-500",children:"Produced"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-bold text-orange-600",children:ae.oee_percentage?`${ae.oee_percentage.toFixed(1)}%`:"0%"}),t.jsx("div",{className:"text-gray-500",children:"OEE"})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(he,{onClick:()=>{Q(ae),L(!0)},variant:"outline",size:"sm",children:[t.jsx($s,{className:"w-4 h-4 mr-1"}),"View"]}),t.jsxs(he,{onClick:()=>He(ae),variant:"outline",size:"sm",children:[t.jsx(Ga,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})},ae.id))})]}),C&&y&&t.jsx(Dt,{isOpen:C,onClose:()=>L(!1),title:`Shift Report - ${y.shift_date} ${y.shift_type.toUpperCase()}`,children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-gray-900",children:y.total_orders||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Total Orders"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-green-600",children:y.completed_orders||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Completed"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-yellow-600",children:y.in_progress_orders||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"In Progress"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-red-600",children:y.stopped_orders||0}),t.jsx("div",{className:"text-xs text-gray-600",children:"Stopped"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-purple-600",children:(y.total_quantity_produced||0).toLocaleString()}),t.jsx("div",{className:"text-xs text-gray-600",children:"Quantity Produced"})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[t.jsx("div",{className:"text-lg font-bold text-orange-600",children:y.oee_percentage?`${y.oee_percentage.toFixed(1)}%`:"0%"}),t.jsx("div",{className:"text-xs text-gray-600",children:"OEE"})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Downtime Summary"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:["Total Stops: ",t.jsx("span",{className:"font-medium",children:y.total_stops||0})]}),t.jsxs("div",{children:["Total Downtime: ",t.jsxs("span",{className:"font-medium",children:[y.total_downtime_minutes||0," minutes"]})]})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Machine Utilization"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:["Active Machines: ",t.jsx("span",{className:"font-medium",children:y.total_machines_active||0})]}),t.jsxs("div",{children:["Available Machines: ",t.jsx("span",{className:"font-medium",children:y.total_machines_available||0})]})]})]}),y.summary_notes&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Summary Notes"}),t.jsx("p",{className:"text-sm text-gray-700",children:y.summary_notes})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsxs(he,{onClick:()=>He(y),variant:"outline",children:[t.jsx(Ga,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),t.jsx(he,{onClick:()=>L(!1),children:"Close"})]})]})})]})}function Zp(){const[i,c]=f.useState([]),[u,d]=f.useState(!0),[m,p]=f.useState(!1),[N,A]=f.useState(!1),[j,g]=f.useState(null),[x,Z]=f.useState({username:"",email:"",password:"",confirmPassword:"",role:"operator"}),[D,W]=f.useState("");Bs();const{user:C}=ys(),L=async()=>{d(!0);try{const H=await oe.get("/users");c(H)}catch(H){console.error("Failed to load users:",H)}finally{d(!1)}};f.useEffect(()=>{L()},[]);const y=()=>{Z({username:"",email:"",password:"",confirmPassword:"",role:"operator"}),W("")},Q=async H=>{if(H.preventDefault(),W(""),x.password!==x.confirmPassword)return W("Passwords do not match");try{await oe.post("/users",{username:x.username,email:x.email,password:x.password,role:x.role}),p(!1),y(),L()}catch(me){W(me.message||"Failed to add user")}},E=async H=>{H.preventDefault(),W("");try{await oe.put(`/users/${j.id}`,{email:x.email,role:x.role}),A(!1),y(),L()}catch(me){W(me.message||"Failed to update user")}},le=async H=>{if(H===C.id)return alert("You cannot delete your own account.");if(window.confirm("Are you sure you want to delete this user?"))try{await oe.delete(`/users/${H}`),L()}catch(me){alert("Failed to delete user: "+me.message)}},P=H=>{const me={admin:"bg-purple-100 text-purple-800",supervisor:"bg-blue-100 text-blue-800",operator:"bg-green-100 text-green-800",viewer:"bg-gray-100 text-gray-800"};return t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${me[H]||""}`,children:H.toUpperCase()})};return t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),t.jsx(Hn,{})]}),C?.role==="admin"&&t.jsx("button",{onClick:()=>{y(),p(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add New User"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:["User","Email","Role","Status","Actions"].map(H=>t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:H},H))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(H=>t.jsxs("tr",{children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H.username}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H.email}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(H.role)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:H.is_active?"Active":"Inactive"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:C?.role==="admin"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{g(H),Z(H),A(!0)},className:"text-blue-600 hover:text-blue-800",children:"Edit"}),t.jsx("button",{onClick:()=>le(H.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},H.id))})]})}),m&&t.jsx(Dt,{title:"Add New User",onClose:()=>p(!1),children:t.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[D&&t.jsx("div",{className:"p-2 bg-red-100 text-red-700 rounded",children:D}),t.jsx("input",{type:"text",placeholder:"Username",value:x.username,onChange:H=>Z({...x,username:H.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),t.jsx("input",{type:"email",placeholder:"Email",value:x.email,onChange:H=>Z({...x,email:H.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),t.jsx("input",{type:"password",placeholder:"Password",value:x.password,onChange:H=>Z({...x,password:H.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),t.jsx("input",{type:"password",placeholder:"Confirm Password",value:x.confirmPassword,onChange:H=>Z({...x,confirmPassword:H.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),t.jsxs("select",{value:x.role,onChange:H=>Z({...x,role:H.target.value}),className:"w-full px-3 py-2 border rounded",children:[t.jsx("option",{value:"operator",children:"Operator"}),t.jsx("option",{value:"supervisor",children:"Supervisor"}),t.jsx("option",{value:"admin",children:"Administrator"}),t.jsx("option",{value:"viewer",children:"Viewer"})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{type:"button",onClick:()=>p(!1),children:"Cancel"}),t.jsx("button",{type:"submit",children:"Add User"})]})]})}),N&&j&&t.jsx(Dt,{title:"Edit User",onClose:()=>A(!1),children:t.jsxs("form",{onSubmit:E,className:"space-y-4",children:[D&&t.jsx("div",{className:"p-2 bg-red-100 text-red-700 rounded",children:D}),t.jsxs("div",{children:[t.jsx("label",{children:"Username"}),t.jsx("input",{type:"text",value:x.username,className:"w-full px-3 py-2 border rounded bg-gray-100",disabled:!0})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Email"}),t.jsx("input",{type:"email",value:x.email,onChange:H=>Z({...x,email:H.target.value}),className:"w-full px-3 py-2 border rounded",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{children:"Role"}),t.jsxs("select",{value:x.role,onChange:H=>Z({...x,role:H.target.value}),className:"w-full px-3 py-2 border rounded",children:[t.jsx("option",{value:"operator",children:"Operator"}),t.jsx("option",{value:"supervisor",children:"Supervisor"}),t.jsx("option",{value:"admin",children:"Administrator"}),t.jsx("option",{value:"viewer",children:"Viewer"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{type:"button",onClick:()=>A(!1),children:"Cancel"}),t.jsx("button",{type:"submit",children:"Update User"})]})]})})]})}const To=({title:i,children:c})=>t.jsxs("div",{className:"bg-white shadow rounded-lg",children:[t.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i})}),t.jsx("div",{className:"px-4 py-5 sm:p-6",children:c})]}),Wp=()=>{const{user:i,checkAuth:c}=ys(),[u,d]=f.useState({email:"",fullName:"",phone:""}),[m,p]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[N,A]=f.useState({text:"",type:"success"}),[j,g]=f.useState(!1),[x,Z]=f.useState({});f.useEffect(()=>{i&&d({email:i.email||"",fullName:i.fullName||"",phone:i.phone||""})},[i]);const D=f.useCallback(Q=>{const E={};return Q.email?.trim()||(E.email="Email is required"),Q.fullName?.trim()||(E.fullName="Full name is required"),Q.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q.email)&&(E.email="Please enter a valid email address"),E},[]),W=f.useCallback(async Q=>{Q.preventDefault(),A({text:"",type:"success"}),Z({});const E=D(u);if(Object.keys(E).length>0){Z(E);return}g(!0);try{await oe.put("/settings/profile",u),A({text:"Profile updated successfully!",type:"success"}),await c()}catch(le){A({text:le.response?.data?.message||"Failed to update profile",type:"error"})}finally{g(!1)}},[u,D,c]),C=f.useCallback(Q=>{if(!Q)return{score:0,text:"",color:""};let E=0;const le={length:Q.length>=8,lowercase:/[a-z]/.test(Q),uppercase:/[A-Z]/.test(Q),numbers:/\d/.test(Q),special:/[!@#$%^&*(),.?":{}|<>]/.test(Q)};return E=Object.values(le).filter(Boolean).length,{score:E,...{0:{text:"",color:""},1:{text:"Very Weak",color:"text-red-600"},2:{text:"Weak",color:"text-red-500"},3:{text:"Fair",color:"text-yellow-500"},4:{text:"Good",color:"text-blue-500"},5:{text:"Strong",color:"text-green-500"}}[E],checks:le}},[]),L=f.useCallback(Q=>{const E={};Q.currentPassword||(E.currentPassword="Current password is required"),Q.newPassword||(E.newPassword="New password is required");const le=C(Q.newPassword);return Q.newPassword&&le.score<3&&(E.newPassword="Password is too weak. Please include uppercase, lowercase, numbers, and special characters."),Q.newPassword!==Q.confirmPassword&&(E.confirmPassword="Passwords do not match"),E},[C]),y=f.useCallback(async Q=>{Q.preventDefault(),A({text:"",type:"success"}),Z({});const E=L(m);if(Object.keys(E).length>0){Z(E);return}g(!0);try{await oe.post("/settings/change-password",{currentPassword:m.currentPassword,newPassword:m.newPassword}),A({text:"Password changed successfully!",type:"success"}),p({currentPassword:"",newPassword:"",confirmPassword:""})}catch(le){A({text:le.response?.data?.message||"Failed to change password",type:"error"})}finally{g(!1)}},[m,L]);return t.jsxs("div",{className:"space-y-6",children:[N.text&&t.jsx("div",{className:`p-3 rounded ${N.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:N.text}),t.jsx(To,{title:"Profile Information",children:t.jsxs("form",{onSubmit:W,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),t.jsx("input",{id:"fullName",type:"text",value:u.fullName,onChange:Q=>d({...u,fullName:Q.target.value}),className:`mt-1 block w-full border rounded-md shadow-sm px-3 py-2 ${x.fullName?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-describedby":x.fullName?"fullName-error":void 0,disabled:j}),x.fullName&&t.jsx("p",{id:"fullName-error",className:"mt-1 text-sm text-red-600",children:x.fullName})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),t.jsx("input",{id:"phone",type:"tel",value:u.phone,onChange:Q=>d({...u,phone:Q.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm px-3 py-2 focus:border-blue-500 focus:ring-blue-500",disabled:j})]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),t.jsx("input",{id:"email",type:"email",value:u.email,onChange:Q=>d({...u,email:Q.target.value}),className:`mt-1 block w-full border rounded-md shadow-sm px-3 py-2 ${x.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-describedby":x.email?"email-error":void 0,disabled:j,required:!0}),x.email&&t.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",children:x.email})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[j&&t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),j?"Updating...":"Update Profile"]})})]})}),t.jsx(To,{title:"Change Password",children:t.jsxs("form",{onSubmit:y,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),t.jsx("input",{id:"currentPassword",type:"password",value:m.currentPassword,onChange:Q=>p({...m,currentPassword:Q.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${x.currentPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":x.currentPassword?"currentPassword-error":void 0,disabled:j,required:!0}),x.currentPassword&&t.jsx("p",{id:"currentPassword-error",className:"mt-1 text-sm text-red-600",children:x.currentPassword})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),t.jsx("input",{id:"newPassword",type:"password",value:m.newPassword,onChange:Q=>p({...m,newPassword:Q.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${x.newPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":x.newPassword?"newPassword-error":"newPassword-help",disabled:j,required:!0}),(()=>{const Q=C(m.newPassword);return t.jsxs("div",{className:"mt-2",children:[m.newPassword&&t.jsxs("div",{className:"mb-2",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsx("span",{className:"text-xs text-gray-600",children:"Password strength:"}),t.jsx("span",{className:`text-xs font-medium ${Q.color}`,children:Q.text})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${Q.score===1?"bg-red-400 w-1/5":Q.score===2?"bg-red-400 w-2/5":Q.score===3?"bg-yellow-400 w-3/5":Q.score===4?"bg-blue-400 w-4/5":Q.score===5?"bg-green-400 w-full":"w-0"}`})}),t.jsx("div",{className:"mt-2 text-xs text-gray-600",children:t.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[t.jsx("span",{className:Q.checks?.length?"text-green-600":"text-gray-400",children:"✓ 8+ characters"}),t.jsx("span",{className:Q.checks?.uppercase?"text-green-600":"text-gray-400",children:"✓ Uppercase"}),t.jsx("span",{className:Q.checks?.lowercase?"text-green-600":"text-gray-400",children:"✓ Lowercase"}),t.jsx("span",{className:Q.checks?.numbers?"text-green-600":"text-gray-400",children:"✓ Numbers"}),t.jsx("span",{className:Q.checks?.special?"text-green-600":"text-gray-400",children:"✓ Special chars"})]})})]}),t.jsx("p",{id:"newPassword-help",className:"text-xs text-gray-500",children:"Include uppercase, lowercase, numbers, and special characters"}),x.newPassword&&t.jsx("p",{id:"newPassword-error",className:"mt-1 text-sm text-red-600",children:x.newPassword})]})})()]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),t.jsx("input",{id:"confirmPassword",type:"password",value:m.confirmPassword,onChange:Q=>p({...m,confirmPassword:Q.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${x.confirmPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":x.confirmPassword?"confirmPassword-error":void 0,disabled:j,required:!0}),x.confirmPassword&&t.jsx("p",{id:"confirmPassword-error",className:"mt-1 text-sm text-red-600",children:x.confirmPassword})]}),t.jsx("div",{className:"flex justify-end",children:t.jsxs("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[j&&t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),j?"Changing...":"Change Password"]})})]})})]})},Kp=()=>{const[i,c]=f.useState({maintenanceMode:!1,sessionTimeout:30}),[u,d]=f.useState(!0),[m,p]=f.useState({text:"",type:"success"}),[N,A]=f.useState(!1);f.useEffect(()=>{(async()=>{try{const x=await oe.get("/settings/system");c(Z=>({...Z,...x}))}catch(x){console.error("Failed to load system settings:",x)}finally{d(!1)}})()},[]);const j=f.useCallback(async g=>{g.preventDefault(),p({text:"",type:"success"}),A(!0);try{await oe.put("/settings/system",i),p({text:"Settings saved successfully!",type:"success"})}catch(x){p({text:x.response?.data?.message||"Failed to save settings",type:"error"})}finally{A(!1)}},[i]);return u?t.jsxs("div",{className:"flex items-center justify-center p-8",role:"status","aria-label":"Loading system settings",children:[t.jsxs("svg",{className:"animate-spin h-6 w-6 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading system settings..."]}):t.jsxs(To,{title:"System Configuration",children:[m.text&&t.jsx("div",{className:`p-3 mb-4 rounded ${m.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,role:"alert","aria-live":"polite",children:m.text}),t.jsxs("form",{onSubmit:j,className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"maintenanceMode",className:"font-medium text-gray-700",children:"Maintenance Mode"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Prevents non-admins from accessing the system."})]}),t.jsx("input",{id:"maintenanceMode",type:"checkbox",checked:i.maintenanceMode,onChange:g=>c({...i,maintenanceMode:g.target.checked}),className:"h-4 w-4 rounded text-blue-600 border-gray-300"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"sessionTimeout",className:"block text-sm font-medium text-gray-700",children:"Session Timeout (minutes)"}),t.jsx("input",{id:"sessionTimeout",type:"number",value:i.sessionTimeout,onChange:g=>c({...i,sessionTimeout:parseInt(g.target.value)||30}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),t.jsx("div",{className:"flex justify-end pt-4 border-t",children:t.jsxs("button",{type:"submit",disabled:N,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[N&&t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),N?"Saving...":"Save System Settings"]})})]})]})};function Pp(){const[i,c]=f.useState("profile"),{user:u}=ys(),d=f.useMemo(()=>[{id:"profile",label:"Profile"},u?.role==="admin"&&{id:"system",label:"System"}].filter(Boolean),[u?.role]),m=f.useCallback(p=>{c(p)},[]);return t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:d.map(p=>t.jsx("button",{onClick:()=>m(p.id),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i===p.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,role:"tab","aria-selected":i===p.id,"aria-controls":`${p.id}-panel`,children:p.label},p.id))})}),t.jsxs("div",{role:"tabpanel",children:[i==="profile"&&t.jsx("div",{id:"profile-panel","aria-labelledby":"profile-tab",children:t.jsx(Wp,{})}),i==="system"&&u?.role==="admin"&&t.jsx("div",{id:"system-panel","aria-labelledby":"system-tab",children:t.jsx(Kp,{})})]})]})}function Jp(){const[i,c]=f.useState([]),[u,d]=f.useState(!0),[m,p]=f.useState(!1),[N,A]=f.useState(null),[j,g]=f.useState(""),[x,Z]=f.useState("all"),[D,W]=f.useState("overview"),[C,L]=f.useState([]),[y,Q]=f.useState(!1),[E,le]=f.useState(null),[P,H]=f.useState({name:"",code:"",description:"",color:"blue",machine_types:[]}),[me,Se]=f.useState([]),[He,ee]=f.useState(!1),[ae,ue]=f.useState(null),[se,ce]=f.useState({name:"",description:"",category:"Production",specifications:{}}),[k,F]=f.useState(!1),[S,X]=f.useState(!1),[O,B]=f.useState(null),[b,$]=f.useState({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),[R,V]=f.useState({backup_frequency:"daily",session_timeout:24,max_login_attempts:5,maintenance_mode:!1}),K=(_,de="success")=>{A({message:_,type:de}),setTimeout(()=>A(null),3e3)},xe=async(_=!1)=>{_?p(!0):d(!0);try{const de=await oe.get("/users");c(de)}catch(de){console.error("Failed to load users:",de),K("Failed to load users","danger")}finally{d(!1),p(!1)}},ie=async()=>{try{const _=await oe.get("/environments");console.log("Loaded environments:",_),L(_)}catch(_){console.error("Failed to load environments:",_),K("Failed to load environments","danger"),L([])}},Ae=async()=>{try{const _=await oe.get("/machine-types");console.log("Loaded machine types:",_),Se(_)}catch(_){console.error("Failed to load machine types:",_),Se([])}},ye=async(_=!1)=>{_?p(!0):d(!0);try{await Promise.all([xe(!1),ie(),Ae()])}catch(de){console.error("Failed to load data:",de)}finally{d(!1),p(!1)}},Ue=()=>{xe(!0)};f.useEffect(()=>{ye()},[]);const Me=async _=>{_.preventDefault();try{await oe.post("/users",b),F(!1),$({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),ie(),K("User created successfully")}catch(de){K("Failed to create user: "+de.message,"danger")}},$e=async _=>{_.preventDefault();try{await oe.put(`/users/${O.id}`,b),F(!1),B(null),$({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),ie(),K("User updated successfully")}catch(de){K("Failed to update user: "+de.message,"danger")}},ht=async _=>{if(window.confirm("Are you sure you want to delete this user?"))try{await oe.delete(`/users/${_}`),ie(),K("User deleted successfully")}catch(de){K("Failed to delete user: "+de.message,"danger")}},Ve=_=>{B(_),$({username:_.username,email:_.email,password:"",role:_.role,employee_code:_.employee_code||"",company:_.company||"Workforce"}),F(!0)},yt=async _=>{_.preventDefault();try{await oe.post("/environments",P),Q(!1),H({name:"",code:"",description:"",color:"blue",machine_types:[]}),ie(),K("Environment created successfully")}catch(de){K("Failed to create environment: "+de.message,"danger")}},ve=async _=>{if(_.preventDefault(),!E||!E.id){K("No environment selected for editing","danger");return}try{console.log("Editing environment:",E.id,P),await oe.put(`/environments/${E.id}`,P),Q(!1),le(null),H({name:"",code:"",description:"",color:"blue",machine_types:[]}),ie(),K("Environment updated successfully")}catch(de){console.error("Edit environment error:",de),K("Failed to update environment: "+(de.response?.data?.error||de.message),"danger")}},Be=async _=>{if(window.confirm("Are you sure you want to delete this environment? This action cannot be undone."))try{await oe.delete(`/environments/${_}`),ie(),K("Environment deleted successfully")}catch(de){K("Failed to delete environment: "+de.message,"danger")}},pe=_=>{le(_);let de=[];try{de=typeof _.machine_types=="string"?JSON.parse(_.machine_types):_.machine_types||[]}catch(Ie){console.error("Failed to parse machine types:",Ie),de=[]}H({name:_.name,code:_.code,description:_.description||"",color:_.color||"blue",machine_types:de}),Q(!0)},ga=async _=>{_.preventDefault();try{await oe.post("/machine-types",se),ee(!1),ce({name:"",description:"",category:"Production",specifications:{}}),Ae(),K("Machine type created successfully")}catch(de){K("Failed to create machine type: "+(de.response?.data?.error||de.message),"danger")}},M=async _=>{if(_.preventDefault(),!ae?.id){K("Invalid machine type selected","danger");return}try{await oe.put(`/machine-types/${ae.id}`,se),ee(!1),ue(null),ce({name:"",description:"",category:"Production",specifications:{}}),Ae(),K("Machine type updated successfully")}catch(de){console.error("Edit machine type error:",de),K("Failed to update machine type: "+(de.response?.data?.error||de.message),"danger")}},ne=async _=>{if(window.confirm("Are you sure you want to delete this machine type? This action cannot be undone."))try{await oe.delete(`/machine-types/${_}`),Ae(),K("Machine type deleted successfully")}catch(de){K("Failed to delete machine type: "+(de.response?.data?.error||de.message),"danger")}},Te=_=>{ue(_),ce({name:_.name,description:_.description||"",category:_.category||"Production",specifications:_.specifications||{}}),ee(!0)},Pe=async _=>{try{const de={name:_,description:"Created for environment management",category:"Production"};await oe.post("/machine-types",de),Ae(),K(`Machine type "${_}" created successfully`)}catch(de){console.error("Error creating machine type:",de),K(`Failed to create machine type "${_}": `+(de.response?.data?.error||de.message),"danger")}},pa=f.useMemo(()=>{let _=i;return x!=="all"&&(_=_.filter(de=>de.role===x)),j&&(_=_.filter(de=>de.username.toLowerCase().includes(j.toLowerCase())||de.email.toLowerCase().includes(j.toLowerCase())||de.employee_code&&de.employee_code.toLowerCase().includes(j.toLowerCase()))),_},[i,x,j]),ea=f.useMemo(()=>{const _=i.length,de=i.filter(rt=>rt.is_active!==0).length,Ie=i.filter(rt=>rt.role==="admin").length,st=i.filter(rt=>rt.role==="supervisor").length,nt=i.filter(rt=>rt.role==="operator").length,vt=i.filter(rt=>rt.role==="viewer").length;return{total:_,active:de,admins:Ie,supervisors:st,operators:nt,viewers:vt}},[i]),vs=_=>{const Ie={admin:{variant:"danger",icon:On},supervisor:{variant:"warning",icon:Qa},operator:{variant:"info",icon:et},viewer:{variant:"default",icon:$s}}[_]||{variant:"default",icon:et},st=Ie.icon;return t.jsxs(De,{variant:Ie.variant,children:[t.jsx(st,{className:"w-3 h-3 mr-1"}),_.toUpperCase()]})},bt=_=>t.jsxs(De,{variant:_?"success":"danger",children:[_?t.jsx(Qa,{className:"w-3 h-3 mr-1"}):t.jsx(Qg,{className:"w-3 h-3 mr-1"}),_?"ACTIVE":"INACTIVE"]}),ft=()=>t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(et,{className:"w-5 h-5 text-gray-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:ea.total})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Qa,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:ea.active})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(On,{className:"w-5 h-5 text-red-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Admins"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:ea.admins})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Qa,{className:"w-5 h-5 text-yellow-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Supervisors"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:ea.supervisors})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(et,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Operators"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ea.operators})]})]})}),t.jsx(Ne,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($s,{className:"w-5 h-5 text-gray-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Viewers"}),t.jsx("p",{className:"text-2xl font-bold text-gray-600",children:ea.viewers})]})]})})]}),Fe=({title:_,description:de,icon:Ie,onClick:st,color:nt="gray"})=>{const vt={blue:"border-blue-200 bg-blue-50 hover:bg-blue-100 text-blue-600",green:"border-green-200 bg-green-50 hover:bg-green-100 text-green-600",yellow:"border-yellow-200 bg-yellow-50 hover:bg-yellow-100 text-yellow-600",red:"border-red-200 bg-red-50 hover:bg-red-100 text-red-600",purple:"border-purple-200 bg-purple-50 hover:bg-purple-100 text-purple-600",gray:"border-gray-200 bg-gray-50 hover:bg-gray-100 text-gray-600"};return t.jsx(Ne,{className:`p-6 border-l-4 cursor-pointer transition-all duration-300 hover:shadow-lg ${vt[nt]}`,onClick:st,children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Ie,{className:"w-8 h-8"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:_}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:de})]})]})})};return u&&i.length===0?t.jsx("div",{className:"p-6 text-center",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[t.jsx(ot,{className:"w-5 h-5 animate-spin"}),"Loading admin panel..."]})}):t.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[N&&t.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${N.type==="success"?"bg-green-100 text-green-800 border border-green-200":N.type==="danger"?"bg-red-100 text-red-800 border border-red-200":N.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:N.message}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Panel"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system settings, users, and administration"})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs(he,{onClick:Ue,disabled:m,variant:"outline",children:[t.jsx(ot,{className:`w-4 h-4 mr-2 ${m?"animate-spin":""}`}),"Refresh"]})})]}),t.jsx(Ne,{className:"p-1",children:t.jsx("div",{className:"flex gap-1",children:[{id:"overview",label:"Overview",icon:Ft},{id:"users",label:"User Management",icon:et},{id:"environments",label:"Environments",icon:Ut},{id:"machine-types",label:"Machine Types",icon:ps},{id:"settings",label:"System Settings",icon:Ut},{id:"tools",label:"Admin Tools",icon:ps}].map(_=>{const de=_.icon;return t.jsxs("button",{onClick:()=>W(_.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${D===_.id?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[t.jsx(de,{className:"w-4 h-4"}),_.label]},_.id)})})}),D==="overview"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx(ft,{}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsx(Fe,{title:"User Management",description:"Add, edit, and manage user accounts",icon:et,onClick:()=>W("users"),color:"blue"}),t.jsx(Fe,{title:"System Settings",description:"Configure system parameters",icon:Ut,onClick:()=>W("settings"),color:"green"}),t.jsx(Fe,{title:"Database Backup",description:"Backup and restore data",icon:Jx,onClick:()=>K("Backup functionality coming soon","info"),color:"yellow"}),t.jsx(Fe,{title:"Activity Logs",description:"View system activity and logs",icon:qt,onClick:()=>K("Activity logs coming soon","info"),color:"purple"}),t.jsx(Fe,{title:"System Reports",description:"Generate comprehensive reports",icon:Ft,onClick:()=>K("Reports functionality coming soon","info"),color:"red"}),t.jsx(Fe,{title:"Maintenance Tools",description:"System maintenance and utilities",icon:ps,onClick:()=>W("tools"),color:"gray"})]})]}),D==="users"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx(ft,{}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"User Management"}),t.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),t.jsxs(he,{onClick:()=>F(!0),children:[t.jsx(No,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),t.jsx(Ne,{className:"p-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"Search users...",value:j,onChange:_=>g(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{className:"relative",children:[t.jsx(ai,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsxs("select",{value:x,onChange:_=>Z(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[t.jsx("option",{value:"all",children:"All Roles"}),t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"supervisor",children:"Supervisor"}),t.jsx("option",{value:"operator",children:"Operator"}),t.jsx("option",{value:"viewer",children:"Viewer"})]})]}),t.jsx("div",{className:"flex items-center justify-center md:justify-start",children:t.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",pa.length," of ",i.length," users"]})})]})}),t.jsx(Ne,{children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:["Username","Email","Employee Code","Role","Status","Last Login","Actions"].map(_=>t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:_},_))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:pa.length===0?t.jsx("tr",{children:t.jsxs("td",{colSpan:"7",className:"text-center py-10",children:[t.jsx(et,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500 mb-2",children:"No users found"}),t.jsxs(he,{onClick:()=>F(!0),size:"sm",children:[t.jsx(No,{className:"w-4 h-4 mr-2"}),"Add First User"]})]})}):pa.map(_=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.username})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:_.email}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:_.employee_code||"-"}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:vs(_.role)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:bt(_.is_active)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:_.last_login?new Date(_.last_login).toLocaleDateString():"Never"}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[t.jsx(he,{onClick:()=>Ve(_),size:"sm",variant:"outline",children:t.jsx(Fr,{className:"w-4 h-4"})}),t.jsx(he,{onClick:()=>ht(_.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:t.jsx(kn,{className:"w-4 h-4"})})]})]},_.id))})]})})})]}),D==="environments"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Environment Management"}),t.jsx("p",{className:"text-gray-600",children:"Configure production environments and their machine types"})]}),t.jsxs(he,{onClick:()=>{H({name:"",code:"",description:"",color:"blue",machine_types:[]}),le(null),Q(!0)},children:[t.jsx(ua,{className:"w-4 h-4 mr-2"}),"Add Environment"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.length===0?t.jsxs(Ne,{className:"col-span-full p-12 text-center",children:[t.jsx(Ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No environments configured"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production environment to get started"}),t.jsxs(he,{onClick:()=>{H({name:"",code:"",description:"",color:"blue",machine_types:[]}),le(null),Q(!0)},children:[t.jsx(ua,{className:"w-4 h-4 mr-2"}),"Add First Environment"]})]}):C.map(_=>t.jsxs(Ne,{className:`p-6 border-l-4 border-${_.color||"blue"}-200 hover:shadow-lg transition-all duration-300`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:_.name}),t.jsx("p",{className:"text-sm text-gray-500 mb-2 uppercase font-mono",children:_.code}),_.description&&t.jsx("p",{className:"text-sm text-gray-600",children:_.description})]}),t.jsx(De,{variant:_.color==="blue"?"info":_.color==="green"?"success":_.color==="yellow"?"warning":"default",children:_.code})]}),(()=>{let de=[];try{de=typeof _.machine_types=="string"?JSON.parse(_.machine_types):_.machine_types||[]}catch(Ie){console.error("Failed to parse machine types:",Ie),de=[]}return de&&de.length>0&&t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Machine Types:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[de.slice(0,3).map(Ie=>{const st=me.find(nt=>nt.type===Ie);return t.jsxs("div",{className:"relative group",children:[t.jsxs(De,{variant:"default",size:"sm",className:"cursor-help",children:[Ie,st&&t.jsx("span",{className:"ml-1 px-1 py-0.5 text-xs bg-blue-200 text-blue-800 rounded-full",children:st.machine_count})]}),st&&st.machines&&Array.isArray(st.machines)&&t.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity z-10 whitespace-nowrap",children:st.machines.filter(nt=>nt&&nt!==null).join(", ")})]},Ie)}),de.length>3&&t.jsxs(De,{variant:"default",size:"sm",children:["+",de.length-3," more"]})]})]})})(),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsxs(he,{onClick:()=>pe(_),variant:"outline",size:"sm",className:"flex-1",children:[t.jsx(Fr,{className:"w-4 h-4 mr-1"}),"Edit"]}),t.jsx(he,{onClick:()=>Be(_.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",children:t.jsx(kn,{className:"w-4 h-4"})})]})]},_.id))})]}),D==="machine-types"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Machine Types Management"}),t.jsx("p",{className:"text-gray-600",children:"Manage machine types used throughout the production system"})]}),t.jsxs(he,{onClick:()=>{ce({name:"",description:"",category:"Production",specifications:{}}),ue(null),ee(!0)},children:[t.jsx(ua,{className:"w-4 h-4 mr-2"}),"Add Machine Type"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:me.length===0?t.jsxs(Ne,{className:"col-span-full p-12 text-center",children:[t.jsx(ps,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No machine types configured"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first machine type to get started"}),t.jsxs(he,{onClick:()=>{ce({name:"",description:"",category:"Production",specifications:{}}),ue(null),ee(!0)},children:[t.jsx(ua,{className:"w-4 h-4 mr-2"}),"Add First Machine Type"]})]}):me.map(_=>t.jsxs(Ne,{className:"p-6 hover:shadow-lg transition-all duration-300",children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:_.name}),t.jsx("p",{className:"text-sm text-gray-500 mb-2",children:_.category}),_.description&&t.jsx("p",{className:"text-sm text-gray-600",children:_.description})]}),t.jsxs(De,{variant:"info",children:[_.machine_count||0," machines"]})]}),_.machines&&Array.isArray(_.machines)&&_.machines.length>0&&t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Machines:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.machines.filter(de=>de&&de!==null).slice(0,3).map((de,Ie)=>t.jsx(De,{variant:"default",size:"sm",children:de},Ie)),_.machines.length>3&&t.jsxs(De,{variant:"default",size:"sm",children:["+",_.machines.length-3," more"]})]})]}),t.jsxs("div",{className:"flex gap-2 mt-4",children:[t.jsxs(he,{onClick:()=>Te(_),variant:"outline",size:"sm",className:"flex-1",children:[t.jsx(Fr,{className:"w-4 h-4 mr-1"}),"Edit"]}),t.jsx(he,{onClick:()=>ne(_.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",disabled:_.machine_count>0,children:t.jsx(kn,{className:"w-4 h-4"})})]}),_.machine_count>0&&t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cannot delete: machines are using this type"})]},_.id))})]}),D==="settings"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"System Settings"}),t.jsx("p",{className:"text-gray-600",children:"Configure system parameters and preferences"})]}),t.jsx(Ne,{className:"p-6",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),t.jsxs("select",{value:R.backup_frequency,onChange:_=>V({...R,backup_frequency:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"hourly",children:"Hourly"}),t.jsx("option",{value:"daily",children:"Daily"}),t.jsx("option",{value:"weekly",children:"Weekly"}),t.jsx("option",{value:"monthly",children:"Monthly"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (hours)"}),t.jsx("input",{type:"number",value:R.session_timeout,onChange:_=>V({...R,session_timeout:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"72"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Login Attempts"}),t.jsx("input",{type:"number",value:R.max_login_attempts,onChange:_=>V({...R,max_login_attempts:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"3",max:"10"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Mode"}),t.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[t.jsx("button",{onClick:()=>V({...R,maintenance_mode:!R.maintenance_mode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${R.maintenance_mode?"bg-blue-600":"bg-gray-200"}`,children:t.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${R.maintenance_mode?"translate-x-6":"translate-x-1"}`})}),t.jsx("span",{className:"text-sm text-gray-600",children:R.maintenance_mode?"Enabled":"Disabled"})]})]})]}),t.jsx("div",{className:"flex justify-end pt-4",children:t.jsxs(he,{onClick:()=>K("Settings saved successfully"),children:[t.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})})]}),D==="tools"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Admin Tools"}),t.jsx("p",{className:"text-gray-600",children:"System maintenance and administrative utilities"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsx(Fe,{title:"Export Users",description:"Export user data to CSV/Excel",icon:Ga,onClick:()=>K("Export functionality coming soon","info"),color:"blue"}),t.jsx(Fe,{title:"Import Users",description:"Import users from CSV/Excel",icon:G0,onClick:()=>K("Import functionality coming soon","info"),color:"green"}),t.jsx(Fe,{title:"Clear Cache",description:"Clear system cache and temporary files",icon:ot,onClick:()=>K("Cache cleared successfully"),color:"yellow"}),t.jsx(Fe,{title:"System Health",description:"Check system health and status",icon:qt,onClick:()=>K("System health check completed","success"),color:"purple"}),t.jsx(Fe,{title:"Security Audit",description:"Run security audit and checks",icon:On,onClick:()=>K("Security audit initiated","info"),color:"red"}),t.jsx(Fe,{title:"Log Analysis",description:"Analyze system logs and errors",icon:Ft,onClick:()=>K("Log analysis coming soon","info"),color:"gray"})]})]}),y&&t.jsx(Dt,{title:E?"Edit Environment":"Add New Environment",onClose:()=>{Q(!1),le(null),H({name:"",code:"",description:"",color:"blue",machine_types:[]})},children:t.jsxs("form",{onSubmit:E?ve:yt,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Name"}),t.jsx("input",{type:"text",placeholder:"e.g. Blending Department",value:P.name,onChange:_=>H({...P,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Code"}),t.jsx("input",{type:"text",placeholder:"e.g. blending",value:P.code,onChange:_=>H({...P,code:_.target.value.toLowerCase().replace(/\s+/g,"_")}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used internally (lowercase, no spaces)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),t.jsx("textarea",{placeholder:"Brief description of this environment",value:P.description,onChange:_=>H({...P,description:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),t.jsxs("select",{value:P.color,onChange:_=>H({...P,color:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"blue",children:"Blue"}),t.jsx("option",{value:"green",children:"Green"}),t.jsx("option",{value:"yellow",children:"Yellow"}),t.jsx("option",{value:"purple",children:"Purple"}),t.jsx("option",{value:"red",children:"Red"}),t.jsx("option",{value:"gray",children:"Gray"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Types"}),t.jsx("div",{className:"space-y-3",children:me.length>0?me.map(_=>t.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[t.jsx("input",{type:"checkbox",id:`machine-type-${_.name||_.type}`,checked:P.machine_types.includes(_.name||_.type),onChange:de=>{const Ie=de.target.checked,st=_.name||_.type,nt=Ie?[...P.machine_types,st]:P.machine_types.filter(vt=>vt!==st);H({...P,machine_types:nt})},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:`machine-type-${_.name||_.type}`,className:"block text-sm font-medium text-gray-900 cursor-pointer",children:_.name||_.type}),t.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:[_.machine_count||0," machine",(_.machine_count||0)!==1?"s":""]}),t.jsx("span",{className:"text-gray-400",children:_.machines&&Array.isArray(_.machines)&&_.machines.length>0?t.jsxs(t.Fragment,{children:[_.machines.filter(de=>de&&de!==null).slice(0,2).join(", "),_.machines.length>2&&` +${_.machines.length-2} more`]}):"No machines using this type"})]})]})]},_.name||_.type)):t.jsxs("div",{className:"text-center py-4 text-gray-500",children:[t.jsx(Ut,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),t.jsx("p",{className:"text-sm",children:"Loading machine types..."})]})}),t.jsx("div",{className:"mt-4 p-3 border-2 border-dashed border-gray-300 rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("input",{type:"text",placeholder:"Type new machine type name and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onKeyPress:_=>{if(_.key==="Enter"&&_.target.value.trim()){const de=_.target.value.trim();P.machine_types.includes(de)||H({...P,machine_types:[...P.machine_types,de]}),Pe(de),_.target.value=""}}}),t.jsx("span",{className:"text-xs text-gray-500",children:"Press Enter to add"})]})}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select existing machine types or add new ones by typing above"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(he,{type:"button",onClick:()=>{Q(!1),le(null),H({name:"",code:"",description:"",color:"blue",machine_types:[]})},variant:"outline",children:"Cancel"}),t.jsxs(he,{type:"submit",children:[E?t.jsx(Cn,{className:"w-4 h-4 mr-2"}):t.jsx(ua,{className:"w-4 h-4 mr-2"}),E?"Update Environment":"Create Environment"]})]})]})}),He&&t.jsx(Dt,{title:ae?"Edit Machine Type":"Add New Machine Type",onClose:()=>{ee(!1),ue(null),ce({name:"",description:"",category:"Production",specifications:{}})},children:t.jsxs("form",{onSubmit:ae?M:ga,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type Name"}),t.jsx("input",{type:"text",placeholder:"e.g. Bulk Line, Processing Unit",value:se.name,onChange:_=>ce({...se,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),t.jsxs("select",{value:se.category,onChange:_=>ce({...se,category:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"Production",children:"Production"}),t.jsx("option",{value:"Processing",children:"Processing"}),t.jsx("option",{value:"Packaging",children:"Packaging"}),t.jsx("option",{value:"Quality Control",children:"Quality Control"}),t.jsx("option",{value:"Maintenance",children:"Maintenance"}),t.jsx("option",{value:"Utility",children:"Utility"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),t.jsx("textarea",{placeholder:"Describe the machine type and its capabilities",value:se.description,onChange:_=>ce({...se,description:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(he,{type:"button",onClick:()=>{ee(!1),ue(null),ce({name:"",description:"",category:"Production",specifications:{}})},variant:"outline",children:"Cancel"}),t.jsxs(he,{type:"submit",children:[ae?t.jsx(Cn,{className:"w-4 h-4 mr-2"}):t.jsx(ua,{className:"w-4 h-4 mr-2"}),ae?"Update Machine Type":"Create Machine Type"]})]})]})}),k&&t.jsx(Dt,{title:O?"Edit User":"Add New User",onClose:()=>{F(!1),B(null),$({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"})},children:t.jsxs("form",{onSubmit:O?$e:Me,className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),t.jsx("input",{type:"text",placeholder:"Username",value:b.username,onChange:_=>$({...b,username:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Code"}),t.jsx("input",{type:"text",placeholder:"1234",value:b.employee_code,onChange:_=>$({...b,employee_code:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",placeholder:"user@example.com",value:b.email,onChange:_=>$({...b,email:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",O&&"(leave blank to keep current)"]}),t.jsx("input",{type:"password",placeholder:"Password",value:b.password,onChange:_=>$({...b,password:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!O})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),t.jsxs("select",{value:b.role,onChange:_=>$({...b,role:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"admin",children:"Admin"}),t.jsx("option",{value:"supervisor",children:"Supervisor"}),t.jsx("option",{value:"operator",children:"Operator"}),t.jsx("option",{value:"viewer",children:"Viewer"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),t.jsx("input",{type:"text",placeholder:"Company name",value:b.company,onChange:_=>$({...b,company:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(he,{type:"button",onClick:()=>{F(!1),B(null),$({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"})},variant:"outline",children:"Cancel"}),t.jsxs(he,{type:"submit",children:[O?t.jsx(Cn,{className:"w-4 h-4 mr-2"}):t.jsx(No,{className:"w-4 h-4 mr-2"}),O?"Update User":"Create User"]})]})]})})]})}const W0=(i,c)=>{const u=i.map(A=>Object.values(A).join(",")).join(`
`),m=Object.keys(i[0]||{}).join(",")+`
`+u,p=new Blob([m],{type:"text/csv;charset=utf-8;"}),N=document.createElement("a");N.href=URL.createObjectURL(p),N.download=c,N.click()},Fp=(i,c)=>{const u=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),d=document.createElement("a");d.href=URL.createObjectURL(u),d.download=c,d.click()},Ip=(i,c)=>{if(!window.XLSX){console.warn("XLSX library not available, falling back to CSV export");const g=[...i.supervisors.map(x=>({Type:"Supervisor","Employee Code":x.employee_code||"N/A",Name:x.fullName||x.name,Machine:"N/A",Position:"Supervisor",Shift:x.shift,Company:"N/A",Status:x.status,Date:c})),...i.assignments.map(x=>({Type:"Employee","Employee Code":x.employee_code||"N/A",Name:qo(x),Machine:x.machine||"N/A",Position:x.position?x.position:x.role?x.role:"Operator",Shift:x.shift,Company:x.company||"N/A",Status:x.status,Date:c}))];W0(g,`labour-layout-${c}.csv`);return}const u=window.XLSX.utils.book_new(),d=new Date(c),m=d.toLocaleDateString("en-US",{weekday:"long"}),p=d.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),N=[];N.push(["DAILY LABOUR LAYOUT REPORT"]),N.push([]),N.push(["Day of Week:",m]),N.push(["Date:",p]),N.push(["Total Supervisors:",i.summary.total_supervisors||0]),N.push(["Total Assignments:",i.summary.total_assignments||0]),N.push([]),i.supervisors.length>0&&(N.push(["SUPERVISORS ON DUTY"]),N.push(["Employee Code","Name","Area","Position","Shift","Status"]),i.supervisors.forEach(g=>{N.push([g.employee_code||"N/A",g.fullName||g.name,"Supervision","Supervisor",g.shift,g.status])})),i.assignments.length>0&&(N.push([]),N.push(["ASSIGNED EMPLOYEES"]),N.push(["Employee Code","Name","Machine","Position","Shift","Company","Status"]),i.assignments.forEach(g=>{N.push([g.employee_code||"N/A",g.fullName||g.name,g.machine||"N/A",g.position?g.position:g.role?g.role:"Operator",g.shift,g.company||"N/A",g.status])}));const A=window.XLSX.utils.aoa_to_sheet(N),j=[{wch:20},{wch:18},{wch:15},{wch:10},{wch:12}];A["!cols"]=j,window.XLSX.utils.book_append_sheet(u,A,"Labour Layout"),window.XLSX.writeFile(u,`labour-layout-${c}.xlsx`)};function ey(){const[i,c]=f.useState({supervisors:[],assignments:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}}),[u,d]=f.useState(!0),[m,p]=f.useState(()=>{const Q=new URLSearchParams(window.location.search).get("date");return Q||new Date().toISOString().split("T")[0]}),[N,A]=f.useState(!1),[j,g]=f.useState("excel"),[x,Z]=f.useState("all"),[D,W]=f.useState("all"),C=async y=>{d(!0);try{const Q=await oe.get("/labour/roster?date="+y);c(Q)}catch(Q){console.error("Failed to fetch roster for "+y+":",Q);try{const E=await oe.get("/labour/today");c({supervisors:[],assignments:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}})}catch(E){console.error("Failed to fetch roster:",E),alert("Failed to load roster. Please check the server connection."),c({supervisors:[],assignments:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}})}}finally{d(!1)}};f.useEffect(()=>{C(m)},[m]);const L=async()=>{try{if(d(!0),j==="excel")Ip(i,m),alert(`Exported labour layout for ${m}`);else{const y=[...i.supervisors.map(E=>({Type:"Supervisor",Name:E.fullName||E.name,"Employee Code":E.employee_code||"N/A",Machine:"N/A","Production Area":"Supervision",Position:E.position,Shift:E.shift,Status:E.status,Date:m})),...i.assignments.map(E=>({Type:"Employee",Name:qo(E),"Employee Code":E.employee_code||"N/A",Machine:E.machine||"N/A","Production Area":E.production_area||"N/A",Position:E.position,Shift:E.shift,Status:E.status,Date:m}))],Q=`labour-layout-${m}.${j}`;j==="csv"?W0(y,Q):Fp(y,Q),alert(`Exported ${y.length} records to ${j.toUpperCase()}`)}A(!1)}catch(y){console.error("Export error:",y),alert("Export failed: "+y.message)}finally{d(!1)}};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[t.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-blue-200 text-sm mb-2",children:[t.jsx("span",{className:"cursor-pointer hover:text-white transition-colors",onClick:()=>window.location.href="/labor-planner?date="+m,children:"Labor Planner"}),t.jsx("span",{children:">"}),t.jsx("span",{className:"text-white font-medium",children:"Layout View"}),t.jsx("span",{className:"ml-2 px-2 py-1 bg-green-500 bg-opacity-20 text-green-200 rounded-full text-xs",children:"Live Data"})]}),t.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[t.jsx(et,{className:"w-8 h-8"}),"Daily Labour Layout"]}),t.jsx("p",{className:"text-blue-100 mt-1",children:"Real-time workforce management and reporting"})]})}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[t.jsx(Va,{className:"w-4 h-4"}),t.jsx("input",{type:"date",value:m,onChange:y=>p(y.target.value),className:"bg-transparent text-white placeholder-blue-200 border-none outline-none text-sm font-medium"})]}),t.jsxs("button",{onClick:()=>window.location.href="/labor-planner?date="+m,className:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[t.jsx(Q0,{className:"w-4 h-4"}),"Plan Workforce"]}),t.jsxs("button",{onClick:()=>A(!0),className:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[t.jsx(Ga,{className:"w-4 h-4"}),"Export"]}),t.jsxs("button",{onClick:()=>C(m),className:"bg-white bg-opacity-10 hover:bg-white hover:bg-opacity-20 backdrop-blur-sm px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[t.jsx(ot,{className:"w-4 h-4"}),"Refresh"]})]})]})}),t.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-blue-100 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Supervisors"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_supervisors||0})]}),t.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:t.jsx(Qa,{className:"w-6 h-6 text-blue-600"})})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-green-100 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-600",children:"Assignments"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_assignments||0})]}),t.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:t.jsx(So,{className:"w-6 h-6 text-green-600"})})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Machines Active"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_machines_in_use||0})]}),t.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:t.jsx(Ut,{className:"w-6 h-6 text-orange-600"})})]})})]}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Workforce Overview"}),t.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[m," • ",(i.summary?.total_supervisors||0)+(i.summary?.total_assignments||0)+(i.summary?.total_machines_in_use||0)," total records"]})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("select",{value:x,onChange:y=>Z(y.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"All Shifts"}),t.jsx("option",{value:"day",children:"Day Shift"}),t.jsx("option",{value:"night",children:"Night Shift"})]})}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("select",{value:D,onChange:y=>W(y.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[t.jsx("option",{value:"all",children:"Machine [all]"}),Array.from(new Set(i.assignments?.map(y=>y.machine).filter(y=>y))).sort().map((y,Q)=>t.jsx("option",{value:y,children:y},Q))]})})]})]})})}),t.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:t.jsx("div",{className:"p-6",children:u?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"text-gray-500 mt-3",children:"Loading workforce data..."})]}):t.jsxs("div",{className:"space-y-8",children:[i.supervisors&&i.supervisors.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx(et,{className:"w-5 h-5 text-blue-600"})}),"Supervisors on Duty"]}),t.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee Code"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Name"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Area"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Position"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Shift"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-blue-100",children:i.supervisors.filter(y=>x==="all"?!0:y.shift===x).map(y=>t.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm text-gray-600 font-mono font-semibold",children:y.employee_code||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:t.jsx(et,{className:"w-4 h-4 text-blue-600"})}),t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:y.fullName||y.name})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm text-gray-600",children:"Supervision"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm text-gray-900 font-medium",children:"Supervisor"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${y.shift==="day"?"bg-amber-100 text-amber-800":"bg-indigo-100 text-indigo-800"}`,children:y.shift==="day"?"Day Shift":"Night Shift"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-800",children:y.status})})]},`supervisor-${y.id}`))})]})})})]}),i.assignments&&i.assignments.filter(y=>{const Q=x==="all"?!0:y.shift===x,E=D==="all"?!0:y.machine===D;return Q&&E}).length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx(So,{className:"w-5 h-5 text-green-600"})}),"Assigned Employees"]}),t.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee Code"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Name"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Machine"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Position"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Shift"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Company"}),t.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:i.assignments.filter(y=>{const Q=x==="all"?!0:y.shift===x,E=D==="all"?!0:y.machine===D;return Q&&E}).map(y=>t.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm text-gray-600 font-mono font-semibold",children:y.employee_code||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 rounded-full p-2 mr-3",children:t.jsx(et,{className:"w-4 h-4 text-green-600"})}),t.jsx("div",{className:"text-sm font-semibold text-gray-900",children:y.fullName||y.name})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm text-gray-900 font-medium",children:y.machine||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm text-gray-600",children:y.position?y.position:y.role?y.role:"Operator"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${y.shift==="day"?"bg-amber-100 text-amber-800":"bg-indigo-100 text-indigo-800"}`,children:y.shift==="day"?"Day Shift":"Night Shift"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:"text-sm text-gray-600",children:y.company||"N/A"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${y.status==="present"?"bg-emerald-100 text-emerald-800":y.status==="absent"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:y.status})})]},`assignment-${y.id}`))})]})})})]}),(i.supervisors?i.supervisors.length:0)===0&&(i.assignments?i.assignments.length:0)===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx(et,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),t.jsxs("p",{children:["No labour data found for ",m]}),t.jsx("p",{className:"text-sm",children:"Try selecting a different date or check if data has been entered for this date."})]})]})})})]})]}),N&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export Labour Layout"}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),t.jsxs("select",{value:j,onChange:y=>g(y.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[t.jsx("option",{value:"excel",children:"Excel (.xlsx)"}),t.jsx("option",{value:"csv",children:"CSV (.csv)"}),t.jsx("option",{value:"json",children:"JSON (.json)"})]})]})}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[t.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),t.jsx("button",{onClick:L,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Export"})]})]})})]})}const ty=()=>{const i=new Date;return i.setHours(i.getHours()+2),i.toISOString().split("T")[0]},ay=({onShowNotification:i})=>{const[c,u]=f.useState(ty()),[d,m]=f.useState([]),[p,N]=f.useState(!0),[A,j]=f.useState(null),g=W=>{const C=new Date(c);C.setDate(C.getDate()+W),u(C.toISOString().split("T")[0])},x=async W=>{try{N(!0),j(null);const C=await oe.get(`/planner/assignments?date=${W}`);m(C||[])}catch(C){console.error("Error fetching attendance data:",C),j("Failed to load attendance data"),i?.("Failed to load attendance data","danger")}finally{N(!1)}},Z=async(W,C)=>{try{await oe.patch(`/planner/assignments/${W}`,{status:C}),await x(c),i?.(`Attendance updated to ${C}`,"success")}catch(L){console.error("Error updating attendance:",L),i?.("Failed to update attendance status","danger")}},D=f.useMemo(()=>{const W=d.filter(y=>y.status==="present").length,C=d.filter(y=>y.status==="absent").length,L=d.filter(y=>y.status==="planned"||!y.status).length;return{present:W,absent:C,pending:L,total:d.length}},[d]);return f.useEffect(()=>{x(c)},[c]),p?t.jsx("div",{className:"flex-1 p-4 md:p-6",children:t.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:t.jsxs("div",{className:"flex items-center justify-center py-16",children:[t.jsx(ot,{className:"w-8 h-8 animate-spin text-blue-500"}),t.jsx("span",{className:"ml-3 text-gray-600",children:"Loading attendance data..."})]})})}):t.jsx("div",{className:"flex-1 p-4 md:p-6",children:t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl",children:t.jsx(Qa,{className:"w-6 h-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Attendance Tracking"}),t.jsx("p",{className:"text-slate-600 text-sm",children:"Monitor daily attendance and presence"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>g(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:"‹"}),t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-50 rounded-lg",children:[t.jsx(Va,{className:"w-4 h-4 text-slate-500"}),t.jsx("input",{type:"date",value:c,onChange:W=>u(W.target.value),className:"bg-transparent border-none focus:outline-none font-medium text-sm md:text-base"})]}),t.jsx("button",{onClick:()=>g(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:"›"}),t.jsx("button",{onClick:()=>x(c),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:t.jsx(ot,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsx("div",{className:"bg-emerald-50 border-emerald-200 text-emerald-700 rounded-xl p-4 border",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-emerald-100",children:t.jsx(Ye,{className:"w-5 h-5 text-emerald-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium opacity-90",children:"Present"}),t.jsx("p",{className:"text-2xl font-bold",children:D.present})]})]})}),t.jsx("div",{className:"bg-red-50 border-red-200 text-red-700 rounded-xl p-4 border",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-red-100",children:t.jsx(Ml,{className:"w-5 h-5 text-red-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium opacity-90",children:"Absent"}),t.jsx("p",{className:"text-2xl font-bold",children:D.absent})]})]})}),t.jsx("div",{className:"bg-amber-50 border-amber-200 text-amber-700 rounded-xl p-4 border",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-amber-100",children:t.jsx(Gx,{className:"w-5 h-5 text-amber-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium opacity-90",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold",children:D.pending})]})]})})]}),d.length>0?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("h3",{className:"font-semibold text-slate-900 mb-3",children:["Team Attendance (",d.length," employees)"]}),d.map(W=>t.jsx("div",{className:"bg-white rounded-xl border-2 p-4 hover:shadow-lg transition-all duration-300",children:t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shrink-0",children:t.jsx("span",{className:"text-white font-medium text-sm",children:W.employee_code?.slice(0,2)||W.username?.slice(0,2).toUpperCase()})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-semibold text-slate-900 text-base truncate",children:W.fullName||W.username}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm",children:[t.jsx("span",{className:"text-slate-600",children:W.employee_code}),t.jsx("span",{className:"text-slate-400",children:"•"}),t.jsx("span",{className:"text-slate-600 truncate",children:W.machine_name}),W.job_role&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-slate-400",children:"•"}),t.jsx("span",{className:"font-medium text-blue-600",children:W.job_role})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W.shift==="day"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[W.shift," shift"]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W.status==="present"?"bg-emerald-100 text-emerald-700":W.status==="absent"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:W.status==="present"?"Present":W.status==="absent"?"Absent":"Pending"})]})]})]}),t.jsxs("div",{className:"flex gap-2 shrink-0",children:[t.jsx("button",{onClick:()=>Z(W.id,"present"),className:`min-w-[44px] min-h-[44px] p-2 rounded-lg border transition-all ${W.status==="present"?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-slate-200 text-slate-600 hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-600"}`,children:t.jsx(Ye,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>Z(W.id,"absent"),className:`min-w-[44px] min-h-[44px] p-2 rounded-lg border transition-all ${W.status==="absent"?"bg-red-500 border-red-500 text-white":"bg-white border-slate-200 text-slate-600 hover:bg-red-50 hover:border-red-200 hover:text-red-600"}`,children:t.jsx(Ml,{className:"w-5 h-5"})})]})]})},W.id))]}):t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:t.jsx(Qa,{className:"w-10 h-10 text-slate-400"})}),t.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:"No assignments found"}),t.jsx("p",{className:"text-slate-500 mb-4",children:"No scheduled assignments for this date"}),t.jsx("p",{className:"text-sm text-slate-400",children:"Check the planning board to create assignments first"})]}),A&&t.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-red-700 text-sm",children:A})})]})})},K0=()=>{const i=new Date;return i.setHours(i.getHours()+2),i.toISOString().split("T")[0]},sy=i=>new Date(i).toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),ti=({value:i,onChange:c,role:u,environment:d,shift:m,date:p,machineId:N,orderId:A,workers:j,assignments:g,yesterdayAssignments:x=[],className:Z=""})=>{const[D,W]=f.useState(!1),C=j.filter(H=>u==="supervisor"?H.role==="supervisor":u==="forklift"?H.role==="operator":H.role==="operator"||H.role==="packer"),L=H=>g.find(ae=>ae.employee_id===H&&ae.machine_id===N&&ae.shift_type===m&&ae.role===u&&ae.assignment_date===p)?"current":g.filter(ae=>ae.employee_id===H&&ae.assignment_date===p).length>0?"assigned":x.find(ae=>ae.employee_id===H&&ae.machine_id===N&&ae.role===u)?"continuity":x.find(ae=>ae.employee_id===H)?"experienced":"available",y=H=>{switch(H){case"current":return"text-blue-600 bg-blue-50";case"continuity":return"text-green-600 bg-green-50";case"experienced":return"text-emerald-600 bg-emerald-50";case"available":return"text-gray-600 bg-gray-50";case"assigned":return"text-yellow-600 bg-yellow-50";default:return"text-gray-600 bg-gray-50"}},Q=H=>{switch(H){case"current":return t.jsx(Vg,{className:"w-3 h-3"});case"continuity":return t.jsx(Ye,{className:"w-3 h-3"});case"experienced":return t.jsx(Ln,{className:"w-3 h-3"});case"available":return t.jsx(et,{className:"w-3 h-3"});case"assigned":return t.jsx(It,{className:"w-3 h-3"});default:return null}},E=H=>{switch(H){case"current":return"Current";case"continuity":return"Same role yesterday";case"experienced":return"Worked yesterday";case"available":return"Available";case"assigned":return"Already assigned today";default:return""}},le=C.sort((H,me)=>{const Se=L(H.id),He=L(me.id),ee={current:0,continuity:1,experienced:2,available:3,assigned:4};return(ee[Se]||5)-(ee[He]||5)}),P=i?C.find(H=>H.id===i):null;return t.jsxs("div",{className:`relative ${Z}`,children:[t.jsx("button",{type:"button",onClick:()=>W(!D),className:`w-full px-3 py-2 text-left bg-white border rounded-lg shadow-sm hover:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${P?"border-blue-200":"border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:P?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${y(L(P.id))}`,children:Q(L(P.id))}),t.jsx("span",{className:"font-medium text-gray-900 truncate",children:P.full_name||P.username}),t.jsxs("span",{className:"text-xs text-gray-500 truncate",children:["(",P.employee_code,")"]})]}):t.jsxs("span",{className:"text-gray-400",children:["Select ",u,"..."]})}),t.jsx(Yx,{className:`w-4 h-4 text-gray-400 transition-transform ${D?"rotate-180":""}`})]})}),D&&t.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:t.jsxs("div",{className:"py-1",children:[t.jsx("button",{onClick:()=>{c(null),W(!1)},className:"w-full px-3 py-2 text-left text-gray-400 hover:bg-gray-50",children:"No assignment"}),le.map(H=>{const me=L(H.id);return t.jsxs("button",{onClick:()=>{c(H.id),W(!1)},className:`w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center gap-2 ${me==="assigned"?"opacity-60":""}`,children:[t.jsx("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${y(me)}`,children:Q(me)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium text-gray-900 truncate",children:H.full_name||H.username}),t.jsxs("div",{className:"text-xs text-gray-500",children:[H.employee_code," • ",E(me)]})]})]},H.id)})]})})]})},ly=({machine:i,workers:c,assignments:u,yesterdayAssignments:d,onAssignmentChange:m,selectedDate:p,isLocked:N=!1})=>{const A=C=>u.filter(L=>L.machine_id===i.id&&L.assignment_date===p&&L.shift_type===C),j=(C,L)=>{const y=u.find(Q=>Q.machine_id===i.id&&Q.assignment_date===p&&Q.shift_type===C&&Q.role===L);return y?y.employee_id:null},g=(C,L,y)=>{m(i.id,C,L,y)},Z=(()=>{const C=["operator"];return i.operators_per_shift>1&&C.push("helper"),i.hopper_loaders_per_shift>0&&C.push("loader"),i.packers_per_shift>0&&C.push("packer"),C})(),D=i.day_shift_active!==!1,W=i.night_shift_active!==!1;return t.jsxs("div",{className:"grid grid-cols-12 gap-4 py-4 px-4 border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[t.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${i.status==="in_use"?"bg-green-100 text-green-600":i.status==="maintenance"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:t.jsx(Lt,{className:"w-4 h-4"})}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"font-medium text-gray-900 truncate",children:i.name}),t.jsx("div",{className:"text-xs text-gray-500 truncate",children:i.type}),i.order_number&&t.jsxs("div",{className:"text-xs text-blue-600 font-medium truncate",children:["Order: ",i.order_number]}),i.order_duration&&t.jsxs("div",{className:"text-xs text-purple-600 truncate",children:[i.order_duration," day order"]})]})]}),t.jsx("div",{className:"col-span-4",children:D?t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Z.map(C=>t.jsx(ti,{value:j("day",C),onChange:L=>g("day",C,L),role:C,environment:i.environment,shift:"day",date:p,machineId:i.id,orderId:i.order_id,workers:c,assignments:u,yesterdayAssignments:d,className:"text-sm"},`day-${C}`))}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 bg-gray-50 rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsx(zn,{className:"w-4 h-4 mx-auto mb-1"}),t.jsx("span",{className:"text-xs",children:"Not Running"})]})})}),t.jsx("div",{className:"col-span-4",children:W?t.jsx("div",{className:"grid grid-cols-2 gap-2",children:Z.map(C=>t.jsx(ti,{value:j("night",C),onChange:L=>g("night",C,L),role:C,environment:i.environment,shift:"night",date:p,machineId:i.id,orderId:i.order_id,workers:c,assignments:u,yesterdayAssignments:d,className:"text-sm"},`night-${C}`))}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 bg-gray-50 rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Rn,{className:"w-4 h-4 mx-auto mb-1"}),t.jsx("span",{className:"text-xs",children:"Not Running"})]})})}),t.jsx("div",{className:"col-span-1 flex items-center justify-center",children:N?t.jsx(Eo,{className:"w-4 h-4 text-gray-400"}):t.jsxs("div",{className:"flex flex-col items-center gap-1",children:[D&&A("day").length>0&&t.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full",title:"Day shift assigned",children:t.jsx(ei,{className:"w-2 h-2 text-yellow-600"})}),W&&A("night").length>0&&t.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full",title:"Night shift assigned",children:t.jsx(Rn,{className:"w-2 h-2 text-blue-600"})})]})})]})},ny=({environment:i,workers:c,assignments:u,yesterdayAssignments:d,onAssignmentChange:m,selectedDate:p,isLocked:N=!1})=>{const A=[{role:"supervisor",label:"Supervisor",icon:On},{role:"forklift",label:"Forklift Driver",icon:qg}],j=(x,Z)=>{const D=u.find(W=>W.machine_id===null&&W.assignment_date===p&&W.shift_type===x&&W.role===Z);return D?D.employee_id:null},g=(x,Z,D)=>{m(null,x,Z,D)};return t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[t.jsx(Lt,{className:"w-5 h-5"}),i.toUpperCase()," ENVIRONMENT SUPPORT - TODAY"]}),t.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[t.jsx("div",{className:"col-span-3",children:t.jsx("div",{className:"font-medium text-gray-700",children:"Support Role"})}),t.jsx("div",{className:"col-span-4",children:t.jsxs("div",{className:"font-medium text-gray-700 text-center flex items-center justify-center gap-2",children:[t.jsx(ei,{className:"w-4 h-4 text-yellow-600"}),"Day Shift (06:00-18:00)"]})}),t.jsx("div",{className:"col-span-4",children:t.jsxs("div",{className:"font-medium text-gray-700 text-center flex items-center justify-center gap-2",children:[t.jsx(Rn,{className:"w-4 h-4 text-blue-600"}),"Night Shift (18:00-06:00)"]})}),t.jsx("div",{className:"col-span-1"})]}),A.map(({role:x,label:Z,icon:D})=>t.jsxs("div",{className:"grid grid-cols-12 gap-4 py-3 border-t border-blue-200 mt-2",children:[t.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(D,{className:"w-4 h-4 text-blue-600"})}),t.jsx("span",{className:"font-medium text-gray-700",children:Z})]}),t.jsx("div",{className:"col-span-4",children:t.jsx(ti,{value:j("day",x),onChange:W=>g("day",x,W),role:x,environment:i,shift:"day",date:p,machineId:null,workers:c,assignments:u,yesterdayAssignments:d})}),t.jsx("div",{className:"col-span-4",children:t.jsx(ti,{value:j("night",x),onChange:W=>g("night",x,W),role:x,environment:i,shift:"night",date:p,machineId:null,workers:c,assignments:u,yesterdayAssignments:d})}),t.jsx("div",{className:"col-span-1"})]},x))]})},ry=({idleMachines:i,environment:c})=>i.length===0?null:t.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[t.jsxs("h4",{className:"font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[t.jsx(zn,{className:"w-4 h-4"}),"IDLE MACHINES TODAY (",i.length,")"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(u=>t.jsx("span",{className:"px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-sm",children:u.name},u.id))}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These machines have no orders assigned for today"})]}),iy=({currentUser:i})=>{const[c,u]=f.useState(K0()),[d,m]=f.useState(""),[p,N]=f.useState([]),[A,j]=f.useState([]),[g,x]=f.useState([]),[Z,D]=f.useState([]),[W,C]=f.useState([]),[L,y]=f.useState([]),[Q,E]=f.useState(!0),[le,P]=f.useState(!1),[H,me]=f.useState(!1),[Se,He]=f.useState([]);f.useEffect(()=>{i?.role==="supervisor"&&i?.profile_data?.environment&&m(i.profile_data.environment)},[i]),f.useEffect(()=>{ee()},[]),f.useEffect(()=>{d&&ae()},[c,d]);const ee=async()=>{try{E(!0),console.log("🔄 Fetching initial data for labor planner...");const[O,B]=await Promise.all([oe.get("/environments"),oe.get("/users?role=operator,supervisor,packer")]);console.log("🌍 Full environments response:",O),console.log("👥 Full workers response:",B);const b=O?.data?.data||O?.data||[],$=B?.data?.data||B?.data||[];console.log("🌍 Processed environments data:",b),console.log("👥 Processed workers data:",$),N(b),D($),b.length===0&&console.warn("⚠️ No environments found! Check API authentication or database.")}catch(O){console.error("❌ Failed to fetch initial data:",O),console.error("Error response:",O.response?.data),console.error("Error status:",O.response?.status)}finally{E(!1)}},ae=async()=>{try{const O=new Date(c);O.setDate(O.getDate()-1);const B=O.toISOString().split("T")[0],b=await oe.get(`/machines/daily-active?date=${c}&environment=${d}`),$=await oe.get(`/labor-assignments?start_date=${c}&end_date=${c}&environment=${d}`),R=await oe.get(`/labor-assignments?start_date=${B}&end_date=${B}&environment=${d}`),V=b.data||[],K=V.filter(ie=>ie.has_orders_today),xe=V.filter(ie=>!ie.has_orders_today);j(K),x(xe),C($.data||[]),y(R.data||[]),ue()}catch(O){console.error("Failed to fetch daily assignments:",O)}},ue=()=>{const O=new Date,B=new Date(c);B.setHours(6,0,0,0),me(O>B&&i?.role!=="admin")},se=async(O,B,b,$)=>{if(!(H&&i?.role!=="admin"))try{const R={employee_id:$,machine_id:O,assignment_date:c,shift_type:B,role:b,start_time:B==="day"?"06:00":"18:00",end_time:B==="day"?"18:00":"06:00"};if($)await oe.post("/labor-assignments",R);else{const V=W.find(K=>K.machine_id===O&&K.assignment_date===c&&K.shift_type===B&&K.role===b);V&&await oe.delete(`/labor-assignments/${V.id}`)}await ae()}catch(R){console.error("Failed to update assignment:",R)}},ce=async()=>{try{P(!0),await oe.post("/labor-assignments/auto-populate-daily",{date:c,environment:d}),await ae()}catch(O){console.error("Failed to auto-populate assignments:",O)}finally{P(!1)}},k=async()=>{try{P(!0),await oe.post("/labor-assignments/lock-daily",{date:c,environment:d}),me(!0)}catch(O){console.error("Failed to lock day:",O)}finally{P(!1)}},F=O=>{const B=new Date(c);B.setDate(B.getDate()+O),u(B.toISOString().split("T")[0])};if(Q)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ot,{className:"w-5 h-5 animate-spin text-blue-500"}),t.jsx("span",{className:"text-gray-600",children:"Loading daily planning system..."})]})});const S=i?.role==="supervisor"?p.filter(O=>O.code===i.profile_data?.environment):p,X=p.find(O=>O.code===d);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Daily Labor Planning"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Assign workers to today's active machines and orders"})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("select",{value:d,onChange:O=>m(O.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:i?.role==="supervisor",children:[t.jsx("option",{value:"",children:"Select Environment"}),S.map(O=>t.jsx("option",{value:O.code,children:O.name},O.id))]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>F(-1),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:t.jsx(kx,{className:"w-4 h-4"})}),t.jsx("span",{className:"font-medium text-gray-900 min-w-48 text-center",children:sy(c)}),t.jsx("button",{onClick:()=>F(1),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg",children:t.jsx(Ux,{className:"w-4 h-4"})})]})]})]}),d?t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3 p-4 bg-white border border-gray-200 rounded-lg",children:[t.jsxs("button",{onClick:ce,disabled:le||H,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Ln,{className:"w-4 h-4"}),"Auto-Populate"]}),t.jsxs("button",{onClick:k,disabled:le||H,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Eo,{className:"w-4 h-4"}),H?"Day Locked":"Validate & Lock"]}),H&&t.jsxs("div",{className:"flex items-center gap-2 text-amber-600 bg-amber-50 px-3 py-2 rounded-lg",children:[t.jsx(Eo,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Today's schedule is locked"})]}),Se.length>0&&t.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 px-3 py-2 rounded-lg",children:[t.jsx(mt,{className:"w-4 h-4"}),t.jsxs("span",{className:"text-sm font-medium",children:[Se.length," gaps found"]})]})]}),X&&t.jsx(ny,{environment:d,workers:Z,assignments:W,yesterdayAssignments:L,onAssignmentChange:se,selectedDate:c,isLocked:H}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[t.jsx("div",{className:"bg-green-50 border-b border-green-200 px-4 py-3",children:t.jsxs("h3",{className:"text-lg font-semibold text-green-900 flex items-center gap-2",children:[t.jsx(Ba,{className:"w-5 h-5"}),"ACTIVE MACHINES TODAY (",A.length,")"]})}),t.jsxs("div",{className:"grid grid-cols-12 gap-4 py-4 px-4 bg-gray-50 border-b border-gray-200 font-semibold text-gray-700",children:[t.jsx("div",{className:"col-span-3",children:"Machine & Order"}),t.jsxs("div",{className:"col-span-4 text-center flex items-center justify-center gap-2",children:[t.jsx(ei,{className:"w-4 h-4 text-yellow-600"}),"Day Shift (06:00-18:00)"]}),t.jsxs("div",{className:"col-span-4 text-center flex items-center justify-center gap-2",children:[t.jsx(Rn,{className:"w-4 h-4 text-blue-600"}),"Night Shift (18:00-06:00)"]}),t.jsx("div",{className:"col-span-1 text-center",children:"Status"})]}),t.jsx("div",{className:"divide-y divide-gray-100",children:A.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(zn,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),t.jsxs("p",{className:"text-gray-500",children:["No active machines for ",d," today"]}),t.jsx("p",{className:"text-gray-400 text-sm",children:"Production Manager needs to confirm today's orders"})]}):A.map(O=>t.jsx(ly,{machine:O,workers:Z,assignments:W,yesterdayAssignments:L,onAssignmentChange:se,selectedDate:c,isLocked:H},O.id))})]}),t.jsx(ry,{idleMachines:g,environment:d}),Se.length>0&&t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsxs("h4",{className:"font-semibold text-red-900 mb-2 flex items-center gap-2",children:[t.jsx(mt,{className:"w-4 h-4"}),"Assignment Gaps - Need Attention"]}),t.jsx("ul",{className:"space-y-1",children:Se.map((O,B)=>t.jsxs("li",{className:"text-red-700 text-sm",children:["• ",O]},B))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:t.jsx(Ba,{className:"w-5 h-5 text-green-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:A.length}),t.jsx("div",{className:"text-sm text-gray-500",children:"Active Machines"})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(et,{className:"w-5 h-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:W.length}),t.jsx("div",{className:"text-sm text-gray-500",children:"Worker Assignments"})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:t.jsx(ei,{className:"w-5 h-5 text-yellow-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:W.filter(O=>O.shift_type==="day").length}),t.jsx("div",{className:"text-sm text-gray-500",children:"Day Shifts"})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:t.jsx(Rn,{className:"w-5 h-5 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold text-gray-900",children:W.filter(O=>O.shift_type==="night").length}),t.jsx("div",{className:"text-sm text-gray-500",children:"Night Shifts"})]})]})})]})]}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Lt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Environment"}),t.jsx("p",{className:"text-gray-500",children:"Choose an environment to start planning today's worker assignments"})]})]})},cy=({activeTab:i,onTabChange:c,tabs:u=[]})=>t.jsx("div",{className:"flex gap-0 bg-white shadow-sm border border-gray-100 rounded-xl p-1",children:u.map(d=>{const m=d.icon,p=i===d.id;return t.jsxs("button",{onClick:()=>c(d.id),className:`flex-1 min-h-[44px] flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200 ${p?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[t.jsx(m,{className:"w-4 h-4"}),t.jsx("span",{className:"text-base",children:d.label})]},d.id)})}),oy=()=>{const[i,c]=f.useState("planning"),[u,d]=f.useState(null),[m]=f.useState(K0());f.useEffect(()=>{p()},[]);const p=async()=>{try{const j=await oe.get("/auth/me");d(j.user||j.data)}catch(j){console.error("Failed to fetch current user:",j)}},N=[{id:"planning",label:"Daily Planning",icon:Va,component:iy},{id:"attendance",label:"Daily Attendance",icon:Qa,component:ay}],A=N.find(j=>j.id===i)?.component;return t.jsxs("div",{className:"min-h-full space-y-6",children:[t.jsx("div",{className:"sticky top-0 z-30 bg-white/80 backdrop-blur-sm border-b border-gray-200 pb-4",children:t.jsx(cy,{activeTab:i,onTabChange:c,tabs:N})}),t.jsx("div",{className:"space-y-6",children:A&&t.jsx(A,{currentUser:u,selectedDate:m})})]})},P0=[{path:"/",component:V0,title:"Dashboard"},{path:"/production",component:zp,title:"Production Monitor"},{path:"/labour-layout",component:ey,title:"Labour Layout"},{path:"/labor-planner",component:oy,name:"Labor Planner"},{path:"/orders",component:$p,title:"Production Orders"},{path:"/machines",component:Qp,title:"Machine Management"},{path:"/analytics",component:Vp,title:"Analytics & Reports"},{path:"/shift-reports",component:Xp,title:"Shift Reports"},{path:"/users",component:Zp,title:"User Management"},{path:"/settings",component:Pp,title:"Settings"},{path:"/admin",component:Jp,title:"Admin Panel"}];P0.forEach(i=>Oo.addRoute(i));Oo.init();function dy(){const{isAuthenticated:i,loading:c,user:u}=ys(),[d,m]=f.useState(window.location.pathname),{handleSessionExpiring:p,handleSessionExpired:N}=up();if(Bs(),f.useEffect(()=>{const x=D=>m(D.path),Z=window.EventBus.on("router:navigation",x);return()=>{Z()}},[]),c)return t.jsx("div",{className:"h-screen flex items-center justify-center text-xl bg-gray-50",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Loading Production Management System..."})]})});if(!i)return t.jsx(U0,{children:t.jsx(rp,{})});const A=P0.find(x=>x.path===d),j=A?A.component:V0,g=A?A.name||A.title:"Dashboard";return t.jsx(U0,{children:t.jsxs(np,{title:g,children:[t.jsx(j,{}),t.jsx(cp,{}),i&&t.jsx(dp,{onSessionExpiring:p,onSessionExpired:N}),t.jsx(mp,{}),t.jsx(hp,{})]})})}const uy=document.getElementById("root"),my=yx.createRoot(uy);my.render(t.jsx(gs.StrictMode,{children:t.jsx(H0,{children:t.jsx(dy,{})})}));
