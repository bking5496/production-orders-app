(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))d(u);new MutationObserver(u=>{for(const v of u)if(v.type==="childList")for(const j of v.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&d(j)}).observe(document,{childList:!0,subtree:!0});function f(u){const v={};return u.integrity&&(v.integrity=u.integrity),u.referrerPolicy&&(v.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?v.credentials="include":u.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function d(u){if(u.ep)return;u.ep=!0;const v=f(u);fetch(u.href,v)}})();function no(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Jc={exports:{}},rn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf;function Jx(){if(nf)return rn;nf=1;var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function f(d,u,v){var j=null;if(v!==void 0&&(j=""+v),u.key!==void 0&&(j=""+u.key),"key"in u){v={};for(var k in u)k!=="key"&&(v[k]=u[k])}else v=u;return u=v.ref,{$$typeof:i,type:d,key:j,ref:u!==void 0?u:null,props:v}}return rn.Fragment=o,rn.jsx=f,rn.jsxs=f,rn}var rf;function Px(){return rf||(rf=1,Jc.exports=Jx()),Jc.exports}var a=Px(),Pc={exports:{}},_e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cf;function Fx(){if(cf)return _e;cf=1;var i=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),j=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),R=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=R&&h[R]||h["@@iterator"],typeof h=="function"?h:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Y={};function q(h,B,ae){this.props=h,this.context=B,this.refs=Y,this.updater=ae||L}q.prototype.isReactComponent={},q.prototype.setState=function(h,B){if(typeof h!="object"&&typeof h!="function"&&h!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,h,B,"setState")},q.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")};function E(){}E.prototype=q.prototype;function P(h,B,ae){this.props=h,this.context=B,this.refs=Y,this.updater=ae||L}var I=P.prototype=new E;I.constructor=P,M(I,q.prototype),I.isPureReactComponent=!0;var te=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function re(h,B,ae,se,ne,pe){return ae=pe.ref,{$$typeof:i,type:h,key:B,ref:ae!==void 0?ae:null,props:pe}}function xe(h,B){return re(h.type,B,void 0,void 0,void 0,h.props)}function Z(h){return typeof h=="object"&&h!==null&&h.$$typeof===i}function G(h){var B={"=":"=0",":":"=2"};return"$"+h.replace(/[=:]/g,function(ae){return B[ae]})}var ie=/\/+/g;function ce(h,B){return typeof h=="object"&&h!==null&&h.key!=null?G(""+h.key):B.toString(36)}function ve(){}function O(h){switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:switch(typeof h.status=="string"?h.then(ve,ve):(h.status="pending",h.then(function(B){h.status==="pending"&&(h.status="fulfilled",h.value=B)},function(B){h.status==="pending"&&(h.status="rejected",h.reason=B)})),h.status){case"fulfilled":return h.value;case"rejected":throw h.reason}}throw h}function b(h,B,ae,se,ne){var pe=typeof h;(pe==="undefined"||pe==="boolean")&&(h=null);var de=!1;if(h===null)de=!0;else switch(pe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(h.$$typeof){case i:case o:de=!0;break;case p:return de=h._init,b(de(h._payload),B,ae,se,ne)}}if(de)return ne=ne(h),de=se===""?"."+ce(h,0):se,te(ne)?(ae="",de!=null&&(ae=de.replace(ie,"$&/")+"/"),b(ne,B,ae,"",function(He){return He})):ne!=null&&(Z(ne)&&(ne=xe(ne,ae+(ne.key==null||h&&h.key===ne.key?"":(""+ne.key).replace(ie,"$&/")+"/")+de)),B.push(ne)),1;de=0;var Ce=se===""?".":se+":";if(te(h))for(var ge=0;ge<h.length;ge++)se=h[ge],pe=Ce+ce(se,ge),de+=b(se,B,ae,pe,ne);else if(ge=C(h),typeof ge=="function")for(h=ge.call(h),ge=0;!(se=h.next()).done;)se=se.value,pe=Ce+ce(se,ge++),de+=b(se,B,ae,pe,ne);else if(pe==="object"){if(typeof h.then=="function")return b(O(h),B,ae,se,ne);throw B=String(h),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return de}function g(h,B,ae){if(h==null)return h;var se=[],ne=0;return b(h,se,"","",function(pe){return B.call(ae,pe,ne++)}),se}function T(h){if(h._status===-1){var B=h._result;B=B(),B.then(function(ae){(h._status===0||h._status===-1)&&(h._status=1,h._result=ae)},function(ae){(h._status===0||h._status===-1)&&(h._status=2,h._result=ae)}),h._status===-1&&(h._status=0,h._result=B)}if(h._status===1)return h._result.default;throw h._result}var V=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function K(){}return _e.Children={map:g,forEach:function(h,B,ae){g(h,function(){B.apply(this,arguments)},ae)},count:function(h){var B=0;return g(h,function(){B++}),B},toArray:function(h){return g(h,function(B){return B})||[]},only:function(h){if(!Z(h))throw Error("React.Children.only expected to receive a single React element child.");return h}},_e.Component=q,_e.Fragment=f,_e.Profiler=u,_e.PureComponent=P,_e.StrictMode=d,_e.Suspense=w,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,_e.__COMPILER_RUNTIME={__proto__:null,c:function(h){return X.H.useMemoCache(h)}},_e.cache=function(h){return function(){return h.apply(null,arguments)}},_e.cloneElement=function(h,B,ae){if(h==null)throw Error("The argument must be a React element, but you passed "+h+".");var se=M({},h.props),ne=h.key,pe=void 0;if(B!=null)for(de in B.ref!==void 0&&(pe=void 0),B.key!==void 0&&(ne=""+B.key),B)!ue.call(B,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&B.ref===void 0||(se[de]=B[de]);var de=arguments.length-2;if(de===1)se.children=ae;else if(1<de){for(var Ce=Array(de),ge=0;ge<de;ge++)Ce[ge]=arguments[ge+2];se.children=Ce}return re(h.type,ne,void 0,void 0,pe,se)},_e.createContext=function(h){return h={$$typeof:j,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null},h.Provider=h,h.Consumer={$$typeof:v,_context:h},h},_e.createElement=function(h,B,ae){var se,ne={},pe=null;if(B!=null)for(se in B.key!==void 0&&(pe=""+B.key),B)ue.call(B,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ne[se]=B[se]);var de=arguments.length-2;if(de===1)ne.children=ae;else if(1<de){for(var Ce=Array(de),ge=0;ge<de;ge++)Ce[ge]=arguments[ge+2];ne.children=Ce}if(h&&h.defaultProps)for(se in de=h.defaultProps,de)ne[se]===void 0&&(ne[se]=de[se]);return re(h,pe,void 0,void 0,null,ne)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(h){return{$$typeof:k,render:h}},_e.isValidElement=Z,_e.lazy=function(h){return{$$typeof:p,_payload:{_status:-1,_result:h},_init:T}},_e.memo=function(h,B){return{$$typeof:y,type:h,compare:B===void 0?null:B}},_e.startTransition=function(h){var B=X.T,ae={};X.T=ae;try{var se=h(),ne=X.S;ne!==null&&ne(ae,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(K,V)}catch(pe){V(pe)}finally{X.T=B}},_e.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},_e.use=function(h){return X.H.use(h)},_e.useActionState=function(h,B,ae){return X.H.useActionState(h,B,ae)},_e.useCallback=function(h,B){return X.H.useCallback(h,B)},_e.useContext=function(h){return X.H.useContext(h)},_e.useDebugValue=function(){},_e.useDeferredValue=function(h,B){return X.H.useDeferredValue(h,B)},_e.useEffect=function(h,B,ae){var se=X.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(h,B)},_e.useId=function(){return X.H.useId()},_e.useImperativeHandle=function(h,B,ae){return X.H.useImperativeHandle(h,B,ae)},_e.useInsertionEffect=function(h,B){return X.H.useInsertionEffect(h,B)},_e.useLayoutEffect=function(h,B){return X.H.useLayoutEffect(h,B)},_e.useMemo=function(h,B){return X.H.useMemo(h,B)},_e.useOptimistic=function(h,B){return X.H.useOptimistic(h,B)},_e.useReducer=function(h,B,ae){return X.H.useReducer(h,B,ae)},_e.useRef=function(h){return X.H.useRef(h)},_e.useState=function(h){return X.H.useState(h)},_e.useSyncExternalStore=function(h,B,ae){return X.H.useSyncExternalStore(h,B,ae)},_e.useTransition=function(){return X.H.useTransition()},_e.version="19.1.0",_e}var of;function ro(){return of||(of=1,Pc.exports=Fx()),Pc.exports}var x=ro();const Wa=no(x);var Fc={exports:{}},cn={},Ic={exports:{}},eo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df;function Ix(){return df||(df=1,function(i){function o(g,T){var V=g.length;g.push(T);e:for(;0<V;){var K=V-1>>>1,h=g[K];if(0<u(h,T))g[K]=T,g[V]=h,V=K;else break e}}function f(g){return g.length===0?null:g[0]}function d(g){if(g.length===0)return null;var T=g[0],V=g.pop();if(V!==T){g[0]=V;e:for(var K=0,h=g.length,B=h>>>1;K<B;){var ae=2*(K+1)-1,se=g[ae],ne=ae+1,pe=g[ne];if(0>u(se,V))ne<h&&0>u(pe,se)?(g[K]=pe,g[ne]=V,K=ne):(g[K]=se,g[ae]=V,K=ae);else if(ne<h&&0>u(pe,V))g[K]=pe,g[ne]=V,K=ne;else break e}}return T}function u(g,T){var V=g.sortIndex-T.sortIndex;return V!==0?V:g.id-T.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var v=performance;i.unstable_now=function(){return v.now()}}else{var j=Date,k=j.now();i.unstable_now=function(){return j.now()-k}}var w=[],y=[],p=1,R=null,C=3,L=!1,M=!1,Y=!1,q=!1,E=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function te(g){for(var T=f(y);T!==null;){if(T.callback===null)d(y);else if(T.startTime<=g)d(y),T.sortIndex=T.expirationTime,o(w,T);else break;T=f(y)}}function X(g){if(Y=!1,te(g),!M)if(f(w)!==null)M=!0,ue||(ue=!0,ce());else{var T=f(y);T!==null&&b(X,T.startTime-g)}}var ue=!1,re=-1,xe=5,Z=-1;function G(){return q?!0:!(i.unstable_now()-Z<xe)}function ie(){if(q=!1,ue){var g=i.unstable_now();Z=g;var T=!0;try{e:{M=!1,Y&&(Y=!1,P(re),re=-1),L=!0;var V=C;try{t:{for(te(g),R=f(w);R!==null&&!(R.expirationTime>g&&G());){var K=R.callback;if(typeof K=="function"){R.callback=null,C=R.priorityLevel;var h=K(R.expirationTime<=g);if(g=i.unstable_now(),typeof h=="function"){R.callback=h,te(g),T=!0;break t}R===f(w)&&d(w),te(g)}else d(w);R=f(w)}if(R!==null)T=!0;else{var B=f(y);B!==null&&b(X,B.startTime-g),T=!1}}break e}finally{R=null,C=V,L=!1}T=void 0}}finally{T?ce():ue=!1}}}var ce;if(typeof I=="function")ce=function(){I(ie)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,O=ve.port2;ve.port1.onmessage=ie,ce=function(){O.postMessage(null)}}else ce=function(){E(ie,0)};function b(g,T){re=E(function(){g(i.unstable_now())},T)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(g){g.callback=null},i.unstable_forceFrameRate=function(g){0>g||125<g?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<g?Math.floor(1e3/g):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_next=function(g){switch(C){case 1:case 2:case 3:var T=3;break;default:T=C}var V=C;C=T;try{return g()}finally{C=V}},i.unstable_requestPaint=function(){q=!0},i.unstable_runWithPriority=function(g,T){switch(g){case 1:case 2:case 3:case 4:case 5:break;default:g=3}var V=C;C=g;try{return T()}finally{C=V}},i.unstable_scheduleCallback=function(g,T,V){var K=i.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?K+V:K):V=K,g){case 1:var h=-1;break;case 2:h=250;break;case 5:h=1073741823;break;case 4:h=1e4;break;default:h=5e3}return h=V+h,g={id:p++,callback:T,priorityLevel:g,startTime:V,expirationTime:h,sortIndex:-1},V>K?(g.sortIndex=V,o(y,g),f(w)===null&&g===f(y)&&(Y?(P(re),re=-1):Y=!0,b(X,V-K))):(g.sortIndex=h,o(w,g),M||L||(M=!0,ue||(ue=!0,ce()))),g},i.unstable_shouldYield=G,i.unstable_wrapCallback=function(g){var T=C;return function(){var V=C;C=T;try{return g.apply(this,arguments)}finally{C=V}}}}(eo)),eo}var uf;function e0(){return uf||(uf=1,Ic.exports=Ix()),Ic.exports}var to={exports:{}},pt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf;function t0(){if(mf)return pt;mf=1;var i=ro();function o(w){var y="https://react.dev/errors/"+w;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)y+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+w+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(){}var d={d:{f,r:function(){throw Error(o(522))},D:f,C:f,L:f,m:f,X:f,S:f,M:f},p:0,findDOMNode:null},u=Symbol.for("react.portal");function v(w,y,p){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:w,containerInfo:y,implementation:p}}var j=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function k(w,y){if(w==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,pt.createPortal=function(w,y){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(o(299));return v(w,y,null,p)},pt.flushSync=function(w){var y=j.T,p=d.p;try{if(j.T=null,d.p=2,w)return w()}finally{j.T=y,d.p=p,d.d.f()}},pt.preconnect=function(w,y){typeof w=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,d.d.C(w,y))},pt.prefetchDNS=function(w){typeof w=="string"&&d.d.D(w)},pt.preinit=function(w,y){if(typeof w=="string"&&y&&typeof y.as=="string"){var p=y.as,R=k(p,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;p==="style"?d.d.S(w,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:R,integrity:C,fetchPriority:L}):p==="script"&&d.d.X(w,{crossOrigin:R,integrity:C,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},pt.preinitModule=function(w,y){if(typeof w=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var p=k(y.as,y.crossOrigin);d.d.M(w,{crossOrigin:p,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&d.d.M(w)},pt.preload=function(w,y){if(typeof w=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var p=y.as,R=k(p,y.crossOrigin);d.d.L(w,p,{crossOrigin:R,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},pt.preloadModule=function(w,y){if(typeof w=="string")if(y){var p=k(y.as,y.crossOrigin);d.d.m(w,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:p,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else d.d.m(w)},pt.requestFormReset=function(w){d.d.r(w)},pt.unstable_batchedUpdates=function(w,y){return w(y)},pt.useFormState=function(w,y,p){return j.H.useFormState(w,y,p)},pt.useFormStatus=function(){return j.H.useHostTransitionStatus()},pt.version="19.1.0",pt}var ff;function vf(){if(ff)return to.exports;ff=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),to.exports=t0(),to.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf;function a0(){if(hf)return cn;hf=1;var i=e0(),o=ro(),f=vf();function d(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function v(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function j(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function k(e){if(v(e)!==e)throw Error(d(188))}function w(e){var t=e.alternate;if(!t){if(t=v(e),t===null)throw Error(d(188));return t!==e?null:e}for(var s=e,l=t;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return k(n),e;if(r===l)return k(n),t;r=r.sibling}throw Error(d(188))}if(s.return!==l.return)s=n,l=r;else{for(var c=!1,m=n.child;m;){if(m===s){c=!0,s=n,l=r;break}if(m===l){c=!0,l=n,s=r;break}m=m.sibling}if(!c){for(m=r.child;m;){if(m===s){c=!0,s=r,l=n;break}if(m===l){c=!0,l=r,s=n;break}m=m.sibling}if(!c)throw Error(d(189))}}if(s.alternate!==l)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var p=Object.assign,R=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),I=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=ie&&e[ie]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Symbol.for("react.client.reference");function O(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case q:return"Profiler";case Y:return"StrictMode";case X:return"Suspense";case ue:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case I:return(e.displayName||"Context")+".Provider";case P:return(e._context.displayName||"Context")+".Consumer";case te:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return t=e.displayName||null,t!==null?t:O(e.type)||"Memo";case xe:t=e._payload,e=e._init;try{return O(e(t))}catch{}}return null}var b=Array.isArray,g=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=f.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},K=[],h=-1;function B(e){return{current:e}}function ae(e){0>h||(e.current=K[h],K[h]=null,h--)}function se(e,t){h++,K[h]=e.current,e.current=t}var ne=B(null),pe=B(null),de=B(null),Ce=B(null);function ge(e,t){switch(se(de,t),se(pe,e),se(ne,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Om(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Om(t),e=Rm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ae(ne),se(ne,e)}function He(){ae(ne),ae(pe),ae(de)}function Q(e){e.memoizedState!==null&&se(Ce,e);var t=ne.current,s=Rm(t,e.type);t!==s&&(se(pe,e),se(ne,s))}function ke(e){pe.current===e&&(ae(ne),ae(pe)),Ce.current===e&&(ae(Ce),tn._currentValue=V)}var Oe=Object.prototype.hasOwnProperty,$=i.unstable_scheduleCallback,he=i.unstable_cancelCallback,_=i.unstable_shouldYield,F=i.unstable_requestPaint,me=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,ut=i.unstable_ImmediatePriority,bs=i.unstable_UserBlockingPriority,vt=i.unstable_NormalPriority,kf=i.unstable_LowPriority,xo=i.unstable_IdlePriority,Df=i.log,Of=i.unstable_setDisableYieldValue,ol=null,At=null;function Sa(e){if(typeof Df=="function"&&Of(e),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(ol,e)}catch{}}var Ct=Math.clz32?Math.clz32:Uf,Rf=Math.log,zf=Math.LN2;function Uf(e){return e>>>=0,e===0?32:31-(Rf(e)/zf|0)|0}var pn=256,yn=4194304;function Fa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function bn(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var n=0,r=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var m=l&134217727;return m!==0?(l=m&~r,l!==0?n=Fa(l):(c&=m,c!==0?n=Fa(c):s||(s=m&~e,s!==0&&(n=Fa(s))))):(m=l&~r,m!==0?n=Fa(m):c!==0?n=Fa(c):s||(s=l&~e,s!==0&&(n=Fa(s)))),n===0?0:t!==0&&t!==n&&(t&r)===0&&(r=n&-n,s=t&-t,r>=s||r===32&&(s&4194048)!==0)?t:n}function dl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function qf(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function go(){var e=pn;return pn<<=1,(pn&4194048)===0&&(pn=256),e}function po(){var e=yn;return yn<<=1,(yn&62914560)===0&&(yn=4194304),e}function Lr(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ul(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Hf(e,t,s,l,n,r){var c=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var m=e.entanglements,N=e.expirationTimes,z=e.hiddenUpdates;for(s=c&~s;0<s;){var W=31-Ct(s),ee=1<<W;m[W]=0,N[W]=-1;var U=z[W];if(U!==null)for(z[W]=null,W=0;W<U.length;W++){var H=U[W];H!==null&&(H.lane&=-536870913)}s&=~ee}l!==0&&yo(e,l,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(c&~t))}function yo(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ct(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194090}function bo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-Ct(s),n=1<<l;n&t|e[l]&t&&(e[l]|=t),s&=~n}}function Br(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Qr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function vo(){var e=T.p;return e!==0?e:(e=window.event,e===void 0?32:Im(e.type))}function Lf(e,t){var s=T.p;try{return T.p=e,t()}finally{T.p=s}}var _a=Math.random().toString(36).slice(2),xt="__reactFiber$"+_a,jt="__reactProps$"+_a,vs="__reactContainer$"+_a,$r="__reactEvents$"+_a,Bf="__reactListeners$"+_a,Qf="__reactHandles$"+_a,jo="__reactResources$"+_a,ml="__reactMarker$"+_a;function Yr(e){delete e[xt],delete e[jt],delete e[$r],delete e[Bf],delete e[Qf]}function js(e){var t=e[xt];if(t)return t;for(var s=e.parentNode;s;){if(t=s[vs]||s[xt]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Hm(e);e!==null;){if(s=e[xt])return s;e=Hm(e)}return t}e=s,s=e.parentNode}return null}function Ns(e){if(e=e[xt]||e[vs]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function fl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(d(33))}function ws(e){var t=e[jo];return t||(t=e[jo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function it(e){e[ml]=!0}var No=new Set,wo={};function Ia(e,t){Ss(e,t),Ss(e+"Capture",t)}function Ss(e,t){for(wo[e]=t,e=0;e<t.length;e++)No.add(t[e])}var $f=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),So={},_o={};function Yf(e){return Oe.call(_o,e)?!0:Oe.call(So,e)?!1:$f.test(e)?_o[e]=!0:(So[e]=!0,!1)}function vn(e,t,s){if(Yf(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function jn(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function ia(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}var Gr,Eo;function _s(e){if(Gr===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Gr=t&&t[1]||"",Eo=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gr+e+Eo}var Xr=!1;function Vr(e,t){if(!e||Xr)return"";Xr=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(H){var U=H}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(H){U=H}e.call(ee.prototype)}}else{try{throw Error()}catch(H){U=H}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(H){if(H&&U&&typeof H.stack=="string")return[H.stack,U.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),c=r[0],m=r[1];if(c&&m){var N=c.split(`
`),z=m.split(`
`);for(n=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;n<z.length&&!z[n].includes("DetermineComponentFrameRoot");)n++;if(l===N.length||n===z.length)for(l=N.length-1,n=z.length-1;1<=l&&0<=n&&N[l]!==z[n];)n--;for(;1<=l&&0<=n;l--,n--)if(N[l]!==z[n]){if(l!==1||n!==1)do if(l--,n--,0>n||N[l]!==z[n]){var W=`
`+N[l].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=l&&0<=n);break}}}finally{Xr=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?_s(s):""}function Gf(e){switch(e.tag){case 26:case 27:case 5:return _s(e.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 15:return Vr(e.type,!1);case 11:return Vr(e.type.render,!1);case 1:return Vr(e.type,!0);case 31:return _s("Activity");default:return""}}function Ao(e){try{var t="";do t+=Gf(e),e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Co(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xf(e){var t=Co(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(c){l=""+c,r.call(this,c)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(c){l=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nn(e){e._valueTracker||(e._valueTracker=Xf(e))}function Mo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=Co(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function wn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vf=/[\n"\\]/g;function Ht(e){return e.replace(Vf,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Zr(e,t,s,l,n,r,c,m){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+qt(t)):e.value!==""+qt(t)&&(e.value=""+qt(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?Wr(e,c,qt(t)):s!=null?Wr(e,c,qt(s)):l!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+qt(m):e.removeAttribute("name")}function To(e,t,s,l,n,r,c,m){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;s=s!=null?""+qt(s):"",t=t!=null?""+qt(t):s,m||t===e.value||(e.value=t),e.defaultValue=t}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=m?e.checked:!!l,e.defaultChecked=!!l,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function Wr(e,t,s){t==="number"&&wn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Es(e,t,s,l){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&l&&(e[s].defaultSelected=!0)}else{for(s=""+qt(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function ko(e,t,s){if(t!=null&&(t=""+qt(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+qt(s):""}function Do(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(d(92));if(b(l)){if(1<l.length)throw Error(d(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=qt(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function As(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Zf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Oo(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||Zf.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Ro(e,t,s){if(t!=null&&typeof t!="object")throw Error(d(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in t)l=t[n],t.hasOwnProperty(n)&&s[n]!==l&&Oo(e,n,l)}else for(var r in t)t.hasOwnProperty(r)&&Oo(e,r,t[r])}function Kr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sn(e){return Kf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Jr=null;function Pr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cs=null,Ms=null;function zo(e){var t=Ns(e);if(t&&(e=t.stateNode)){var s=e[jt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Zr(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ht(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var n=l[jt]||null;if(!n)throw Error(d(90));Zr(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&Mo(l)}break e;case"textarea":ko(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Es(e,!!s.multiple,t,!1)}}}var Fr=!1;function Uo(e,t,s){if(Fr)return e(t,s);Fr=!0;try{var l=e(t);return l}finally{if(Fr=!1,(Cs!==null||Ms!==null)&&(or(),Cs&&(t=Cs,e=Ms,Ms=Cs=null,zo(t),e)))for(t=0;t<e.length;t++)zo(e[t])}}function hl(e,t){var s=e.stateNode;if(s===null)return null;var l=s[jt]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,t,typeof s));return s}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ir=!1;if(ca)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){Ir=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{Ir=!1}var Ea=null,ei=null,_n=null;function qo(){if(_n)return _n;var e,t=ei,s=t.length,l,n="value"in Ea?Ea.value:Ea.textContent,r=n.length;for(e=0;e<s&&t[e]===n[e];e++);var c=s-e;for(l=1;l<=c&&t[s-l]===n[r-l];l++);return _n=n.slice(e,1<l?1-l:void 0)}function En(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function An(){return!0}function Ho(){return!1}function Nt(e){function t(s,l,n,r,c){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=c,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(s=e[m],this[m]=s?s(r):r[m]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?An:Ho,this.isPropagationStopped=Ho,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=An)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=An)},persist:function(){},isPersistent:An}),t}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cn=Nt(es),gl=p({},es,{view:0,detail:0}),Jf=Nt(gl),ti,ai,pl,Mn=p({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pl&&(pl&&e.type==="mousemove"?(ti=e.screenX-pl.screenX,ai=e.screenY-pl.screenY):ai=ti=0,pl=e),ti)},movementY:function(e){return"movementY"in e?e.movementY:ai}}),Lo=Nt(Mn),Pf=p({},Mn,{dataTransfer:0}),Ff=Nt(Pf),If=p({},gl,{relatedTarget:0}),si=Nt(If),eh=p({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),th=Nt(eh),ah=p({},es,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sh=Nt(ah),lh=p({},es,{data:0}),Bo=Nt(lh),nh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ch(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ih[e])?!!t[e]:!1}function li(){return ch}var oh=p({},gl,{key:function(e){if(e.key){var t=nh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=En(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:li,charCode:function(e){return e.type==="keypress"?En(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?En(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dh=Nt(oh),uh=p({},Mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qo=Nt(uh),mh=p({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:li}),fh=Nt(mh),hh=p({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),xh=Nt(hh),gh=p({},Mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ph=Nt(gh),yh=p({},es,{newState:0,oldState:0}),bh=Nt(yh),vh=[9,13,27,32],ni=ca&&"CompositionEvent"in window,yl=null;ca&&"documentMode"in document&&(yl=document.documentMode);var jh=ca&&"TextEvent"in window&&!yl,$o=ca&&(!ni||yl&&8<yl&&11>=yl),Yo=" ",Go=!1;function Xo(e,t){switch(e){case"keyup":return vh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ts=!1;function Nh(e,t){switch(e){case"compositionend":return Vo(t);case"keypress":return t.which!==32?null:(Go=!0,Yo);case"textInput":return e=t.data,e===Yo&&Go?null:e;default:return null}}function wh(e,t){if(Ts)return e==="compositionend"||!ni&&Xo(e,t)?(e=qo(),_n=ei=Ea=null,Ts=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $o&&t.locale!=="ko"?null:t.data;default:return null}}var Sh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Sh[e.type]:t==="textarea"}function Wo(e,t,s,l){Cs?Ms?Ms.push(l):Ms=[l]:Cs=l,t=xr(t,"onChange"),0<t.length&&(s=new Cn("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var bl=null,vl=null;function _h(e){Cm(e,0)}function Tn(e){var t=fl(e);if(Mo(t))return e}function Ko(e,t){if(e==="change")return t}var Jo=!1;if(ca){var ri;if(ca){var ii="oninput"in document;if(!ii){var Po=document.createElement("div");Po.setAttribute("oninput","return;"),ii=typeof Po.oninput=="function"}ri=ii}else ri=!1;Jo=ri&&(!document.documentMode||9<document.documentMode)}function Fo(){bl&&(bl.detachEvent("onpropertychange",Io),vl=bl=null)}function Io(e){if(e.propertyName==="value"&&Tn(vl)){var t=[];Wo(t,vl,e,Pr(e)),Uo(_h,t)}}function Eh(e,t,s){e==="focusin"?(Fo(),bl=t,vl=s,bl.attachEvent("onpropertychange",Io)):e==="focusout"&&Fo()}function Ah(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tn(vl)}function Ch(e,t){if(e==="click")return Tn(t)}function Mh(e,t){if(e==="input"||e==="change")return Tn(t)}function Th(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:Th;function jl(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!Oe.call(t,n)||!Mt(e[n],t[n]))return!1}return!0}function ed(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function td(e,t){var s=ed(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ed(s)}}function ad(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ad(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=wn(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=wn(e.document)}return t}function ci(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var kh=ca&&"documentMode"in document&&11>=document.documentMode,ks=null,oi=null,Nl=null,di=!1;function ld(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;di||ks==null||ks!==wn(l)||(l=ks,"selectionStart"in l&&ci(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Nl&&jl(Nl,l)||(Nl=l,l=xr(oi,"onSelect"),0<l.length&&(t=new Cn("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=ks)))}function ts(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Ds={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionrun:ts("Transition","TransitionRun"),transitionstart:ts("Transition","TransitionStart"),transitioncancel:ts("Transition","TransitionCancel"),transitionend:ts("Transition","TransitionEnd")},ui={},nd={};ca&&(nd=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function as(e){if(ui[e])return ui[e];if(!Ds[e])return e;var t=Ds[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in nd)return ui[e]=t[s];return e}var rd=as("animationend"),id=as("animationiteration"),cd=as("animationstart"),Dh=as("transitionrun"),Oh=as("transitionstart"),Rh=as("transitioncancel"),od=as("transitionend"),dd=new Map,mi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mi.push("scrollEnd");function Vt(e,t){dd.set(e,t),Ia(t,[e])}var ud=new WeakMap;function Lt(e,t){if(typeof e=="object"&&e!==null){var s=ud.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Ao(t)},ud.set(e,t),t)}return{value:e,source:t,stack:Ao(t)}}var Bt=[],Os=0,fi=0;function kn(){for(var e=Os,t=fi=Os=0;t<e;){var s=Bt[t];Bt[t++]=null;var l=Bt[t];Bt[t++]=null;var n=Bt[t];Bt[t++]=null;var r=Bt[t];if(Bt[t++]=null,l!==null&&n!==null){var c=l.pending;c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n}r!==0&&md(s,n,r)}}function Dn(e,t,s,l){Bt[Os++]=e,Bt[Os++]=t,Bt[Os++]=s,Bt[Os++]=l,fi|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function hi(e,t,s,l){return Dn(e,t,s,l),On(e)}function Rs(e,t){return Dn(e,null,null,t),On(e)}function md(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var n=!1,r=e.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-Ct(s),e=r.hiddenUpdates,l=e[n],l===null?e[n]=[t]:l.push(t),t.lane=s|536870912),r):null}function On(e){if(50<Zl)throw Zl=0,vc=null,Error(d(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var zs={};function zh(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,s,l){return new zh(e,t,s,l)}function xi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oa(e,t){var s=e.alternate;return s===null?(s=Tt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function fd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Rn(e,t,s,l,n,r){var c=0;if(l=e,typeof e=="function")xi(e)&&(c=1);else if(typeof e=="string")c=qx(e,s,ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Z:return e=Tt(31,s,t,n),e.elementType=Z,e.lanes=r,e;case M:return ss(s.children,n,r,t);case Y:c=8,n|=24;break;case q:return e=Tt(12,s,t,n|2),e.elementType=q,e.lanes=r,e;case X:return e=Tt(13,s,t,n),e.elementType=X,e.lanes=r,e;case ue:return e=Tt(19,s,t,n),e.elementType=ue,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E:case I:c=10;break e;case P:c=9;break e;case te:c=11;break e;case re:c=14;break e;case xe:c=16,l=null;break e}c=29,s=Error(d(130,e===null?"null":typeof e,"")),l=null}return t=Tt(c,s,t,n),t.elementType=e,t.type=l,t.lanes=r,t}function ss(e,t,s,l){return e=Tt(7,e,l,t),e.lanes=s,e}function gi(e,t,s){return e=Tt(6,e,null,t),e.lanes=s,e}function pi(e,t,s){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Us=[],qs=0,zn=null,Un=0,Qt=[],$t=0,ls=null,da=1,ua="";function ns(e,t){Us[qs++]=Un,Us[qs++]=zn,zn=e,Un=t}function hd(e,t,s){Qt[$t++]=da,Qt[$t++]=ua,Qt[$t++]=ls,ls=e;var l=da;e=ua;var n=32-Ct(l)-1;l&=~(1<<n),s+=1;var r=32-Ct(t)+n;if(30<r){var c=n-n%5;r=(l&(1<<c)-1).toString(32),l>>=c,n-=c,da=1<<32-Ct(t)+n|s<<n|l,ua=r+e}else da=1<<r|s<<n|l,ua=e}function yi(e){e.return!==null&&(ns(e,1),hd(e,1,0))}function bi(e){for(;e===zn;)zn=Us[--qs],Us[qs]=null,Un=Us[--qs],Us[qs]=null;for(;e===ls;)ls=Qt[--$t],Qt[$t]=null,ua=Qt[--$t],Qt[$t]=null,da=Qt[--$t],Qt[$t]=null}var bt=null,Je=null,ze=!1,rs=null,It=!1,vi=Error(d(519));function is(e){var t=Error(d(418,""));throw _l(Lt(t,e)),vi}function xd(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[xt]=e,t[jt]=l,s){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(s=0;s<Kl.length;s++)Te(Kl[s],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),To(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Nn(t);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),Do(t,l.value,l.defaultValue,l.children),Nn(t)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||Dm(t.textContent,s)?(l.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),l.onScroll!=null&&Te("scroll",t),l.onScrollEnd!=null&&Te("scrollend",t),l.onClick!=null&&(t.onclick=gr),t=!0):t=!1,t||is(e)}function gd(e){for(bt=e.return;bt;)switch(bt.tag){case 5:case 13:It=!1;return;case 27:case 3:It=!0;return;default:bt=bt.return}}function wl(e){if(e!==bt)return!1;if(!ze)return gd(e),ze=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Uc(e.type,e.memoizedProps)),s=!s),s&&Je&&is(e),gd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(t===0){Je=Wt(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++;e=e.nextSibling}Je=null}}else t===27?(t=Je,$a(e.type)?(e=Bc,Bc=null,Je=e):Je=t):Je=bt?Wt(e.stateNode.nextSibling):null;return!0}function Sl(){Je=bt=null,ze=!1}function pd(){var e=rs;return e!==null&&(_t===null?_t=e:_t.push.apply(_t,e),rs=null),e}function _l(e){rs===null?rs=[e]:rs.push(e)}var ji=B(null),cs=null,ma=null;function Aa(e,t,s){se(ji,t._currentValue),t._currentValue=s}function fa(e){e._currentValue=ji.current,ae(ji)}function Ni(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function wi(e,t,s,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var c=n.child;r=r.firstContext;e:for(;r!==null;){var m=r;r=n;for(var N=0;N<t.length;N++)if(m.context===t[N]){r.lanes|=s,m=r.alternate,m!==null&&(m.lanes|=s),Ni(r.return,s,e),l||(c=null);break e}r=m.next}}else if(n.tag===18){if(c=n.return,c===null)throw Error(d(341));c.lanes|=s,r=c.alternate,r!==null&&(r.lanes|=s),Ni(c,s,e),c=null}else c=n.child;if(c!==null)c.return=n;else for(c=n;c!==null;){if(c===e){c=null;break}if(n=c.sibling,n!==null){n.return=c.return,c=n;break}c=c.return}n=c}}function El(e,t,s,l){e=null;for(var n=t,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var c=n.alternate;if(c===null)throw Error(d(387));if(c=c.memoizedProps,c!==null){var m=n.type;Mt(n.pendingProps.value,c.value)||(e!==null?e.push(m):e=[m])}}else if(n===Ce.current){if(c=n.alternate,c===null)throw Error(d(387));c.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(tn):e=[tn])}n=n.return}e!==null&&wi(t,e,s,l),t.flags|=262144}function qn(e){for(e=e.firstContext;e!==null;){if(!Mt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function os(e){cs=e,ma=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function gt(e){return yd(cs,e)}function Hn(e,t){return cs===null&&os(e),yd(e,t)}function yd(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},ma===null){if(e===null)throw Error(d(308));ma=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ma=ma.next=t;return s}var Uh=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},qh=i.unstable_scheduleCallback,Hh=i.unstable_NormalPriority,nt={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Si(){return{controller:new Uh,data:new Map,refCount:0}}function Al(e){e.refCount--,e.refCount===0&&qh(Hh,function(){e.controller.abort()})}var Cl=null,_i=0,Hs=0,Ls=null;function Lh(e,t){if(Cl===null){var s=Cl=[];_i=0,Hs=Ac(),Ls={status:"pending",value:void 0,then:function(l){s.push(l)}}}return _i++,t.then(bd,bd),t}function bd(){if(--_i===0&&Cl!==null){Ls!==null&&(Ls.status="fulfilled");var e=Cl;Cl=null,Hs=0,Ls=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Bh(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var n=0;n<s.length;n++)(0,s[n])(t)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var vd=g.S;g.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Lh(e,t),vd!==null&&vd(e,t)};var ds=B(null);function Ei(){var e=ds.current;return e!==null?e:Ye.pooledCache}function Ln(e,t){t===null?se(ds,ds.current):se(ds,t.pool)}function jd(){var e=Ei();return e===null?null:{parent:nt._currentValue,pool:e}}var Ml=Error(d(460)),Nd=Error(d(474)),Bn=Error(d(542)),Ai={then:function(){}};function wd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Qn(){}function Sd(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Qn,Qn),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ed(e),e;default:if(typeof t.status=="string")t.then(Qn,Qn);else{if(e=Ye,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=l}},function(l){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ed(e),e}throw Tl=t,Ml}}var Tl=null;function _d(){if(Tl===null)throw Error(d(459));var e=Tl;return Tl=null,e}function Ed(e){if(e===Ml||e===Bn)throw Error(d(483))}var Ca=!1;function Ci(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ma(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ue&2)!==0){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,t=On(e),md(e,null,s),t}return Dn(e,l,t,s),On(e)}function kl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,bo(e,s)}}function Ti(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var c={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?n=r=c:r=r.next=c,s=s.next}while(s!==null);r===null?n=r=t:r=r.next=t}else n=r=t;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var ki=!1;function Dl(){if(ki){var e=Ls;if(e!==null)throw e}}function Ol(e,t,s,l){ki=!1;var n=e.updateQueue;Ca=!1;var r=n.firstBaseUpdate,c=n.lastBaseUpdate,m=n.shared.pending;if(m!==null){n.shared.pending=null;var N=m,z=N.next;N.next=null,c===null?r=z:c.next=z,c=N;var W=e.alternate;W!==null&&(W=W.updateQueue,m=W.lastBaseUpdate,m!==c&&(m===null?W.firstBaseUpdate=z:m.next=z,W.lastBaseUpdate=N))}if(r!==null){var ee=n.baseState;c=0,W=z=N=null,m=r;do{var U=m.lane&-536870913,H=U!==m.lane;if(H?(De&U)===U:(l&U)===U){U!==0&&U===Hs&&(ki=!0),W!==null&&(W=W.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var we=e,ye=m;U=t;var Qe=s;switch(ye.tag){case 1:if(we=ye.payload,typeof we=="function"){ee=we.call(Qe,ee,U);break e}ee=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ye.payload,U=typeof we=="function"?we.call(Qe,ee,U):we,U==null)break e;ee=p({},ee,U);break e;case 2:Ca=!0}}U=m.callback,U!==null&&(e.flags|=64,H&&(e.flags|=8192),H=n.callbacks,H===null?n.callbacks=[U]:H.push(U))}else H={lane:U,tag:m.tag,payload:m.payload,callback:m.callback,next:null},W===null?(z=W=H,N=ee):W=W.next=H,c|=U;if(m=m.next,m===null){if(m=n.shared.pending,m===null)break;H=m,m=H.next,H.next=null,n.lastBaseUpdate=H,n.shared.pending=null}}while(!0);W===null&&(N=ee),n.baseState=N,n.firstBaseUpdate=z,n.lastBaseUpdate=W,r===null&&(n.shared.lanes=0),Ha|=c,e.lanes=c,e.memoizedState=ee}}function Ad(e,t){if(typeof e!="function")throw Error(d(191,e));e.call(t)}function Cd(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Ad(s[e],t)}var Bs=B(null),$n=B(0);function Md(e,t){e=va,se($n,e),se(Bs,t),va=e|t.baseLanes}function Di(){se($n,va),se(Bs,Bs.current)}function Oi(){va=$n.current,ae(Bs),ae($n)}var ka=0,Ee=null,Le=null,at=null,Yn=!1,Qs=!1,us=!1,Gn=0,Rl=0,$s=null,Qh=0;function Ie(){throw Error(d(321))}function Ri(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Mt(e[s],t[s]))return!1;return!0}function zi(e,t,s,l,n,r){return ka=r,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,g.H=e===null||e.memoizedState===null?mu:fu,us=!1,r=s(l,n),us=!1,Qs&&(r=kd(t,s,l,n)),Td(e),r}function Td(e){g.H=Jn;var t=Le!==null&&Le.next!==null;if(ka=0,at=Le=Ee=null,Yn=!1,Rl=0,$s=null,t)throw Error(d(300));e===null||ct||(e=e.dependencies,e!==null&&qn(e)&&(ct=!0))}function kd(e,t,s,l){Ee=e;var n=0;do{if(Qs&&($s=null),Rl=0,Qs=!1,25<=n)throw Error(d(301));if(n+=1,at=Le=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}g.H=Wh,r=t(s,l)}while(Qs);return r}function $h(){var e=g.H,t=e.useState()[0];return t=typeof t.then=="function"?zl(t):t,e=e.useState()[0],(Le!==null?Le.memoizedState:null)!==e&&(Ee.flags|=1024),t}function Ui(){var e=Gn!==0;return Gn=0,e}function qi(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Hi(e){if(Yn){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Yn=!1}ka=0,at=Le=Ee=null,Qs=!1,Rl=Gn=0,$s=null}function wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Ee.memoizedState=at=e:at=at.next=e,at}function st(){if(Le===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=at===null?Ee.memoizedState:at.next;if(t!==null)at=t,Le=e;else{if(e===null)throw Ee.alternate===null?Error(d(467)):Error(d(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},at===null?Ee.memoizedState=at=e:at=at.next=e}return at}function Li(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zl(e){var t=Rl;return Rl+=1,$s===null&&($s=[]),e=Sd($s,e,t),t=Ee,(at===null?t.memoizedState:at.next)===null&&(t=t.alternate,g.H=t===null||t.memoizedState===null?mu:fu),e}function Xn(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zl(e);if(e.$$typeof===I)return gt(e)}throw Error(d(438,String(e)))}function Bi(e){var t=null,s=Ee.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=Ee.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Li(),Ee.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=G;return t.index++,s}function ha(e,t){return typeof t=="function"?t(e):t}function Vn(e){var t=st();return Qi(t,Le,e)}function Qi(e,t,s){var l=e.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=s;var n=e.baseQueue,r=l.pending;if(r!==null){if(n!==null){var c=n.next;n.next=r.next,r.next=c}t.baseQueue=n=r,l.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var m=c=null,N=null,z=t,W=!1;do{var ee=z.lane&-536870913;if(ee!==z.lane?(De&ee)===ee:(ka&ee)===ee){var U=z.revertLane;if(U===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),ee===Hs&&(W=!0);else if((ka&U)===U){z=z.next,U===Hs&&(W=!0);continue}else ee={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(m=N=ee,c=r):N=N.next=ee,Ee.lanes|=U,Ha|=U;ee=z.action,us&&s(r,ee),r=z.hasEagerState?z.eagerState:s(r,ee)}else U={lane:ee,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(m=N=U,c=r):N=N.next=U,Ee.lanes|=ee,Ha|=ee;z=z.next}while(z!==null&&z!==t);if(N===null?c=r:N.next=m,!Mt(r,e.memoizedState)&&(ct=!0,W&&(s=Ls,s!==null)))throw s;e.memoizedState=r,e.baseState=c,e.baseQueue=N,l.lastRenderedState=r}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function $i(e){var t=st(),s=t.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var l=s.dispatch,n=s.pending,r=t.memoizedState;if(n!==null){s.pending=null;var c=n=n.next;do r=e(r,c.action),c=c.next;while(c!==n);Mt(r,t.memoizedState)||(ct=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),s.lastRenderedState=r}return[r,l]}function Dd(e,t,s){var l=Ee,n=st(),r=ze;if(r){if(s===void 0)throw Error(d(407));s=s()}else s=t();var c=!Mt((Le||n).memoizedState,s);c&&(n.memoizedState=s,ct=!0),n=n.queue;var m=zd.bind(null,l,n,e);if(Ul(2048,8,m,[e]),n.getSnapshot!==t||c||at!==null&&at.memoizedState.tag&1){if(l.flags|=2048,Ys(9,Zn(),Rd.bind(null,l,n,s,t),null),Ye===null)throw Error(d(349));r||(ka&124)!==0||Od(l,t,s)}return s}function Od(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ee.updateQueue,t===null?(t=Li(),Ee.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Rd(e,t,s,l){t.value=s,t.getSnapshot=l,Ud(t)&&qd(e)}function zd(e,t,s){return s(function(){Ud(t)&&qd(e)})}function Ud(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Mt(e,s)}catch{return!0}}function qd(e){var t=Rs(e,2);t!==null&&zt(t,e,2)}function Yi(e){var t=wt();if(typeof e=="function"){var s=e;if(e=s(),us){Sa(!0);try{s()}finally{Sa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e},t}function Hd(e,t,s,l){return e.baseState=s,Qi(e,Le,typeof l=="function"?l:ha)}function Yh(e,t,s,l,n){if(Kn(e))throw Error(d(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){r.listeners.push(c)}};g.T!==null?s(!0):r.isTransition=!1,l(r),s=t.pending,s===null?(r.next=t.pending=r,Ld(t,r)):(r.next=s.next,t.pending=s.next=r)}}function Ld(e,t){var s=t.action,l=t.payload,n=e.state;if(t.isTransition){var r=g.T,c={};g.T=c;try{var m=s(n,l),N=g.S;N!==null&&N(c,m),Bd(e,t,m)}catch(z){Gi(e,t,z)}finally{g.T=r}}else try{r=s(n,l),Bd(e,t,r)}catch(z){Gi(e,t,z)}}function Bd(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Qd(e,t,l)},function(l){return Gi(e,t,l)}):Qd(e,t,s)}function Qd(e,t,s){t.status="fulfilled",t.value=s,$d(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Ld(e,s)))}function Gi(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,$d(t),t=t.next;while(t!==l)}e.action=null}function $d(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Yd(e,t){return t}function Gd(e,t){if(ze){var s=Ye.formState;if(s!==null){e:{var l=Ee;if(ze){if(Je){t:{for(var n=Je,r=It;n.nodeType!==8;){if(!r){n=null;break t}if(n=Wt(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){Je=Wt(n.nextSibling),l=n.data==="F!";break e}}is(l)}l=!1}l&&(t=s[0])}}return s=wt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yd,lastRenderedState:t},s.queue=l,s=ou.bind(null,Ee,l),l.dispatch=s,l=Yi(!1),r=Ki.bind(null,Ee,!1,l.queue),l=wt(),n={state:t,dispatch:null,action:e,pending:null},l.queue=n,s=Yh.bind(null,Ee,n,r,s),n.dispatch=s,l.memoizedState=e,[t,s,!1]}function Xd(e){var t=st();return Vd(t,Le,e)}function Vd(e,t,s){if(t=Qi(e,t,Yd)[0],e=Vn(ha)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=zl(t)}catch(c){throw c===Ml?Bn:c}else l=t;t=st();var n=t.queue,r=n.dispatch;return s!==t.memoizedState&&(Ee.flags|=2048,Ys(9,Zn(),Gh.bind(null,n,s),null)),[l,r,e]}function Gh(e,t){e.action=t}function Zd(e){var t=st(),s=Le;if(s!==null)return Vd(t,s,e);st(),t=t.memoizedState,s=st();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function Ys(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=Ee.updateQueue,t===null&&(t=Li(),Ee.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function Zn(){return{destroy:void 0,resource:void 0}}function Wd(){return st().memoizedState}function Wn(e,t,s,l){var n=wt();l=l===void 0?null:l,Ee.flags|=e,n.memoizedState=Ys(1|t,Zn(),s,l)}function Ul(e,t,s,l){var n=st();l=l===void 0?null:l;var r=n.memoizedState.inst;Le!==null&&l!==null&&Ri(l,Le.memoizedState.deps)?n.memoizedState=Ys(t,r,s,l):(Ee.flags|=e,n.memoizedState=Ys(1|t,r,s,l))}function Kd(e,t){Wn(8390656,8,e,t)}function Jd(e,t){Ul(2048,8,e,t)}function Pd(e,t){return Ul(4,2,e,t)}function Fd(e,t){return Ul(4,4,e,t)}function Id(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function eu(e,t,s){s=s!=null?s.concat([e]):null,Ul(4,4,Id.bind(null,t,e),s)}function Xi(){}function tu(e,t){var s=st();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&Ri(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function au(e,t){var s=st();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&Ri(t,l[1]))return l[0];if(l=e(),us){Sa(!0);try{e()}finally{Sa(!1)}}return s.memoizedState=[l,t],l}function Vi(e,t,s){return s===void 0||(ka&1073741824)!==0?e.memoizedState=t:(e.memoizedState=s,e=nm(),Ee.lanes|=e,Ha|=e,s)}function su(e,t,s,l){return Mt(s,t)?s:Bs.current!==null?(e=Vi(e,s,l),Mt(e,t)||(ct=!0),e):(ka&42)===0?(ct=!0,e.memoizedState=s):(e=nm(),Ee.lanes|=e,Ha|=e,t)}function lu(e,t,s,l,n){var r=T.p;T.p=r!==0&&8>r?r:8;var c=g.T,m={};g.T=m,Ki(e,!1,t,s);try{var N=n(),z=g.S;if(z!==null&&z(m,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var W=Bh(N,l);ql(e,t,W,Rt(e))}else ql(e,t,l,Rt(e))}catch(ee){ql(e,t,{then:function(){},status:"rejected",reason:ee},Rt())}finally{T.p=r,g.T=c}}function Xh(){}function Zi(e,t,s,l){if(e.tag!==5)throw Error(d(476));var n=nu(e).queue;lu(e,n,t,V,s===null?Xh:function(){return ru(e),s(l)})}function nu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:V},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ru(e){var t=nu(e).next.queue;ql(e,t,{},Rt())}function Wi(){return gt(tn)}function iu(){return st().memoizedState}function cu(){return st().memoizedState}function Vh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Rt();e=Ma(s);var l=Ta(t,e,s);l!==null&&(zt(l,t,s),kl(l,t,s)),t={cache:Si()},e.payload=t;return}t=t.return}}function Zh(e,t,s){var l=Rt();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Kn(e)?du(t,s):(s=hi(e,t,s,l),s!==null&&(zt(s,e,l),uu(s,t,l)))}function ou(e,t,s){var l=Rt();ql(e,t,s,l)}function ql(e,t,s,l){var n={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Kn(e))du(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var c=t.lastRenderedState,m=r(c,s);if(n.hasEagerState=!0,n.eagerState=m,Mt(m,c))return Dn(e,t,n,0),Ye===null&&kn(),!1}catch{}finally{}if(s=hi(e,t,n,l),s!==null)return zt(s,e,l),uu(s,t,l),!0}return!1}function Ki(e,t,s,l){if(l={lane:2,revertLane:Ac(),action:l,hasEagerState:!1,eagerState:null,next:null},Kn(e)){if(t)throw Error(d(479))}else t=hi(e,s,l,2),t!==null&&zt(t,e,2)}function Kn(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function du(e,t){Qs=Yn=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function uu(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,bo(e,s)}}var Jn={readContext:gt,use:Xn,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useLayoutEffect:Ie,useInsertionEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useSyncExternalStore:Ie,useId:Ie,useHostTransitionStatus:Ie,useFormState:Ie,useActionState:Ie,useOptimistic:Ie,useMemoCache:Ie,useCacheRefresh:Ie},mu={readContext:gt,use:Xn,useCallback:function(e,t){return wt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Kd,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Wn(4194308,4,Id.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Wn(4194308,4,e,t)},useInsertionEffect:function(e,t){Wn(4,2,e,t)},useMemo:function(e,t){var s=wt();t=t===void 0?null:t;var l=e();if(us){Sa(!0);try{e()}finally{Sa(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=wt();if(s!==void 0){var n=s(t);if(us){Sa(!0);try{s(t)}finally{Sa(!1)}}}else n=t;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Zh.bind(null,Ee,e),[l.memoizedState,e]},useRef:function(e){var t=wt();return e={current:e},t.memoizedState=e},useState:function(e){e=Yi(e);var t=e.queue,s=ou.bind(null,Ee,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Xi,useDeferredValue:function(e,t){var s=wt();return Vi(s,e,t)},useTransition:function(){var e=Yi(!1);return e=lu.bind(null,Ee,e.queue,!0,!1),wt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=Ee,n=wt();if(ze){if(s===void 0)throw Error(d(407));s=s()}else{if(s=t(),Ye===null)throw Error(d(349));(De&124)!==0||Od(l,t,s)}n.memoizedState=s;var r={value:s,getSnapshot:t};return n.queue=r,Kd(zd.bind(null,l,r,e),[e]),l.flags|=2048,Ys(9,Zn(),Rd.bind(null,l,r,s,t),null),s},useId:function(){var e=wt(),t=Ye.identifierPrefix;if(ze){var s=ua,l=da;s=(l&~(1<<32-Ct(l)-1)).toString(32)+s,t="«"+t+"R"+s,s=Gn++,0<s&&(t+="H"+s.toString(32)),t+="»"}else s=Qh++,t="«"+t+"r"+s.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Wi,useFormState:Gd,useActionState:Gd,useOptimistic:function(e){var t=wt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Ki.bind(null,Ee,!0,s),s.dispatch=t,[e,t]},useMemoCache:Bi,useCacheRefresh:function(){return wt().memoizedState=Vh.bind(null,Ee)}},fu={readContext:gt,use:Xn,useCallback:tu,useContext:gt,useEffect:Jd,useImperativeHandle:eu,useInsertionEffect:Pd,useLayoutEffect:Fd,useMemo:au,useReducer:Vn,useRef:Wd,useState:function(){return Vn(ha)},useDebugValue:Xi,useDeferredValue:function(e,t){var s=st();return su(s,Le.memoizedState,e,t)},useTransition:function(){var e=Vn(ha)[0],t=st().memoizedState;return[typeof e=="boolean"?e:zl(e),t]},useSyncExternalStore:Dd,useId:iu,useHostTransitionStatus:Wi,useFormState:Xd,useActionState:Xd,useOptimistic:function(e,t){var s=st();return Hd(s,Le,e,t)},useMemoCache:Bi,useCacheRefresh:cu},Wh={readContext:gt,use:Xn,useCallback:tu,useContext:gt,useEffect:Jd,useImperativeHandle:eu,useInsertionEffect:Pd,useLayoutEffect:Fd,useMemo:au,useReducer:$i,useRef:Wd,useState:function(){return $i(ha)},useDebugValue:Xi,useDeferredValue:function(e,t){var s=st();return Le===null?Vi(s,e,t):su(s,Le.memoizedState,e,t)},useTransition:function(){var e=$i(ha)[0],t=st().memoizedState;return[typeof e=="boolean"?e:zl(e),t]},useSyncExternalStore:Dd,useId:iu,useHostTransitionStatus:Wi,useFormState:Zd,useActionState:Zd,useOptimistic:function(e,t){var s=st();return Le!==null?Hd(s,Le,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Bi,useCacheRefresh:cu},Gs=null,Hl=0;function Pn(e){var t=Hl;return Hl+=1,Gs===null&&(Gs=[]),Sd(Gs,e,t)}function Ll(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Fn(e,t){throw t.$$typeof===R?Error(d(525)):(e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function hu(e){var t=e._init;return t(e._payload)}function xu(e){function t(A,S){if(e){var D=A.deletions;D===null?(A.deletions=[S],A.flags|=16):D.push(S)}}function s(A,S){if(!e)return null;for(;S!==null;)t(A,S),S=S.sibling;return null}function l(A){for(var S=new Map;A!==null;)A.key!==null?S.set(A.key,A):S.set(A.index,A),A=A.sibling;return S}function n(A,S){return A=oa(A,S),A.index=0,A.sibling=null,A}function r(A,S,D){return A.index=D,e?(D=A.alternate,D!==null?(D=D.index,D<S?(A.flags|=67108866,S):D):(A.flags|=67108866,S)):(A.flags|=1048576,S)}function c(A){return e&&A.alternate===null&&(A.flags|=67108866),A}function m(A,S,D,J){return S===null||S.tag!==6?(S=gi(D,A.mode,J),S.return=A,S):(S=n(S,D),S.return=A,S)}function N(A,S,D,J){var oe=D.type;return oe===M?W(A,S,D.props.children,J,D.key):S!==null&&(S.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===xe&&hu(oe)===S.type)?(S=n(S,D.props),Ll(S,D),S.return=A,S):(S=Rn(D.type,D.key,D.props,null,A.mode,J),Ll(S,D),S.return=A,S)}function z(A,S,D,J){return S===null||S.tag!==4||S.stateNode.containerInfo!==D.containerInfo||S.stateNode.implementation!==D.implementation?(S=pi(D,A.mode,J),S.return=A,S):(S=n(S,D.children||[]),S.return=A,S)}function W(A,S,D,J,oe){return S===null||S.tag!==7?(S=ss(D,A.mode,J,oe),S.return=A,S):(S=n(S,D),S.return=A,S)}function ee(A,S,D){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=gi(""+S,A.mode,D),S.return=A,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case C:return D=Rn(S.type,S.key,S.props,null,A.mode,D),Ll(D,S),D.return=A,D;case L:return S=pi(S,A.mode,D),S.return=A,S;case xe:var J=S._init;return S=J(S._payload),ee(A,S,D)}if(b(S)||ce(S))return S=ss(S,A.mode,D,null),S.return=A,S;if(typeof S.then=="function")return ee(A,Pn(S),D);if(S.$$typeof===I)return ee(A,Hn(A,S),D);Fn(A,S)}return null}function U(A,S,D,J){var oe=S!==null?S.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return oe!==null?null:m(A,S,""+D,J);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case C:return D.key===oe?N(A,S,D,J):null;case L:return D.key===oe?z(A,S,D,J):null;case xe:return oe=D._init,D=oe(D._payload),U(A,S,D,J)}if(b(D)||ce(D))return oe!==null?null:W(A,S,D,J,null);if(typeof D.then=="function")return U(A,S,Pn(D),J);if(D.$$typeof===I)return U(A,S,Hn(A,D),J);Fn(A,D)}return null}function H(A,S,D,J,oe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return A=A.get(D)||null,m(S,A,""+J,oe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case C:return A=A.get(J.key===null?D:J.key)||null,N(S,A,J,oe);case L:return A=A.get(J.key===null?D:J.key)||null,z(S,A,J,oe);case xe:var Ae=J._init;return J=Ae(J._payload),H(A,S,D,J,oe)}if(b(J)||ce(J))return A=A.get(D)||null,W(S,A,J,oe,null);if(typeof J.then=="function")return H(A,S,D,Pn(J),oe);if(J.$$typeof===I)return H(A,S,D,Hn(S,J),oe);Fn(S,J)}return null}function we(A,S,D,J){for(var oe=null,Ae=null,fe=S,je=S=0,dt=null;fe!==null&&je<D.length;je++){fe.index>je?(dt=fe,fe=null):dt=fe.sibling;var Re=U(A,fe,D[je],J);if(Re===null){fe===null&&(fe=dt);break}e&&fe&&Re.alternate===null&&t(A,fe),S=r(Re,S,je),Ae===null?oe=Re:Ae.sibling=Re,Ae=Re,fe=dt}if(je===D.length)return s(A,fe),ze&&ns(A,je),oe;if(fe===null){for(;je<D.length;je++)fe=ee(A,D[je],J),fe!==null&&(S=r(fe,S,je),Ae===null?oe=fe:Ae.sibling=fe,Ae=fe);return ze&&ns(A,je),oe}for(fe=l(fe);je<D.length;je++)dt=H(fe,A,je,D[je],J),dt!==null&&(e&&dt.alternate!==null&&fe.delete(dt.key===null?je:dt.key),S=r(dt,S,je),Ae===null?oe=dt:Ae.sibling=dt,Ae=dt);return e&&fe.forEach(function(Za){return t(A,Za)}),ze&&ns(A,je),oe}function ye(A,S,D,J){if(D==null)throw Error(d(151));for(var oe=null,Ae=null,fe=S,je=S=0,dt=null,Re=D.next();fe!==null&&!Re.done;je++,Re=D.next()){fe.index>je?(dt=fe,fe=null):dt=fe.sibling;var Za=U(A,fe,Re.value,J);if(Za===null){fe===null&&(fe=dt);break}e&&fe&&Za.alternate===null&&t(A,fe),S=r(Za,S,je),Ae===null?oe=Za:Ae.sibling=Za,Ae=Za,fe=dt}if(Re.done)return s(A,fe),ze&&ns(A,je),oe;if(fe===null){for(;!Re.done;je++,Re=D.next())Re=ee(A,Re.value,J),Re!==null&&(S=r(Re,S,je),Ae===null?oe=Re:Ae.sibling=Re,Ae=Re);return ze&&ns(A,je),oe}for(fe=l(fe);!Re.done;je++,Re=D.next())Re=H(fe,A,je,Re.value,J),Re!==null&&(e&&Re.alternate!==null&&fe.delete(Re.key===null?je:Re.key),S=r(Re,S,je),Ae===null?oe=Re:Ae.sibling=Re,Ae=Re);return e&&fe.forEach(function(Kx){return t(A,Kx)}),ze&&ns(A,je),oe}function Qe(A,S,D,J){if(typeof D=="object"&&D!==null&&D.type===M&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case C:e:{for(var oe=D.key;S!==null;){if(S.key===oe){if(oe=D.type,oe===M){if(S.tag===7){s(A,S.sibling),J=n(S,D.props.children),J.return=A,A=J;break e}}else if(S.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===xe&&hu(oe)===S.type){s(A,S.sibling),J=n(S,D.props),Ll(J,D),J.return=A,A=J;break e}s(A,S);break}else t(A,S);S=S.sibling}D.type===M?(J=ss(D.props.children,A.mode,J,D.key),J.return=A,A=J):(J=Rn(D.type,D.key,D.props,null,A.mode,J),Ll(J,D),J.return=A,A=J)}return c(A);case L:e:{for(oe=D.key;S!==null;){if(S.key===oe)if(S.tag===4&&S.stateNode.containerInfo===D.containerInfo&&S.stateNode.implementation===D.implementation){s(A,S.sibling),J=n(S,D.children||[]),J.return=A,A=J;break e}else{s(A,S);break}else t(A,S);S=S.sibling}J=pi(D,A.mode,J),J.return=A,A=J}return c(A);case xe:return oe=D._init,D=oe(D._payload),Qe(A,S,D,J)}if(b(D))return we(A,S,D,J);if(ce(D)){if(oe=ce(D),typeof oe!="function")throw Error(d(150));return D=oe.call(D),ye(A,S,D,J)}if(typeof D.then=="function")return Qe(A,S,Pn(D),J);if(D.$$typeof===I)return Qe(A,S,Hn(A,D),J);Fn(A,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,S!==null&&S.tag===6?(s(A,S.sibling),J=n(S,D),J.return=A,A=J):(s(A,S),J=gi(D,A.mode,J),J.return=A,A=J),c(A)):s(A,S)}return function(A,S,D,J){try{Hl=0;var oe=Qe(A,S,D,J);return Gs=null,oe}catch(fe){if(fe===Ml||fe===Bn)throw fe;var Ae=Tt(29,fe,null,A.mode);return Ae.lanes=J,Ae.return=A,Ae}finally{}}}var Xs=xu(!0),gu=xu(!1),Yt=B(null),ea=null;function Da(e){var t=e.alternate;se(rt,rt.current&1),se(Yt,e),ea===null&&(t===null||Bs.current!==null||t.memoizedState!==null)&&(ea=e)}function pu(e){if(e.tag===22){if(se(rt,rt.current),se(Yt,e),ea===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ea=e)}}else Oa()}function Oa(){se(rt,rt.current),se(Yt,Yt.current)}function xa(e){ae(Yt),ea===e&&(ea=null),ae(rt)}var rt=B(0);function In(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Lc(s)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ji(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:p({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Pi={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=Rt(),n=Ma(l);n.payload=t,s!=null&&(n.callback=s),t=Ta(e,n,l),t!==null&&(zt(t,e,l),kl(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=Rt(),n=Ma(l);n.tag=1,n.payload=t,s!=null&&(n.callback=s),t=Ta(e,n,l),t!==null&&(zt(t,e,l),kl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Rt(),l=Ma(s);l.tag=2,t!=null&&(l.callback=t),t=Ta(e,l,s),t!==null&&(zt(t,e,s),kl(t,e,s))}};function yu(e,t,s,l,n,r,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,r,c):t.prototype&&t.prototype.isPureReactComponent?!jl(s,l)||!jl(n,r):!0}function bu(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&Pi.enqueueReplaceState(t,t.state,null)}function ms(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=p({},s));for(var n in e)s[n]===void 0&&(s[n]=e[n])}return s}var er=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function vu(e){er(e)}function ju(e){console.error(e)}function Nu(e){er(e)}function tr(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function wu(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Fi(e,t,s){return s=Ma(s),s.tag=3,s.payload={element:null},s.callback=function(){tr(e,t)},s}function Su(e){return e=Ma(e),e.tag=3,e}function _u(e,t,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;e.payload=function(){return n(r)},e.callback=function(){wu(t,s,l)}}var c=s.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){wu(t,s,l),typeof n!="function"&&(La===null?La=new Set([this]):La.add(this));var m=l.stack;this.componentDidCatch(l.value,{componentStack:m!==null?m:""})})}function Kh(e,t,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&El(t,s,n,!0),s=Yt.current,s!==null){switch(s.tag){case 13:return ea===null?Nc():s.alternate===null&&Pe===0&&(Pe=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===Ai?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Sc(e,l,n)),!1;case 22:return s.flags|=65536,l===Ai?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Sc(e,l,n)),!1}throw Error(d(435,s.tag))}return Sc(e,l,n),Nc(),!1}if(ze)return t=Yt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,l!==vi&&(e=Error(d(422),{cause:l}),_l(Lt(e,s)))):(l!==vi&&(t=Error(d(423),{cause:l}),_l(Lt(t,s))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=Lt(l,s),n=Fi(e.stateNode,l,n),Ti(e,n),Pe!==4&&(Pe=2)),!1;var r=Error(d(520),{cause:l});if(r=Lt(r,s),Vl===null?Vl=[r]:Vl.push(r),Pe!==4&&(Pe=2),t===null)return!0;l=Lt(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=n&-n,s.lanes|=e,e=Fi(s.stateNode,l,e),Ti(s,e),!1;case 1:if(t=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(La===null||!La.has(r))))return s.flags|=65536,n&=-n,s.lanes|=n,n=Su(n),_u(n,e,s,l),Ti(s,n),!1}s=s.return}while(s!==null);return!1}var Eu=Error(d(461)),ct=!1;function mt(e,t,s,l){t.child=e===null?gu(t,null,s,l):Xs(t,e.child,s,l)}function Au(e,t,s,l,n){s=s.render;var r=t.ref;if("ref"in l){var c={};for(var m in l)m!=="ref"&&(c[m]=l[m])}else c=l;return os(t),l=zi(e,t,s,c,r,n),m=Ui(),e!==null&&!ct?(qi(e,t,n),ga(e,t,n)):(ze&&m&&yi(t),t.flags|=1,mt(e,t,l,n),t.child)}function Cu(e,t,s,l,n){if(e===null){var r=s.type;return typeof r=="function"&&!xi(r)&&r.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=r,Mu(e,t,r,l,n)):(e=Rn(s.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!rc(e,n)){var c=r.memoizedProps;if(s=s.compare,s=s!==null?s:jl,s(c,l)&&e.ref===t.ref)return ga(e,t,n)}return t.flags|=1,e=oa(r,l),e.ref=t.ref,e.return=t,t.child=e}function Mu(e,t,s,l,n){if(e!==null){var r=e.memoizedProps;if(jl(r,l)&&e.ref===t.ref)if(ct=!1,t.pendingProps=l=r,rc(e,n))(e.flags&131072)!==0&&(ct=!0);else return t.lanes=e.lanes,ga(e,t,n)}return Ii(e,t,s,l,n)}function Tu(e,t,s){var l=t.pendingProps,n=l.children,r=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=r!==null?r.baseLanes|s:s,e!==null){for(n=t.child=e.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;t.childLanes=r&~l}else t.childLanes=0,t.child=null;return ku(e,t,l,s)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ln(t,r!==null?r.cachePool:null),r!==null?Md(t,r):Di(),pu(t);else return t.lanes=t.childLanes=536870912,ku(e,t,r!==null?r.baseLanes|s:s,s)}else r!==null?(Ln(t,r.cachePool),Md(t,r),Oa(),t.memoizedState=null):(e!==null&&Ln(t,null),Di(),Oa());return mt(e,t,n,s),t.child}function ku(e,t,s,l){var n=Ei();return n=n===null?null:{parent:nt._currentValue,pool:n},t.memoizedState={baseLanes:s,cachePool:n},e!==null&&Ln(t,null),Di(),pu(t),e!==null&&El(e,t,l,!0),null}function ar(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Ii(e,t,s,l,n){return os(t),s=zi(e,t,s,l,void 0,n),l=Ui(),e!==null&&!ct?(qi(e,t,n),ga(e,t,n)):(ze&&l&&yi(t),t.flags|=1,mt(e,t,s,n),t.child)}function Du(e,t,s,l,n,r){return os(t),t.updateQueue=null,s=kd(t,l,s,n),Td(e),l=Ui(),e!==null&&!ct?(qi(e,t,r),ga(e,t,r)):(ze&&l&&yi(t),t.flags|=1,mt(e,t,s,r),t.child)}function Ou(e,t,s,l,n){if(os(t),t.stateNode===null){var r=zs,c=s.contextType;typeof c=="object"&&c!==null&&(r=gt(c)),r=new s(l,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Pi,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=l,r.state=t.memoizedState,r.refs={},Ci(t),c=s.contextType,r.context=typeof c=="object"&&c!==null?gt(c):zs,r.state=t.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(Ji(t,s,c,l),r.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(c=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),c!==r.state&&Pi.enqueueReplaceState(r,r.state,null),Ol(t,l,r,n),Dl(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){r=t.stateNode;var m=t.memoizedProps,N=ms(s,m);r.props=N;var z=r.context,W=s.contextType;c=zs,typeof W=="object"&&W!==null&&(c=gt(W));var ee=s.getDerivedStateFromProps;W=typeof ee=="function"||typeof r.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,W||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(m||z!==c)&&bu(t,r,l,c),Ca=!1;var U=t.memoizedState;r.state=U,Ol(t,l,r,n),Dl(),z=t.memoizedState,m||U!==z||Ca?(typeof ee=="function"&&(Ji(t,s,ee,l),z=t.memoizedState),(N=Ca||yu(t,s,N,l,U,z,c))?(W||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=z),r.props=l,r.state=z,r.context=c,l=N):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{r=t.stateNode,Mi(e,t),c=t.memoizedProps,W=ms(s,c),r.props=W,ee=t.pendingProps,U=r.context,z=s.contextType,N=zs,typeof z=="object"&&z!==null&&(N=gt(z)),m=s.getDerivedStateFromProps,(z=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(c!==ee||U!==N)&&bu(t,r,l,N),Ca=!1,U=t.memoizedState,r.state=U,Ol(t,l,r,n),Dl();var H=t.memoizedState;c!==ee||U!==H||Ca||e!==null&&e.dependencies!==null&&qn(e.dependencies)?(typeof m=="function"&&(Ji(t,s,m,l),H=t.memoizedState),(W=Ca||yu(t,s,W,l,U,H,N)||e!==null&&e.dependencies!==null&&qn(e.dependencies))?(z||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,H,N),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,H,N)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=H),r.props=l,r.state=H,r.context=N,l=W):(typeof r.componentDidUpdate!="function"||c===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),l=!1)}return r=l,ar(e,t),l=(t.flags&128)!==0,r||l?(r=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&l?(t.child=Xs(t,e.child,null,n),t.child=Xs(t,null,s,n)):mt(e,t,s,n),t.memoizedState=r.state,e=t.child):e=ga(e,t,n),e}function Ru(e,t,s,l){return Sl(),t.flags|=256,mt(e,t,s,l),t.child}var ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tc(e){return{baseLanes:e,cachePool:jd()}}function ac(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Gt),e}function zu(e,t,s){var l=t.pendingProps,n=!1,r=(t.flags&128)!==0,c;if((c=r)||(c=e!==null&&e.memoizedState===null?!1:(rt.current&2)!==0),c&&(n=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(ze){if(n?Da(t):Oa(),ze){var m=Je,N;if(N=m){e:{for(N=m,m=It;N.nodeType!==8;){if(!m){m=null;break e}if(N=Wt(N.nextSibling),N===null){m=null;break e}}m=N}m!==null?(t.memoizedState={dehydrated:m,treeContext:ls!==null?{id:da,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},N=Tt(18,null,null,0),N.stateNode=m,N.return=t,t.child=N,bt=t,Je=null,N=!0):N=!1}N||is(t)}if(m=t.memoizedState,m!==null&&(m=m.dehydrated,m!==null))return Lc(m)?t.lanes=32:t.lanes=536870912,null;xa(t)}return m=l.children,l=l.fallback,n?(Oa(),n=t.mode,m=sr({mode:"hidden",children:m},n),l=ss(l,n,s,null),m.return=t,l.return=t,m.sibling=l,t.child=m,n=t.child,n.memoizedState=tc(s),n.childLanes=ac(e,c,s),t.memoizedState=ec,l):(Da(t),sc(t,m))}if(N=e.memoizedState,N!==null&&(m=N.dehydrated,m!==null)){if(r)t.flags&256?(Da(t),t.flags&=-257,t=lc(e,t,s)):t.memoizedState!==null?(Oa(),t.child=e.child,t.flags|=128,t=null):(Oa(),n=l.fallback,m=t.mode,l=sr({mode:"visible",children:l.children},m),n=ss(n,m,s,null),n.flags|=2,l.return=t,n.return=t,l.sibling=n,t.child=l,Xs(t,e.child,null,s),l=t.child,l.memoizedState=tc(s),l.childLanes=ac(e,c,s),t.memoizedState=ec,t=n);else if(Da(t),Lc(m)){if(c=m.nextSibling&&m.nextSibling.dataset,c)var z=c.dgst;c=z,l=Error(d(419)),l.stack="",l.digest=c,_l({value:l,source:null,stack:null}),t=lc(e,t,s)}else if(ct||El(e,t,s,!1),c=(s&e.childLanes)!==0,ct||c){if(c=Ye,c!==null&&(l=s&-s,l=(l&42)!==0?1:Br(l),l=(l&(c.suspendedLanes|s))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Rs(e,l),zt(c,e,l),Eu;m.data==="$?"||Nc(),t=lc(e,t,s)}else m.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,Je=Wt(m.nextSibling),bt=t,ze=!0,rs=null,It=!1,e!==null&&(Qt[$t++]=da,Qt[$t++]=ua,Qt[$t++]=ls,da=e.id,ua=e.overflow,ls=t),t=sc(t,l.children),t.flags|=4096);return t}return n?(Oa(),n=l.fallback,m=t.mode,N=e.child,z=N.sibling,l=oa(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,z!==null?n=oa(z,n):(n=ss(n,m,s,null),n.flags|=2),n.return=t,l.return=t,l.sibling=n,t.child=l,l=n,n=t.child,m=e.child.memoizedState,m===null?m=tc(s):(N=m.cachePool,N!==null?(z=nt._currentValue,N=N.parent!==z?{parent:z,pool:z}:N):N=jd(),m={baseLanes:m.baseLanes|s,cachePool:N}),n.memoizedState=m,n.childLanes=ac(e,c,s),t.memoizedState=ec,l):(Da(t),s=e.child,e=s.sibling,s=oa(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=s,t.memoizedState=null,s)}function sc(e,t){return t=sr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function sr(e,t){return e=Tt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function lc(e,t,s){return Xs(t,e.child,null,s),e=sc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Uu(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ni(e.return,t,s)}function nc(e,t,s,l,n){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=s,r.tailMode=n)}function qu(e,t,s){var l=t.pendingProps,n=l.revealOrder,r=l.tail;if(mt(e,t,l.children,s),l=rt.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uu(e,s,t);else if(e.tag===19)Uu(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(se(rt,l),n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&In(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),nc(t,!1,n,s,r);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&In(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}nc(t,!0,s,null,r);break;case"together":nc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ga(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ha|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(El(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,s=oa(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=oa(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function rc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&qn(e)))}function Jh(e,t,s){switch(t.tag){case 3:ge(t,t.stateNode.containerInfo),Aa(t,nt,e.memoizedState.cache),Sl();break;case 27:case 5:Q(t);break;case 4:ge(t,t.stateNode.containerInfo);break;case 10:Aa(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Da(t),t.flags|=128,null):(s&t.child.childLanes)!==0?zu(e,t,s):(Da(t),e=ga(e,t,s),e!==null?e.sibling:null);Da(t);break;case 19:var n=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(El(e,t,s,!1),l=(s&t.childLanes)!==0),n){if(l)return qu(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),se(rt,rt.current),l)break;return null;case 22:case 23:return t.lanes=0,Tu(e,t,s);case 24:Aa(t,nt,e.memoizedState.cache)}return ga(e,t,s)}function Hu(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)ct=!0;else{if(!rc(e,s)&&(t.flags&128)===0)return ct=!1,Jh(e,t,s);ct=(e.flags&131072)!==0}else ct=!1,ze&&(t.flags&1048576)!==0&&hd(t,Un,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,n=l._init;if(l=n(l._payload),t.type=l,typeof l=="function")xi(l)?(e=ms(l,e),t.tag=1,t=Ou(null,t,l,e,s)):(t.tag=0,t=Ii(null,t,l,e,s));else{if(l!=null){if(n=l.$$typeof,n===te){t.tag=11,t=Au(null,t,l,e,s);break e}else if(n===re){t.tag=14,t=Cu(null,t,l,e,s);break e}}throw t=O(l)||l,Error(d(306,t,""))}}return t;case 0:return Ii(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,n=ms(l,t.pendingProps),Ou(e,t,l,n,s);case 3:e:{if(ge(t,t.stateNode.containerInfo),e===null)throw Error(d(387));l=t.pendingProps;var r=t.memoizedState;n=r.element,Mi(e,t),Ol(t,l,null,s);var c=t.memoizedState;if(l=c.cache,Aa(t,nt,l),l!==r.cache&&wi(t,[nt],s,!0),Dl(),l=c.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Ru(e,t,l,s);break e}else if(l!==n){n=Lt(Error(d(424)),t),_l(n),t=Ru(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Je=Wt(e.firstChild),bt=t,ze=!0,rs=null,It=!0,s=gu(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Sl(),l===n){t=ga(e,t,s);break e}mt(e,t,l,s)}t=t.child}return t;case 26:return ar(e,t),e===null?(s=$m(t.type,null,t.pendingProps,null))?t.memoizedState=s:ze||(s=t.type,e=t.pendingProps,l=pr(de.current).createElement(s),l[xt]=t,l[jt]=e,ht(l,s,e),it(l),t.stateNode=l):t.memoizedState=$m(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),e===null&&ze&&(l=t.stateNode=Lm(t.type,t.pendingProps,de.current),bt=t,It=!0,n=Je,$a(t.type)?(Bc=n,Je=Wt(l.firstChild)):Je=n),mt(e,t,t.pendingProps.children,s),ar(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ze&&((n=l=Je)&&(l=Sx(l,t.type,t.pendingProps,It),l!==null?(t.stateNode=l,bt=t,Je=Wt(l.firstChild),It=!1,n=!0):n=!1),n||is(t)),Q(t),n=t.type,r=t.pendingProps,c=e!==null?e.memoizedProps:null,l=r.children,Uc(n,r)?l=null:c!==null&&Uc(n,c)&&(t.flags|=32),t.memoizedState!==null&&(n=zi(e,t,$h,null,null,s),tn._currentValue=n),ar(e,t),mt(e,t,l,s),t.child;case 6:return e===null&&ze&&((e=s=Je)&&(s=_x(s,t.pendingProps,It),s!==null?(t.stateNode=s,bt=t,Je=null,e=!0):e=!1),e||is(t)),null;case 13:return zu(e,t,s);case 4:return ge(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Xs(t,null,l,s):mt(e,t,l,s),t.child;case 11:return Au(e,t,t.type,t.pendingProps,s);case 7:return mt(e,t,t.pendingProps,s),t.child;case 8:return mt(e,t,t.pendingProps.children,s),t.child;case 12:return mt(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,Aa(t,t.type,l.value),mt(e,t,l.children,s),t.child;case 9:return n=t.type._context,l=t.pendingProps.children,os(t),n=gt(n),l=l(n),t.flags|=1,mt(e,t,l,s),t.child;case 14:return Cu(e,t,t.type,t.pendingProps,s);case 15:return Mu(e,t,t.type,t.pendingProps,s);case 19:return qu(e,t,s);case 31:return l=t.pendingProps,s=t.mode,l={mode:l.mode,children:l.children},e===null?(s=sr(l,s),s.ref=t.ref,t.child=s,s.return=t,t=s):(s=oa(e.child,l),s.ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return Tu(e,t,s);case 24:return os(t),l=gt(nt),e===null?(n=Ei(),n===null&&(n=Ye,r=Si(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=s),n=r),t.memoizedState={parent:l,cache:n},Ci(t),Aa(t,nt,n)):((e.lanes&s)!==0&&(Mi(e,t),Ol(t,null,null,s),Dl()),n=e.memoizedState,r=t.memoizedState,n.parent!==l?(n={parent:l,cache:l},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),Aa(t,nt,l)):(l=r.cache,Aa(t,nt,l),l!==n.cache&&wi(t,[nt],s,!0))),mt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function pa(e){e.flags|=4}function Lu(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Zm(t)){if(t=Yt.current,t!==null&&((De&4194048)===De?ea!==null:(De&62914560)!==De&&(De&536870912)===0||t!==ea))throw Tl=Ai,Nd;e.flags|=8192}}function lr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?po():536870912,e.lanes|=t,Ks|=t)}function Bl(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function Ph(e,t,s){var l=t.pendingProps;switch(bi(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return We(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),fa(nt),He(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(wl(t)?pa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pd())),We(t),null;case 26:return s=t.memoizedState,e===null?(pa(t),s!==null?(We(t),Lu(t,s)):(We(t),t.flags&=-16777217)):s?s!==e.memoizedState?(pa(t),We(t),Lu(t,s)):(We(t),t.flags&=-16777217):(e.memoizedProps!==l&&pa(t),We(t),t.flags&=-16777217),null;case 27:ke(t),s=de.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return We(t),null}e=ne.current,wl(t)?xd(t):(e=Lm(n,l,s),t.stateNode=e,pa(t))}return We(t),null;case 5:if(ke(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return We(t),null}if(e=ne.current,wl(t))xd(t);else{switch(n=pr(de.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?n.createElement(s,{is:l.is}):n.createElement(s)}}e[xt]=t,e[jt]=l;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(ht(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&pa(t)}}return We(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&pa(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(e=de.current,wl(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,n=bt,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[xt]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Dm(e.nodeValue,s)),e||is(t)}else e=pr(e).createTextNode(l),e[xt]=t,t.stateNode=e}return We(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=wl(t),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(d(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(d(317));n[xt]=t}else Sl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;We(t),n=!1}else n=pd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(xa(t),t):(xa(t),null)}if(xa(t),(t.flags&128)!==0)return t.lanes=s,t;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=t.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var r=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),lr(t,t.updateQueue),We(t),null;case 4:return He(),e===null&&kc(t.stateNode.containerInfo),We(t),null;case 10:return fa(t.type),We(t),null;case 19:if(ae(rt),n=t.memoizedState,n===null)return We(t),null;if(l=(t.flags&128)!==0,r=n.rendering,r===null)if(l)Bl(n,!1);else{if(Pe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=In(e),r!==null){for(t.flags|=128,Bl(n,!1),e=r.updateQueue,t.updateQueue=e,lr(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)fd(s,e),s=s.sibling;return se(rt,rt.current&1|2),t.child}e=e.sibling}n.tail!==null&&me()>ir&&(t.flags|=128,l=!0,Bl(n,!1),t.lanes=4194304)}else{if(!l)if(e=In(r),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,lr(t,e),Bl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!ze)return We(t),null}else 2*me()-n.renderingStartTime>ir&&s!==536870912&&(t.flags|=128,l=!0,Bl(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(e=n.last,e!==null?e.sibling=r:t.child=r,n.last=r)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=me(),t.sibling=null,e=rt.current,se(rt,l?e&1|2:e&1),t):(We(t),null);case 22:case 23:return xa(t),Oi(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),s=t.updateQueue,s!==null&&lr(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&ae(ds),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),fa(nt),We(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function Fh(e,t){switch(bi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fa(nt),He(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ke(t),null;case 13:if(xa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));Sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(rt),null;case 4:return He(),null;case 10:return fa(t.type),null;case 22:case 23:return xa(t),Oi(),e!==null&&ae(ds),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return fa(nt),null;case 25:return null;default:return null}}function Bu(e,t){switch(bi(t),t.tag){case 3:fa(nt),He();break;case 26:case 27:case 5:ke(t);break;case 4:He();break;case 13:xa(t);break;case 19:ae(rt);break;case 10:fa(t.type);break;case 22:case 23:xa(t),Oi(),e!==null&&ae(ds);break;case 24:fa(nt)}}function Ql(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&e)===e){l=void 0;var r=s.create,c=s.inst;l=r(),c.destroy=l}s=s.next}while(s!==n)}}catch(m){$e(t,t.return,m)}}function Ra(e,t,s){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&e)===e){var c=l.inst,m=c.destroy;if(m!==void 0){c.destroy=void 0,n=t;var N=s,z=m;try{z()}catch(W){$e(n,N,W)}}}l=l.next}while(l!==r)}}catch(W){$e(t,t.return,W)}}function Qu(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Cd(t,s)}catch(l){$e(e,e.return,l)}}}function $u(e,t,s){s.props=ms(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){$e(e,t,l)}}function $l(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(n){$e(e,t,n)}}function ta(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){$e(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){$e(e,t,n)}else s.current=null}function Yu(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){$e(e,e.return,n)}}function ic(e,t,s){try{var l=e.stateNode;bx(l,e.type,s,t),l[jt]=t}catch(n){$e(e,e.return,n)}}function Gu(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$a(e.type)||e.tag===4}function cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$a(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=gr));else if(l!==4&&(l===27&&$a(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(oc(e,t,s),e=e.sibling;e!==null;)oc(e,t,s),e=e.sibling}function nr(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&$a(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(nr(e,t,s),e=e.sibling;e!==null;)nr(e,t,s),e=e.sibling}function Xu(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ht(t,l,s),t[xt]=e,t[jt]=s}catch(r){$e(e,e.return,r)}}var ya=!1,et=!1,dc=!1,Vu=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Ih(e,t){if(e=e.containerInfo,Rc=wr,e=sd(e),ci(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var c=0,m=-1,N=-1,z=0,W=0,ee=e,U=null;t:for(;;){for(var H;ee!==s||n!==0&&ee.nodeType!==3||(m=c+n),ee!==r||l!==0&&ee.nodeType!==3||(N=c+l),ee.nodeType===3&&(c+=ee.nodeValue.length),(H=ee.firstChild)!==null;)U=ee,ee=H;for(;;){if(ee===e)break t;if(U===s&&++z===n&&(m=c),U===r&&++W===l&&(N=c),(H=ee.nextSibling)!==null)break;ee=U,U=ee.parentNode}ee=H}s=m===-1||N===-1?null:{start:m,end:N}}else s=null}s=s||{start:0,end:0}}else s=null;for(zc={focusedElem:e,selectionRange:s},wr=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){switch(t=ot,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,s=t,n=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var we=ms(s.type,n,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(we,r),l.__reactInternalSnapshotBeforeUpdate=e}catch(ye){$e(s,s.return,ye)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Hc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Hc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}}function Zu(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:za(e,s),l&4&&Ql(5,s);break;case 1:if(za(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(c){$e(s,s.return,c)}else{var n=ms(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){$e(s,s.return,c)}}l&64&&Qu(s),l&512&&$l(s,s.return);break;case 3:if(za(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Cd(e,t)}catch(c){$e(s,s.return,c)}}break;case 27:t===null&&l&4&&Xu(s);case 26:case 5:za(e,s),t===null&&l&4&&Yu(s),l&512&&$l(s,s.return);break;case 12:za(e,s);break;case 13:za(e,s),l&4&&Ju(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=cx.bind(null,s),Ex(e,s))));break;case 22:if(l=s.memoizedState!==null||ya,!l){t=t!==null&&t.memoizedState!==null||et,n=ya;var r=et;ya=l,(et=t)&&!r?Ua(e,s,(s.subtreeFlags&8772)!==0):za(e,s),ya=n,et=r}break;case 30:break;default:za(e,s)}}function Wu(e){var t=e.alternate;t!==null&&(e.alternate=null,Wu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Yr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ge=null,St=!1;function ba(e,t,s){for(s=s.child;s!==null;)Ku(e,t,s),s=s.sibling}function Ku(e,t,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(ol,s)}catch{}switch(s.tag){case 26:et||ta(s,t),ba(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:et||ta(s,t);var l=Ge,n=St;$a(s.type)&&(Ge=s.stateNode,St=!1),ba(e,t,s),Pl(s.stateNode),Ge=l,St=n;break;case 5:et||ta(s,t);case 6:if(l=Ge,n=St,Ge=null,ba(e,t,s),Ge=l,St=n,Ge!==null)if(St)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(s.stateNode)}catch(r){$e(s,t,r)}else try{Ge.removeChild(s.stateNode)}catch(r){$e(s,t,r)}break;case 18:Ge!==null&&(St?(e=Ge,qm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),nn(e)):qm(Ge,s.stateNode));break;case 4:l=Ge,n=St,Ge=s.stateNode.containerInfo,St=!0,ba(e,t,s),Ge=l,St=n;break;case 0:case 11:case 14:case 15:et||Ra(2,s,t),et||Ra(4,s,t),ba(e,t,s);break;case 1:et||(ta(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&$u(s,t,l)),ba(e,t,s);break;case 21:ba(e,t,s);break;case 22:et=(l=et)||s.memoizedState!==null,ba(e,t,s),et=l;break;default:ba(e,t,s)}}function Ju(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{nn(e)}catch(s){$e(t,t.return,s)}}function ex(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vu),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vu),t;default:throw Error(d(435,e.tag))}}function uc(e,t){var s=ex(e);t.forEach(function(l){var n=ox.bind(null,e,l);s.has(l)||(s.add(l),l.then(n,n))})}function kt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],r=e,c=t,m=c;e:for(;m!==null;){switch(m.tag){case 27:if($a(m.type)){Ge=m.stateNode,St=!1;break e}break;case 5:Ge=m.stateNode,St=!1;break e;case 3:case 4:Ge=m.stateNode.containerInfo,St=!0;break e}m=m.return}if(Ge===null)throw Error(d(160));Ku(r,c,n),Ge=null,St=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Pu(t,e),t=t.sibling}var Zt=null;function Pu(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:kt(t,e),Dt(e),l&4&&(Ra(3,e,e.return),Ql(3,e),Ra(5,e,e.return));break;case 1:kt(t,e),Dt(e),l&512&&(et||s===null||ta(s,s.return)),l&64&&ya&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=Zt;if(kt(t,e),Dt(e),l&512&&(et||s===null||ta(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[ml]||r[xt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),ht(r,l,s),r[xt]=e,it(r),l=r;break e;case"link":var c=Xm("link","href",n).get(l+(s.href||""));if(c){for(var m=0;m<c.length;m++)if(r=c[m],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){c.splice(m,1);break t}}r=n.createElement(l),ht(r,l,s),n.head.appendChild(r);break;case"meta":if(c=Xm("meta","content",n).get(l+(s.content||""))){for(m=0;m<c.length;m++)if(r=c[m],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){c.splice(m,1);break t}}r=n.createElement(l),ht(r,l,s),n.head.appendChild(r);break;default:throw Error(d(468,l))}r[xt]=e,it(r),l=r}e.stateNode=l}else Vm(n,e.type,e.stateNode);else e.stateNode=Gm(n,l,e.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?Vm(n,e.type,e.stateNode):Gm(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&ic(e,e.memoizedProps,s.memoizedProps)}break;case 27:kt(t,e),Dt(e),l&512&&(et||s===null||ta(s,s.return)),s!==null&&l&4&&ic(e,e.memoizedProps,s.memoizedProps);break;case 5:if(kt(t,e),Dt(e),l&512&&(et||s===null||ta(s,s.return)),e.flags&32){n=e.stateNode;try{As(n,"")}catch(H){$e(e,e.return,H)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,ic(e,n,s!==null?s.memoizedProps:n)),l&1024&&(dc=!0);break;case 6:if(kt(t,e),Dt(e),l&4){if(e.stateNode===null)throw Error(d(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(H){$e(e,e.return,H)}}break;case 3:if(vr=null,n=Zt,Zt=yr(t.containerInfo),kt(t,e),Zt=n,Dt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{nn(t.containerInfo)}catch(H){$e(e,e.return,H)}dc&&(dc=!1,Fu(e));break;case 4:l=Zt,Zt=yr(e.stateNode.containerInfo),kt(t,e),Dt(e),Zt=l;break;case 12:kt(t,e),Dt(e);break;case 13:kt(t,e),Dt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(pc=me()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,uc(e,l)));break;case 22:n=e.memoizedState!==null;var N=s!==null&&s.memoizedState!==null,z=ya,W=et;if(ya=z||n,et=W||N,kt(t,e),et=W,ya=z,Dt(e),l&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(s===null||N||ya||et||fs(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){N=s=t;try{if(r=N.stateNode,n)c=r.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{m=N.stateNode;var ee=N.memoizedProps.style,U=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;m.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(H){$e(N,N.return,H)}}}else if(t.tag===6){if(s===null){N=t;try{N.stateNode.nodeValue=n?"":N.memoizedProps}catch(H){$e(N,N.return,H)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,uc(e,s))));break;case 19:kt(t,e),Dt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,uc(e,l)));break;case 30:break;case 21:break;default:kt(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(Gu(l)){s=l;break}l=l.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var n=s.stateNode,r=cc(e);nr(e,r,n);break;case 5:var c=s.stateNode;s.flags&32&&(As(c,""),s.flags&=-33);var m=cc(e);nr(e,m,c);break;case 3:case 4:var N=s.stateNode.containerInfo,z=cc(e);oc(e,z,N);break;default:throw Error(d(161))}}catch(W){$e(e,e.return,W)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fu(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Fu(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function za(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Zu(e,t.alternate,t),t=t.sibling}function fs(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ra(4,t,t.return),fs(t);break;case 1:ta(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&$u(t,t.return,s),fs(t);break;case 27:Pl(t.stateNode);case 26:case 5:ta(t,t.return),fs(t);break;case 22:t.memoizedState===null&&fs(t);break;case 30:fs(t);break;default:fs(t)}e=e.sibling}}function Ua(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,n=e,r=t,c=r.flags;switch(r.tag){case 0:case 11:case 15:Ua(n,r,s),Ql(4,r);break;case 1:if(Ua(n,r,s),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(z){$e(l,l.return,z)}if(l=r,n=l.updateQueue,n!==null){var m=l.stateNode;try{var N=n.shared.hiddenCallbacks;if(N!==null)for(n.shared.hiddenCallbacks=null,n=0;n<N.length;n++)Ad(N[n],m)}catch(z){$e(l,l.return,z)}}s&&c&64&&Qu(r),$l(r,r.return);break;case 27:Xu(r);case 26:case 5:Ua(n,r,s),s&&l===null&&c&4&&Yu(r),$l(r,r.return);break;case 12:Ua(n,r,s);break;case 13:Ua(n,r,s),s&&c&4&&Ju(n,r);break;case 22:r.memoizedState===null&&Ua(n,r,s),$l(r,r.return);break;case 30:break;default:Ua(n,r,s)}t=t.sibling}}function mc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Al(s))}function fc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Al(e))}function aa(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Iu(e,t,s,l),t=t.sibling}function Iu(e,t,s,l){var n=t.flags;switch(t.tag){case 0:case 11:case 15:aa(e,t,s,l),n&2048&&Ql(9,t);break;case 1:aa(e,t,s,l);break;case 3:aa(e,t,s,l),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Al(e)));break;case 12:if(n&2048){aa(e,t,s,l),e=t.stateNode;try{var r=t.memoizedProps,c=r.id,m=r.onPostCommit;typeof m=="function"&&m(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){$e(t,t.return,N)}}else aa(e,t,s,l);break;case 13:aa(e,t,s,l);break;case 23:break;case 22:r=t.stateNode,c=t.alternate,t.memoizedState!==null?r._visibility&2?aa(e,t,s,l):Yl(e,t):r._visibility&2?aa(e,t,s,l):(r._visibility|=2,Vs(e,t,s,l,(t.subtreeFlags&10256)!==0)),n&2048&&mc(c,t);break;case 24:aa(e,t,s,l),n&2048&&fc(t.alternate,t);break;default:aa(e,t,s,l)}}function Vs(e,t,s,l,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,c=t,m=s,N=l,z=c.flags;switch(c.tag){case 0:case 11:case 15:Vs(r,c,m,N,n),Ql(8,c);break;case 23:break;case 22:var W=c.stateNode;c.memoizedState!==null?W._visibility&2?Vs(r,c,m,N,n):Yl(r,c):(W._visibility|=2,Vs(r,c,m,N,n)),n&&z&2048&&mc(c.alternate,c);break;case 24:Vs(r,c,m,N,n),n&&z&2048&&fc(c.alternate,c);break;default:Vs(r,c,m,N,n)}t=t.sibling}}function Yl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,n=l.flags;switch(l.tag){case 22:Yl(s,l),n&2048&&mc(l.alternate,l);break;case 24:Yl(s,l),n&2048&&fc(l.alternate,l);break;default:Yl(s,l)}t=t.sibling}}var Gl=8192;function Zs(e){if(e.subtreeFlags&Gl)for(e=e.child;e!==null;)em(e),e=e.sibling}function em(e){switch(e.tag){case 26:Zs(e),e.flags&Gl&&e.memoizedState!==null&&Lx(Zt,e.memoizedState,e.memoizedProps);break;case 5:Zs(e);break;case 3:case 4:var t=Zt;Zt=yr(e.stateNode.containerInfo),Zs(e),Zt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Gl,Gl=16777216,Zs(e),Gl=t):Zs(e));break;default:Zs(e)}}function tm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];ot=l,sm(l,e)}tm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)am(e),e=e.sibling}function am(e){switch(e.tag){case 0:case 11:case 15:Xl(e),e.flags&2048&&Ra(9,e,e.return);break;case 3:Xl(e);break;case 12:Xl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,rr(e)):Xl(e);break;default:Xl(e)}}function rr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];ot=l,sm(l,e)}tm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ra(8,t,t.return),rr(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,rr(t));break;default:rr(t)}e=e.sibling}}function sm(e,t){for(;ot!==null;){var s=ot;switch(s.tag){case 0:case 11:case 15:Ra(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Al(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,ot=l;else e:for(s=e;ot!==null;){l=ot;var n=l.sibling,r=l.return;if(Wu(l),l===s){ot=null;break e}if(n!==null){n.return=r,ot=n;break e}ot=r}}}var tx={getCacheForType:function(e){var t=gt(nt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s}},ax=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Ye=null,Me=null,De=0,qe=0,Ot=null,qa=!1,Ws=!1,hc=!1,va=0,Pe=0,Ha=0,hs=0,xc=0,Gt=0,Ks=0,Vl=null,_t=null,gc=!1,pc=0,ir=1/0,cr=null,La=null,ft=0,Ba=null,Js=null,Ps=0,yc=0,bc=null,lm=null,Zl=0,vc=null;function Rt(){if((Ue&2)!==0&&De!==0)return De&-De;if(g.T!==null){var e=Hs;return e!==0?e:Ac()}return vo()}function nm(){Gt===0&&(Gt=(De&536870912)===0||ze?go():536870912);var e=Yt.current;return e!==null&&(e.flags|=32),Gt}function zt(e,t,s){(e===Ye&&(qe===2||qe===9)||e.cancelPendingCommit!==null)&&(Fs(e,0),Qa(e,De,Gt,!1)),ul(e,s),((Ue&2)===0||e!==Ye)&&(e===Ye&&((Ue&2)===0&&(hs|=s),Pe===4&&Qa(e,De,Gt,!1)),sa(e))}function rm(e,t,s){if((Ue&6)!==0)throw Error(d(327));var l=!s&&(t&124)===0&&(t&e.expiredLanes)===0||dl(e,t),n=l?nx(e,t):wc(e,t,!0),r=l;do{if(n===0){Ws&&!l&&Qa(e,t,0,!1);break}else{if(s=e.current.alternate,r&&!sx(s)){n=wc(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var m=e;n=Vl;var N=m.current.memoizedState.isDehydrated;if(N&&(Fs(m,c).flags|=256),c=wc(m,c,!1),c!==2){if(hc&&!N){m.errorRecoveryDisabledLanes|=r,hs|=r,n=4;break e}r=_t,_t=n,r!==null&&(_t===null?_t=r:_t.push.apply(_t,r))}n=c}if(r=!1,n!==2)continue}}if(n===1){Fs(e,0),Qa(e,t,0,!0);break}e:{switch(l=e,r=n,r){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:Qa(l,t,Gt,!qa);break e;case 2:_t=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(n=pc+300-me(),10<n)){if(Qa(l,t,Gt,!qa),bn(l,0,!0)!==0)break e;l.timeoutHandle=zm(im.bind(null,l,s,_t,cr,gc,t,Gt,hs,Ks,qa,r,2,-0,0),n);break e}im(l,s,_t,cr,gc,t,Gt,hs,Ks,qa,r,0,-0,0)}}break}while(!0);sa(e)}function im(e,t,s,l,n,r,c,m,N,z,W,ee,U,H){if(e.timeoutHandle=-1,ee=t.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(en={stylesheets:null,count:0,unsuspend:Hx},em(t),ee=Bx(),ee!==null)){e.cancelPendingCommit=ee(hm.bind(null,e,t,r,s,l,n,c,m,N,W,1,U,H)),Qa(e,r,c,!z);return}hm(e,t,r,s,l,n,c,m,N)}function sx(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],r=n.getSnapshot;n=n.value;try{if(!Mt(r(),n))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qa(e,t,s,l){t&=~xc,t&=~hs,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var n=t;0<n;){var r=31-Ct(n),c=1<<r;l[r]=-1,n&=~c}s!==0&&yo(e,s,t)}function or(){return(Ue&6)===0?(Wl(0),!1):!0}function jc(){if(Me!==null){if(qe===0)var e=Me.return;else e=Me,ma=cs=null,Hi(e),Gs=null,Hl=0,e=Me;for(;e!==null;)Bu(e.alternate,e),e=e.return;Me=null}}function Fs(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,jx(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),jc(),Ye=e,Me=s=oa(e.current,null),De=t,qe=0,Ot=null,qa=!1,Ws=dl(e,t),hc=!1,Ks=Gt=xc=hs=Ha=Pe=0,_t=Vl=null,gc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var n=31-Ct(l),r=1<<n;t|=e[n],l&=~r}return va=t,kn(),s}function cm(e,t){Ee=null,g.H=Jn,t===Ml||t===Bn?(t=_d(),qe=3):t===Nd?(t=_d(),qe=4):qe=t===Eu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ot=t,Me===null&&(Pe=1,tr(e,Lt(t,e.current)))}function om(){var e=g.H;return g.H=Jn,e===null?Jn:e}function dm(){var e=g.A;return g.A=tx,e}function Nc(){Pe=4,qa||(De&4194048)!==De&&Yt.current!==null||(Ws=!0),(Ha&134217727)===0&&(hs&134217727)===0||Ye===null||Qa(Ye,De,Gt,!1)}function wc(e,t,s){var l=Ue;Ue|=2;var n=om(),r=dm();(Ye!==e||De!==t)&&(cr=null,Fs(e,t)),t=!1;var c=Pe;e:do try{if(qe!==0&&Me!==null){var m=Me,N=Ot;switch(qe){case 8:jc(),c=6;break e;case 3:case 2:case 9:case 6:Yt.current===null&&(t=!0);var z=qe;if(qe=0,Ot=null,Is(e,m,N,z),s&&Ws){c=0;break e}break;default:z=qe,qe=0,Ot=null,Is(e,m,N,z)}}lx(),c=Pe;break}catch(W){cm(e,W)}while(!0);return t&&e.shellSuspendCounter++,ma=cs=null,Ue=l,g.H=n,g.A=r,Me===null&&(Ye=null,De=0,kn()),c}function lx(){for(;Me!==null;)um(Me)}function nx(e,t){var s=Ue;Ue|=2;var l=om(),n=dm();Ye!==e||De!==t?(cr=null,ir=me()+500,Fs(e,t)):Ws=dl(e,t);e:do try{if(qe!==0&&Me!==null){t=Me;var r=Ot;t:switch(qe){case 1:qe=0,Ot=null,Is(e,t,r,1);break;case 2:case 9:if(wd(r)){qe=0,Ot=null,mm(t);break}t=function(){qe!==2&&qe!==9||Ye!==e||(qe=7),sa(e)},r.then(t,t);break e;case 3:qe=7;break e;case 4:qe=5;break e;case 7:wd(r)?(qe=0,Ot=null,mm(t)):(qe=0,Ot=null,Is(e,t,r,7));break;case 5:var c=null;switch(Me.tag){case 26:c=Me.memoizedState;case 5:case 27:var m=Me;if(!c||Zm(c)){qe=0,Ot=null;var N=m.sibling;if(N!==null)Me=N;else{var z=m.return;z!==null?(Me=z,dr(z)):Me=null}break t}}qe=0,Ot=null,Is(e,t,r,5);break;case 6:qe=0,Ot=null,Is(e,t,r,6);break;case 8:jc(),Pe=6;break e;default:throw Error(d(462))}}rx();break}catch(W){cm(e,W)}while(!0);return ma=cs=null,g.H=l,g.A=n,Ue=s,Me!==null?0:(Ye=null,De=0,kn(),Pe)}function rx(){for(;Me!==null&&!_();)um(Me)}function um(e){var t=Hu(e.alternate,e,va);e.memoizedProps=e.pendingProps,t===null?dr(e):Me=t}function mm(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Du(s,t,t.pendingProps,t.type,void 0,De);break;case 11:t=Du(s,t,t.pendingProps,t.type.render,t.ref,De);break;case 5:Hi(t);default:Bu(s,t),t=Me=fd(t,va),t=Hu(s,t,va)}e.memoizedProps=e.pendingProps,t===null?dr(e):Me=t}function Is(e,t,s,l){ma=cs=null,Hi(t),Gs=null,Hl=0;var n=t.return;try{if(Kh(e,n,t,s,De)){Pe=1,tr(e,Lt(s,e.current)),Me=null;return}}catch(r){if(n!==null)throw Me=n,r;Pe=1,tr(e,Lt(s,e.current)),Me=null;return}t.flags&32768?(ze||l===1?e=!0:Ws||(De&536870912)!==0?e=!1:(qa=e=!0,(l===2||l===9||l===3||l===6)&&(l=Yt.current,l!==null&&l.tag===13&&(l.flags|=16384))),fm(t,e)):dr(t)}function dr(e){var t=e;do{if((t.flags&32768)!==0){fm(t,qa);return}e=t.return;var s=Ph(t.alternate,t,va);if(s!==null){Me=s;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Pe===0&&(Pe=5)}function fm(e,t){do{var s=Fh(e.alternate,e);if(s!==null){s.flags&=32767,Me=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Me=e;return}Me=e=s}while(e!==null);Pe=6,Me=null}function hm(e,t,s,l,n,r,c,m,N){e.cancelPendingCommit=null;do ur();while(ft!==0);if((Ue&6)!==0)throw Error(d(327));if(t!==null){if(t===e.current)throw Error(d(177));if(r=t.lanes|t.childLanes,r|=fi,Hf(e,s,r,c,m,N),e===Ye&&(Me=Ye=null,De=0),Js=t,Ba=e,Ps=s,yc=r,bc=n,lm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,dx(vt,function(){return bm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=g.T,g.T=null,n=T.p,T.p=2,c=Ue,Ue|=4;try{Ih(e,t,s)}finally{Ue=c,T.p=n,g.T=l}}ft=1,xm(),gm(),pm()}}function xm(){if(ft===1){ft=0;var e=Ba,t=Js,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=g.T,g.T=null;var l=T.p;T.p=2;var n=Ue;Ue|=4;try{Pu(t,e);var r=zc,c=sd(e.containerInfo),m=r.focusedElem,N=r.selectionRange;if(c!==m&&m&&m.ownerDocument&&ad(m.ownerDocument.documentElement,m)){if(N!==null&&ci(m)){var z=N.start,W=N.end;if(W===void 0&&(W=z),"selectionStart"in m)m.selectionStart=z,m.selectionEnd=Math.min(W,m.value.length);else{var ee=m.ownerDocument||document,U=ee&&ee.defaultView||window;if(U.getSelection){var H=U.getSelection(),we=m.textContent.length,ye=Math.min(N.start,we),Qe=N.end===void 0?ye:Math.min(N.end,we);!H.extend&&ye>Qe&&(c=Qe,Qe=ye,ye=c);var A=td(m,ye),S=td(m,Qe);if(A&&S&&(H.rangeCount!==1||H.anchorNode!==A.node||H.anchorOffset!==A.offset||H.focusNode!==S.node||H.focusOffset!==S.offset)){var D=ee.createRange();D.setStart(A.node,A.offset),H.removeAllRanges(),ye>Qe?(H.addRange(D),H.extend(S.node,S.offset)):(D.setEnd(S.node,S.offset),H.addRange(D))}}}}for(ee=[],H=m;H=H.parentNode;)H.nodeType===1&&ee.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<ee.length;m++){var J=ee[m];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}wr=!!Rc,zc=Rc=null}finally{Ue=n,T.p=l,g.T=s}}e.current=t,ft=2}}function gm(){if(ft===2){ft=0;var e=Ba,t=Js,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=g.T,g.T=null;var l=T.p;T.p=2;var n=Ue;Ue|=4;try{Zu(e,t.alternate,t)}finally{Ue=n,T.p=l,g.T=s}}ft=3}}function pm(){if(ft===4||ft===3){ft=0,F();var e=Ba,t=Js,s=Ps,l=lm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?ft=5:(ft=0,Js=Ba=null,ym(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(La=null),Qr(s),t=t.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(ol,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=g.T,n=T.p,T.p=2,g.T=null;try{for(var r=e.onRecoverableError,c=0;c<l.length;c++){var m=l[c];r(m.value,{componentStack:m.stack})}}finally{g.T=t,T.p=n}}(Ps&3)!==0&&ur(),sa(e),n=e.pendingLanes,(s&4194090)!==0&&(n&42)!==0?e===vc?Zl++:(Zl=0,vc=e):Zl=0,Wl(0)}}function ym(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Al(t)))}function ur(e){return xm(),gm(),pm(),bm()}function bm(){if(ft!==5)return!1;var e=Ba,t=yc;yc=0;var s=Qr(Ps),l=g.T,n=T.p;try{T.p=32>s?32:s,g.T=null,s=bc,bc=null;var r=Ba,c=Ps;if(ft=0,Js=Ba=null,Ps=0,(Ue&6)!==0)throw Error(d(331));var m=Ue;if(Ue|=4,am(r.current),Iu(r,r.current,c,s),Ue=m,Wl(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(ol,r)}catch{}return!0}finally{T.p=n,g.T=l,ym(e,t)}}function vm(e,t,s){t=Lt(s,t),t=Fi(e.stateNode,t,2),e=Ta(e,t,2),e!==null&&(ul(e,2),sa(e))}function $e(e,t,s){if(e.tag===3)vm(e,e,s);else for(;t!==null;){if(t.tag===3){vm(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(La===null||!La.has(l))){e=Lt(s,e),s=Su(2),l=Ta(t,s,2),l!==null&&(_u(s,l,t,e),ul(l,2),sa(l));break}}t=t.return}}function Sc(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new ax;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(s)||(hc=!0,n.add(s),e=ix.bind(null,e,t,s),t.then(e,e))}function ix(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ye===e&&(De&s)===s&&(Pe===4||Pe===3&&(De&62914560)===De&&300>me()-pc?(Ue&2)===0&&Fs(e,0):xc|=s,Ks===De&&(Ks=0)),sa(e)}function jm(e,t){t===0&&(t=po()),e=Rs(e,t),e!==null&&(ul(e,t),sa(e))}function cx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),jm(e,s)}function ox(e,t){var s=0;switch(e.tag){case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),jm(e,s)}function dx(e,t){return $(e,t)}var mr=null,el=null,_c=!1,fr=!1,Ec=!1,xs=0;function sa(e){e!==el&&e.next===null&&(el===null?mr=el=e:el=el.next=e),fr=!0,_c||(_c=!0,mx())}function Wl(e,t){if(!Ec&&fr){Ec=!0;do for(var s=!1,l=mr;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var c=l.suspendedLanes,m=l.pingedLanes;r=(1<<31-Ct(42|e)+1)-1,r&=n&~(c&~m),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,_m(l,r))}else r=De,r=bn(l,l===Ye?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||dl(l,r)||(s=!0,_m(l,r));l=l.next}while(s);Ec=!1}}function ux(){Nm()}function Nm(){fr=_c=!1;var e=0;xs!==0&&(vx()&&(e=xs),xs=0);for(var t=me(),s=null,l=mr;l!==null;){var n=l.next,r=wm(l,t);r===0?(l.next=null,s===null?mr=n:s.next=n,n===null&&(el=s)):(s=l,(e!==0||(r&3)!==0)&&(fr=!0)),l=n}Wl(e)}function wm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var c=31-Ct(r),m=1<<c,N=n[c];N===-1?((m&s)===0||(m&l)!==0)&&(n[c]=qf(m,t)):N<=t&&(e.expiredLanes|=m),r&=~m}if(t=Ye,s=De,s=bn(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(qe===2||qe===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&he(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||dl(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&he(l),Qr(s)){case 2:case 8:s=bs;break;case 32:s=vt;break;case 268435456:s=xo;break;default:s=vt}return l=Sm.bind(null,e),s=$(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&he(l),e.callbackPriority=2,e.callbackNode=null,2}function Sm(e,t){if(ft!==0&&ft!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ur()&&e.callbackNode!==s)return null;var l=De;return l=bn(e,e===Ye?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(rm(e,l,t),wm(e,me()),e.callbackNode!=null&&e.callbackNode===s?Sm.bind(null,e):null)}function _m(e,t){if(ur())return null;rm(e,t,!0)}function mx(){Nx(function(){(Ue&6)!==0?$(ut,ux):Nm()})}function Ac(){return xs===0&&(xs=go()),xs}function Em(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Sn(""+e)}function Am(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function fx(e,t,s,l,n){if(t==="submit"&&s&&s.stateNode===n){var r=Em((n[jt]||null).action),c=l.submitter;c&&(t=(t=c[jt]||null)?Em(t.formAction):c.getAttribute("formAction"),t!==null&&(r=t,c=null));var m=new Cn("action","action",null,l,n);e.push({event:m,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xs!==0){var N=c?Am(n,c):new FormData(n);Zi(s,{pending:!0,data:N,method:n.method,action:r},null,N)}}else typeof r=="function"&&(m.preventDefault(),N=c?Am(n,c):new FormData(n),Zi(s,{pending:!0,data:N,method:n.method,action:r},r,N))},currentTarget:n}]})}}for(var Cc=0;Cc<mi.length;Cc++){var Mc=mi[Cc],hx=Mc.toLowerCase(),xx=Mc[0].toUpperCase()+Mc.slice(1);Vt(hx,"on"+xx)}Vt(rd,"onAnimationEnd"),Vt(id,"onAnimationIteration"),Vt(cd,"onAnimationStart"),Vt("dblclick","onDoubleClick"),Vt("focusin","onFocus"),Vt("focusout","onBlur"),Vt(Dh,"onTransitionRun"),Vt(Oh,"onTransitionStart"),Vt(Rh,"onTransitionCancel"),Vt(od,"onTransitionEnd"),Ss("onMouseEnter",["mouseout","mouseover"]),Ss("onMouseLeave",["mouseout","mouseover"]),Ss("onPointerEnter",["pointerout","pointerover"]),Ss("onPointerLeave",["pointerout","pointerover"]),Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function Cm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],n=l.event;l=l.listeners;e:{var r=void 0;if(t)for(var c=l.length-1;0<=c;c--){var m=l[c],N=m.instance,z=m.currentTarget;if(m=m.listener,N!==r&&n.isPropagationStopped())break e;r=m,n.currentTarget=z;try{r(n)}catch(W){er(W)}n.currentTarget=null,r=N}else for(c=0;c<l.length;c++){if(m=l[c],N=m.instance,z=m.currentTarget,m=m.listener,N!==r&&n.isPropagationStopped())break e;r=m,n.currentTarget=z;try{r(n)}catch(W){er(W)}n.currentTarget=null,r=N}}}}function Te(e,t){var s=t[$r];s===void 0&&(s=t[$r]=new Set);var l=e+"__bubble";s.has(l)||(Mm(t,e,2,!1),s.add(l))}function Tc(e,t,s){var l=0;t&&(l|=4),Mm(s,e,l,t)}var hr="_reactListening"+Math.random().toString(36).slice(2);function kc(e){if(!e[hr]){e[hr]=!0,No.forEach(function(s){s!=="selectionchange"&&(gx.has(s)||Tc(s,!1,e),Tc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hr]||(t[hr]=!0,Tc("selectionchange",!1,t))}}function Mm(e,t,s,l){switch(Im(t)){case 2:var n=Yx;break;case 8:n=Gx;break;default:n=Xc}s=n.bind(null,t,s,e),n=void 0,!Ir||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Dc(e,t,s,l,n){var r=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var c=l.tag;if(c===3||c===4){var m=l.stateNode.containerInfo;if(m===n)break;if(c===4)for(c=l.return;c!==null;){var N=c.tag;if((N===3||N===4)&&c.stateNode.containerInfo===n)return;c=c.return}for(;m!==null;){if(c=js(m),c===null)return;if(N=c.tag,N===5||N===6||N===26||N===27){l=r=c;continue e}m=m.parentNode}}l=l.return}Uo(function(){var z=r,W=Pr(s),ee=[];e:{var U=dd.get(e);if(U!==void 0){var H=Cn,we=e;switch(e){case"keypress":if(En(s)===0)break e;case"keydown":case"keyup":H=dh;break;case"focusin":we="focus",H=si;break;case"focusout":we="blur",H=si;break;case"beforeblur":case"afterblur":H=si;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Ff;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=fh;break;case rd:case id:case cd:H=th;break;case od:H=xh;break;case"scroll":case"scrollend":H=Jf;break;case"wheel":H=ph;break;case"copy":case"cut":case"paste":H=sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Qo;break;case"toggle":case"beforetoggle":H=bh}var ye=(t&4)!==0,Qe=!ye&&(e==="scroll"||e==="scrollend"),A=ye?U!==null?U+"Capture":null:U;ye=[];for(var S=z,D;S!==null;){var J=S;if(D=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||D===null||A===null||(J=hl(S,A),J!=null&&ye.push(Jl(S,J,D))),Qe)break;S=S.return}0<ye.length&&(U=new H(U,we,null,s,W),ee.push({event:U,listeners:ye}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",U&&s!==Jr&&(we=s.relatedTarget||s.fromElement)&&(js(we)||we[vs]))break e;if((H||U)&&(U=W.window===W?W:(U=W.ownerDocument)?U.defaultView||U.parentWindow:window,H?(we=s.relatedTarget||s.toElement,H=z,we=we?js(we):null,we!==null&&(Qe=v(we),ye=we.tag,we!==Qe||ye!==5&&ye!==27&&ye!==6)&&(we=null)):(H=null,we=z),H!==we)){if(ye=Lo,J="onMouseLeave",A="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(ye=Qo,J="onPointerLeave",A="onPointerEnter",S="pointer"),Qe=H==null?U:fl(H),D=we==null?U:fl(we),U=new ye(J,S+"leave",H,s,W),U.target=Qe,U.relatedTarget=D,J=null,js(W)===z&&(ye=new ye(A,S+"enter",we,s,W),ye.target=D,ye.relatedTarget=Qe,J=ye),Qe=J,H&&we)t:{for(ye=H,A=we,S=0,D=ye;D;D=tl(D))S++;for(D=0,J=A;J;J=tl(J))D++;for(;0<S-D;)ye=tl(ye),S--;for(;0<D-S;)A=tl(A),D--;for(;S--;){if(ye===A||A!==null&&ye===A.alternate)break t;ye=tl(ye),A=tl(A)}ye=null}else ye=null;H!==null&&Tm(ee,U,H,ye,!1),we!==null&&Qe!==null&&Tm(ee,Qe,we,ye,!0)}}e:{if(U=z?fl(z):window,H=U.nodeName&&U.nodeName.toLowerCase(),H==="select"||H==="input"&&U.type==="file")var oe=Ko;else if(Zo(U))if(Jo)oe=Mh;else{oe=Ah;var Ae=Eh}else H=U.nodeName,!H||H.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?z&&Kr(z.elementType)&&(oe=Ko):oe=Ch;if(oe&&(oe=oe(e,z))){Wo(ee,oe,s,W);break e}Ae&&Ae(e,U,z),e==="focusout"&&z&&U.type==="number"&&z.memoizedProps.value!=null&&Wr(U,"number",U.value)}switch(Ae=z?fl(z):window,e){case"focusin":(Zo(Ae)||Ae.contentEditable==="true")&&(ks=Ae,oi=z,Nl=null);break;case"focusout":Nl=oi=ks=null;break;case"mousedown":di=!0;break;case"contextmenu":case"mouseup":case"dragend":di=!1,ld(ee,s,W);break;case"selectionchange":if(kh)break;case"keydown":case"keyup":ld(ee,s,W)}var fe;if(ni)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Ts?Xo(e,s)&&(je="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(je="onCompositionStart");je&&($o&&s.locale!=="ko"&&(Ts||je!=="onCompositionStart"?je==="onCompositionEnd"&&Ts&&(fe=qo()):(Ea=W,ei="value"in Ea?Ea.value:Ea.textContent,Ts=!0)),Ae=xr(z,je),0<Ae.length&&(je=new Bo(je,e,null,s,W),ee.push({event:je,listeners:Ae}),fe?je.data=fe:(fe=Vo(s),fe!==null&&(je.data=fe)))),(fe=jh?Nh(e,s):wh(e,s))&&(je=xr(z,"onBeforeInput"),0<je.length&&(Ae=new Bo("onBeforeInput","beforeinput",null,s,W),ee.push({event:Ae,listeners:je}),Ae.data=fe)),fx(ee,e,z,s,W)}Cm(ee,t)})}function Jl(e,t,s){return{instance:e,listener:t,currentTarget:s}}function xr(e,t){for(var s=t+"Capture",l=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=hl(e,s),n!=null&&l.unshift(Jl(e,n,r)),n=hl(e,t),n!=null&&l.push(Jl(e,n,r))),e.tag===3)return l;e=e.return}return[]}function tl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Tm(e,t,s,l,n){for(var r=t._reactName,c=[];s!==null&&s!==l;){var m=s,N=m.alternate,z=m.stateNode;if(m=m.tag,N!==null&&N===l)break;m!==5&&m!==26&&m!==27||z===null||(N=z,n?(z=hl(s,r),z!=null&&c.unshift(Jl(s,z,N))):n||(z=hl(s,r),z!=null&&c.push(Jl(s,z,N)))),s=s.return}c.length!==0&&e.push({event:t,listeners:c})}var px=/\r\n?/g,yx=/\u0000|\uFFFD/g;function km(e){return(typeof e=="string"?e:""+e).replace(px,`
`).replace(yx,"")}function Dm(e,t){return t=km(t),km(e)===t}function gr(){}function Be(e,t,s,l,n,r){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||As(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&As(e,""+l);break;case"className":jn(e,"class",l);break;case"tabIndex":jn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":jn(e,s,l);break;case"style":Ro(e,l,r);break;case"data":if(t!=="object"){jn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Sn(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(t!=="input"&&Be(e,t,"name",n.name,n,null),Be(e,t,"formEncType",n.formEncType,n,null),Be(e,t,"formMethod",n.formMethod,n,null),Be(e,t,"formTarget",n.formTarget,n,null)):(Be(e,t,"encType",n.encType,n,null),Be(e,t,"method",n.method,n,null),Be(e,t,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Sn(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=gr);break;case"onScroll":l!=null&&Te("scroll",e);break;case"onScrollEnd":l!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Sn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":Te("beforetoggle",e),Te("toggle",e),vn(e,"popover",l);break;case"xlinkActuate":ia(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ia(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ia(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ia(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ia(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ia(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ia(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ia(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ia(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":vn(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Wf.get(s)||s,vn(e,s,l))}}function Oc(e,t,s,l,n,r){switch(s){case"style":Ro(e,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof l=="string"?As(e,l):(typeof l=="number"||typeof l=="bigint")&&As(e,""+l);break;case"onScroll":l!=null&&Te("scroll",e);break;case"onScrollEnd":l!=null&&Te("scrollend",e);break;case"onClick":l!=null&&(e.onclick=gr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),t=s.slice(2,n?s.length-7:void 0),r=e[jt]||null,r=r!=null?r[s]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,n);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):vn(e,s,l)}}}function ht(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var l=!1,n=!1,r;for(r in s)if(s.hasOwnProperty(r)){var c=s[r];if(c!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Be(e,t,r,c,s,null)}}n&&Be(e,t,"srcSet",s.srcSet,s,null),l&&Be(e,t,"src",s.src,s,null);return;case"input":Te("invalid",e);var m=r=c=n=null,N=null,z=null;for(l in s)if(s.hasOwnProperty(l)){var W=s[l];if(W!=null)switch(l){case"name":n=W;break;case"type":c=W;break;case"checked":N=W;break;case"defaultChecked":z=W;break;case"value":r=W;break;case"defaultValue":m=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(d(137,t));break;default:Be(e,t,l,W,s,null)}}To(e,r,m,N,z,c,n,!1),Nn(e);return;case"select":Te("invalid",e),l=c=r=null;for(n in s)if(s.hasOwnProperty(n)&&(m=s[n],m!=null))switch(n){case"value":r=m;break;case"defaultValue":c=m;break;case"multiple":l=m;default:Be(e,t,n,m,s,null)}t=r,s=c,e.multiple=!!l,t!=null?Es(e,!!l,t,!1):s!=null&&Es(e,!!l,s,!0);return;case"textarea":Te("invalid",e),r=n=l=null;for(c in s)if(s.hasOwnProperty(c)&&(m=s[c],m!=null))switch(c){case"value":l=m;break;case"defaultValue":n=m;break;case"children":r=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(d(91));break;default:Be(e,t,c,m,s,null)}Do(e,l,n,r),Nn(e);return;case"option":for(N in s)if(s.hasOwnProperty(N)&&(l=s[N],l!=null))switch(N){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Be(e,t,N,l,s,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(l=0;l<Kl.length;l++)Te(Kl[l],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in s)if(s.hasOwnProperty(z)&&(l=s[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:Be(e,t,z,l,s,null)}return;default:if(Kr(t)){for(W in s)s.hasOwnProperty(W)&&(l=s[W],l!==void 0&&Oc(e,t,W,l,s,void 0));return}}for(m in s)s.hasOwnProperty(m)&&(l=s[m],l!=null&&Be(e,t,m,l,s,null))}function bx(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,c=null,m=null,N=null,z=null,W=null;for(H in s){var ee=s[H];if(s.hasOwnProperty(H)&&ee!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=ee;default:l.hasOwnProperty(H)||Be(e,t,H,null,l,ee)}}for(var U in l){var H=l[U];if(ee=s[U],l.hasOwnProperty(U)&&(H!=null||ee!=null))switch(U){case"type":r=H;break;case"name":n=H;break;case"checked":z=H;break;case"defaultChecked":W=H;break;case"value":c=H;break;case"defaultValue":m=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(d(137,t));break;default:H!==ee&&Be(e,t,U,H,l,ee)}}Zr(e,c,m,N,z,W,r,n);return;case"select":H=c=m=U=null;for(r in s)if(N=s[r],s.hasOwnProperty(r)&&N!=null)switch(r){case"value":break;case"multiple":H=N;default:l.hasOwnProperty(r)||Be(e,t,r,null,l,N)}for(n in l)if(r=l[n],N=s[n],l.hasOwnProperty(n)&&(r!=null||N!=null))switch(n){case"value":U=r;break;case"defaultValue":m=r;break;case"multiple":c=r;default:r!==N&&Be(e,t,n,r,l,N)}t=m,s=c,l=H,U!=null?Es(e,!!s,U,!1):!!l!=!!s&&(t!=null?Es(e,!!s,t,!0):Es(e,!!s,s?[]:"",!1));return;case"textarea":H=U=null;for(m in s)if(n=s[m],s.hasOwnProperty(m)&&n!=null&&!l.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:Be(e,t,m,null,l,n)}for(c in l)if(n=l[c],r=s[c],l.hasOwnProperty(c)&&(n!=null||r!=null))switch(c){case"value":U=n;break;case"defaultValue":H=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(d(91));break;default:n!==r&&Be(e,t,c,n,l,r)}ko(e,U,H);return;case"option":for(var we in s)if(U=s[we],s.hasOwnProperty(we)&&U!=null&&!l.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:Be(e,t,we,null,l,U)}for(N in l)if(U=l[N],H=s[N],l.hasOwnProperty(N)&&U!==H&&(U!=null||H!=null))switch(N){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:Be(e,t,N,U,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in s)U=s[ye],s.hasOwnProperty(ye)&&U!=null&&!l.hasOwnProperty(ye)&&Be(e,t,ye,null,l,U);for(z in l)if(U=l[z],H=s[z],l.hasOwnProperty(z)&&U!==H&&(U!=null||H!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(d(137,t));break;default:Be(e,t,z,U,l,H)}return;default:if(Kr(t)){for(var Qe in s)U=s[Qe],s.hasOwnProperty(Qe)&&U!==void 0&&!l.hasOwnProperty(Qe)&&Oc(e,t,Qe,void 0,l,U);for(W in l)U=l[W],H=s[W],!l.hasOwnProperty(W)||U===H||U===void 0&&H===void 0||Oc(e,t,W,U,l,H);return}}for(var A in s)U=s[A],s.hasOwnProperty(A)&&U!=null&&!l.hasOwnProperty(A)&&Be(e,t,A,null,l,U);for(ee in l)U=l[ee],H=s[ee],!l.hasOwnProperty(ee)||U===H||U==null&&H==null||Be(e,t,ee,U,l,H)}var Rc=null,zc=null;function pr(e){return e.nodeType===9?e:e.ownerDocument}function Om(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Uc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qc=null;function vx(){var e=window.event;return e&&e.type==="popstate"?e===qc?!1:(qc=e,!0):(qc=null,!1)}var zm=typeof setTimeout=="function"?setTimeout:void 0,jx=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(e){return Um.resolve(null).then(e).catch(wx)}:zm;function wx(e){setTimeout(function(){throw e})}function $a(e){return e==="head"}function qm(e,t){var s=t,l=0,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(0<l&&8>l){s=l;var c=e.ownerDocument;if(s&1&&Pl(c.documentElement),s&2&&Pl(c.body),s&4)for(s=c.head,Pl(s),c=s.firstChild;c;){var m=c.nextSibling,N=c.nodeName;c[ml]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&c.rel.toLowerCase()==="stylesheet"||s.removeChild(c),c=m}}if(n===0){e.removeChild(r),nn(t);return}n--}else s==="$"||s==="$?"||s==="$!"?n++:l=s.charCodeAt(0)-48;else l=0;s=r}while(s);nn(t)}function Hc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Hc(s),Yr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Sx(e,t,s,l){for(;e.nodeType===1;){var n=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ml])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Wt(e.nextSibling),e===null)break}return null}function _x(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Wt(e.nextSibling),e===null))return null;return e}function Lc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ex(e,t){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Wt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Bc=null;function Hm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}function Lm(e,t,s){switch(t=pr(s),e){case"html":if(e=t.documentElement,!e)throw Error(d(452));return e;case"head":if(e=t.head,!e)throw Error(d(453));return e;case"body":if(e=t.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Pl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Yr(e)}var Xt=new Map,Bm=new Set;function yr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ja=T.d;T.d={f:Ax,r:Cx,D:Mx,C:Tx,L:kx,m:Dx,X:Rx,S:Ox,M:zx};function Ax(){var e=ja.f(),t=or();return e||t}function Cx(e){var t=Ns(e);t!==null&&t.tag===5&&t.type==="form"?ru(t):ja.r(e)}var al=typeof document>"u"?null:document;function Qm(e,t,s){var l=al;if(l&&typeof t=="string"&&t){var n=Ht(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),Bm.has(n)||(Bm.add(n),e={rel:e,crossOrigin:s,href:t},l.querySelector(n)===null&&(t=l.createElement("link"),ht(t,"link",e),it(t),l.head.appendChild(t)))}}function Mx(e){ja.D(e),Qm("dns-prefetch",e,null)}function Tx(e,t){ja.C(e,t),Qm("preconnect",e,t)}function kx(e,t,s){ja.L(e,t,s);var l=al;if(l&&e&&t){var n='link[rel="preload"][as="'+Ht(t)+'"]';t==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+Ht(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+Ht(s.imageSizes)+'"]')):n+='[href="'+Ht(e)+'"]';var r=n;switch(t){case"style":r=sl(e);break;case"script":r=ll(e)}Xt.has(r)||(e=p({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Xt.set(r,e),l.querySelector(n)!==null||t==="style"&&l.querySelector(Fl(r))||t==="script"&&l.querySelector(Il(r))||(t=l.createElement("link"),ht(t,"link",e),it(t),l.head.appendChild(t)))}}function Dx(e,t){ja.m(e,t);var s=al;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+Ht(l)+'"][href="'+Ht(e)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=ll(e)}if(!Xt.has(r)&&(e=p({rel:"modulepreload",href:e},t),Xt.set(r,e),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Il(r)))return}l=s.createElement("link"),ht(l,"link",e),it(l),s.head.appendChild(l)}}}function Ox(e,t,s){ja.S(e,t,s);var l=al;if(l&&e){var n=ws(l).hoistableStyles,r=sl(e);t=t||"default";var c=n.get(r);if(!c){var m={loading:0,preload:null};if(c=l.querySelector(Fl(r)))m.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Xt.get(r))&&Qc(e,s);var N=c=l.createElement("link");it(N),ht(N,"link",e),N._p=new Promise(function(z,W){N.onload=z,N.onerror=W}),N.addEventListener("load",function(){m.loading|=1}),N.addEventListener("error",function(){m.loading|=2}),m.loading|=4,br(c,t,l)}c={type:"stylesheet",instance:c,count:1,state:m},n.set(r,c)}}}function Rx(e,t){ja.X(e,t);var s=al;if(s&&e){var l=ws(s).hoistableScripts,n=ll(e),r=l.get(n);r||(r=s.querySelector(Il(n)),r||(e=p({src:e,async:!0},t),(t=Xt.get(n))&&$c(e,t),r=s.createElement("script"),it(r),ht(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function zx(e,t){ja.M(e,t);var s=al;if(s&&e){var l=ws(s).hoistableScripts,n=ll(e),r=l.get(n);r||(r=s.querySelector(Il(n)),r||(e=p({src:e,async:!0,type:"module"},t),(t=Xt.get(n))&&$c(e,t),r=s.createElement("script"),it(r),ht(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function $m(e,t,s,l){var n=(n=de.current)?yr(n):null;if(!n)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=sl(s.href),s=ws(n).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=sl(s.href);var r=ws(n).hoistableStyles,c=r.get(e);if(c||(n=n.ownerDocument||n,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,c),(r=n.querySelector(Fl(e)))&&!r._p&&(c.instance=r,c.state.loading=5),Xt.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Xt.set(e,s),r||Ux(n,e,s,c.state))),t&&l===null)throw Error(d(528,""));return c}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ll(s),s=ws(n).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function sl(e){return'href="'+Ht(e)+'"'}function Fl(e){return'link[rel="stylesheet"]['+e+"]"}function Ym(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Ux(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ht(t,"link",s),it(t),e.head.appendChild(t))}function ll(e){return'[src="'+Ht(e)+'"]'}function Il(e){return"script[async]"+e}function Gm(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Ht(s.href)+'"]');if(l)return t.instance=l,it(l),l;var n=p({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),it(l),ht(l,"style",n),br(l,s.precedence,e),t.instance=l;case"stylesheet":n=sl(s.href);var r=e.querySelector(Fl(n));if(r)return t.state.loading|=4,t.instance=r,it(r),r;l=Ym(s),(n=Xt.get(n))&&Qc(l,n),r=(e.ownerDocument||e).createElement("link"),it(r);var c=r;return c._p=new Promise(function(m,N){c.onload=m,c.onerror=N}),ht(r,"link",l),t.state.loading|=4,br(r,s.precedence,e),t.instance=r;case"script":return r=ll(s.src),(n=e.querySelector(Il(r)))?(t.instance=n,it(n),n):(l=s,(n=Xt.get(r))&&(l=p({},s),$c(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),it(n),ht(n,"link",l),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,br(l,s.precedence,e));return t.instance}function br(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,c=0;c<l.length;c++){var m=l[c];if(m.dataset.precedence===t)r=m;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Qc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $c(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var vr=null;function Xm(e,t,s){if(vr===null){var l=new Map,n=vr=new Map;n.set(s,l)}else n=vr,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),n=0;n<s.length;n++){var r=s[n];if(!(r[ml]||r[xt]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var c=r.getAttribute(t)||"";c=e+c;var m=l.get(c);m?m.push(r):l.set(c,[r])}}return l}function Vm(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function qx(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Zm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var en=null;function Hx(){}function Lx(e,t,s){if(en===null)throw Error(d(475));var l=en;if(t.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var n=sl(s.href),r=e.querySelector(Fl(n));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=jr.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=r,it(r);return}r=e.ownerDocument||e,s=Ym(s),(n=Xt.get(n))&&Qc(s,n),r=r.createElement("link"),it(r);var c=r;c._p=new Promise(function(m,N){c.onload=m,c.onerror=N}),ht(r,"link",s),t.instance=r}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=jr.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function Bx(){if(en===null)throw Error(d(475));var e=en;return e.stylesheets&&e.count===0&&Yc(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&Yc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}function jr(){if(this.count--,this.count===0){if(this.stylesheets)Yc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Nr=null;function Yc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Nr=new Map,t.forEach(Qx,e),Nr=null,jr.call(e))}function Qx(e,t){if(!(t.state.loading&4)){var s=Nr.get(e);if(s)var l=s.get(null);else{s=new Map,Nr.set(e,s);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var c=n[r];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(s.set(c.dataset.precedence,c),l=c)}l&&s.set(null,l)}n=t.instance,c=n.getAttribute("data-precedence"),r=s.get(c)||l,r===l&&s.set(null,n),s.set(c,n),this.count++,l=jr.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var tn={$$typeof:I,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function $x(e,t,s,l,n,r,c,m){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=m,this.incompleteTransitions=new Map}function Wm(e,t,s,l,n,r,c,m,N,z,W,ee){return e=new $x(e,t,s,c,m,N,z,ee),t=1,r===!0&&(t|=24),r=Tt(3,null,null,t),e.current=r,r.stateNode=e,t=Si(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:t},Ci(r),e}function Km(e){return e?(e=zs,e):zs}function Jm(e,t,s,l,n,r){n=Km(n),l.context===null?l.context=n:l.pendingContext=n,l=Ma(t),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=Ta(e,l,t),s!==null&&(zt(s,e,t),kl(s,e,t))}function Pm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Gc(e,t){Pm(e,t),(e=e.alternate)&&Pm(e,t)}function Fm(e){if(e.tag===13){var t=Rs(e,67108864);t!==null&&zt(t,e,67108864),Gc(e,67108864)}}var wr=!0;function Yx(e,t,s,l){var n=g.T;g.T=null;var r=T.p;try{T.p=2,Xc(e,t,s,l)}finally{T.p=r,g.T=n}}function Gx(e,t,s,l){var n=g.T;g.T=null;var r=T.p;try{T.p=8,Xc(e,t,s,l)}finally{T.p=r,g.T=n}}function Xc(e,t,s,l){if(wr){var n=Vc(l);if(n===null)Dc(e,t,l,Sr,s),ef(e,l);else if(Vx(n,e,t,s,l))l.stopPropagation();else if(ef(e,l),t&4&&-1<Xx.indexOf(e)){for(;n!==null;){var r=Ns(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var c=Fa(r.pendingLanes);if(c!==0){var m=r;for(m.pendingLanes|=2,m.entangledLanes|=2;c;){var N=1<<31-Ct(c);m.entanglements[1]|=N,c&=~N}sa(r),(Ue&6)===0&&(ir=me()+500,Wl(0))}}break;case 13:m=Rs(r,2),m!==null&&zt(m,r,2),or(),Gc(r,2)}if(r=Vc(l),r===null&&Dc(e,t,l,Sr,s),r===n)break;n=r}n!==null&&l.stopPropagation()}else Dc(e,t,l,null,s)}}function Vc(e){return e=Pr(e),Zc(e)}var Sr=null;function Zc(e){if(Sr=null,e=js(e),e!==null){var t=v(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=j(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sr=e,null}function Im(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case ut:return 2;case bs:return 8;case vt:case kf:return 32;case xo:return 268435456;default:return 32}default:return 32}}var Wc=!1,Ya=null,Ga=null,Xa=null,an=new Map,sn=new Map,Va=[],Xx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ef(e,t){switch(e){case"focusin":case"focusout":Ya=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":an.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sn.delete(t.pointerId)}}function ln(e,t,s,l,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},t!==null&&(t=Ns(t),t!==null&&Fm(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Vx(e,t,s,l,n){switch(t){case"focusin":return Ya=ln(Ya,e,t,s,l,n),!0;case"dragenter":return Ga=ln(Ga,e,t,s,l,n),!0;case"mouseover":return Xa=ln(Xa,e,t,s,l,n),!0;case"pointerover":var r=n.pointerId;return an.set(r,ln(an.get(r)||null,e,t,s,l,n)),!0;case"gotpointercapture":return r=n.pointerId,sn.set(r,ln(sn.get(r)||null,e,t,s,l,n)),!0}return!1}function tf(e){var t=js(e.target);if(t!==null){var s=v(t);if(s!==null){if(t=s.tag,t===13){if(t=j(s),t!==null){e.blockedOn=t,Lf(e.priority,function(){if(s.tag===13){var l=Rt();l=Br(l);var n=Rs(s,l);n!==null&&zt(n,s,l),Gc(s,l)}});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _r(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Vc(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Jr=l,s.target.dispatchEvent(l),Jr=null}else return t=Ns(s),t!==null&&Fm(t),e.blockedOn=s,!1;t.shift()}return!0}function af(e,t,s){_r(e)&&s.delete(t)}function Zx(){Wc=!1,Ya!==null&&_r(Ya)&&(Ya=null),Ga!==null&&_r(Ga)&&(Ga=null),Xa!==null&&_r(Xa)&&(Xa=null),an.forEach(af),sn.forEach(af)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,Wc||(Wc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Zx)))}var Ar=null;function sf(e){Ar!==e&&(Ar=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Ar===e&&(Ar=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],n=e[t+2];if(typeof l!="function"){if(Zc(l||s)===null)continue;break}var r=Ns(s);r!==null&&(e.splice(t,3),t-=3,Zi(r,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function nn(e){function t(N){return Er(N,e)}Ya!==null&&Er(Ya,e),Ga!==null&&Er(Ga,e),Xa!==null&&Er(Xa,e),an.forEach(t),sn.forEach(t);for(var s=0;s<Va.length;s++){var l=Va[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Va.length&&(s=Va[0],s.blockedOn===null);)tf(s),s.blockedOn===null&&Va.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],r=s[l+1],c=n[jt]||null;if(typeof r=="function")c||sf(s);else if(c){var m=null;if(r&&r.hasAttribute("formAction")){if(n=r,c=r[jt]||null)m=c.formAction;else if(Zc(n)!==null)continue}else m=c.action;typeof m=="function"?s[l+1]=m:(s.splice(l,3),l-=3),sf(s)}}}function Kc(e){this._internalRoot=e}Cr.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(d(409));var s=t.current,l=Rt();Jm(s,l,e,t,null,null)},Cr.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jm(e.current,2,null,e,null,null),or(),t[vs]=null}};function Cr(e){this._internalRoot=e}Cr.prototype.unstable_scheduleHydration=function(e){if(e){var t=vo();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Va.length&&t!==0&&t<Va[s].priority;s++);Va.splice(s,0,e),s===0&&tf(e)}};var lf=o.version;if(lf!=="19.1.0")throw Error(d(527,lf,"19.1.0"));T.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=w(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Wx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:g,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mr.isDisabled&&Mr.supportsFiber)try{ol=Mr.inject(Wx),At=Mr}catch{}}return cn.createRoot=function(e,t){if(!u(e))throw Error(d(299));var s=!1,l="",n=vu,r=ju,c=Nu,m=null;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(m=t.unstable_transitionCallbacks)),t=Wm(e,1,!1,null,null,s,l,n,r,c,m,null),e[vs]=t.current,kc(e),new Kc(t)},cn.hydrateRoot=function(e,t,s){if(!u(e))throw Error(d(299));var l=!1,n="",r=vu,c=ju,m=Nu,N=null,z=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(c=s.onCaughtError),s.onRecoverableError!==void 0&&(m=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(N=s.unstable_transitionCallbacks),s.formState!==void 0&&(z=s.formState)),t=Wm(e,1,!0,t,s??null,l,n,r,c,m,N,z),t.context=Km(null),s=t.current,l=Rt(),l=Br(l),n=Ma(l),n.callback=null,Ta(s,n,l),s=l,t.current.lanes=s,ul(t,s),sa(t),e[vs]=t.current,kc(e),new Cr(t)},cn.version="19.1.0",cn}var xf;function s0(){if(xf)return Fc.exports;xf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(o){console.error(o)}}return i(),Fc.exports=a0(),Fc.exports}var l0=s0();const n0=no(l0),r0={events:{},on(i,o){return this.events[i]||(this.events[i]=[]),this.events[i].push(o),()=>{this.off(i,o)}},off(i,o){this.events[i]&&(this.events[i]=this.events[i].filter(f=>f!==o))},emit(i,o){this.events[i]&&this.events[i].forEach(f=>{try{f(o)}catch(d){console.error(`Error in event handler for ${i}:`,d)}})},clear(i){i?delete this.events[i]:this.events={}}};window.EventBus=r0;class i0{constructor(){this.baseURL=window.APP_CONFIG?.API_BASE||"/api"}getHeaders(){const o={"Content-Type":"application/json"},f=localStorage.getItem("token");return f&&(o.Authorization=`Bearer ${f}`),o}async handleResponse(o){if(!o.ok){if(o.status===401||o.status===403)throw window.EventBus&&window.EventBus.emit("auth:logout"),new Error("Session expired or unauthorized. Please login again.");const f=await o.json().catch(()=>({error:"Request failed"})),d=new Error(f.error||f.message||"Request failed");throw d.response={status:o.status,data:f},d}return o.headers.get("content-length")==="0"?null:o.json()}async request(o,f={}){const d=`${this.baseURL}${o}`,u=this.getHeaders(),v={...f,headers:u,credentials:"include"};console.log("🌐 API Request:",{method:v.method||"GET",url:d,hasAuthHeader:!!u.Authorization,authHeader:u.Authorization?`${u.Authorization.substring(0,20)}...`:"None"});try{const j=await fetch(d,v);return console.log("📡 API Response:",{status:j.status,statusText:j.statusText,contentType:j.headers.get("content-type")}),this.handleResponse(j)}catch(j){throw console.error("❌ API request failed:",j),j}}get(o,f={}){const d=new URLSearchParams(f).toString(),u=d?`${o}?${d}`:o;return this.request(u,{method:"GET"})}post(o,f={}){return this.request(o,{method:"POST",body:JSON.stringify(f)})}put(o,f={}){return this.request(o,{method:"PUT",body:JSON.stringify(f)})}patch(o,f={}){return this.request(o,{method:"PATCH",body:JSON.stringify(f)})}delete(o){return this.request(o,{method:"DELETE"})}login(o,f){return this.post("/auth/login",{username:o,password:f})}logout(){return this.post("/auth/logout")}verifySession(){return this.get("/auth/verify-session")}getUsers(){return this.get("/users")}getMachines(){return this.get("/machines")}getOrders(){return this.get("/orders")}async testAuth(){const o=localStorage.getItem("token");if(console.log("🔐 Current token:",o?`${o.substring(0,50)}...`:"No token"),!o)return console.log("❌ No token found in localStorage"),!1;try{const f=await this.get("/auth/verify-session");return console.log("✅ Auth test successful:",f),!0}catch(f){return console.log("❌ Auth test failed:",f.message),!1}}}const le=new i0;window.API=le;class c0{constructor(){this.ws=null,this.connectionId=null,this.connectionState="disconnected",this.isAuthenticated=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.reconnectDelay=1e3,this.heartbeatInterval=3e4,this.messageQueue=[],this.subscriptions=new Set,this.rooms=new Set,this.eventHandlers=new Map,this.metrics={messagesReceived:0,messagesSent:0,reconnections:0,lastPing:null,connectionTime:null},this.heartbeatTimer=null,this.reconnectTimer=null,this.connectionTimeoutTimer=null,console.log("🚀 Enhanced WebSocket Service initialized")}async connect(o=null){return this.connectionState==="connecting"||this.isConnected()?(console.log("⚠️ WebSocket already connecting or connected"),Promise.resolve()):new Promise(async(f,d)=>{try{this.connectionState="connecting",this.emit("connectionStateChanged",{state:"connecting"});const u=o||await this.getWebSocketToken();if(!u){console.log("ℹ️ No authentication token available, skipping WebSocket connection"),this.connectionState="disconnected",this.emit("connectionStateChanged",{state:"disconnected"});return}const v=this.buildWebSocketUrl(u);console.log("🔗 Connecting to:",v),this.ws=new WebSocket(v,u),this.connectionTimeoutTimer=setTimeout(()=>{this.connectionState==="connecting"&&(this.ws.close(),d(new Error("Connection timeout")))},1e4),this.setupEnhancedEventHandlers(f,d)}catch(u){this.handleConnectionError(u),d(u)}})}buildWebSocketUrl(o){return window.location.hostname==="localhost"?(this.authToken=o,"ws://localhost:3000"):(this.authToken=o,"wss://oracles.africa/ws")}setupEnhancedEventHandlers(o,f){const d={value:!1};this.ws.onopen=u=>{this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),console.log("✅ Enhanced WebSocket connected"),this.connectionState="connected",this.metrics.connectionTime=new Date,this.reconnectAttempts=0,this.connectionId=`enh_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.startHeartbeat(),this.processMessageQueue(),this.resubscribeToChannels(),this.emit("connected",{connectionId:this.connectionId,serverTime:new Date().toISOString(),enhanced:!0}),d.value||(d.value=!0,o())},this.ws.onmessage=u=>{try{const v=JSON.parse(u.data);this.metrics.messagesReceived++,this.handleEnhancedMessage(v)}catch(v){console.error("💥 Failed to parse WebSocket message:",v)}},this.ws.onclose=u=>{this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),console.log(`🔌 Enhanced WebSocket disconnected - Code: ${u.code}, Reason: ${u.reason}`),this.handleDisconnection(u),d.value||(d.value=!0,f(new Error(`Connection failed: ${u.code} ${u.reason}`)))},this.ws.onerror=u=>{console.error("💥 Enhanced WebSocket error:",u),d.value||(d.value=!0,f(u))}}handleConnectionError(o){console.error("❌ WebSocket connection error:",o),this.connectionState="disconnected",this.lastError=o,this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),this.metrics.connectionErrors=(this.metrics.connectionErrors||0)+1,this.emit("error",o),o.message&&o.message.includes("token")&&console.warn("🔐 Token-related error, may need re-authentication")}handleEnhancedMessage(o){const{type:f,data:d,room:u,channel:v,priority:j="normal",timestamp:k}=o;switch(console.log(`📨 Enhanced message received: ${f}`,{room:u,channel:v,priority:j}),f){case"welcome":this.isAuthenticated=!0,this.emit("authenticated",d),console.log("🎉 Enhanced WebSocket authenticated:",d.user);break;case"auth_error":console.error("🚫 Authentication failed:",d.error),this.disconnect(),this.emit("auth_error",d);break;case"pong":this.metrics.lastPing=new Date;break;case"room_joined":this.rooms.add(d.room),console.log("🏠 Joined room:",d.room),this.emit("room_joined",d);break;case"room_left":this.rooms.delete(d.room),console.log("🚪 Left room:",d.room),this.emit("room_left",d);break;case"subscription_confirmed":d.channels?.forEach(w=>this.subscriptions.add(w)),this.emit("subscribed",d);break;case"error":console.error("⚠️ Server error:",d.error),this.emit("server_error",d);break;case"order_started":case"order_stopped":case"order_resumed":case"order_completed":this.emit("order_update",{type:f,data:d,timestamp:k,room:u,channel:v}),this.emit(f,{data:d,timestamp:k,room:u,channel:v});break;case"machine_status_changed":this.emit("machine_update",{type:f,data:d,timestamp:k,room:u,channel:v}),this.emit(f,{data:d,timestamp:k,room:u,channel:v});break;case"production_alert":this.emit("alert",{data:d,timestamp:k,priority:j,room:u,channel:v});break;case"user_notification":this.emit("notification",{data:d,timestamp:k,priority:j});break;default:this.emit(f,{data:d,timestamp:k,room:u,channel:v,priority:j});break}}subscribe(o,f=null){if(typeof o=="string"&&(o=[o]),!Array.isArray(o))return;o.forEach(u=>this.subscriptions.add(u));const d={channels:o};f&&(d.room=f,this.rooms.add(f)),this.isConnected()&&this.isAuthenticated?(this.send("subscribe",d),console.log("📺 Subscribing to channels:",o,f?`in room: ${f}`:"")):console.log("📺 Queued subscription (will subscribe when connected):",o)}joinRoom(o){this.isConnected()&&this.isAuthenticated?(this.send("join_room",{room:o}),console.log("🏠 Joining room:",o)):console.log("🏠 Queued room join:",o)}leaveRoom(o){this.isConnected()&&this.isAuthenticated&&(this.send("leave_room",{room:o}),this.rooms.delete(o),console.log("🚪 Leaving room:",o))}send(o,f={},d="normal"){const u={type:o,data:f,priority:d,timestamp:new Date().toISOString(),clientId:this.connectionId};if(!this.isConnected())return this.messageQueue.push(u),console.log("📬 Message queued:",o),!1;try{return this.ws.send(JSON.stringify(u)),this.metrics.messagesSent++,console.log(`📤 Enhanced message sent: ${o}`),!0}catch(v){return console.error("💥 Failed to send message:",v),this.messageQueue.push(u),!1}}processMessageQueue(){if(this.messageQueue.length===0)return;console.log(`📬 Processing ${this.messageQueue.length} queued messages`);const o=[...this.messageQueue];this.messageQueue=[],o.forEach(f=>{this.send(f.type,f.data,f.priority)})}resubscribeToChannels(){if(this.subscriptions.size>0){const o=Array.from(this.subscriptions);this.send("subscribe",{channels:o}),console.log("🔄 Resubscribed to channels:",o)}this.rooms.size>0&&(this.rooms.forEach(o=>{this.send("join_room",{room:o})}),console.log("🔄 Rejoined rooms:",Array.from(this.rooms)))}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=setInterval(()=>{if(this.isConnected()){const o=Date.now();this.send("ping",{clientTime:o})}},this.heartbeatInterval),console.log(`💓 Enhanced heartbeat started (${this.heartbeatInterval}ms)`)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}handleDisconnection(o){this.connectionState="disconnected",this.isAuthenticated=!1,this.stopHeartbeat(),this.emit("disconnected",{code:o.code,reason:o.reason,connectionTime:this.metrics.connectionTime,reconnectAttempts:this.reconnectAttempts}),o.code!==1e3&&o.code!==1001&&this.scheduleReconnect()}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.emit("max_reconnect_attempts");return}const o=this.reconnectDelay*Math.pow(2,this.reconnectAttempts),f=Math.random()*1e3,d=o+f;this.reconnectAttempts++,this.metrics.reconnections++,console.log(`🔄 Scheduling reconnection ${this.reconnectAttempts}/${this.maxReconnectAttempts} in ${Math.round(d)}ms`),this.connectionState="reconnecting",this.emit("connectionStateChanged",{state:"reconnecting",attempt:this.reconnectAttempts,delay:Math.round(d)}),this.reconnectTimer=setTimeout(()=>{this.connect().catch(u=>{console.warn("🔄 Reconnection failed:",u.message)})},d)}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}getConnectionStatus(){return{state:this.connectionState,isConnected:this.isConnected(),isAuthenticated:this.isAuthenticated,connectionId:this.connectionId,subscriptions:Array.from(this.subscriptions),rooms:Array.from(this.rooms),queuedMessages:this.messageQueue.length,metrics:{...this.metrics},reconnectAttempts:this.reconnectAttempts}}disconnect(){console.log("🔌 Disconnecting Enhanced WebSocket"),this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),this.connectionState="disconnected",this.isAuthenticated=!1,this.reconnectAttempts=0,this.connectionId=null,this.messageQueue=[],this.emit("disconnected",{deliberate:!0})}on(o,f){this.eventHandlers.has(o)||this.eventHandlers.set(o,new Set),this.eventHandlers.get(o).add(f),console.log(`👂 Handler registered for: ${o}`)}off(o,f){this.eventHandlers.has(o)&&this.eventHandlers.get(o).delete(f)}emit(o,f){this.eventHandlers.has(o)&&this.eventHandlers.get(o).forEach(d=>{try{d(f)}catch(u){console.error(`💥 Error in event handler for ${o}:`,u)}})}async getWebSocketToken(){try{const o=await fetch("/api/auth/websocket-token",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});if(o.status===401)return console.warn("🚫 Not authenticated for WebSocket"),null;if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);return(await o.json()).token}catch(o){return console.error("Failed to get WebSocket token:",o),null}}getMetrics(){return{...this.metrics,uptime:this.metrics.connectionTime?Date.now()-this.metrics.connectionTime.getTime():0,subscriptionCount:this.subscriptions.size,roomCount:this.rooms.size,handlerCount:Array.from(this.eventHandlers.values()).reduce((o,f)=>o+f.size,0)}}resetMetrics(){this.metrics={messagesReceived:0,messagesSent:0,reconnections:0,lastPing:null,connectionTime:this.metrics.connectionTime}}}const lt=new c0;window.EnhancedWebSocketService=lt;const jf=Wa.createContext(null),Ja=()=>Wa.useContext(jf),Nf=({children:i})=>{const[o,f]=Wa.useState(null),[d,u]=Wa.useState(!0),[v,j]=Wa.useState(!1),k=async()=>{u(!0);try{if(!localStorage.getItem("token")){u(!1);return}const{user:L}=await window.API.verifySession();if(L&&(f(L),j(!0),localStorage.setItem("user_data",JSON.stringify(L)),window.EnhancedWebSocketService&&!window.EnhancedWebSocketService.isConnected()))try{console.log("🔐 User already authenticated - connecting WebSocket"),await window.EnhancedWebSocketService.connect()}catch(M){console.warn("⚠️ WebSocket connection failed for existing session:",M.message)}}catch{f(null),j(!1),localStorage.removeItem("user_data")}finally{u(!1)}};Wa.useEffect(()=>{k();const C=window.EventBus.on("auth:logout",()=>{f(null),j(!1),localStorage.removeItem("user_data"),localStorage.removeItem("token")});return()=>C()},[]);const R={user:o,login:async(C,L)=>{const M=await window.API.login(C,L);if(M.user&&M.token&&(f(M.user),j(!0),localStorage.setItem("user_data",JSON.stringify(M.user)),localStorage.setItem("token",M.token),window.EnhancedWebSocketService))try{console.log("🔐 Connecting WebSocket after successful login"),await window.EnhancedWebSocketService.connect()}catch(Y){console.warn("⚠️ WebSocket connection failed after login:",Y.message)}return M},logout:async()=>{try{await window.API.logout()}catch(C){console.error("Logout failed:",C)}finally{if(window.EnhancedWebSocketService)try{console.log("🔌 Disconnecting WebSocket on logout"),window.EnhancedWebSocketService.disconnect()}catch(C){console.warn("⚠️ WebSocket disconnect failed on logout:",C.message)}f(null),j(!1),localStorage.removeItem("user_data"),localStorage.removeItem("token")}},loading:d,isAuthenticated:v,hasRole:C=>o?(Array.isArray(C)?C:[C]).includes(o.role):!1,checkAuth:k};return Wa.createElement(jf.Provider,{value:R},i)};window.useAuth=Ja;window.AuthProvider=Nf;class o0{constructor(){this.routes=[],this.currentRoute=null,this.listening=!1}init(){this.listening=!0,window.addEventListener("popstate",o=>{this.handleRouteChange()}),this.handleRouteChange()}addRoute(o){this.routes.push(o)}navigate(o,f={}){o!==window.location.pathname&&(window.history.pushState({},"",o),this.handleRouteChange())}back(){window.history.back()}handleRouteChange(){const o=window.location.pathname,f=this.findRoute(o);this.currentRoute=f,window.EventBus&&window.EventBus.emit("router:navigation",{route:f,path:o,params:f?{}:null})}findRoute(o){return this.routes.find(f=>{if(f.path===o)return!0;const d=f.path.split("/"),u=o.split("/");return d.length!==u.length?!1:d.every((v,j)=>v.startsWith(":")||v===u[j])})}getCurrentRoute(){return{route:this.currentRoute,path:window.location.pathname,params:{},query:this.getQueryParams()}}getQueryParams(){const o=new URLSearchParams(window.location.search),f={};for(const[d,u]of o)f[d]=u;return f}updateQueryParams(o,f=!1){const d=new URL(window.location);Object.entries(o).forEach(([u,v])=>{v==null?d.searchParams.delete(u):d.searchParams.set(u,v)}),f?window.history.replaceState({},"",d):window.history.pushState({},"",d)}isActive(o,f=!1){const d=window.location.pathname;return f?d===o:d.startsWith(o)}link(o){return o}}const io=new o0;window.Router=io;const d0=()=>{const[i,o]=React.useState(window.Router.getCurrentRoute());React.useEffect(()=>{const v=j=>{o({route:j.route,path:j.path,params:j.params||{},query:window.Router.getQueryParams()})};if(window.EventBus)return window.EventBus.on("router:navigation",v)},[]);const f=React.useCallback((v,j)=>{window.Router.navigate(v,j)},[]),d=React.useCallback(()=>{window.Router.back()},[]),u=React.useCallback((v,j)=>{window.Router.updateQueryParams(v,j)},[]);return{route:i.route,path:i.path,params:i.params,query:i.query,navigate:f,back:d,updateQuery:u,isActive:window.Router.isActive.bind(window.Router),link:window.Router.link.bind(window.Router)}};window.useRouter=d0;/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),m0=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,f,d)=>d?d.toUpperCase():f.toLowerCase()),gf=i=>{const o=m0(i);return o.charAt(0).toUpperCase()+o.slice(1)},wf=(...i)=>i.filter((o,f,d)=>!!o&&o.trim()!==""&&d.indexOf(o)===f).join(" ").trim(),f0=i=>{for(const o in i)if(o.startsWith("aria-")||o==="role"||o==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var h0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=x.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:f=2,absoluteStrokeWidth:d,className:u="",children:v,iconNode:j,...k},w)=>x.createElement("svg",{ref:w,...h0,width:o,height:o,stroke:i,strokeWidth:d?Number(f)*24/Number(o):f,className:wf("lucide",u),...!v&&!f0(k)&&{"aria-hidden":"true"},...k},[...j.map(([y,p])=>x.createElement(y,p)),...Array.isArray(v)?v:[v]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(i,o)=>{const f=x.forwardRef(({className:d,...u},v)=>x.createElement(x0,{ref:v,iconNode:o,className:wf(`lucide-${u0(gf(i))}`,`lucide-${i}`,d),...u}));return f.displayName=gf(i),f};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],yt=Ne("activity",g0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],y0=Ne("award",p0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],v0=Ne("bell",b0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],il=Ne("calendar",j0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Jt=Ne("chart-column",N0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],S0=Ne("circle-alert",w0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tt=Ne("circle-check-big",_0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],un=Ne("circle-x",E0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],mn=Ne("clipboard-list",A0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ft=Ne("clock",C0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],T0=Ne("database",M0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],la=Ne("download",k0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],O0=Ne("ellipsis-vertical",D0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gs=Ne("eye",R0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Tr=Ne("factory",z0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],pf=Ne("file-check",U0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Sf=Ne("file-text",q0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],co=Ne("funnel",H0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],B0=Ne("info",L0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],$0=Ne("layout-dashboard",Q0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],G0=Ne("menu",Y0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Kt=Ne("package",X0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],hn=Ne("pause",V0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],zr=Ne("pen-line",Z0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_f=Ne("pen",W0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Ka=Ne("play",K0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wa=Ne("plus",J0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ke=Ne("refresh-cw",P0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],I0=Ne("rotate-ccw",F0);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Or=Ne("save",eg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Hr=Ne("search",tg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ut=Ne("settings",ag);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Rr=Ne("shield",sg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],yf=Ne("square",lg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],dn=Ne("target",ng);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ur=Ne("trash-2",rg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],so=Ne("trending-down",ig);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],nl=Ne("trending-up",cg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Et=Ne("triangle-alert",og);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ef=Ne("upload",dg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],na=Ne("user-check",ug);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ao=Ne("user-plus",mg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],hg=Ne("user-x",fg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ve=Ne("users",xg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pg=Ne("wifi-off",gg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],bg=Ne("wifi",yg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],qr=Ne("wrench",vg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rl=Ne("x",jg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wg=Ne("zap",Ng),Sg={calendar:il,users:Ve,search:Hr,plus:wa,check:tt,x:rl,clipboard:mn,userCheck:na,settings:Ut,edit:_f,save:Or,trash:Ur,upload:Ef,download:la,activity:yt,package:Kt,shield:Rr,dashboard:$0,moreVertical:O0,clock:Ft,barChart3:Jt,menu:G0,wifi:bg,wifiOff:pg},ra=({icon:i,size:o=24,className:f=""})=>{const d=Sg[i];return d?a.jsx(d,{size:o,className:f}):a.jsx(Ve,{size:o,className:f})},_g=()=>{const[i,o]=x.useState(navigator.onLine),[f,d]=x.useState("disconnected"),[u,v]=x.useState(new Date);x.useEffect(()=>{const C=()=>{o(!0),v(new Date)},L=()=>{o(!1),v(new Date)};window.addEventListener("online",C),window.addEventListener("offline",L);const M=()=>{d("connected"),v(new Date)},Y=()=>{d("disconnected"),v(new Date)},q=()=>{d("reconnecting"),v(new Date)},E=()=>{d("error"),v(new Date)};if(window.WebSocketService){window.WebSocketService.on("connected",M),window.WebSocketService.on("authenticated",M),window.WebSocketService.on("disconnected",Y),window.WebSocketService.on("reconnecting",q),window.WebSocketService.on("error",E);const I=window.WebSocketService.getStatus();d(I.isConnected?"connected":I.state)}const P=setInterval(()=>{i&&v(new Date)},6e4);return()=>{window.removeEventListener("online",C),window.removeEventListener("offline",L),clearInterval(P),window.WebSocketService&&(window.WebSocketService.off("connected",M),window.WebSocketService.off("authenticated",M),window.WebSocketService.off("disconnected",Y),window.WebSocketService.off("reconnecting",q),window.WebSocketService.off("error",E))}},[i]);const j=i&&f==="connected",k=f==="reconnecting",w=f==="error"||!i;let y,p,R;return k?(y="bg-yellow-100 text-yellow-800",p="Reconnecting...",R="wifi"):j?(y="bg-green-100 text-green-800",p="Live",R="wifi"):w?(y="bg-red-100 text-red-800",p=i?"Connection Error":"Offline",R="wifiOff"):(y="bg-gray-100 text-gray-800",p="Connecting...",R="wifi"),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs ${y}`,children:[a.jsx(ra,{icon:R,size:12,className:`${j?"text-green-600":w?"text-red-600":"text-yellow-600"} ${k?"animate-pulse":""}`}),a.jsx("span",{children:p}),a.jsx("span",{className:"text-gray-500 hidden sm:inline",children:u.toLocaleTimeString()})]})},Eg=()=>{const{user:i,logout:o}=Ja(),[f,d]=x.useState(!1);return i?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>d(!f),className:"flex items-center space-x-3 focus:outline-none",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-semibold text-gray-700",children:i.username?i.username.charAt(0).toUpperCase():"U"})}),a.jsxs("div",{className:"hidden md:block text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:i.username}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i.role})]})]}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:a.jsx("button",{onClick:o,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})})]}):null},Ag=({onMenuClick:i})=>a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("button",{onClick:i,className:"lg:hidden p-3 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Open navigation menu",children:a.jsx(ra,{icon:"menu",size:24})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-semibold text-gray-900 hidden sm:block",children:"Production Management System"}),a.jsx("h1",{className:"text-lg font-semibold text-gray-900 sm:hidden",children:"PMS"}),a.jsx(_g,{})]}),a.jsx(Eg,{})]})})}),Cg=({isOpen:i,onClose:o})=>{const{user:f}=Ja(),u=[{name:"Dashboard",href:"/",icon:"dashboard",priority:"critical",roles:["operator","supervisor","manager","admin"]},{name:"Production Monitor",href:"/production",icon:"activity",priority:"critical",roles:["operator","supervisor","manager","admin"]},{name:"Orders",href:"/orders",icon:"package",priority:"daily",roles:["operator","supervisor","manager","admin"]},{name:"Machines",href:"/machines",icon:"settings",priority:"daily",roles:["operator","supervisor","manager","admin"]},{name:"Labor Layout",href:"/labour-layout",icon:"users",priority:"daily",roles:["supervisor","manager","admin"]},{name:"Labor Planner",href:"/labor-planner",icon:"calendar",priority:"daily",roles:["supervisor","manager","admin"]},{name:"Analytics",href:"/analytics",icon:"barChart3",priority:"management",roles:["manager","admin"]},{name:"Shift Reports",href:"/shift-reports",icon:"clock",priority:"management",roles:["supervisor","manager","admin"]},{name:"Users",href:"/users",icon:"users",priority:"management",roles:["admin"]},{name:"Settings",href:"/settings",icon:"settings",priority:"management",roles:["supervisor","manager","admin"]},{name:"Admin",href:"/admin",icon:"shield",priority:"management",roles:["admin"]}].filter(p=>p.roles.includes(f?.role||"operator")),v=u.filter(p=>p.priority==="critical"),j=u.filter(p=>p.priority==="daily"),k=u.filter(p=>p.priority==="management"),w=(p,R)=>{p.preventDefault(),window.history.pushState({},"",R);const C=new PopStateEvent("popstate");window.dispatchEvent(C),o&&o()},y=(p,R)=>p.length===0?null:a.jsxs("div",{className:"mb-4",children:[R&&a.jsx("h3",{className:"px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:R}),a.jsx("div",{className:"space-y-1",children:p.map(C=>a.jsxs("a",{href:C.href,onClick:L=>w(L,C.href),className:`group flex items-center px-3 py-3 text-sm font-medium rounded-md hover:bg-gray-700 hover:text-white transition-colors min-h-[44px] touch-manipulation ${window.location.pathname===C.href?"bg-gray-900 text-white":"text-gray-300"}`,children:[a.jsx(ra,{icon:C.icon,size:18,className:"mr-3 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:C.name})]},C.name))})]});return a.jsxs(a.Fragment,{children:[i&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-30 lg:hidden",onClick:o}),a.jsxs("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-gray-800 text-white transform transition-transform ${i?"translate-x-0":"-translate-x-full"} lg:translate-x-0 lg:static lg:inset-0`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-700",children:[a.jsx("span",{className:"text-white font-semibold text-xl",children:"PMS"}),a.jsx("button",{onClick:o,className:"lg:hidden p-2 text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white rounded-md min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Close navigation menu",children:a.jsx(ra,{icon:"x",size:20})})]}),a.jsx("div",{className:"px-4 py-3 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-sm font-semibold text-white",children:f?.username?f.username.charAt(0).toUpperCase():"U"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:f?.username}),a.jsx("p",{className:"text-xs text-gray-300 capitalize",children:f?.role})]})]})}),a.jsxs("nav",{className:"flex-1 px-2 py-4 overflow-y-auto",children:[y(v,"Critical"),y(j,"Daily Operations"),y(k,"Management")]})]})]})};function Mg({children:i}){const[o,f]=x.useState(!1);return a.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[a.jsx(Cg,{isOpen:o,onClose:()=>f(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Ag,{onMenuClick:()=>f(!0)}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:a.jsx("div",{className:"py-6",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})]})}function Tg(){const[i,o]=x.useState({username:"",password:""}),[f,d]=x.useState(""),[u,v]=x.useState(!1),{login:j}=Ja(),k=async y=>{y.preventDefault(),d(""),v(!0);try{await j(i.username,i.password)}catch(p){d(p.message||"Login failed. Please try again.")}finally{v(!1)}},w=y=>p=>{o(R=>({...R,[y]:p.target.value})),f&&d("")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Production Management"}),a.jsx("p",{className:"text-gray-600",children:"Sign in to continue"})]}),a.jsxs("form",{onSubmit:k,className:"space-y-6",children:[f&&a.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded",children:f}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx("input",{type:"text",value:i.username,onChange:w("username"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,autoFocus:!0,disabled:u})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:i.password,onChange:w("password"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,disabled:u})]}),a.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-200 disabled:opacity-50",children:u?"Signing in...":"Sign In"})]})]})})}const kg=({notification:i,onClose:o})=>{const{type:f,title:d,message:u,timestamp:v}=i;x.useEffect(()=>{const w=setTimeout(()=>{o()},5e3);return()=>clearTimeout(w)},[o]);const j=()=>{switch(f){case"order_started":return"bg-blue-50 border-blue-200 text-blue-800";case"order_completed":return"bg-green-50 border-green-200 text-green-800";case"order_stopped":return"bg-red-50 border-red-200 text-red-800";case"order_resumed":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"machine_status_changed":return"bg-purple-50 border-purple-200 text-purple-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},k=()=>{switch(f){case"order_started":return"activity";case"order_completed":return"check";case"order_stopped":return"x";case"order_resumed":return"activity";case"machine_status_changed":return"settings";default:return"info"}};return a.jsx("div",{className:`mb-3 p-4 rounded-lg border-l-4 shadow-md transition-all duration-300 ${j()}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ra,{icon:k(),size:20,className:"mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-sm",children:d}),a.jsx("p",{className:"text-sm mt-1 text-gray-600",children:u}),a.jsx("p",{className:"text-xs mt-2 text-gray-500",children:new Date(v).toLocaleTimeString()})]}),a.jsx("button",{onClick:o,className:"ml-3 flex-shrink-0 text-gray-400 hover:text-gray-600",children:a.jsx(ra,{icon:"x",size:16})})]})})},Dg=()=>{const[i,o]=x.useState([]),[f,d]=x.useState(!1),u=x.useRef({});x.useEffect(()=>{if(!window.WebSocketService){console.warn("WebSocket service not available");return}const w=()=>{d(!0),window.WebSocketService.subscribe(["orders","machines","notifications"])},y=()=>{d(!1)},p=M=>{const{type:Y,data:q,timestamp:E}=M;let P,I;switch(Y){case"order_started":P="Production Started",I=`Order ${q.order.order_number} started on ${q.order.machine_name} by ${q.operator}`;break;case"order_stopped":P="Production Stopped",I=`Order ${q.order.order_number} stopped - ${q.reason}`;break;case"order_resumed":P="Production Resumed",I=`Order ${q.order.order_number} resumed by ${q.resumed_by}`;break;case"order_completed":P="Order Completed",I=`Order ${q.order.order_number} completed (${q.efficiency.toFixed(1)}% efficiency)`;break;default:P="Order Update",I=`Order ${q.order?.order_number||"Unknown"} has been updated`}v({id:`${Y}_${Date.now()}`,type:Y,title:P,message:I,timestamp:E,data:q})},R=M=>{const{type:Y,data:q,timestamp:E}=M;Y==="machine_status_changed"&&v({id:`machine_${q.machine_id}_${Date.now()}`,type:Y,title:"Machine Status Changed",message:`Machine status updated to ${q.status}`,timestamp:E,data:q})},C=M=>{const{data:Y,timestamp:q}=M;v({id:`notification_${Date.now()}`,type:"notification",title:Y.title||"System Notification",message:Y.message||"You have a new notification",timestamp:q,data:Y})};return u.current={handleConnected:w,handleDisconnected:y,handleOrderUpdate:p,handleMachineUpdate:R,handleNotification:C},window.WebSocketService.on("connected",w),window.WebSocketService.on("authenticated",w),window.WebSocketService.on("disconnected",y),window.WebSocketService.on("order_update",p),window.WebSocketService.on("machine_update",R),window.WebSocketService.on("notification",C),window.WebSocketService.getStatus().isConnected&&w(),()=>{const M=u.current;window.WebSocketService.off("connected",M.handleConnected),window.WebSocketService.off("authenticated",M.handleConnected),window.WebSocketService.off("disconnected",M.handleDisconnected),window.WebSocketService.off("order_update",M.handleOrderUpdate),window.WebSocketService.off("machine_update",M.handleMachineUpdate),window.WebSocketService.off("notification",M.handleNotification)}},[]);const v=w=>{o(y=>[w,...y.slice(0,4)])},j=w=>{o(y=>y.filter(p=>p.id!==w))},k=()=>{o([])};return i.length===0?null:a.jsxs("div",{className:"fixed top-4 right-4 z-50 w-96 max-w-sm",children:[a.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Live Updates"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${f?"bg-green-400":"bg-gray-400"}`}),a.jsx("button",{onClick:k,className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear All"})]})]}),a.jsx("div",{className:"space-y-3 max-h-screen overflow-y-auto",children:i.map(w=>a.jsx(kg,{notification:w,onClose:()=>j(w.id)},w.id))})]})},Og=({maxItems:i=10})=>{const[o,f]=x.useState([]),[d,u]=x.useState(!1),v=x.useRef({});return x.useEffect(()=>{if(!window.WebSocketService)return;const j=()=>{u(!0)},k=()=>{u(!1)},w=p=>{const{type:R,data:C,timestamp:L}=p;let M={id:`${R}_${Date.now()}`,type:R,timestamp:L,icon:"activity",color:"text-blue-600",data:C};switch(R){case"order_started":M.message=`${C.operator} started production of ${C.order.order_number}`,M.icon="activity",M.color="text-blue-600";break;case"order_completed":M.message=`${C.completed_by} completed ${C.order.order_number} (${C.efficiency.toFixed(1)}% efficiency)`,M.icon="check",M.color="text-green-600";break;case"order_stopped":M.message=`${C.stopped_by} stopped ${C.order.order_number} - ${C.reason}`,M.icon="x",M.color="text-red-600";break;case"order_resumed":M.message=`${C.resumed_by} resumed ${C.order.order_number}`,M.icon="activity",M.color="text-yellow-600";break;case"machine_status_changed":M.message=`Machine status changed to ${C.status}`,M.icon="settings",M.color="text-purple-600";break;default:M.message="Unknown activity"}f(Y=>[M,...Y.slice(0,i-1)])};return v.current={handleConnected:j,handleDisconnected:k,handleActivity:w},window.WebSocketService.on("connected",j),window.WebSocketService.on("authenticated",j),window.WebSocketService.on("disconnected",k),window.WebSocketService.on("order_update",w),window.WebSocketService.on("machine_update",w),window.WebSocketService.getStatus().isConnected&&j(),()=>{const p=v.current;window.WebSocketService.off("connected",p.handleConnected),window.WebSocketService.off("authenticated",p.handleConnected),window.WebSocketService.off("disconnected",p.handleDisconnected),window.WebSocketService.off("order_update",p.handleActivity),window.WebSocketService.off("machine_update",p.handleActivity)}},[i]),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),a.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-400":"bg-gray-400"}`,title:d?"Live updates active":"No live connection"})]}),o.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activity"}):a.jsx("div",{className:"space-y-3",children:o.map(j=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(ra,{icon:j.icon,size:16,className:`mt-0.5 ${j.color}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-gray-900",children:j.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(j.timestamp).toLocaleTimeString()})]})]},j.id))})]})};class bf extends x.Component{constructor(o){super(o),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(o){return{hasError:!0}}componentDidCatch(o,f){this.setState({error:o,errorInfo:f}),console.error("Error caught by ErrorBoundary:",o,f)}getErrorMessage=o=>{const f={NETWORK_ERROR:{title:"Connection Problem",message:"Check your network connection and try again.",actions:["retry","work_offline"],severity:"warning"},MACHINE_OFFLINE:{title:"Machine Communication Lost",message:"Unable to communicate with selected machine.",actions:["check_machine","contact_maintenance"],severity:"critical"},DATA_SYNC_FAILED:{title:"Data Sync Failed",message:"Your changes may not be saved. Try again.",actions:["retry","save_locally"],severity:"warning"},SESSION_EXPIRED:{title:"Session Expired",message:"Please log in again to continue.",actions:["login"],severity:"warning"}},d=o?.code||(o?.message?.includes("fetch")?"NETWORK_ERROR":o?.message?.includes("session")?"SESSION_EXPIRED":"UNKNOWN");return f[d]||{title:"System Error",message:"An unexpected error occurred. Please try refreshing the page.",actions:["retry","contact_support"],severity:"critical"}};handleErrorAction=o=>{switch(o){case"retry":this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload();break;case"work_offline":this.setState({hasError:!1,error:null,errorInfo:null});break;case"check_machine":window.history.pushState({},"","/machines"),this.setState({hasError:!1,error:null,errorInfo:null});break;case"contact_maintenance":alert("Please contact maintenance team at ext. 1234");break;case"save_locally":console.log("Attempting to save data locally...");break;case"contact_support":alert("Please contact IT support at ext. 5678");break;case"login":localStorage.removeItem("token"),window.location.reload();break;default:console.log("Unknown action:",o)}};render(){if(this.state.hasError){const o=this.getErrorMessage(this.state.error);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md w-full space-y-8",children:a.jsx("div",{className:`p-6 rounded-lg border-l-4 ${o.severity==="critical"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ra,{icon:"x",size:24,className:`mr-3 mt-1 ${o.severity==="critical"?"text-red-600":"text-yellow-600"}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`font-bold text-lg ${o.severity==="critical"?"text-red-800":"text-yellow-800"}`,children:o.title}),a.jsx("p",{className:`mt-2 ${o.severity==="critical"?"text-red-700":"text-yellow-700"}`,children:o.message}),a.jsx("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row",children:o.actions.map(f=>a.jsx("button",{className:`flex-1 px-4 py-3 rounded text-sm font-medium min-h-[44px] touch-manipulation ${o.severity==="critical"?"bg-red-600 text-white hover:bg-red-700":"bg-yellow-600 text-white hover:bg-yellow-700"}`,onClick:()=>this.handleErrorAction(f),children:f.replace("_"," ").toUpperCase()},f))}),a.jsxs("details",{className:"mt-4",children:[a.jsx("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"Technical Details"}),a.jsxs("div",{className:"mt-2 p-3 bg-gray-100 rounded text-xs font-mono text-gray-700 overflow-auto max-h-32",children:[this.state.error&&this.state.error.toString(),a.jsx("br",{}),this.state.errorInfo.componentStack]})]})]})]})})})})}return this.props.children}}const Rg=({onSessionExpiring:i,onSessionExpired:o})=>{const[f,d]=x.useState(null),[u,v]=x.useState(!1),[j,k]=x.useState(!1),w=x.useCallback(async()=>{try{const R=await le.get("/auth/session-status"),C=R.timeRemaining||R.data?.timeRemaining;C!==void 0&&(d(C),C<3e5&&C>0?(v(!0),i?.(C)):C<=0?(v(!1),o?.()):v(!1))}catch(R){console.error("Session check failed:",R),R.response?.status===401&&o?.()}},[i,o]),y=async()=>{k(!0);try{await le.post("/auth/extend-session"),v(!1),d(null),console.log("Session extended successfully")}catch(R){console.error("Failed to extend session:",R),R.response?.status===401&&o?.()}finally{k(!1)}};if(x.useEffect(()=>{const R=setInterval(w,6e4);return w(),()=>clearInterval(R)},[w]),!u)return null;const p=Math.ceil(f/6e4);return a.jsx("div",{className:"fixed top-4 right-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg z-50 max-w-sm w-full",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ra,{icon:"clock",size:20,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-yellow-800",children:"Session Expiring"}),a.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["Your session will expire in ",p," minute",p!==1?"s":"","."]}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsx("button",{onClick:y,disabled:j,className:"flex-1 bg-yellow-600 text-white px-3 py-2 rounded text-sm font-medium hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px] touch-manipulation flex items-center justify-center",children:j?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Extending..."]}):"Extend Session"}),a.jsx("button",{onClick:()=>v(!1),className:"px-3 py-2 text-yellow-700 hover:text-yellow-800 text-sm font-medium min-h-[44px] min-w-[44px] flex items-center justify-center",children:a.jsx(ra,{icon:"x",size:16})})]})]})]})})},zg=()=>{const[i,o]=x.useState("active"),f=x.useCallback(u=>{o("expiring"),console.log(`Session expiring in ${Math.ceil(u/6e4)} minutes`)},[]),d=x.useCallback(()=>{o("expired"),console.log("Session expired, redirecting to login..."),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"},[]);return{sessionStatus:i,handleSessionExpiring:f,handleSessionExpired:d}};function oo(){const[i,o]=x.useState("disconnected"),[f,d]=x.useState(!1),[u,v]=x.useState(!1),[j,k]=x.useState({});x.useEffect(()=>{(()=>{const te=lt.getConnectionStatus();o(te.state),d(te.isConnected),v(te.isAuthenticated),k(lt.getMetrics())})();const Y=setInterval(()=>{k(lt.getMetrics())},5e3),q=te=>{o(te.state)},E=()=>{d(!0),o("connected")},P=()=>{d(!1),v(!1),o("disconnected")},I=()=>{v(!0)};return lt.on("connectionStateChanged",q),lt.on("connected",E),lt.on("disconnected",P),lt.on("authenticated",I),()=>{clearInterval(Y),lt.off("connectionStateChanged",q),lt.off("connected",E),lt.off("disconnected",P),lt.off("authenticated",I)}},[]);const w=x.useCallback(async(M=null)=>{try{await lt.connect(M)}catch(Y){console.error("Connection failed:",Y)}},[]),y=x.useCallback(()=>{lt.disconnect()},[]),p=x.useCallback((M,Y,q="normal")=>lt.send(M,Y,q),[]),R=x.useCallback((M,Y=null)=>{lt.subscribe(M,Y)},[]),C=x.useCallback(M=>{lt.joinRoom(M)},[]),L=x.useCallback(M=>{lt.leaveRoom(M)},[]);return{connectionStatus:i,isConnected:f,isAuthenticated:u,metrics:j,connect:w,disconnect:y,send:p,subscribe:R,joinRoom:C,leaveRoom:L}}function Fe(i,o,f=[]){const d=x.useRef(o);x.useEffect(()=>{d.current=o},f),x.useEffect(()=>{const u=v=>{d.current(v)};return lt.on(i,u),()=>{lt.off(i,u)}},[i])}function uo(){const[i,o]=x.useState([]),[f,d]=x.useState(null);return Fe("order_update",u=>{d({type:u.type,order:u.data.order,timestamp:u.timestamp}),o(v=>{const j=u.data.order?.id;if(!j)return v;const k=v.filter(w=>w.id!==j);return(u.type!=="order_completed"||!u.data.order.archived)&&k.push(u.data.order),k.sort((w,y)=>new Date(y.created_at)-new Date(w.created_at))})},[]),{orders:i,lastUpdate:f,setOrders:o}}function mo(){const[i,o]=x.useState([]),[f,d]=x.useState(null);return Fe("machine_update",u=>{d({type:u.type,machine:u.data,timestamp:u.timestamp}),o(v=>{const j=u.data.machine_id;return j?v.map(k=>k.id===j?{...k,status:u.data.status,order_id:u.data.order_id}:k):v})},[]),{machines:i,lastUpdate:f,setMachines:o}}function xn(){const[i,o]=x.useState([]);Fe("notification",u=>{const v={id:Date.now(),message:u.data.message||u.data,type:u.data.type||"info",timestamp:u.timestamp,priority:u.priority||"normal"};o(j=>[v,...j.slice(0,49)])},[]),Fe("alert",u=>{const v={id:Date.now(),message:u.data.message||u.data,type:"alert",timestamp:u.timestamp,priority:u.priority||"high"};o(j=>[v,...j.slice(0,49)])},[]);const f=x.useCallback(u=>{o(v=>v.filter(j=>j.id!==u))},[]),d=x.useCallback(()=>{o([])},[]);return{notifications:i,clearNotification:f,clearAllNotifications:d,hasUnread:i.some(u=>!u.read)}}function fo(){const{connectionStatus:i,isConnected:o,isAuthenticated:f,metrics:d}=oo(),[u,v]=x.useState(!1);Fe("connectionStateChanged",y=>{v(y.state==="reconnecting")},[]);const j=()=>{switch(i){case"connected":return f?"green":"yellow";case"connecting":return"blue";case"reconnecting":return"orange";case"error":return"red";default:return"gray"}},k=()=>{switch(i){case"connected":return f?"Connected":"Authenticating";case"connecting":return"Connecting...";case"reconnecting":return"Reconnecting...";case"error":return"Connection Error";default:return"Disconnected"}},w=()=>{switch(i){case"connected":return f?"🟢":"🟡";case"connecting":return"🔵";case"reconnecting":return"🟠";case"error":return"🔴";default:return"⚫"}};return{status:i,isConnected:o,isAuthenticated:f,showReconnecting:u,color:j(),text:k(),icon:w(),metrics:d}}function ps(){const{connect:i,isConnected:o}=oo();x.useEffect(()=>{const f=async()=>{try{const u=localStorage.getItem("token");if(!u){console.log("ℹ️ No token found, skipping WebSocket connection");return}const v=await fetch("/api/auth/verify-session",{method:"GET",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},credentials:"include"});v.ok&&!o?(console.log("🔐 User authenticated, connecting WebSocket..."),await i()):v.status===401&&(console.log("🚫 Token expired or invalid, removing from localStorage"),localStorage.removeItem("token"))}catch{console.log("ℹ️ Not authenticated, skipping WebSocket connection"),localStorage.getItem("token")&&(console.log("🧹 Removing potentially invalid token"),localStorage.removeItem("token"))}};localStorage.getItem("token")&&f()},[i,o])}function Ug(){const[i,o]=x.useState(!1),[f,d]=x.useState({}),u=fo(),{connect:v,disconnect:j,send:k}=oo();return x.useEffect(()=>{const y=()=>{const R={timestamp:new Date().toISOString(),location:window.location.href,userAgent:navigator.userAgent.substring(0,100)+"...",webSocketSupport:typeof WebSocket<"u",enhancedServiceExists:typeof window.EnhancedWebSocketService<"u",enhancedServiceStatus:window.EnhancedWebSocketService?window.EnhancedWebSocketService.getConnectionStatus():null,cookies:document.cookie?"Present":"None",protocols:window.location.protocol};d(R)};y();const p=setInterval(y,2e3);return()=>clearInterval(p)},[]),i||window.location.hostname==="localhost"||window.location.search.includes("debug=websocket")||window.localStorage.getItem("websocket-debug")==="true"?a.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-4 max-w-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-bold text-sm",children:"WebSocket Debug"}),a.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:"×"})]}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Status:"}),a.jsx("span",{className:`px-2 py-1 rounded text-white ${u.isConnected?"bg-green-500":"bg-red-500"}`,children:u.text})]}),a.jsxs("div",{className:"border-t pt-2",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"WebSocket Support:"})," ",f.webSocketSupport?"✅":"❌"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Enhanced Service:"})," ",f.enhancedServiceExists?"✅":"❌"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Protocol:"})," ",f.protocols]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Cookies:"})," ",f.cookies]})]}),f.enhancedServiceStatus&&a.jsxs("div",{className:"border-t pt-2",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Connection ID:"})," ",f.enhancedServiceStatus.connectionId||"None"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Subscriptions:"})," ",f.enhancedServiceStatus.subscriptions?.length||0]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Rooms:"})," ",f.enhancedServiceStatus.rooms?.length||0]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Queued Messages:"})," ",f.enhancedServiceStatus.queuedMessages||0]})]}),a.jsxs("div",{className:"border-t pt-2 flex gap-2",children:[a.jsx("button",{onClick:()=>v(),className:"px-2 py-1 bg-blue-500 text-white rounded text-xs",disabled:u.isConnected,children:"Connect"}),a.jsx("button",{onClick:()=>j(),className:"px-2 py-1 bg-red-500 text-white rounded text-xs",disabled:!u.isConnected,children:"Disconnect"}),a.jsx("button",{onClick:()=>k("ping"),className:"px-2 py-1 bg-green-500 text-white rounded text-xs",disabled:!u.isConnected,children:"Ping"})]}),a.jsx("div",{className:"border-t pt-2",children:a.jsx("button",{onClick:()=>{console.log("🐛 WebSocket Debug Info:",f),console.log("🐛 Enhanced Service:",window.EnhancedWebSocketService),console.log("🐛 Connection Status:",u)},className:"px-2 py-1 bg-gray-500 text-white rounded text-xs w-full",children:"Log Debug Info"})})]})]}):a.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:a.jsx("button",{onClick:()=>o(!0),className:"bg-gray-800 text-white px-3 py-1 rounded-full text-xs opacity-50 hover:opacity-100",title:"Show WebSocket Debug",children:"WS"})})}function qg(){const[i,o]=x.useState([]);xn(),x.useEffect(()=>{const j=setTimeout(()=>{o(k=>k.slice(0,-1))},5e3);return()=>clearTimeout(j)},[i.length]),Fe("user_joined",j=>{f(`${j.data.username} joined the system`,"info")},[]),Fe("user_left",j=>{f(`${j.data.username} left the system`,"info")},[]),Fe("system_alert",j=>{f(j.data.message,"error")},[]),Fe("system_maintenance",j=>{f(`System maintenance: ${j.data.message}`,"warning")},[]);const f=(j,k="info")=>{const w={id:Date.now(),message:j,type:k,timestamp:new Date};o(y=>[w,...y.slice(0,4)])},d=j=>{o(k=>k.filter(w=>w.id!==j))},u=j=>{switch(j){case"success":return a.jsx(tt,{className:"w-5 h-5 text-green-500"});case"warning":return a.jsx(Et,{className:"w-5 h-5 text-yellow-500"});case"error":return a.jsx(Et,{className:"w-5 h-5 text-red-500"});default:return a.jsx(B0,{className:"w-5 h-5 text-blue-500"})}},v=j=>{switch(j){case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"error":return"bg-red-50 border-red-200 text-red-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return i.length===0?null:a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:i.map(j=>a.jsxs("div",{className:`flex items-center gap-3 p-4 border rounded-lg shadow-lg max-w-sm animate-slide-in ${v(j.type)}`,children:[u(j.type),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:j.message}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:j.timestamp.toLocaleTimeString()})]}),a.jsx("button",{onClick:()=>d(j.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:a.jsx(rl,{className:"w-4 h-4"})})]},j.id))})}var Hg=vf();const Lg=no(Hg),Pt=({children:i,onClose:o,title:f})=>Lg.createPortal(a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300",onClick:o,children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all duration-300",onClick:d=>d.stopPropagation(),children:[f&&a.jsx("h2",{className:"text-xl font-bold mb-4",children:f}),i]})}),document.getElementById("portal-root")),Se=({children:i,className:o="",...f})=>a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${o}`,...f,children:i}),be=({children:i,variant:o="default",size:f="md",className:d="",disabled:u=!1,...v})=>{const j="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",k={default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500"},w={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return a.jsx("button",{className:`${j} ${k[o]} ${w[f]} ${d}`,disabled:u,...v,children:i})},Xe=({children:i,variant:o="default",size:f="md",className:d="",...u})=>{const v="inline-flex items-center font-medium rounded-full",j={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"},k={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"};return a.jsx("span",{className:`${v} ${j[o]} ${k[f]} ${d}`,...u,children:i})};function Bg(){const[i,o]=x.useState(!1),{status:f,isConnected:d,isAuthenticated:u,showReconnecting:v,color:j,text:k,icon:w,metrics:y}=fo(),p=()=>{switch(j){case"green":return"bg-green-500";case"yellow":return"bg-yellow-500";case"blue":return"bg-blue-500";case"orange":return"bg-orange-500";case"red":return"bg-red-500";default:return"bg-gray-500"}},R=()=>{switch(j){case"green":return"text-green-700";case"yellow":return"text-yellow-700";case"blue":return"text-blue-700";case"orange":return"text-orange-700";case"red":return"text-red-700";default:return"text-gray-700"}},C=L=>{if(!L)return"0s";const M=Math.floor(L/1e3),Y=Math.floor(M/60),q=Math.floor(Y/60);return q>0?`${q}h ${Y%60}m`:Y>0?`${Y}m ${M%60}s`:`${M}s`};return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 px-3 py-2 rounded-md transition-colors",onClick:()=>o(!i),title:"WebSocket Connection Status",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:`w-3 h-3 rounded-full ${p()}`,children:v&&a.jsx("div",{className:`absolute inset-0 rounded-full ${p()} opacity-75 animate-ping`})})}),a.jsx("span",{className:`text-sm font-medium ${R()}`,children:k}),y.messagesReceived>0&&a.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:y.messagesReceived}),a.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&a.jsx("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"WebSocket Status"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-2xl",children:w}),a.jsx("span",{className:`font-medium ${R()}`,children:k})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Status:"}),a.jsx("span",{className:`ml-2 font-medium ${R()}`,children:f})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Authenticated:"}),a.jsx("span",{className:`ml-2 font-medium ${u?"text-green-600":"text-red-600"}`,children:u?"Yes":"No"})]})]}),d&&y&&a.jsxs("div",{className:"border-t pt-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Connection Metrics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{children:"Messages Received:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:y.messagesReceived||0})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Messages Sent:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:y.messagesSent||0})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Reconnections:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:y.reconnections||0})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Uptime:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:C(y.uptime)})]}),y.lastPing&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{children:"Last Ping:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:new Date(y.lastPing).toLocaleTimeString()})]})]})]}),a.jsxs("div",{className:"border-t pt-3 flex space-x-2",children:[a.jsx("button",{onClick:()=>{d?window.EnhancedWebSocketService?.disconnect():window.EnhancedWebSocketService?.connect()},className:`px-3 py-1 text-xs font-medium rounded-md ${d?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:d?"Disconnect":"Connect"}),f==="error"&&a.jsx("button",{onClick:()=>window.EnhancedWebSocketService?.connect(),className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md",children:"Retry"}),a.jsx("button",{onClick:()=>{const L=window.EnhancedWebSocketService?.getMetrics();console.log("WebSocket Metrics:",L),console.log("WebSocket Status:",window.EnhancedWebSocketService?.getConnectionStatus())},className:"px-3 py-1 text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-md",children:"Debug"})]})]})]})})]})}function gn(){const{icon:i,text:o,color:f}=fo(),d=()=>{switch(f){case"green":return"text-green-600";case"yellow":return"text-yellow-600";case"blue":return"text-blue-600";case"orange":return"text-orange-600";case"red":return"text-red-600";default:return"text-gray-600"}};return a.jsxs("div",{className:"flex items-center space-x-1",title:`WebSocket: ${o}`,children:[a.jsx("span",{className:"text-sm",children:i}),a.jsx("span",{className:`text-xs font-medium ${d()}`,children:"WS"})]})}function Af(){const[i,o]=x.useState({orders:{total:0,pending:0,in_progress:0,completed:0,paused:0},machines:{total:0,available:0,in_use:0,maintenance:0,offline:0},production:{efficiency:0,output:0,quality_score:0,on_time_delivery:0},alerts:{critical:0,warning:0,info:0}}),[f,d]=x.useState([]),[u,v]=x.useState([]),[j,k]=x.useState(!0),[w,y]=x.useState(!1),[p,R]=x.useState(null),[C,L]=x.useState("today"),[M,Y]=x.useState(!1),q=x.useRef(null);ps();const{lastUpdate:E}=uo(),{lastUpdate:P}=mo();xn(),x.useEffect(()=>(te(),q.current=setInterval(()=>{te(!0)},3e4),()=>{q.current&&clearInterval(q.current)}),[C]),x.useEffect(()=>{E&&(console.log("Dashboard received order update:",E),te(!0))},[E]),x.useEffect(()=>{P&&(console.log("Dashboard received machine update:",P),te(!0))},[P]),x.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["dashboard","orders","machines","production","alerts"])},[]);const I=(re,xe="success")=>{R({message:re,type:xe}),setTimeout(()=>R(null),3e3)},te=async(re=!1)=>{re?y(!0):k(!0);try{const[xe,Z,G]=await Promise.all([le.getOrders().catch(()=>[]),le.getMachines().catch(()=>[]),le.get("/users").catch(()=>[])]),ie={total:xe.length,pending:xe.filter(h=>h.status==="pending").length,in_progress:xe.filter(h=>h.status==="in_progress").length,completed:xe.filter(h=>h.status==="completed").length,paused:xe.filter(h=>h.status==="paused").length},ce={total:Z.length,available:Z.filter(h=>h.status==="available").length,in_use:Z.filter(h=>h.status==="in_use").length,maintenance:Z.filter(h=>h.status==="maintenance").length,offline:Z.filter(h=>h.status==="offline").length},ve=xe.reduce((h,B)=>h+(parseInt(B.quantity)||0),0),O=xe.filter(h=>h.status==="completed").reduce((h,B)=>h+(parseInt(B.actual_quantity||B.quantity)||0),0),b=ce.total>0?Math.round(ce.in_use/ce.total*100):0,g=ve>0?Math.round(O/ve*100):0,T=ie.total>0?Math.round(ie.completed/ie.total*100):0,V=[];ce.offline>0&&V.push({type:"critical",message:`${ce.offline} machine(s) offline`,time:new Date}),ce.maintenance>0&&V.push({type:"warning",message:`${ce.maintenance} machine(s) in maintenance`,time:new Date}),ie.paused>0&&V.push({type:"warning",message:`${ie.paused} order(s) paused`,time:new Date}),b<60&&V.push({type:"warning",message:`Low machine utilization: ${b}%`,time:new Date});const K={critical:V.filter(h=>h.type==="critical").length,warning:V.filter(h=>h.type==="warning").length,info:V.filter(h=>h.type==="info").length};o({orders:ie,machines:ce,production:{efficiency:b,output:O,quality_score:g,on_time_delivery:T},alerts:K}),d(xe.slice(0,6)),v(V.slice(0,5)),re&&I("Dashboard updated","success")}catch(xe){console.error("Failed to load dashboard data:",xe),I("Failed to load dashboard data","danger")}finally{k(!1),y(!1)}},X=[{label:"Create Order",icon:wa,action:()=>window.location.href="#/orders",color:"blue"},{label:"View Analytics",icon:Jt,action:()=>window.location.href="#/analytics",color:"purple"},{label:"Manage Machines",icon:Ut,action:()=>window.location.href="#/machines",color:"green"},{label:"Labor Planning",icon:Ve,action:()=>window.location.href="#/labor-planner",color:"orange"}],ue=x.useMemo(()=>u.filter(re=>re.type==="critical").slice(0,3),[u]);return j?a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx(Ke,{className:"w-8 h-8 animate-spin text-blue-600 mr-3"}),a.jsx("div",{className:"text-lg text-gray-600",children:"Loading dashboard..."})]}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[p&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${p.type==="success"?"bg-green-100 text-green-800 border border-green-200":p.type==="danger"?"bg-red-100 text-red-800 border border-red-200":p.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:p.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Production Dashboard"}),a.jsx(gn,{})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time overview of your manufacturing operations"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(il,{className:"w-4 h-4 text-gray-500"}),a.jsxs("select",{value:C,onChange:re=>L(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"})]})]}),a.jsxs(be,{onClick:()=>te(!0),disabled:w,variant:"outline",children:[a.jsx(Ke,{className:`w-4 h-4 mr-2 ${w?"animate-spin":""}`}),"Refresh"]}),a.jsxs(be,{onClick:()=>Y(!0),children:[a.jsx(wg,{className:"w-4 h-4 mr-2"}),"Quick Actions"]})]})]}),ue.length>0&&a.jsxs(Se,{className:"p-4 bg-red-50 border-l-4 border-red-500",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Et,{className:"w-5 h-5 text-red-600"}),a.jsx("h3",{className:"font-semibold text-red-900",children:"Critical Alerts"})]}),a.jsx("div",{className:"space-y-2",children:ue.map((re,xe)=>a.jsxs("div",{className:"flex items-center gap-3 text-sm text-red-800",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{children:re.message}),a.jsx("span",{className:"text-red-600 ml-auto",children:re.time.toLocaleTimeString()})]},xe))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(kr,{title:"Machine Efficiency",value:`${i.production.efficiency}%`,change:i.production.efficiency>=80?5:-3,icon:yt,color:"blue",target:"80%"}),a.jsx(kr,{title:"Quality Score",value:`${i.production.quality_score}%`,change:i.production.quality_score>=90?2:-1,icon:y0,color:"green",target:"90%"}),a.jsx(kr,{title:"On-Time Delivery",value:`${i.production.on_time_delivery}%`,change:i.production.on_time_delivery>=85?4:-2,icon:dn,color:"purple",target:"85%"}),a.jsx(kr,{title:"Daily Output",value:i.production.output.toLocaleString(),change:12,icon:Kt,color:"orange",target:"5000",unit:" units"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(Se,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Production Orders"}),a.jsxs(be,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/orders",children:[a.jsx(gs,{className:"w-4 h-4 mr-2"}),"View All"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.orders.in_progress}),a.jsx("div",{className:"text-sm text-blue-600",children:"In Progress"})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.orders.completed}),a.jsx("div",{className:"text-sm text-green-600",children:"Completed"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Pending:"}),a.jsx("span",{className:"font-medium",children:i.orders.pending})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Paused:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:i.orders.paused})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Total Orders:"}),a.jsx("span",{className:"font-medium",children:i.orders.total})]})]})]}),a.jsxs(Se,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Machine Status"}),a.jsxs(be,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/machines",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Manage"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Dr,{label:"In Use",count:i.machines.in_use,total:i.machines.total,color:"blue"}),a.jsx(Dr,{label:"Available",count:i.machines.available,total:i.machines.total,color:"green"}),a.jsx(Dr,{label:"Maintenance",count:i.machines.maintenance,total:i.machines.total,color:"yellow"}),a.jsx(Dr,{label:"Offline",count:i.machines.offline,total:i.machines.total,color:"red"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Utilization Rate"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[i.production.efficiency,"%"]}),a.jsx("div",{className:"text-xs text-gray-500",children:"of total capacity"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Se,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Orders"}),a.jsx(be,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/orders",children:"View All"})]}),f.length>0?a.jsx("div",{className:"space-y-3",children:f.map(re=>a.jsx(Qg,{order:re},re.id))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Kt,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{children:"No recent orders"})]})]}),a.jsxs(Se,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"System Alerts"}),a.jsx(Xe,{variant:"info",children:u.length})]}),u.length>0?a.jsx("div",{className:"space-y-3",children:u.map((re,xe)=>a.jsx($g,{alert:re},xe))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(tt,{className:"w-12 h-12 mx-auto mb-3 text-green-400"}),a.jsx("p",{children:"All systems running smoothly"})]})]}),a.jsx(Og,{maxItems:8})]}),M&&a.jsx(Pt,{title:"Quick Actions",onClose:()=>Y(!1),children:a.jsx("div",{className:"grid grid-cols-2 gap-4",children:X.map((re,xe)=>{const Z=re.icon;return a.jsxs("button",{onClick:()=>{re.action(),Y(!1)},className:`p-6 border-2 border-gray-200 rounded-lg hover:border-${re.color}-300 hover:bg-${re.color}-50 transition-all group`,children:[a.jsx(Z,{className:`w-8 h-8 text-${re.color}-600 mx-auto mb-3`}),a.jsx("div",{className:"text-sm font-medium text-gray-800",children:re.label})]},xe)})})})]})}const kr=({title:i,value:o,change:f,icon:d,color:u,target:v,unit:j=""})=>{const k={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",purple:"bg-purple-50 text-purple-600 border-purple-200",orange:"bg-orange-50 text-orange-600 border-orange-200",red:"bg-red-50 text-red-600 border-red-200"},w=f>=0;return a.jsxs(Se,{className:`p-6 border-l-4 ${k[u]}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg ${k[u]} flex items-center justify-center`,children:a.jsx(d,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:i}),a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[o,j]})]})]})}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[w?a.jsx(nl,{className:"w-4 h-4 text-green-500"}):a.jsx(so,{className:"w-4 h-4 text-red-500"}),a.jsxs("span",{className:w?"text-green-600":"text-red-600",children:[Math.abs(f),"%"]}),a.jsx("span",{className:"text-gray-500",children:"vs yesterday"})]}),v&&a.jsxs("span",{className:"text-gray-500",children:["Target: ",v]})]})]})},Dr=({label:i,count:o,total:f,color:d})=>{const u=f>0?o/f*100:0,v={blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500"};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-600",children:i}),a.jsxs("span",{className:"font-medium",children:[o,"/",f]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${v[d]}`,style:{width:`${u}%`}})})]})},Qg=({order:i})=>{const o=f=>{const u={pending:{variant:"default",icon:Ft},in_progress:{variant:"info",icon:Ka},completed:{variant:"success",icon:tt},paused:{variant:"warning",icon:hn}}[f]||{variant:"default",icon:Ft},v=u.icon;return a.jsxs(Xe,{variant:u.variant,children:[a.jsx(v,{className:"w-3 h-3 mr-1"}),f?f.replace("_"," ").toUpperCase():"PENDING"]})};return a.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg border border-gray-100 transition-all",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:i.order_number||`Order #${i.id}`}),a.jsx("p",{className:"text-sm text-gray-500",children:i.product_name||"Product"})]})}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[a.jsxs("span",{children:["Qty: ",i.quantity?.toLocaleString()||"N/A"]}),a.jsxs("span",{children:["Env: ",i.environment||"N/A"]}),i.due_date&&a.jsxs("span",{children:["Due: ",new Date(i.due_date).toLocaleDateString()]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:o(i.status)})]})},$g=({alert:i})=>{const o=d=>{switch(d){case"critical":return a.jsx(Et,{className:"w-4 h-4 text-red-500"});case"warning":return a.jsx(Ft,{className:"w-4 h-4 text-yellow-500"});default:return a.jsx(v0,{className:"w-4 h-4 text-blue-500"})}},f=d=>{switch(d){case"critical":return"border-l-red-500 bg-red-50";case"warning":return"border-l-yellow-500 bg-yellow-50";default:return"border-l-blue-500 bg-blue-50"}};return a.jsx("div",{className:`p-3 border-l-4 rounded-r-lg ${f(i.type)}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[o(i.type),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-800",children:i.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.time.toLocaleTimeString()})]})]})})},cl={name:"SAST",fullName:"South African Standard Time",offset:"+02:00",offsetMinutes:120,offsetHours:2,offsetMS:7200*1e3};function Pa(){return new Date(Date.now()+cl.offsetMS)}function ys(i){if(!i)return null;const o=typeof i=="string"?new Date(i):i;return isNaN(o.getTime())?null:new Date(o.getTime()+cl.offsetMS)}function Yg(i){if(!i)return null;const o=new Date(i);return isNaN(o.getTime())?null:new Date(o.getTime()-cl.offsetMS)}function Gg(i,o={}){if(!i)return"N/A";const d={...{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},...o},u=ys(i);return u?u.toLocaleString("en-ZA",d):"N/A"}function fn(i){if(!i)return"";const o=ys(i);return o?o.toISOString().split("T")[0]:""}function Xg(i){if(!i)return"N/A";const o=ys(i);return o?o.toLocaleString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1}):"N/A"}function Vg(i=null){const o=i?ys(i):Pa();if(!o)return"";const f=o.getFullYear(),d=String(o.getMonth()+1).padStart(2,"0"),u=String(o.getDate()).padStart(2,"0"),v=String(o.getHours()).padStart(2,"0"),j=String(o.getMinutes()).padStart(2,"0");return`${f}-${d}-${u}T${v}:${j}`}function Zg(i=null){return fn(i||Pa())}function Wg(){return Pa().toISOString()}function Kg(i=null){const o=i||new Date;return new Date(o.getTime()+cl.offsetMS).toISOString()}function Jg(i,o=null){if(!i)return 0;const f=new Date(i),d=o?new Date(o):Pa();return Math.round((d.getTime()-f.getTime())/(1e3*60))}function Pg(){return Date.now()+cl.offsetMS}function Fg(i){if(!i)return!1;const o=fn(i),f=fn(Pa());return o===f}function Ig(i=null){const o=i?new Date(i):Pa(),f=ys(o),d=new Date(f);d.setHours(0,0,0,0);const u=new Date(f);return u.setHours(23,59,59,999),{startOfDay:d.toISOString(),endOfDay:u.toISOString()}}function ep(i){if(i<0)return"0 seconds";const o=Math.floor(i/1e3),f=Math.floor(o/60),d=Math.floor(f/60),u=Math.floor(d/24);return u>0?`${u} day${u!==1?"s":""}, ${d%24} hour${d%24!==1?"s":""}`:d>0?`${d} hour${d!==1?"s":""}, ${f%60} minute${f%60!==1?"s":""}`:f>0?`${f} minute${f!==1?"s":""}, ${o%60} second${o%60!==1?"s":""}`:`${o} second${o!==1?"s":""}`}function tp(i){const o=ys(i),d=Pa().getTime()-o.getTime(),u=Math.floor(d/(1e3*60)),v=Math.floor(u/60),j=Math.floor(v/24);return Math.abs(u)<1?"just now":Math.abs(u)<60?u>0?`${u} minutes ago`:`in ${Math.abs(u)} minutes`:Math.abs(v)<24?v>0?`${v} hours ago`:`in ${Math.abs(v)} hours`:Math.abs(j)<7?j>0?`${j} days ago`:`in ${Math.abs(j)} days`:fn(i)}const Na={TIMEZONE_CONFIG:cl,getCurrentSASTTime:Pa,toSAST:ys,convertSASTToUTC:Yg,formatSASTDateTime:Gg,formatSASTDate:fn,formatSASTTime:Xg,getSASTDateTimeLocal:Vg,getSASTDateOnly:Zg,getCurrentSASTISOString:Wg,toSASTDatabaseString:Kg,calculateDurationMinutes:Jg,getSASTTimestamp:Pg,isSASTToday:Fg,getSASTDayRange:Ig,formatDuration:ep,getSASTRelativeTime:tp},ap=i=>{if(!i)return"00:00:00";const o=Na.toSAST(i).getTime(),f=Na.getSASTTimestamp(),d=Math.max(0,f-o),u=Math.floor(d/36e5).toString().padStart(2,"0"),v=Math.floor(d%36e5/6e4).toString().padStart(2,"0"),j=Math.floor(d%6e4/1e3).toString().padStart(2,"0");return`${u}:${v}:${j}`},Cf=i=>{if(!i.start_time||i.status!=="in_use")return 0;const o=new Date(i.start_time).getTime(),d=(Date.now()-o)/36e5*(i.production_rate||60),u=i.actual_quantity||0;return d>0?Math.min(100,Math.round(u/d*100)):0},sp=({machine:i,onClick:o})=>{const[f,d]=x.useState(0),[u,v]=x.useState(!1);x.useEffect(()=>{v(!0);const R=setTimeout(()=>v(!1),2e3);return()=>clearTimeout(R)},[i.status,i.order_number]),x.useEffect(()=>{if(i.status==="in_use"){const R=setInterval(()=>d(C=>C+1),1e3);return()=>clearInterval(R)}},[i.status]);const k={available:{border:"border-green-500",text:"text-green-600",bg:"bg-green-50",icon:a.jsx(yt,{className:"w-4 h-4"})},in_use:{border:"border-blue-500",text:"text-blue-600",bg:"bg-blue-50",icon:a.jsx(Ka,{className:"w-4 h-4"})},maintenance:{border:"border-yellow-500",text:"text-yellow-600",bg:"bg-yellow-50",icon:a.jsx(Et,{className:"w-4 h-4"})},offline:{border:"border-red-500",text:"text-red-600",bg:"bg-red-50",icon:a.jsx(hn,{className:"w-4 h-4"})}}[i.status]||{border:"border-gray-300",text:"text-gray-600",bg:"bg-gray-50",icon:a.jsx(yt,{className:"w-4 h-4"})},w=Cf(i),y=i.status==="in_use",p=i.order_number;return a.jsx("div",{className:`rounded-xl shadow-sm border-l-4 ${k.border} ${k.bg} hover:shadow-lg transition-all duration-300 ${p?"cursor-pointer":"cursor-default"} transform hover:scale-105 ${p?"relative":""}`,onClick:()=>o&&o(i),children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-800 text-sm truncate",children:i.name}),a.jsx("p",{className:"text-xs text-gray-500",children:i.type})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[u&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-ping"}),y&&w>0&&a.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[w,"%"]}),a.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${k.bg.replace("50","100")} ${k.text}`,children:[k.icon,i.status.replace("_"," ").toUpperCase()]})]})]}),a.jsx("div",{className:"space-y-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg p-2 relative",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 truncate",children:i.order_number}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:i.product_name}),i.order_status==="stopped"&&a.jsx("p",{className:"text-xs text-red-600 font-medium mt-1",children:"STOPPED"})]}),a.jsx(gs,{className:"w-4 h-4 text-blue-500 flex-shrink-0 ml-2",title:"Click to view order details"})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[a.jsx(Ft,{className:"w-3 h-3"}),a.jsx("span",{className:"text-lg font-mono",children:ap(i.start_time)})]}),i.operator&&a.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[a.jsx(Ve,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs truncate max-w-20",children:i.operator})]})]}),w>0&&a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${w>=90?"bg-green-500":w>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(w,100)}%`}})})]}):a.jsx("div",{className:"flex items-center justify-center h-16 text-center",children:a.jsxs("div",{className:"text-gray-400",children:[k.icon,a.jsx("p",{className:"text-xs mt-1",children:i.status.replace("_"," ").toUpperCase()})]})})})]})})},lp=({machines:i,activeOrders:o,todayStats:f,efficiency:d})=>{const u=x.useMemo(()=>{const v=i.length,j=i.filter(R=>R.status==="in_use").length,k=i.filter(R=>R.status==="available").length,w=i.filter(R=>R.status==="maintenance").length,y=i.filter(R=>R.status==="offline").length,p=d||(j>0?Math.round(i.filter(R=>R.status==="in_use").reduce((R,C)=>R+Cf(C),0)/j):0);return{total:v,running:j,available:k,maintenance:w,offline:y,avgEfficiency:p,activeOrders:o.length,totalOrders:f.total_orders||0,completedOrders:f.completed_orders||0}},[i,o,f,d]);return a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yt,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:u.total})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ka,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Running"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.running})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yt,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Available"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.available})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Et,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Maintenance"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:u.maintenance})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hn,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Offline"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.offline})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nl,{className:"w-5 h-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Avg Efficiency"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[u.avgEfficiency,"%"]})]})]})})]})},np=({isOpen:i,onClose:o,orderId:f,orderNumber:d})=>{const[u,v]=x.useState(null),[j,k]=x.useState(!1),[w,y]=x.useState(""),[p,R]=x.useState(0),C=x.useCallback(async()=>{if(!(!f||!i)){k(!0),y("");try{console.log("Fetching order details for ID:",f);const Y=await le.get("/orders");console.log("Orders response:",Y);const E=(Y.data||Y||[]).find(I=>I.id==f);if(!E)throw new Error(`Order with ID ${f} not found`);let P=[];try{const I=await le.get(`/reports/downtime?order_id=${f}`);if(P=I.records||I.data?.records||[],console.log("Downtime response for order",f,":",I),!Array.isArray(P)||P.length===0){console.log("No stops found for specific order, trying all stops...");const te=await le.get("/reports/downtime"),X=te.records||te.data?.records||[];console.log("All stops:",X),P=Array.isArray(X)?X.filter(ue=>ue.order_id==f):[]}}catch(I){console.log("Downtime endpoint error:",I),P=[]}v({order:E,stops:Array.isArray(P)?P:[]})}catch(Y){console.error("Failed to fetch order details:",Y),y(Y.message||"Failed to load order details")}finally{k(!1)}}},[f,i]);x.useEffect(()=>{C()},[C]),x.useEffect(()=>{if(i&&u?.stops?.some(Y=>!Y.end_time)){const Y=setInterval(()=>R(q=>q+1),1e3);return()=>clearInterval(Y)}},[i,u?.stops]);const L=x.useCallback(Y=>!Y||!Array.isArray(Y)||Y.length===0?0:Y.reduce((q,E)=>{if(E.start_time){const P=new Date(E.start_time).getTime();let I;return E.end_time?I=new Date(E.end_time).getTime():I=Date.now(),q+(I-P)}return q},0),[p]),M=x.useCallback(Y=>{if(!Y||Y===0)return"0m";const q=Math.floor(Y/6e4),E=Math.floor(q/60);return E>0?`${E}h ${q%60}m`:`${q}m`},[]);return i?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm transition-opacity",onClick:o}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:d}),u&&a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${u.order.status==="stopped"?"bg-red-500 text-white":u.order.status==="in_progress"?"bg-blue-500 text-white":u.order.status==="completed"?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:u.order.status.replace("_"," ").toUpperCase()})]}),a.jsx("button",{onClick:o,className:"text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white/20 rounded-full p-1.5 hover:bg-white/10 transition-colors",children:a.jsx(rl,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6",children:[j&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(Ke,{className:"w-5 h-5 animate-spin text-gray-400 mr-2"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"Loading..."})]}),w&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Et,{className:"w-4 h-4 text-red-500 mr-2"}),a.jsx("span",{className:"text-red-700 text-sm",children:w})]})}),u&&!j&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:u.order.start_time?Na.formatSASTTime(u.order.start_time):"--:--"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Started"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:u.order.quantity?.toLocaleString()||"0"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Target Qty"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:(u.order.actual_quantity||0).toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Produced"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs("div",{className:"relative w-8 h-8",children:[a.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-green-500 rounded-full",style:{clipPath:`inset(0 ${100-Math.round((u.order.actual_quantity||0)/u.order.quantity*100)}% 0 0)`}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-xs font-bold text-gray-700",children:[Math.round((u.order.actual_quantity||0)/u.order.quantity*100),"%"]})})]})}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Complete"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-100 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(Et,{className:"w-4 h-4 text-orange-500"}),"Downtime Analysis"]}),u.order.status==="stopped"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600 bg-red-100 px-2 py-1 rounded-full",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Active Stop"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:u.stops.length}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Stops"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:M(L(u.stops))}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Time"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-500",children:u.stops.length>0?M(L(u.stops)/u.stops.length):"0m"}),a.jsx("div",{className:"text-xs text-gray-600",children:"Avg Duration"})]})]})]}),!u.stops||!Array.isArray(u.stops)||u.stops.length===0?a.jsxs("div",{className:"text-center py-6 text-gray-400",children:[a.jsx(Ft,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No stops recorded"})]}):a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(Ft,{className:"w-4 h-4"}),"Stop History (",u.stops.length,")"]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(u.stops||[]).map((Y,q)=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:border-gray-300 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${Y.end_time?"bg-gray-400":"bg-red-500 animate-pulse"}`}),a.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:Y.reason.replace("_"," ").replace(/\b\w/g,E=>E.toUpperCase())}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${Y.category==="Equipment"?"bg-red-100 text-red-700":Y.category==="Material"?"bg-orange-100 text-orange-700":Y.category==="Quality"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:Y.category||"Other"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx("span",{children:Na.formatSASTTime(Y.start_time)}),Y.end_time&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"→"}),a.jsx("span",{children:Na.formatSASTTime(Y.end_time)})]})]})]}),a.jsxs("div",{className:"text-right ml-3",children:[a.jsx("div",{className:`text-sm font-bold ${Y.end_time?"text-gray-900":"text-red-600"}`,children:Y.start_time?M(Y.end_time?new Date(Y.end_time).getTime()-new Date(Y.start_time).getTime():Date.now()-new Date(Y.start_time).getTime()):a.jsx("span",{className:"text-orange-500",children:"Unknown"})}),a.jsx("div",{className:"text-xs text-gray-500",children:Y.end_time?"resolved":"active"})]})]})},q))})]})]})]}),a.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-100",children:a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-900 text-white rounded-full hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2",children:"Close"})})})]})]})}):null};function rp(){const[i,o]=x.useState({activeOrders:[],machineStatus:[],todayStats:{},efficiency:0}),[f,d]=x.useState(!0),[u,v]=x.useState(new Date),[j,k]=x.useState(null),[w,y]=x.useState("all"),[p,R]=x.useState(!1),[C,L]=x.useState(null),[M,Y]=x.useState(!1);ps(),uo(),mo(),xn();const q=x.useCallback(async()=>{try{k(null);const te=await le.get("/production/floor-overview");console.log("Production floor overview data:",te);const X=te.activeOrders||[],ue=te.machineStatus||[],re=te.todayStats||{};console.log("Active orders:",X),console.log("Machine status:",ue),console.log("Today stats:",re),o(te||{})}catch(te){console.error("Failed to fetch production data:",te),k(te.message||"Failed to fetch production data")}finally{d(!1),v(new Date),R(!1)}},[]),E=()=>{R(!0),q()},P=te=>{te.order_id&&te.order_number?(L({id:te.order_id,number:te.order_number,machineId:te.id,machineName:te.name,status:te.status}),Y(!0)):console.log("Machine clicked (no assigned order):",te)};x.useEffect(()=>{q();const te=setInterval(q,5e3);return()=>clearInterval(te)},[q]),Fe("order_started",te=>{console.log("🟢 Production started:",te.data.order),q(),v(new Date)},[q]),Fe("order_stopped",te=>{console.log("🟡 Production stopped:",te.data.order),o(X=>X.map(ue=>ue.id===te.data.order.machine_id?{...ue,status:"available",order_number:null,order_id:null}:ue)),v(new Date)},[]),Fe("order_resumed",te=>{console.log("🔵 Production resumed:",te.data.order),o(X=>X.map(ue=>ue.id===te.data.order.machine_id?{...ue,status:"in_use",order_number:te.data.order.order_number,order_id:te.data.order.id,start_time:te.data.order.start_time}:ue)),v(new Date)},[]),Fe("order_completed",te=>{console.log("✅ Production completed:",te.data.order),o(X=>X.map(ue=>ue.id===te.data.order.machine_id?{...ue,status:"available",order_number:null,order_id:null}:ue)),v(new Date)},[]),Fe("machine_status_changed",te=>{console.log("🔧 Machine status changed:",te.data),o(X=>X.map(ue=>ue.id===te.data.machine_id?{...ue,status:te.data.status}:ue)),v(new Date)},[]),x.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["production","orders","machines"])},[]);const I=x.useMemo(()=>{const te=i.machineStatus||[];return w==="all"?te:te.filter(X=>X.status===w)},[i,w]);return f?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Loading Production Floor Data..."]})}):j?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md mx-auto",children:[a.jsx(Et,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),a.jsx("p",{className:"text-red-800 font-medium",children:"Error loading production data"}),a.jsx("p",{className:"text-red-600 text-sm mt-1",children:j}),a.jsx("button",{onClick:E,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Production Floor Monitor"}),a.jsx(gn,{})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time production monitoring and machine status"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(co,{className:"w-4 h-4 text-gray-500"}),a.jsxs("select",{value:w,onChange:te=>y(te.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Machines"}),a.jsx("option",{value:"in_use",children:"Running"}),a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"offline",children:"Offline"})]})]}),a.jsxs("button",{onClick:E,disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[a.jsx(Ke,{className:`w-4 h-4 ${p?"animate-spin":""}`}),"Refresh"]})]})]}),a.jsx(lp,{machines:i.machineStatus||[],activeOrders:i.activeOrders||[],todayStats:i.todayStats||{},efficiency:i.efficiency||0}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4",children:I.map(te=>a.jsx(sp,{machine:te,onClick:P},te.id))}),I.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(yt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No machines found for the selected filter"})]}),a.jsx(np,{isOpen:M,onClose:()=>Y(!1),orderId:C?.id,orderNumber:C?.number})]})}const ip=({orderId:i,onClose:o})=>{const[f,d]=x.useState(null),[u,v]=x.useState(!0),[j,k]=x.useState(0),[w,y]=x.useState(""),[p,R]=x.useState(!1),[C,L]=x.useState([{code:"RAW001",name:"Primary Ingredient A",required_qty:100,unit:"kg",allocated_qty:100,lot_number:"LOT2025001",supplier:"Supplier A"},{code:"RAW002",name:"Secondary Ingredient B",required_qty:20,unit:"kg",allocated_qty:20,lot_number:"LOT2025002",supplier:"Supplier B"}]),[M,Y]=x.useState({machine_id:null,setup_type:"initial_setup",previous_product:"",setup_checklist:[{task:"Machine cleaned and sanitized",completed:!1},{task:"Tools and fixtures installed",completed:!1},{task:"Parameters configured",completed:!1},{task:"Safety systems verified",completed:!1}]}),[q,E]=x.useState({batch_number:`BAT${Date.now()}`,environmental_conditions:{temperature:25,humidity:60,pressure:1013.25}}),[P,I]=x.useState([{checkpoint_name:"Weight Check",checkpoint_stage:"final_inspection",target_value:100,tolerance_min:95,tolerance_max:105,unit_of_measure:"units",measured_value:null},{checkpoint_name:"Temperature Control",checkpoint_stage:"in_process",target_value:75,tolerance_min:70,tolerance_max:80,unit_of_measure:"°C",measured_value:null}]),te=[{id:"materials",title:"Material Preparation",icon:Kt,description:"Verify and allocate raw materials",status:"pending"},{id:"setup",title:"Machine Setup",icon:Ut,description:"Configure machine and complete setup checklist",status:"pending"},{id:"production",title:"Production Start",icon:Ka,description:"Begin production with safety checks",status:"pending"},{id:"quality",title:"Quality Control",icon:pf,description:"Monitor quality checkpoints",status:"pending"},{id:"completion",title:"Completion",icon:tt,description:"Complete production with final approval",status:"pending"}];x.useEffect(()=>{X()},[i]);const X=async()=>{try{v(!0);let O;try{O=await le.get(`/orders/${i}/enhanced`)}catch(b){console.warn("Enhanced endpoint failed, falling back to regular order details:",b);const g=await le.get(`/orders/${i}`);O={order:g,materials:[],quality_checks:[],setup:null,workflow_progress:{materials_prepared:g.material_check_completed||!1,setup_completed:!!g.setup_complete_time,production_started:g.workflow_stage==="in_progress",quality_approved:g.quality_approved||!1}}}d(O),ue(O.order),O.materials?.length>0&&L(O.materials),O.setup&&Y(b=>({...b,...O.setup}))}catch(O){y("Failed to load order details"),console.error("Error loading order details:",O)}finally{v(!1)}},ue=O=>{let b=0;O.material_check_completed&&(b=1),O.setup_complete_time&&(b=2),O.workflow_stage==="in_progress"&&(b=3),O.quality_approved&&(b=4),O.workflow_stage==="completed"&&(b=5),k(b)},re=async()=>{try{v(!0),await le.post(`/orders/${i}/prepare-materials`,{materials:C,checked_by:1,notes:"Materials prepared via enhanced workflow"}),k(1),await X(),y("")}catch(O){y("Failed to prepare materials: "+O.response?.data?.error||O.message)}finally{v(!1)}},xe=async()=>{try{v(!0),await le.post(`/orders/${i}/start-setup`,{machine_id:M.machine_id,setup_type:M.setup_type,previous_product:M.previous_product}),await X(),y("")}catch(O){y("Failed to start setup: "+O.response?.data?.error||O.message)}finally{v(!1)}},Z=async()=>{try{v(!0),await le.post(`/orders/${i}/complete-setup`,{setup_checklist:M.setup_checklist,notes:"Setup completed via enhanced workflow"}),k(2),await X(),y("")}catch(O){y("Failed to complete setup: "+O.response?.data?.error||O.message)}finally{v(!1)}},G=async()=>{try{v(!0),await le.post(`/orders/${i}/start-enhanced`,{batch_number:q.batch_number,environmental_conditions:q.environmental_conditions}),k(3),await X(),y("")}catch(O){y("Failed to start production: "+O.response?.data?.error||O.message)}finally{v(!1)}},ie=async(O,b)=>{const g=P[O];try{await le.post(`/orders/${i}/quality-check`,{checkpoint_name:g.checkpoint_name,checkpoint_stage:g.checkpoint_stage,measured_value:parseFloat(b),target_value:g.target_value,tolerance_min:g.tolerance_min,tolerance_max:g.tolerance_max,unit_of_measure:g.unit_of_measure,notes:"Quality check via enhanced workflow"});const T=[...P];T[O].measured_value=parseFloat(b),I(T),await X()}catch(T){y("Failed to record quality check: "+T.response?.data?.error||T.message)}},ce=async()=>{try{v(!0),await le.post(`/orders/${i}/complete-enhanced`,{actual_quantity:f?.order?.quantity,quality_approved:!0,final_notes:"Production completed via enhanced workflow"}),k(5),await X(),y("")}catch(O){y("Failed to complete production: "+O.response?.data?.error||O.message)}finally{v(!1)}},ve=O=>O<j?"completed":O===j?"active":"pending";return u&&!f?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-center",children:"Loading workflow..."})]})}):a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Enhanced Production Workflow"}),a.jsxs("p",{className:"text-gray-600",children:["Order: ",f?.order?.order_number," - ",f?.order?.product_name]})]}),a.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:"✕"})]})}),w&&a.jsx("div",{className:"mx-6 mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Et,{className:"h-5 w-5 text-red-500 mr-2"}),a.jsx("span",{className:"text-red-700",children:w})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"flex items-center justify-between mb-4",children:te.map((O,b)=>{const g=ve(b),T=O.icon;return a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:`
                        w-12 h-12 rounded-full flex items-center justify-center border-2
                        ${g==="completed"?"bg-green-500 border-green-500 text-white":g==="active"?"bg-blue-500 border-blue-500 text-white":"bg-gray-100 border-gray-300 text-gray-400"}
                      `,children:a.jsx(T,{className:"h-6 w-6"})}),a.jsx("span",{className:"text-sm font-medium mt-2 text-center",children:O.title}),a.jsx("span",{className:"text-xs text-gray-500 text-center",children:O.description})]}),b<te.length-1&&a.jsx("div",{className:`
                        flex-1 h-0.5 mx-4
                        ${b<j?"bg-green-500":"bg-gray-300"}
                      `})]},O.id)})})}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[j===0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(Kt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Material Preparation"]}),a.jsxs("div",{className:"space-y-4",children:[C.map((O,b)=>a.jsx("div",{className:"bg-white p-4 rounded-lg border",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Code"}),a.jsx("p",{className:"text-sm",children:O.code})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Material"}),a.jsx("p",{className:"text-sm",children:O.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Required"}),a.jsxs("p",{className:"text-sm",children:[O.required_qty," ",O.unit]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Allocated"}),a.jsxs("p",{className:"text-sm",children:[O.allocated_qty," ",O.unit]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Lot Number"}),a.jsx("p",{className:"text-sm",children:O.lot_number})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Supplier"}),a.jsx("p",{className:"text-sm",children:O.supplier})]})]})},O.code)),a.jsx("button",{onClick:re,disabled:u,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:u?"Preparing...":"Confirm Material Preparation"})]})]}),j===1&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(Ut,{className:"h-5 w-5 mr-2 text-blue-600"}),"Machine Setup"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine"}),a.jsxs("select",{value:M.machine_id||"",onChange:O=>Y(b=>({...b,machine_id:parseInt(O.target.value)})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[a.jsx("option",{value:"",children:"Select Machine"}),a.jsx("option",{value:"1",children:"Blending Machine A"}),a.jsx("option",{value:"2",children:"Packaging Line B"}),a.jsx("option",{value:"3",children:"Quality Station C"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Setup Type"}),a.jsxs("select",{value:M.setup_type,onChange:O=>Y(b=>({...b,setup_type:O.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[a.jsx("option",{value:"initial_setup",children:"Initial Setup"}),a.jsx("option",{value:"changeover",children:"Changeover"}),a.jsx("option",{value:"maintenance_setup",children:"Maintenance Setup"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Previous Product"}),a.jsx("input",{type:"text",value:M.previous_product,onChange:O=>Y(b=>({...b,previous_product:O.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Previous product (if changeover)"})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Setup Checklist"}),a.jsx("div",{className:"space-y-2",children:M.setup_checklist.map((O,b)=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:O.completed,onChange:g=>{const T=[...M.setup_checklist];T[b].completed=g.target.checked,Y(V=>({...V,setup_checklist:T}))},className:"mr-2"}),a.jsx("span",{className:O.completed?"line-through text-gray-500":"",children:O.task})]},b))})]}),a.jsx("div",{className:"flex gap-4",children:f?.setup?a.jsx("button",{onClick:Z,disabled:!M.setup_checklist.every(O=>O.completed)||u,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50",children:u?"Completing...":"Complete Setup"}):a.jsx("button",{onClick:xe,disabled:!M.machine_id||u,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:u?"Starting...":"Start Setup"})})]})]}),j===2&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(Ka,{className:"h-5 w-5 mr-2 text-green-600"}),"Production Start"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch Number"}),a.jsx("input",{type:"text",value:q.batch_number,onChange:O=>E(b=>({...b,batch_number:O.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Environmental Conditions"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temperature (°C)"}),a.jsx("input",{type:"number",step:"0.1",value:q.environmental_conditions.temperature,onChange:O=>E(b=>({...b,environmental_conditions:{...b.environmental_conditions,temperature:parseFloat(O.target.value)}})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Humidity (%)"}),a.jsx("input",{type:"number",step:"0.1",value:q.environmental_conditions.humidity,onChange:O=>E(b=>({...b,environmental_conditions:{...b.environmental_conditions,humidity:parseFloat(O.target.value)}})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pressure (hPa)"}),a.jsx("input",{type:"number",step:"0.01",value:q.environmental_conditions.pressure,onChange:O=>E(b=>({...b,environmental_conditions:{...b.environmental_conditions,pressure:parseFloat(O.target.value)}})),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),a.jsx("button",{onClick:G,disabled:u,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50",children:u?"Starting Production...":"Start Production with Safety Checks"})]})]}),j===3&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(pf,{className:"h-5 w-5 mr-2 text-purple-600"}),"Quality Control Checkpoints"]}),a.jsxs("div",{className:"space-y-4",children:[P.map((O,b)=>a.jsx("div",{className:"bg-white p-4 rounded-lg border",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Checkpoint"}),a.jsx("p",{className:"text-sm",children:O.checkpoint_name}),a.jsx("p",{className:"text-xs text-gray-500",children:O.checkpoint_stage})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target"}),a.jsxs("p",{className:"text-sm",children:[O.target_value," ",O.unit_of_measure]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tolerance"}),a.jsxs("p",{className:"text-sm",children:[O.tolerance_min," - ",O.tolerance_max]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Measured Value"}),a.jsx("input",{type:"number",step:"0.1",value:O.measured_value||"",onChange:g=>{const T=[...P];T[b].measured_value=parseFloat(g.target.value),I(T)},className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:`Enter ${O.unit_of_measure}`})]}),a.jsx("div",{children:a.jsx("button",{onClick:()=>ie(b,O.measured_value),disabled:!O.measured_value,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 disabled:opacity-50",children:"Record"})})]})},b)),a.jsx("button",{onClick:()=>k(4),disabled:P.some(O=>O.measured_value===null),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Proceed to Completion"})]})]}),j===4&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[a.jsx(tt,{className:"h-5 w-5 mr-2 text-green-600"}),"Production Completion"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[a.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Final Quality Approval Required"}),a.jsx("p",{className:"text-green-700 text-sm",children:"All quality checkpoints have been completed successfully. Supervisor approval is required to complete production."})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[a.jsx("h4",{className:"font-medium mb-3",children:"Production Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Order Number:"}),a.jsx("span",{className:"ml-2 font-medium",children:f?.order?.order_number})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Product:"}),a.jsx("span",{className:"ml-2 font-medium",children:f?.order?.product_name})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Batch Number:"}),a.jsx("span",{className:"ml-2 font-medium",children:q.batch_number})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Quantity:"}),a.jsxs("span",{className:"ml-2 font-medium",children:[f?.order?.quantity," units"]})]})]})]}),a.jsx("button",{onClick:ce,disabled:u,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50",children:u?"Completing Production...":"Complete Production with Quality Approval"})]})]}),(f?.order?.workflow_stage==="in_progress"||j>=3)&&a.jsx("div",{className:"mt-6",children:a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"font-medium text-yellow-800 flex items-center gap-2",children:[a.jsx(yt,{className:"w-5 h-5"}),"Production Monitoring"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>R(!0),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm flex items-center gap-1 transition-colors",children:[a.jsx(un,{className:"w-4 h-4"}),"Report Downtime"]}),a.jsxs("button",{className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-1 rounded text-sm flex items-center gap-1 transition-colors",children:[a.jsx(hn,{className:"w-4 h-4"}),"Pause Production"]})]})]}),a.jsxs("div",{className:"text-sm text-yellow-700",children:[a.jsx("p",{children:"Production is active. Monitor for any issues and report downtime immediately if problems occur."}),a.jsxs("p",{className:"mt-1",children:["Current batch: ",a.jsx("span",{className:"font-medium",children:q.batch_number})]})]})]})}),j>=5&&a.jsxs("div",{className:"text-center",children:[a.jsx(tt,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-green-800 mb-2",children:"Production Completed Successfully!"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["Order ",f?.order?.order_number," has been completed with full traceability and quality approval."]}),a.jsx("button",{onClick:o,className:"bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700",children:"Close Workflow"})]})]})]})]}),p&&a.jsx(cp,{orderId:i,onClose:()=>R(!1),onSuccess:()=>{R(!1),y("Downtime reported successfully")}})]})};function cp({orderId:i,onClose:o,onSuccess:f}){const[d,u]=x.useState([]),[v,j]=x.useState(!0),[k,w]=x.useState(!1),[y,p]=x.useState({machine_id:"",downtime_category_id:"",primary_cause:"",secondary_cause:"",severity:"medium",production_impact:"moderate",estimated_duration:"",notes:"",workflow_stage:"in_progress",quality_impact:!1,safety_incident:!1,environmental_impact:!1});x.useEffect(()=>{R()},[]);const R=async()=>{try{const L=await le.get("/downtime/categories");u(L)}catch(L){console.error("Error loading categories:",L)}finally{j(!1)}},C=async L=>{L.preventDefault(),w(!0);try{await le.post("/downtime/create",{...y,order_id:i}),f()}catch(M){console.error("Error creating downtime:",M),alert("Failed to report downtime: "+(M.response?.data?.error||M.message))}finally{w(!1)}};return v?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-center",children:"Loading categories..."})]})}):a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[a.jsx(un,{className:"w-5 h-5 text-red-600"}),"Report Production Downtime"]}),a.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:a.jsx(un,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"bg-red-50 p-3 rounded-lg mb-4",children:a.jsxs("p",{className:"text-sm text-red-800",children:[a.jsxs("strong",{children:["Order #",i]})," - Reporting downtime will alert supervisors and track production impact."]})}),a.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Machine ID *"}),a.jsx("input",{type:"number",required:!0,value:y.machine_id,onChange:L=>p(M=>({...M,machine_id:L.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Enter machine ID"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Downtime Category *"}),a.jsxs("select",{required:!0,value:y.downtime_category_id,onChange:L=>p(M=>({...M,downtime_category_id:L.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:"Select Category"}),d.map(L=>a.jsx("option",{value:L.id,children:L.category_name},L.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Cause *"}),a.jsx("input",{type:"text",required:!0,value:y.primary_cause,onChange:L=>p(M=>({...M,primary_cause:L.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Brief description of the issue"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Secondary Cause (Optional)"}),a.jsx("input",{type:"text",value:y.secondary_cause,onChange:L=>p(M=>({...M,secondary_cause:L.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Additional contributing factors"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Severity"}),a.jsxs("select",{value:y.severity,onChange:L=>p(M=>({...M,severity:L.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"}),a.jsx("option",{value:"critical",children:"Critical"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Impact"}),a.jsxs("select",{value:y.production_impact,onChange:L=>p(M=>({...M,production_impact:L.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[a.jsx("option",{value:"none",children:"None"}),a.jsx("option",{value:"minor",children:"Minor"}),a.jsx("option",{value:"moderate",children:"Moderate"}),a.jsx("option",{value:"major",children:"Major"}),a.jsx("option",{value:"severe",children:"Severe"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Est. Duration (min)"}),a.jsx("input",{type:"number",value:y.estimated_duration,onChange:L=>p(M=>({...M,estimated_duration:L.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"0"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{value:y.notes,onChange:L=>p(M=>({...M,notes:L.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:"3",placeholder:"Additional details, immediate actions taken, etc."})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center text-sm",children:[a.jsx("input",{type:"checkbox",checked:y.quality_impact,onChange:L=>p(M=>({...M,quality_impact:L.target.checked})),className:"mr-2"}),"Quality Impact"]}),a.jsxs("label",{className:"flex items-center text-sm",children:[a.jsx("input",{type:"checkbox",checked:y.safety_incident,onChange:L=>p(M=>({...M,safety_incident:L.target.checked})),className:"mr-2"}),"Safety Incident"]}),a.jsxs("label",{className:"flex items-center text-sm",children:[a.jsx("input",{type:"checkbox",checked:y.environmental_impact,onChange:L=>p(M=>({...M,environmental_impact:L.target.checked})),className:"mr-2"}),"Environmental Impact"]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:k,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white py-2 px-4 rounded-md transition-colors",children:k?"Reporting...":"Report Downtime"}),a.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]})})}const op=()=>{const[i,o]=x.useState(!1),[f,d]=x.useState(!1),[u,v]=x.useState({width:0,height:0});return x.useEffect(()=>{const j=()=>{const k=window.innerWidth,w=window.innerHeight;v({width:k,height:w}),o(k<768),d(k>=768&&k<1024)};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),{isMobile:i,isTablet:f,screenSize:u,isDesktop:!i&&!f}},on=({children:i,onClick:o,variant:f="primary",size:d="md",disabled:u=!1,loading:v=!1,icon:j,className:k="",...w})=>{const y={primary:"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 active:bg-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800",success:"bg-green-600 text-white hover:bg-green-700 active:bg-green-800",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 active:bg-gray-100"},p={sm:"px-4 py-2 text-sm min-h-[44px]",md:"px-6 py-3 text-base min-h-[48px]",lg:"px-8 py-4 text-lg min-h-[52px]"};return a.jsxs("button",{onClick:o,disabled:u||v,className:`
        inline-flex items-center justify-center gap-2 font-medium rounded-lg
        transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2
        ${y[f]}
        ${p[d]}
        ${u||v?"opacity-50 cursor-not-allowed":"active:scale-95"}
        ${k}
      `,...w,children:[v?a.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):j&&a.jsx("icon",{className:"w-5 h-5"}),i]})},dp=()=>{const[i,o]=x.useState(!1),[f,d]=x.useState("unknown");return x.useEffect(()=>{const u=()=>{if("memory"in navigator){const v=navigator.memory;v.totalJSHeapSize>v.jsHeapSizeLimit*.8&&o(!0)}if("connection"in navigator){const v=navigator.connection;d(v.effectiveType||"unknown"),(v.effectiveType==="slow-2g"||v.effectiveType==="2g")&&o(!0)}window.matchMedia("(prefers-reduced-motion: reduce)").matches&&o(!0)};if(u(),"connection"in navigator)return navigator.connection.addEventListener("change",u),()=>navigator.connection.removeEventListener("change",u)},[]),{isLowPower:i,connectionType:f,shouldReduceAnimations:i,shouldLazyLoad:f==="slow-2g"||f==="2g"}};function up(){const[i,o]=x.useState([]),[f,d]=x.useState([]),[u,v]=x.useState([]),[j,k]=x.useState(!0),[w,y]=x.useState(!1),[p,R]=x.useState("all"),[C,L]=x.useState("all"),[M,Y]=x.useState(""),[q,E]=x.useState(null),{isMobile:P}=op();dp();const[I,te]=x.useState(!1);ps();const{notifications:X,clearNotification:ue}=xn(),{lastUpdate:re}=uo(),[xe,Z]=x.useState(!1),[G,ie]=x.useState(!1),[ce,ve]=x.useState(null),[O,b]=x.useState({order_number:"",product_name:"",quantity:"",priority:"normal",environment:"",due_date:"",specifications:""});x.useEffect(()=>{g(),T(),V()},[]),x.useEffect(()=>{re&&g()},[re]),Fe("order_started",Q=>{console.log("🟢 Order started:",Q.data),K(`Order ${Q.data.order?.order_number} started`,"success"),g()},[]),Fe("order_completed",Q=>{console.log("✅ Order completed:",Q.data),K(`Order ${Q.data.order?.order_number} completed`,"success"),g()},[]),Fe("order_stopped",Q=>{console.log("🔴 Order stopped:",Q.data),K(`Order ${Q.data.order?.order_number} stopped: ${Q.data.reason}`,"warning"),g()},[]),Fe("downtime_started",Q=>{console.log("⚠️ Downtime reported:",Q.data),K(`Downtime reported on Machine ${Q.data.machine_id}: ${Q.data.primary_cause}`,"error")},[]);const g=async()=>{try{w||k(!0);const Q=await le.get("/orders");o(Q||[])}catch(Q){console.error("Error loading orders:",Q),K("Failed to load orders","error")}finally{k(!1),y(!1)}},T=async()=>{try{const Q=await le.get("/machines");d(Q||[])}catch(Q){console.error("Error loading machines:",Q)}},V=async()=>{try{const Q=await le.get("/environments");v(Q||[])}catch(Q){console.error("Error loading environments:",Q)}},K=(Q,ke="info")=>{E({message:Q,type:ke}),setTimeout(()=>E(null),5e3)},h=()=>{y(!0),g()},B=async Q=>{Q.preventDefault();try{await le.post("/orders",O),Z(!1),b({order_number:"",product_name:"",quantity:"",priority:"normal",environment:"",due_date:"",specifications:""}),K("Order created successfully","success"),g()}catch(ke){console.error("Error creating order:",ke),K("Failed to create order","error")}},ae=async Q=>{try{await le.post(`/orders/${Q.id}/start`),K(`Order ${Q.order_number} started`,"success"),g()}catch(ke){console.error("Error starting order:",ke),K("Failed to start order. Use Enhanced Workflow for complex operations.","warning")}},se=async Q=>{try{await le.post(`/orders/${Q.id}/stop`,{reason:"Quick stop from orders page",notes:"Stopped via quick action"}),K(`Order ${Q.order_number} stopped`,"success"),g()}catch(ke){console.error("Error stopping order:",ke),K("Failed to stop order","error")}},ne=async Q=>{try{await le.post(`/orders/${Q.id}/complete`,{actual_quantity:Q.quantity,quality_approved:!0,completion_notes:"Completed via quick action"}),K(`Order ${Q.order_number} completed`,"success"),g()}catch(ke){console.error("Error completing order:",ke),K("Failed to complete order. Use Enhanced Workflow for complex completion.","warning")}},pe=Q=>{ve(Q),ie(!0)},de=x.useMemo(()=>i.filter(Q=>{const ke=Q.order_number?.toLowerCase().includes(M.toLowerCase())||Q.product_name?.toLowerCase().includes(M.toLowerCase()),Oe=p==="all"||Q.environment===p,$=C==="all"||Q.status===C;return ke&&Oe&&$}),[i,M,p,C]),Ce=Q=>{switch(Q){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"stopped":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ge=Q=>{switch(Q){case"completed":return a.jsx(tt,{className:"w-4 h-4"});case"in_progress":return a.jsx(Ka,{className:"w-4 h-4"});case"stopped":return a.jsx(yf,{className:"w-4 h-4"});default:return a.jsx(Ft,{className:"w-4 h-4"})}},He=Q=>{switch(Q){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"normal":return"bg-blue-100 text-blue-800 border-blue-200";case"low":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return j&&!w?a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2",children:"Loading orders..."})]}):a.jsxs("div",{className:"space-y-6 p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Kt,{className:"w-6 h-6 md:w-8 h-8"}),"Production Orders"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Unified production workflow system"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Bg,{}),a.jsx(on,{onClick:h,disabled:w,size:P?"sm":"md",variant:"outline",icon:Ke,className:w?"animate-spin":"",children:P?"":"Refresh"}),a.jsx(on,{onClick:()=>Z(!0),size:P?"sm":"md",icon:wa,children:P?"":"New Order"})]})]}),q&&a.jsx("div",{className:`p-4 rounded-lg border ${q.type==="success"?"bg-green-50 border-green-200 text-green-800":q.type==="error"?"bg-red-50 border-red-200 text-red-800":q.type==="warning"?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:q.message}),X.map((Q,ke)=>a.jsxs("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800 flex justify-between items-center",children:[a.jsx("span",{children:Q.message}),a.jsx("button",{onClick:()=>ue(Q.id),className:"text-blue-600 hover:text-blue-800",children:"×"})]},ke)),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search orders...",value:M,onChange:Q=>Y(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("select",{value:p,onChange:Q=>R(Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Environments"},"all"),u.map(Q=>a.jsx("option",{value:Q.code,children:Q.name},Q.id))]}),a.jsxs("select",{value:C,onChange:Q=>L(Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Statuses"},"all"),a.jsx("option",{value:"pending",children:"Pending"},"pending"),a.jsx("option",{value:"in_progress",children:"In Progress"},"in_progress"),a.jsx("option",{value:"completed",children:"Completed"},"completed"),a.jsx("option",{value:"stopped",children:"Stopped"},"stopped")]})]})]})}),a.jsxs(Se,{className:"overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("h3",{className:"font-medium text-gray-900",children:["Orders (",de.length,")"]})}),P?a.jsx("div",{className:"p-4 space-y-4",children:de.map(Q=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:Q.order_number}),a.jsx("p",{className:"text-sm text-gray-600",children:Q.product_name})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Xe,{className:Ce(Q.status),children:[ge(Q.status),a.jsx("span",{className:"ml-1 capitalize",children:Q.status})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Quantity:"}),a.jsx("span",{className:"ml-1 font-medium",children:Q.quantity})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Environment:"}),a.jsx("span",{className:"ml-1 font-medium",children:Q.environment})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[a.jsx(Xe,{className:He(Q.priority),children:Q.priority}),a.jsxs("div",{className:"flex gap-2",children:[Q.status==="pending"&&a.jsx(on,{onClick:()=>ae(Q),size:"xs",icon:Ka,children:"Start"}),Q.status==="in_progress"&&a.jsx(on,{onClick:()=>se(Q),size:"xs",variant:"outline",icon:yf,children:"Stop"}),a.jsx(on,{onClick:()=>pe(Q),size:"xs",variant:"secondary",icon:Jt,children:"Workflow"})]})]})]},Q.id))}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Environment"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:de.map(Q=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"font-medium text-gray-900",children:Q.order_number}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",Q.id]})]}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"text-sm text-gray-900",children:Q.product_name})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"text-sm text-gray-900",children:Q.quantity})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs(Xe,{className:Ce(Q.status),children:[ge(Q.status),a.jsx("span",{className:"ml-1 capitalize",children:Q.status})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx(Xe,{className:He(Q.priority),children:Q.priority})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"text-sm text-gray-900",children:Q.environment})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[Q.status==="pending"&&a.jsx(be,{onClick:()=>ae(Q),size:"sm",variant:"outline",children:"Quick Start"}),Q.status==="in_progress"&&a.jsxs(a.Fragment,{children:[a.jsx(be,{onClick:()=>se(Q),size:"sm",variant:"outline",children:"Quick Stop"}),a.jsx(be,{onClick:()=>ne(Q),size:"sm",variant:"outline",children:"Quick Complete"})]}),a.jsx(be,{onClick:()=>pe(Q),size:"sm",children:"Enhanced Workflow"})]})})]},Q.id))})]})}),de.length===0&&a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx(Kt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No orders found"}),a.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new order"})]})]}),xe&&a.jsx(Pt,{title:"Create New Order",onClose:()=>Z(!1),children:a.jsxs("form",{onSubmit:B,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Number"}),a.jsx("input",{type:"text",value:O.order_number,onChange:Q=>b({...O,order_number:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity"}),a.jsx("input",{type:"number",value:O.quantity,onChange:Q=>b({...O,quantity:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name"}),a.jsx("input",{type:"text",value:O.product_name,onChange:Q=>b({...O,product_name:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),a.jsxs("select",{value:O.priority,onChange:Q=>b({...O,priority:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"low",children:"Low"},"low"),a.jsx("option",{value:"normal",children:"Normal"},"normal"),a.jsx("option",{value:"high",children:"High"},"high"),a.jsx("option",{value:"urgent",children:"Urgent"},"urgent")]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Environment"}),a.jsxs("select",{value:O.environment,onChange:Q=>b({...O,environment:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Environment"},"select"),u.map(Q=>a.jsx("option",{value:Q.code,children:Q.name},Q.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),a.jsx("input",{type:"datetime-local",value:O.due_date,onChange:Q=>b({...O,due_date:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specifications"}),a.jsx("textarea",{value:O.specifications,onChange:Q=>b({...O,specifications:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Additional specifications or notes..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx(be,{type:"submit",className:"flex-1",children:"Create Order"}),a.jsx(be,{type:"button",onClick:()=>Z(!1),variant:"outline",children:"Cancel"})]})]})}),G&&ce&&a.jsx(ip,{orderId:ce.id,onClose:()=>{ie(!1),ve(null),g()}})]})}const mp=i=>i.toLowerCase().replace(/\b\w/g,o=>o.toUpperCase()),ho=i=>{if(!i)return"Unknown";const o=i.fullName||i.username||"Unknown";return mp(o)},fp=i=>i?i.toUpperCase():"N/A";function hp(){const[i,o]=x.useState([]),[f,d]=x.useState([]),[u,v]=x.useState(!0),[j,k]=x.useState(!1),[w,y]=x.useState("all"),[p,R]=x.useState(""),[C,L]=x.useState("all"),[M,Y]=x.useState(null);ps(),mo();const{notifications:q,clearNotification:E}=xn(),[P,I]=x.useState(!1),[te,X]=x.useState(!1),[ue,re]=x.useState(!1),[xe,Z]=x.useState(null),[G,ie]=x.useState({name:"",type:"",environment:"",capacity:100,production_rate:60,shift_cycle_enabled:!1,cycle_start_date:"",operators_per_shift:2,hopper_loaders_per_shift:1,packers_per_shift:3}),[ce,ve]=x.useState([{letter:"A",offset:0,employees:[]},{letter:"B",offset:2,employees:[]},{letter:"C",offset:4,employees:[]}]),[O,b]=x.useState([]),[g,T]=x.useState(!1);x.useEffect(()=>{f.length>0&&!G.environment&&ie(_=>({..._,environment:f[0].code}))},[f,G.environment]);const V=x.useMemo(()=>{const _={};return f.forEach(F=>{if(F.machine_types)try{_[F.code]=typeof F.machine_types=="string"?JSON.parse(F.machine_types):F.machine_types}catch(me){console.error("Failed to parse machine types for environment:",F.name,me),_[F.code]=[]}else _[F.code]=[]}),_},[f]),K={available:{bg:"bg-green-50",text:"text-green-600",border:"border-green-200",icon:tt},in_use:{bg:"bg-blue-50",text:"text-blue-600",border:"border-blue-200",icon:yt},maintenance:{bg:"bg-yellow-50",text:"text-yellow-600",border:"border-yellow-200",icon:qr},offline:{bg:"bg-red-50",text:"text-red-600",border:"border-red-200",icon:un}},h=(_,F="success")=>{Y({message:_,type:F}),setTimeout(()=>Y(null),3e3)},B=async()=>{try{const _=await le.get("/environments");d(_)}catch(_){console.error("Failed to load environments:",_),h("Failed to load environments","danger")}},ae=async(_=!1)=>{_?k(!0):v(!0);try{const F=await le.get("/machines");o(F)}catch(F){console.error("Failed to load machines:",F),h("Failed to load machines","danger")}finally{v(!1),k(!1)}},se=async()=>{T(!0);try{const F=(await le.get("/users")).map(me=>({id:me.id,name:ho(me),employee_code:fp(me.employee_code)||`EMP${me.id.toString().padStart(3,"0")}`,role:me.role,is_active:me.is_active})).filter(me=>me.is_active!==!1);b(F)}catch(_){console.error("Failed to load employees:",_),console.error("Error details:",_.message,_.response),b([]),_.message.includes("unauthorized")||_.message.includes("Session expired")?h("Please log in to manage crew assignments","danger"):h(`Failed to load employees: ${_.message}. You can still configure shift cycles without employee assignments.`,"danger")}finally{T(!1)}},ne=async _=>{try{const F=await le.get(`/machines/${_}/crews`);F.length>0?ve(F):ve([{letter:"A",offset:0,employees:[]},{letter:"B",offset:2,employees:[]},{letter:"C",offset:4,employees:[]}])}catch(F){console.error("Failed to load crews:",F)}},pe=()=>{ae(!0)},de=async _=>{try{await le.post(`/machines/${_}/crews`,ce),h("Crew assignments saved successfully")}catch(F){console.error("Failed to save crew assignments:",F),h("Failed to save crew assignments: "+(F.message||"Unknown error"),"danger")}};x.useEffect(()=>{B(),ae(),se();const _=setInterval(ae,3e4);return()=>clearInterval(_)},[]),Fe("machine_status_changed",_=>{console.log("🔧 Machine status changed:",_.data),o(F=>F.map(me=>me.id===_.data.machine_id?{...me,status:_.data.status,updated_at:new Date().toISOString()}:me)),h(`Machine ${_.data.machine_name} status changed to ${_.data.status}`,"info")},[]),Fe("machine_created",_=>{console.log("🆕 New machine added:",_.data),o(F=>[...F,_.data.machine]),h(`New machine "${_.data.machine.name}" added`,"success")},[]),Fe("machine_updated",_=>{console.log("📝 Machine updated:",_.data),o(F=>F.map(me=>me.id===_.data.machine.id?_.data.machine:me)),h(`Machine "${_.data.machine.name}" updated`,"info")},[]),Fe("machine_deleted",_=>{console.log("🗑️ Machine deleted:",_.data),o(F=>F.filter(me=>me.id!==_.data.machine_id)),h("Machine deleted","warning")},[]),x.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["machines","production"])},[]),x.useEffect(()=>{q.forEach(_=>{_.type==="alert"&&_.message.includes("machine")&&(h(_.message,"danger"),E(_.id))})},[q]);const Ce=async _=>{_.preventDefault();try{await le.post("/machines",G),I(!1),ae(),h("Machine added successfully")}catch(F){h("Failed to add machine: "+(F.message||"Unknown error"),"danger")}},ge=async _=>{_.preventDefault();try{await le.put(`/machines/${xe.id}`,G),G.shift_cycle_enabled&&await de(xe.id),X(!1),ae(),h("Machine updated successfully")}catch(F){h("Failed to update machine: "+(F.message||"Unknown error"),"danger")}},He=async _=>{if(window.confirm("Are you sure you want to delete this machine?"))try{await le.delete(`/machines/${_}`),ae(),h("Machine deleted successfully")}catch(F){h("Failed to delete machine: "+(F.message||"Unknown error"),"danger")}},Q=async _=>{try{await le.patch(`/machines/${xe.id}/status`,{status:_}),re(!1),ae(),h(`Machine status changed to ${_}`)}catch(F){h("Failed to update status: "+(F.message||"Unknown error"),"danger")}},ke=x.useMemo(()=>{let _=i;return w!=="all"&&(_=_.filter(F=>F.environment===w)),C!=="all"&&(_=_.filter(F=>F.status===C)),p&&(_=_.filter(F=>F.name.toLowerCase().includes(p.toLowerCase())||F.type.toLowerCase().includes(p.toLowerCase()))),_},[i,w,C,p]),Oe=x.useMemo(()=>{const _=i.length,F=i.filter(vt=>vt.status==="available").length,me=i.filter(vt=>vt.status==="in_use").length,Ze=i.filter(vt=>vt.status==="maintenance").length,ut=i.filter(vt=>vt.status==="offline").length,bs=_>0?Math.round(me/_*100):0;return{total:_,available:F,inUse:me,maintenance:Ze,offline:ut,utilizationRate:bs}},[i]),$=_=>{const me=(K[_]||K.offline).icon;return a.jsxs(Xe,{variant:_==="available"?"success":_==="in_use"?"info":_==="maintenance"?"warning":"danger",children:[a.jsx(me,{className:"w-3 h-3 mr-1"}),_.replace("_"," ").toUpperCase()]})},he=()=>a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Oe.total})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Available"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:Oe.available})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yt,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"In Use"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Oe.inUse})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qr,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Maintenance"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Oe.maintenance})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(un,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Offline"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:Oe.offline})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jt,{className:"w-5 h-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Utilization"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Oe.utilizationRate,"%"]})]})]})})]});return u&&i.length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Loading machines..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[M&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${M.type==="success"?"bg-green-100 text-green-800 border border-green-200":M.type==="danger"?"bg-red-100 text-red-800 border border-red-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:M.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Machine Management"}),a.jsx(gn,{})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage manufacturing equipment and monitor real-time status"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(be,{onClick:pe,disabled:j,variant:"outline",children:[a.jsx(Ke,{className:`w-4 h-4 mr-2 ${j?"animate-spin":""}`}),"Refresh"]}),a.jsxs(be,{onClick:()=>{ie({name:"",type:"",environment:"blending",capacity:100,production_rate:60}),I(!0)},children:[a.jsx(wa,{className:"w-4 h-4 mr-2"}),"Add Machine"]})]})]}),a.jsx(he,{}),a.jsx(Se,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search machines...",value:p,onChange:_=>R(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(co,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{value:w,onChange:_=>y(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[a.jsx("option",{value:"all",children:"All Environments"}),f.map(_=>a.jsx("option",{value:_.code,children:_.name},_.id))]})]}),a.jsx("div",{children:a.jsxs("select",{value:C,onChange:_=>L(_.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"in_use",children:"In Use"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"offline",children:"Offline"})]})}),a.jsx("div",{className:"flex items-center justify-center md:justify-start",children:a.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",ke.length," of ",i.length," machines"]})})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ke.map(_=>{const F=K[_.status]||K.offline,me=F.icon;return a.jsxs(Se,{className:`p-6 border-l-4 ${F.border} hover:shadow-lg transition-all duration-300`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:_.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:_.type}),a.jsxs("p",{className:"text-xs text-gray-400 capitalize",children:[_.environment," Environment"]})]}),$(_.status)]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Capacity:"}),a.jsx("span",{className:"font-medium",children:_.capacity})]}),_.production_rate&&a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Rate:"}),a.jsxs("span",{className:"font-medium",children:[_.production_rate,"/hr"]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(be,{onClick:()=>{Z(_),re(!0)},variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(me,{className:"w-4 h-4 mr-1"}),"Status"]}),a.jsx(be,{onClick:async()=>{Z(_),ie({..._,shift_cycle_enabled:_.shift_cycle_enabled||!1,cycle_start_date:_.cycle_start_date||"",operators_per_shift:_.operators_per_shift==null?"":_.operators_per_shift,hopper_loaders_per_shift:_.hopper_loaders_per_shift==null?"":_.hopper_loaders_per_shift,packers_per_shift:_.packers_per_shift==null?"":_.packers_per_shift}),await ne(_.id),X(!0)},variant:"outline",size:"sm",children:a.jsx(zr,{className:"w-4 h-4"})}),_.status!=="in_use"&&a.jsx(be,{onClick:()=>He(_.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",children:a.jsx(Ur,{className:"w-4 h-4"})})]})]},_.id)})}),ke.length===0&&a.jsxs(Se,{className:"p-12 text-center",children:[a.jsx(Ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No machines found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:p||w!=="all"||C!=="all"?"Try adjusting your filters or search term":"Get started by adding your first machine"}),!p&&w==="all"&&C==="all"&&a.jsxs(be,{onClick:()=>{ie({name:"",type:"",environment:"blending",capacity:100,production_rate:60}),I(!0)},children:[a.jsx(wa,{className:"w-4 h-4 mr-2"}),"Add First Machine"]})]}),P&&a.jsx(Pt,{title:"Add New Machine",onClose:()=>I(!1),children:a.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Name"}),a.jsx("input",{type:"text",placeholder:"Enter machine name",value:G.name,onChange:_=>ie({...G,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),a.jsxs("select",{value:G.environment,onChange:_=>ie({...G,environment:_.target.value,type:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Environment"}),f.map(_=>a.jsx("option",{value:_.code,children:_.name},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type"}),a.jsxs("select",{value:G.type,onChange:_=>ie({...G,type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select machine type..."}),(V[G.environment]||[]).map(_=>a.jsx("option",{value:_,children:_},_))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),a.jsx("input",{type:"number",placeholder:"100",value:G.capacity,onChange:_=>ie({...G,capacity:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Rate (/hr)"}),a.jsx("input",{type:"number",placeholder:"60",value:G.production_rate,onChange:_=>ie({...G,production_rate:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(be,{type:"button",onClick:()=>I(!1),variant:"outline",children:"Cancel"}),a.jsxs(be,{type:"submit",children:[a.jsx(wa,{className:"w-4 h-4 mr-2"}),"Add Machine"]})]})]})}),te&&xe&&a.jsx(Pt,{title:"Edit Machine",onClose:()=>X(!1),children:a.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Name"}),a.jsx("input",{type:"text",placeholder:"Machine Name",value:G.name,onChange:_=>ie({...G,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),a.jsxs("select",{value:G.environment,onChange:_=>ie({...G,environment:_.target.value,type:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Environment"}),f.map(_=>a.jsx("option",{value:_.code,children:_.name},_.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Changing environment will reset the machine type"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type"}),a.jsx("select",{value:G.type,onChange:_=>ie({...G,type:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:(V[G.environment]||[]).map(_=>a.jsx("option",{value:_,children:_},_))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),a.jsx("input",{type:"number",placeholder:"Capacity",value:G.capacity,onChange:_=>ie({...G,capacity:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Rate (/hr)"}),a.jsx("input",{type:"number",placeholder:"Production Rate",value:G.production_rate||"",onChange:_=>ie({...G,production_rate:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"border-t pt-6 mt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Ve,{className:"w-5 h-5 text-blue-600"}),"Workforce Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:[a.jsx(Ut,{className:"w-4 h-4 inline mr-1"}),"Operators per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"10",value:G.operators_per_shift??2,onChange:_=>{const F=_.target.value===""?"":Math.max(0,parseInt(_.target.value)||0);ie({...G,operators_per_shift:F})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Machine operators needed • Blank = N/A, 0 = Automated"})]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-orange-800 mb-2",children:[a.jsx(Jt,{className:"w-4 h-4 inline mr-1"}),"Hopper Loaders per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"5",value:G.hopper_loaders_per_shift??1,onChange:_=>{const F=_.target.value===""?"":Math.max(0,parseInt(_.target.value)||0);ie({...G,hopper_loaders_per_shift:F})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Material handling staff • Blank = N/A, 0 = Automated"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-green-800 mb-2",children:[a.jsx(tt,{className:"w-4 h-4 inline mr-1"}),"Packers per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"15",value:G.packers_per_shift??3,onChange:_=>{const F=_.target.value===""?"":Math.max(0,parseInt(_.target.value)||0);ie({...G,packers_per_shift:F})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Packaging staff needed • Blank = N/A, 0 = Automated"})]})]}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Total Workforce per Shift"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Combined staffing requirement"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(()=>{const _=G.operators_per_shift===""?0:G.operators_per_shift??2,F=G.hopper_loaders_per_shift===""?0:G.hopper_loaders_per_shift??1,me=G.packers_per_shift===""?0:G.packers_per_shift??3;return _+F+me})()}),a.jsx("div",{className:"text-sm text-gray-500",children:"people"})]})]})}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(I0,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"font-semibold text-gray-900",children:"2-2-2 Shift Cycle"}),a.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"Advanced"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Automatic crew rotation with continuous coverage"}),a.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"Configure detailed scheduling in Labor Planner →"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"shift_cycle_enabled",checked:G.shift_cycle_enabled||!1,onChange:_=>ie({...G,shift_cycle_enabled:_.target.checked}),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"shift_cycle_enabled",className:"text-sm font-medium text-gray-700",children:"Enable"})]})]}),G.shift_cycle_enabled&&a.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border border-indigo-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx(il,{className:"w-8 h-8 text-indigo-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Shift Cycle Enabled"}),a.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Configure detailed crew assignments and schedules in the Labor Planner"}),a.jsx("button",{type:"button",onClick:()=>window.location.href="/labor-planner",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:"Open Labor Planner →"})]})})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(be,{type:"button",onClick:()=>X(!1),variant:"outline",children:"Cancel"}),a.jsxs(be,{type:"submit",children:[a.jsx(zr,{className:"w-4 h-4 mr-2"}),"Update Machine"]})]})]})}),ue&&xe&&a.jsx(Pt,{title:"Change Machine Status",onClose:()=>re(!1),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:xe.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Current status: ",$(xe.status)]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(K).map(([_,F])=>{const me=F.icon;return a.jsxs(be,{onClick:()=>Q(_),variant:xe.status===_?"default":"outline",className:`${F.bg} ${F.text} border-2 ${F.border} h-16 flex flex-col items-center justify-center`,disabled:xe.status===_,children:[a.jsx(me,{className:"w-5 h-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:_.replace("_"," ").toUpperCase()})]},_)})}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx(be,{onClick:()=>re(!1),variant:"outline",children:"Cancel"})})]})})]})}function xp(){ps();const[i,o]=x.useState({orders:[],machines:[],assignments:[],employees:[],summary:{},archivedOrders:[]}),[f,d]=x.useState(!0),[u,v]=x.useState(!1),[j,k]=x.useState(null),[w,y]=x.useState("overview"),[p,R]=x.useState([]),[C,L]=x.useState(null),[M,Y]=x.useState(!1),[q,E]=x.useState(()=>{const b=new Date,g=b.getFullYear(),T=b.getMonth()+1,V=`${g}-${T.toString().padStart(2,"0")}-01`,K=b.toISOString().split("T")[0];return{start_date:V,end_date:K}}),P=(b,g="success")=>{k({message:b,type:g}),setTimeout(()=>k(null),3e3)},I=async(b=!1)=>{b?v(!0):d(!0);try{const g=`${q.start_date}T00:00:00`,T=`${q.end_date}T23:59:59`,V=new URLSearchParams({start_date:g,end_date:T}).toString(),[K,h,B,ae,se,ne,pe]=await Promise.all([le.get("/orders"),le.get("/machines"),le.get(`/analytics/summary?${V}`),le.get(`/analytics/downtime?${V}`),le.get(`/reports/downtime?${V}`),le.get("/users"),le.get(`/planner/assignments?date=${q.end_date}`)]);o({orders:K||[],machines:h||[],employees:ne||[],assignments:pe||[],summary:B?.summary||{},downtime:ae||{},downtimeRecords:se?.records||[],downtimeSummary:se?.summary||{},categoryBreakdown:se?.category_breakdown||{}})}catch(g){console.error("Failed to load analytics:",g),P("Failed to load analytics data","danger")}finally{d(!1),v(!1)}},te=()=>{I(!0)};x.useEffect(()=>{I()},[q]),x.useEffect(()=>{X()},[q]);const X=async()=>{try{const b=new URLSearchParams({start_date:q.start_date,end_date:q.end_date}).toString(),[g,T]=await Promise.all([le.get(`/orders/archived?${b}`).catch(()=>[]),le.get(`/reports/waste?${b}`).catch(()=>[])]),V=g||[];o(K=>({...K,orders:[...K.orders,...V],archivedOrders:V})),R(T||[]),console.log("Loaded archived orders:",V.length)}catch(b){console.error("Failed to load archived orders:",b);try{const g=new URLSearchParams({start_date:q.start_date,end_date:q.end_date,status:"completed"}).toString(),T=await le.get(`/orders?${g}&archived=true`);o(V=>({...V,orders:[...V.orders,...T||[]],archivedOrders:T||[]})),console.log("Loaded completed orders from alternative endpoint:",(T||[]).length)}catch(g){console.error("Alternative archived orders endpoint also failed:",g)}}},ue=async b=>{try{const g=await le.get(`/orders/${b.id}/waste`);L({order:b,wasteData:g||[],metrics:g?{totalWeight:g.reduce((T,V)=>T+(V.weight||0),0),itemCount:g.length,categories:[...new Set(g.map(T=>T.item_type))]}:{totalWeight:0,itemCount:0,categories:[]}}),Y(!0)}catch(g){console.error("Failed to load waste report:",g),P("Failed to load waste report","danger")}},re=()=>{const b=i.orders.filter(T=>T.status==="completed"),g=i.archivedOrders||[];return[...b,...g]},xe=()=>{try{const b=re();if(b.length===0){P("No completed orders to export","warning");return}const g=[["Order Number","Product","Completion Date","Target Qty","Actual Qty","Waste Items","Total Waste Weight","Waste Types"],...b.map(h=>{const B=h.waste_data||[],ae=B.reduce((ne,pe)=>ne+(pe.weight||0),0),se=[...new Set(B.map(ne=>ne.item_type))].join("; ");return[h.order_number||"N/A",h.product_name||"N/A",h.complete_time?Na.formatSASTDateTime(h.complete_time):"N/A",h.quantity||0,h.actual_quantity||0,B.length,ae,se||"No waste recorded"]})].map(h=>h.join(",")).join(`
`),T=new Blob([g],{type:"text/csv"}),V=URL.createObjectURL(T),K=document.createElement("a");K.href=V,K.download=`waste-reports-${q.start_date}-to-${q.end_date}.csv`,K.click(),URL.revokeObjectURL(V),P("Waste reports exported successfully","success")}catch(b){console.error("Export error:",b),P("Failed to export waste reports","danger")}},Z=x.useMemo(()=>{const{orders:b,machines:g}=i,T=b.length,V=b.filter(F=>F.status==="pending").length,K=b.filter(F=>F.status==="in_progress").length,h=b.filter(F=>F.status==="completed").length,B=b.filter(F=>F.status==="paused").length,ae=T>0?Math.round(h/T*100):0,se=g.length,ne=g.filter(F=>F.status==="available").length,pe=g.filter(F=>F.status==="in_use").length,de=g.filter(F=>F.status==="maintenance").length,Ce=g.filter(F=>F.status==="offline").length,ge=se>0?Math.round(pe/se*100):0,He=b.reduce((F,me)=>F+(parseInt(me.quantity)||0),0),Q=b.filter(F=>F.status==="completed").reduce((F,me)=>F+(parseInt(me.actual_quantity||me.quantity)||0),0),ke=b.reduce((F,me)=>{const Ze=me.priority||"normal";return F[Ze]=(F[Ze]||0)+1,F},{}),Oe=b.reduce((F,me)=>{const Ze=me.environment||"unknown";return F[Ze]=(F[Ze]||0)+1,F},{}),$=b.reduce((F,me)=>{const Ze=me.status||"unknown";return F[Ze]=(F[Ze]||0)+1,F},{}),he=g.reduce((F,me)=>{const Ze=me.environment||"unknown";return F[Ze]=(F[Ze]||0)+1,F},{}),_=Array.from({length:7},(F,me)=>{const Ze=new Date;Ze.setDate(Ze.getDate()-me);const ut=Ze.toISOString().split("T")[0],bs=b.filter(vt=>vt.created_at?.startsWith(ut)).length;return{date:ut,count:bs}}).reverse();return{totalOrders:T,pendingOrders:V,inProgressOrders:K,completedOrders:h,pausedOrders:B,completionRate:ae,totalMachines:se,availableMachines:ne,activeMachines:pe,maintenanceMachines:de,offlineMachines:Ce,utilizationRate:ge,totalQuantityOrdered:He,totalQuantityProduced:Q,priorityDistribution:ke,environmentDistribution:Oe,statusDistribution:$,machineEnvDistribution:he,recentTrend:_}},[i]),G=b=>{try{let g,T;if(b==="csv"){g=[["Metric","Value"],["Total Orders",Z.totalOrders],["Completed Orders",Z.completedOrders],["Completion Rate",`${Z.completionRate}%`],["Total Machines",Z.totalMachines],["Active Machines",Z.activeMachines],["Utilization Rate",`${Z.utilizationRate}%`],["Total Quantity Ordered",Z.totalQuantityOrdered],["Total Quantity Produced",Z.totalQuantityProduced]].map(ae=>ae.join(",")).join("\\n"),T=`analytics-${q.start_date}-to-${q.end_date}.csv`;const K=new Blob([g],{type:"text/csv"}),h=URL.createObjectURL(K),B=document.createElement("a");B.href=h,B.download=T,B.click(),URL.revokeObjectURL(h)}else{g=JSON.stringify({metrics:Z,dateRange:q},null,2),T=`analytics-${q.start_date}-to-${q.end_date}.json`;const V=new Blob([g],{type:"application/json"}),K=URL.createObjectURL(V),h=document.createElement("a");h.href=K,h.download=T,h.click(),URL.revokeObjectURL(K)}P(`Analytics exported as ${b.toUpperCase()}`,"success")}catch{P("Failed to export data","danger")}},ie=()=>{try{if(!i.downtimeRecords||i.downtimeRecords.length===0){P("No downtime records to export","warning");return}const b=[["Start Time","End Time","Duration (min)","Reason","Category","Order","Machine","Stopped By","Supervisor on Duty","Shift","Status","Notes"],...i.downtimeRecords.map(K=>[K.start_time||"N/A",K.end_time||"Active",K.duration||"N/A",K.reason||"N/A",K.category||"N/A",K.order_number||"N/A",K.machine_name||"N/A",K.stopped_by||"N/A",K.supervisor_on_duty||"N/A",K.shift||"N/A",K.status||"N/A",(K.notes||"").replace(/,/g,";")])].map(K=>K.join(",")).join(`
`),g=new Blob([b],{type:"text/csv"}),T=URL.createObjectURL(g),V=document.createElement("a");V.href=T,V.download=`downtime-report-${q.start_date}-to-${q.end_date}.csv`,V.click(),URL.revokeObjectURL(T),P("Downtime report exported successfully","success")}catch(b){console.error("Export error:",b),P("Failed to export downtime data","danger")}},ce=({data:b,title:g,color:T="#3b82f6"})=>{const V=x.useRef(null);return x.useEffect(()=>{if(!V.current||!b)return;const K=V.current,h=K.getContext("2d"),B=Object.keys(b),ae=Object.values(b),se=Math.max(...ae,1);if(h.clearRect(0,0,K.width,K.height),B.length===0){h.font="14px sans-serif",h.fillStyle="#6b7280",h.textAlign="center",h.fillText("No data available",K.width/2,K.height/2);return}const ne=K.height-80,pe=K.width-80,de=Math.min(60,pe/(B.length*1.5));h.strokeStyle="#e5e7eb",h.lineWidth=1;for(let Ce=0;Ce<=5;Ce++){const ge=40+Ce/5*ne;h.beginPath(),h.moveTo(50,ge),h.lineTo(K.width-20,ge),h.stroke(),h.font="11px sans-serif",h.fillStyle="#6b7280",h.textAlign="right",h.fillText(Math.round((5-Ce)/5*se),45,ge+4)}B.forEach((Ce,ge)=>{const He=ae[ge],Q=He/se*ne,ke=60+ge*(pe/B.length),Oe=40+ne-Q;h.fillStyle=T,h.fillRect(ke,Oe,de,Q),h.font="11px sans-serif",h.fillStyle="#374151",h.textAlign="center",h.fillText(He,ke+de/2,Oe-5),h.save(),h.translate(ke+de/2,K.height-20),h.rotate(-Math.PI/6),h.fillText(Ce.charAt(0).toUpperCase()+Ce.slice(1),0,0),h.restore()})},[b,T]),a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:g}),a.jsx("canvas",{ref:V,width:"400",height:"300",className:"w-full h-auto max-w-full"})]})},ve=({data:b,title:g})=>{const T=x.useRef(null),V=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];return x.useEffect(()=>{if(!T.current||!b)return;const K=T.current,h=K.getContext("2d"),B=K.width/2,ae=K.height/2,se=Math.min(B,ae)-40;h.clearRect(0,0,K.width,K.height);const ne=Object.values(b),pe=Object.keys(b),de=ne.reduce((ge,He)=>ge+He,0);if(de===0){h.font="14px sans-serif",h.fillStyle="#6b7280",h.textAlign="center",h.fillText("No data available",B,ae);return}let Ce=-Math.PI/2;ne.forEach((ge,He)=>{const Q=ge/de*2*Math.PI;h.beginPath(),h.moveTo(B,ae),h.arc(B,ae,se,Ce,Ce+Q),h.closePath(),h.fillStyle=V[He%V.length],h.fill(),h.strokeStyle="#ffffff",h.lineWidth=2,h.stroke();const ke=Ce+Q/2,Oe=B+Math.cos(ke)*(se*.7),$=ae+Math.sin(ke)*(se*.7),he=Math.round(ge/de*100);he>5&&(h.font="12px sans-serif",h.fillStyle="#ffffff",h.textAlign="center",h.fillText(`${he}%`,Oe,$)),Ce+=Q}),pe.forEach((ge,He)=>{const Q=20+He*20;h.fillStyle=V[He%V.length],h.fillRect(10,Q,15,15),h.fillStyle="#374151",h.font="12px sans-serif",h.textAlign="left",h.fillText(`${ge}: ${ne[He]}`,30,Q+12)})},[b]),a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:g}),a.jsx("canvas",{ref:T,width:"400",height:"300",className:"w-full h-auto max-w-full"})]})},O=({title:b,value:g,change:T,icon:V,color:K="gray"})=>{const h={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",red:"bg-red-50 text-red-600 border-red-200",purple:"bg-purple-50 text-purple-600 border-purple-200",gray:"bg-gray-50 text-gray-600 border-gray-200"};return a.jsx(Se,{className:`p-6 border-l-4 ${h[K]}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:b}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:g}),T!==void 0&&a.jsxs("div",{className:"flex items-center mt-2",children:[T>=0?a.jsx(nl,{className:"w-4 h-4 text-green-500 mr-1"}):a.jsx(so,{className:"w-4 h-4 text-red-500 mr-1"}),a.jsxs("span",{className:`text-sm ${T>=0?"text-green-600":"text-red-600"}`,children:[Math.abs(T),"% from last period"]})]})]}),a.jsx(V,{className:"w-8 h-8"})]})})};return f&&Object.keys(i).length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Loading analytics..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[j&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${j.type==="success"?"bg-green-100 text-green-800 border border-green-200":j.type==="danger"?"bg-red-100 text-red-800 border border-red-200":j.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:j.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Analytics & Reports"}),a.jsx(gn,{})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Production insights and real-time performance metrics"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(be,{onClick:te,disabled:u,variant:"outline",children:[a.jsx(Ke,{className:`w-4 h-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(be,{onClick:()=>G("csv"),variant:"outline",size:"sm",children:[a.jsx(la,{className:"w-4 h-4 mr-2"}),"CSV"]}),a.jsxs(be,{onClick:()=>G("json"),variant:"outline",size:"sm",children:[a.jsx(la,{className:"w-4 h-4 mr-2"}),"JSON"]})]})]})]}),a.jsx(Se,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(il,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{className:"font-medium text-gray-700",children:"Date Range:"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:q.start_date,onChange:b=>E({...q,start_date:b.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:q.end_date,onChange:b=>E({...q,end_date:b.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Period: ",Math.ceil((new Date(q.end_date)-new Date(q.start_date))/(1e3*60*60*24))," days"]})]})}),a.jsx(Se,{className:"p-1",children:a.jsx("div",{className:"flex gap-1",children:[{id:"overview",label:"Overview",icon:Jt},{id:"orders",label:"Order Analytics",icon:Kt},{id:"machines",label:"Machine Analytics",icon:Tr},{id:"labor",label:"Labor Analytics",icon:Ve},{id:"performance",label:"Performance",icon:nl},{id:"downtime",label:"Downtime Report",icon:Et},{id:"waste-reports",label:"Waste Reports",icon:Sf}].map(b=>{const g=b.icon;return a.jsxs("button",{onClick:()=>y(b.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${w===b.id?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[a.jsx(g,{className:"w-4 h-4"}),b.label]},b.id)})})}),w==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(O,{title:"Total Orders",value:Z.totalOrders,icon:Kt,color:"blue"}),a.jsx(O,{title:"Completion Rate",value:`${Z.completionRate}%`,icon:tt,color:"green"}),a.jsx(O,{title:"Machine Utilization",value:`${Z.utilizationRate}%`,icon:Tr,color:"purple"}),a.jsx(O,{title:"Active Machines",value:`${Z.activeMachines}/${Z.totalMachines}`,icon:yt,color:"yellow"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(ve,{data:Z.statusDistribution,title:"Order Status Distribution"}),a.jsx(ce,{data:Z.environmentDistribution,title:"Orders by Environment",color:"#10b981"})]})]}),w==="orders"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx(O,{title:"Pending Orders",value:Z.pendingOrders,icon:Ft,color:"gray"}),a.jsx(O,{title:"In Progress",value:Z.inProgressOrders,icon:Ka,color:"blue"}),a.jsx(O,{title:"Completed",value:Z.completedOrders,icon:tt,color:"green"}),a.jsx(O,{title:"Paused",value:Z.pausedOrders,icon:hn,color:"yellow"}),a.jsx(O,{title:"Total Quantity",value:Z.totalQuantityOrdered.toLocaleString(),icon:dn,color:"purple"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(ce,{data:Z.priorityDistribution,title:"Order Priority Distribution",color:"#f59e0b"}),a.jsx(ve,{data:Z.environmentDistribution,title:"Orders by Environment"})]})]}),w==="machines"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx(O,{title:"Total Machines",value:Z.totalMachines,icon:Tr,color:"gray"}),a.jsx(O,{title:"Available",value:Z.availableMachines,icon:tt,color:"green"}),a.jsx(O,{title:"In Use",value:Z.activeMachines,icon:yt,color:"blue"}),a.jsx(O,{title:"Maintenance",value:Z.maintenanceMachines,icon:Et,color:"yellow"}),a.jsx(O,{title:"Offline",value:Z.offlineMachines,icon:Ve,color:"red"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(ve,{data:{Available:Z.availableMachines,"In Use":Z.activeMachines,Maintenance:Z.maintenanceMachines,Offline:Z.offlineMachines},title:"Machine Status Distribution"}),a.jsx(ce,{data:Z.machineEnvDistribution,title:"Machines by Environment",color:"#8b5cf6"})]})]}),w==="performance"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(O,{title:"Quantity Produced",value:Z.totalQuantityProduced.toLocaleString(),icon:dn,color:"green"}),a.jsx(O,{title:"Production Efficiency",value:`${Math.round(Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100)}%`,icon:nl,color:"blue"}),a.jsx(O,{title:"Avg Orders/Day",value:Math.round(Z.totalOrders/30),icon:Kt,color:"purple"}),a.jsx(O,{title:"Machine Efficiency",value:`${Z.utilizationRate}%`,icon:Tr,color:"yellow"})]}),a.jsx("div",{className:"grid grid-cols-1 gap-6",children:a.jsx(ce,{data:Object.fromEntries(i.downtime?Object.entries(i.downtime):[["No Data",0]]),title:"Downtime by Reason (Minutes)",color:"#ef4444"})}),a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Recent Performance Summary"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Period"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Order Completion Rate"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[Z.completionRate,"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"85%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Xe,{variant:Z.completionRate>=85?"success":Z.completionRate>=70?"warning":"danger",children:Z.completionRate>=85?"Excellent":Z.completionRate>=70?"Good":"Needs Improvement"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Machine Utilization"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[Z.utilizationRate,"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"80%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Xe,{variant:Z.utilizationRate>=80?"success":Z.utilizationRate>=60?"warning":"danger",children:Z.utilizationRate>=80?"Excellent":Z.utilizationRate>=60?"Good":"Needs Improvement"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Production Efficiency"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[Math.round(Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"90%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Xe,{variant:Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100>=90?"success":Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100>=75?"warning":"danger",children:Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100>=90?"Excellent":Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100>=75?"Good":"Needs Improvement"})})]})]})]})})]})]}),w==="labor"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(O,{title:"Total Employees",value:i.employees.filter(b=>b.role!=="admin").length,icon:Ve,color:"blue"}),a.jsx(O,{title:"Assigned Today",value:i.assignments.length,icon:tt,color:"green"}),a.jsx(O,{title:"Unique Workers",value:new Set(i.assignments.map(b=>b.employee_id)).size,icon:yt,color:"purple"}),a.jsx(O,{title:"Utilization",value:`${Math.round(i.assignments.length/Math.max(i.machines.length,1)*100)}%`,icon:nl,color:"orange"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Employee Roles"}),a.jsx("div",{className:"space-y-3",children:["operator","supervisor","packer"].map(b=>{const g=i.employees.filter(V=>V.role===b).length,T=Math.round(g/Math.max(i.employees.filter(V=>V.role!=="admin").length,1)*100);return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600 capitalize",children:b}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-blue-500",style:{width:`${T}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 w-12",children:g})]})]},b)})})]}),a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Shift Distribution"}),a.jsx("div",{className:"space-y-3",children:["day","night"].map(b=>{const g=i.assignments.filter(V=>V.shift===b).length,T=Math.round(g/Math.max(i.assignments.length,1)*100);return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-600 capitalize",children:[b," Shift"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${b==="day"?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${T}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 w-12",children:g})]})]},b)})})]})]}),a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Recent Labor Assignments"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Machine"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.assignments.slice(0,10).map((b,g)=>{const T=i.employees.find(K=>K.id===b.employee_id),V=i.machines.find(K=>K.id==b.machine_id);return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T?.fullName||T?.username||"Unknown"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:T?.role||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:V?.name||`Machine ${b.machine_id}`}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:b.shift}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Xe,{variant:"success",children:"Active"})})]},g)})})]})})]})]}),w==="downtime"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(be,{onClick:ie,variant:"outline",children:[a.jsx(la,{className:"w-4 h-4 mr-2"}),"Export Downtime Report"]})}),i.downtimeSummary&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx(O,{title:"Total Stops",value:i.downtimeSummary.total_stops||0,icon:Et,color:"red"}),a.jsx(O,{title:"Active Stops",value:i.downtimeSummary.active_stops||0,icon:Ft,color:"yellow"}),a.jsx(O,{title:"Total Downtime",value:`${i.downtimeSummary.total_downtime_hours||0}h`,icon:so,color:"blue"}),a.jsx(O,{title:"Avg Duration",value:`${i.downtimeSummary.average_downtime_minutes||0}m`,icon:Jt,color:"purple"}),a.jsx(O,{title:"Resolved",value:i.downtimeSummary.resolved_stops||0,icon:tt,color:"green"})]}),i.categoryBreakdown&&Object.keys(i.categoryBreakdown).length>0&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(ce,{data:Object.fromEntries(Object.entries(i.categoryBreakdown).map(([b,g])=>[b,Math.round(g.total_minutes||0)])),title:"Downtime by Category (Minutes)",color:"#ef4444"}),a.jsx(ve,{data:Object.fromEntries(Object.entries(i.categoryBreakdown).map(([b,g])=>[b,g.count||0])),title:"Stop Count by Category"})]}),a.jsxs(Se,{children:[a.jsxs("div",{className:"p-6 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Recent Downtime Records"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",i.downtimeRecords?.length||0," records for selected period"]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Start Time","Duration","Reason","Category","Order","Machine","Stopped By","Supervisor","Shift","Status"].map(b=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:b},b))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:!i.downtimeRecords||i.downtimeRecords.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"10",className:"text-center py-10 text-gray-500",children:"No downtime records found for the selected period"})}):i.downtimeRecords.slice(0,20).map((b,g)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.start_time?Na.formatSASTDateTime(b.start_time):"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:b.duration?`${b.duration}m`:"Active"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Xe,{variant:b.reason?.includes("breakdown")||b.reason?.includes("safety")?"danger":b.reason?.includes("maintenance")||b.reason?.includes("material")?"warning":b.reason?.includes("break")||b.reason?.includes("shift")?"info":"default",size:"sm",children:b.reason?.replace(/_/g," ").toUpperCase()||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:b.category||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:b.order_number||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:b.machine_name||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:b.stopped_by||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:b.supervisor_on_duty||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:a.jsx(Xe,{variant:b.shift==="day"?"info":b.shift==="night"?"default":"warning",size:"sm",children:b.shift?b.shift.charAt(0).toUpperCase()+b.shift.slice(1):"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Xe,{variant:b.status==="Active"?"warning":"success",size:"sm",children:b.status||"N/A"})})]},b.id||g))})]})}),i.downtimeRecords&&i.downtimeRecords.length>20&&a.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 border-t",children:["Showing first 20 of ",i.downtimeRecords.length," records. Export for complete data."]})]})]}),w==="waste-reports"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Waste Reports"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View waste tracking data for completed production orders"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(be,{onClick:xe,variant:"outline",children:[a.jsx(la,{className:"w-4 h-4 mr-2"}),"Export Waste Data"]}),a.jsxs(be,{onClick:X,variant:"outline",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(O,{title:"Completed Orders",value:re().length,icon:tt,color:"green"}),a.jsx(O,{title:"Orders with Waste",value:re().filter(b=>b.waste_data&&b.waste_data.length>0).length,icon:Et,color:"yellow"}),a.jsx(O,{title:"Total Waste Weight",value:`${re().reduce((b,g)=>g.waste_data?b+g.waste_data.reduce((T,V)=>T+(V.weight||0),0):b,0).toFixed(2)} kg`,icon:Kt,color:"red"}),a.jsx(O,{title:"Waste Tracking Rate",value:`${re().length>0?Math.round(re().filter(b=>b.waste_data&&b.waste_data.length>0).length/re().length*100):0}%`,icon:dn,color:"blue"})]}),a.jsxs(Se,{children:[a.jsxs("div",{className:"p-6 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Completed Orders - Waste Tracking"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",(i.archivedOrders||[]).length+i.orders.filter(b=>b.status==="completed").length," completed orders for selected period"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Debug: Active orders: ",i.orders.length,", Archived orders: ",(i.archivedOrders||[]).length]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Order","Product","Completion Date","Quantity","Waste Items","Total Waste","Actions"].map(b=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:b},b))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.orders.filter(b=>b.status==="completed").length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"7",className:"text-center py-10 text-gray-500",children:[a.jsx(tt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsx("p",{children:"No completed orders found for the selected period"}),a.jsx("p",{className:"text-sm mt-2",children:"Adjust the date range to view completed orders"})]})}):i.orders.filter(b=>b.status==="completed").map((b,g)=>{const T=b.waste_data||[],V=T.reduce((h,B)=>h+(B.weight||0),0),K=T.length>0;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.order_number}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",b.id]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:b.product_name||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:b.complete_time?Na.formatSASTDateTime(b.complete_time):"N/A"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsxs("div",{children:[b.actual_quantity||b.quantity||0," units"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",b.quantity||0]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:T.length}),K?a.jsx(Xe,{variant:"warning",size:"sm",children:"Has Waste"}):a.jsx(Xe,{variant:"success",size:"sm",children:"No Waste"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:K?a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[V.toFixed(2)," kg"]}),a.jsx("div",{className:"text-xs text-gray-500",children:[...new Set(T.map(h=>h.item_type))].join(", ")})]}):a.jsx("span",{className:"text-gray-400",children:"No waste recorded"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs(be,{onClick:()=>ue(b),variant:"outline",size:"sm",disabled:!K,children:[a.jsx(gs,{className:"w-4 h-4 mr-1"}),K?"View Waste":"No Data"]})})]},b.id||g)})})]})})]}),i.orders.filter(b=>b.status==="completed"&&b.waste_data&&b.waste_data.length>0).length>0&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Waste by Category"}),a.jsx("div",{className:"space-y-3",children:(()=>{const b={};return i.orders.filter(g=>g.status==="completed"&&g.waste_data).forEach(g=>{g.waste_data.forEach(T=>{const V=T.item_type||"Unknown";b[V]=(b[V]||0)+(T.weight||0)})}),Object.entries(b).map(([g,T])=>{const V=Object.values(b).reduce((K,h)=>K+h,0)>0?Math.round(T/Object.values(b).reduce((K,h)=>K+h,0)*100):0;return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600",children:g}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-red-500",style:{width:`${V}%`}})}),a.jsxs("span",{className:"text-sm text-gray-500 w-16",children:[T.toFixed(2),"kg"]})]})]},g)})})()})]}),a.jsxs(Se,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent High-Waste Orders"}),a.jsx("div",{className:"space-y-3",children:i.orders.filter(b=>b.status==="completed"&&b.waste_data&&b.waste_data.length>0).sort((b,g)=>{const T=b.waste_data.reduce((K,h)=>K+(h.weight||0),0);return g.waste_data.reduce((K,h)=>K+(h.weight||0),0)-T}).slice(0,5).map(b=>{const g=b.waste_data.reduce((T,V)=>T+(V.weight||0),0);return a.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:b.order_number}),a.jsx("p",{className:"text-sm text-gray-600",children:b.product_name})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-medium text-red-600",children:[g.toFixed(2)," kg"]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[b.waste_data.length," items"]})]})]},b.id)})})]})]})]}),C&&a.jsx(Pt,{title:"Waste Report Details",onClose:()=>L(null),size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.order.order_number}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-600",children:["Product: ",a.jsx("span",{className:"font-medium",children:C.order.product_name})]}),a.jsxs("p",{className:"text-gray-600",children:["Completed: ",a.jsx("span",{className:"font-medium",children:C.order.complete_time?Na.formatSASTDateTime(C.order.complete_time):"N/A"})]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-600",children:["Quantity: ",a.jsxs("span",{className:"font-medium",children:[C.order.actual_quantity||C.order.quantity," units"]})]}),a.jsxs("p",{className:"text-gray-600",children:["Target: ",a.jsxs("span",{className:"font-medium",children:[C.order.quantity," units"]})]})]})]})]}),C.wasteData.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-red-600",children:C.metrics.totalWeight.toFixed(2)}),a.jsx("p",{className:"text-sm text-red-700",children:"Total Weight (kg)"})]}),a.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:C.metrics.itemCount}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Waste Items"})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:C.metrics.categories.length}),a.jsx("p",{className:"text-sm text-blue-700",children:"Categories"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Waste Items Breakdown"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.wasteData.map((b,g)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.jsx(Xe,{variant:"warning",size:"sm",children:b.item_type})}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:b.description||"No description"}),a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:b.weight||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:b.unit})]},g))})]})})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(tt,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Waste Recorded"}),a.jsx("p",{className:"text-gray-600",children:"This order was completed without recorded waste."})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsx(be,{onClick:()=>L(null),variant:"outline",children:"Close"})})]})})]})}function gp(){const[i,o]=x.useState(null),[f,d]=x.useState([]),[u,v]=x.useState([]),[j,k]=x.useState(!0),[w,y]=x.useState(null),[p,R]=x.useState("packaging"),[C,L]=x.useState([]),[M,Y]=x.useState(!1),[q,E]=x.useState(null),[P,I]=x.useState(!1),te=(G,ie="success")=>{y({message:G,type:ie}),setTimeout(()=>y(null),3e3)},X=()=>{const G=new Date,ie=G.getHours(),ce=ie>=6&&ie<18?"day":"night",ve=G.toISOString().split("T")[0];return{type:ce,date:ve,...{day:{start:"06:00",end:"18:00",label:"Day Shift"},night:{start:"18:00",end:"06:00",label:"Night Shift"}}[ce]}},ue=async()=>{try{k(!0);const G=await le.get("/environments");L(G||[]);const ie=await le.get(`/shifts/current?environment=${p}`);o(ie);const ce=await le.get(`/shifts/reports?environment=${p}&limit=10`);d(ce||[]);const ve=X(),O=await le.get(`/shifts/quantity-updates?shift_date=${ve.date}&shift_type=${ve.type}&environment=${p}`);v(O||[])}catch(G){console.error("Failed to load shift data:",G),te("Failed to load shift data","danger")}finally{k(!1)}},re=async()=>{try{if(I(!0),!i?.id){te("No current shift found","warning");return}const G=await le.post(`/shifts/${i.id}/generate`);o(G.report),te("Shift report generated successfully"),ue()}catch(G){console.error("Failed to generate shift report:",G),te("Failed to generate shift report","danger")}finally{I(!1)}},xe=G=>{const ce=[["Metric","Value"],["Shift Date",G.shift_date],["Shift Type",G.shift_type.toUpperCase()],["Environment",G.environment],["Total Orders",G.total_orders||0],["Completed Orders",G.completed_orders||0],["In Progress Orders",G.in_progress_orders||0],["Stopped Orders",G.stopped_orders||0],["Total Quantity Produced",G.total_quantity_produced||0],["Total Stops",G.total_stops||0],["Total Downtime (minutes)",G.total_downtime_minutes||0],["OEE Percentage",`${G.oee_percentage?.toFixed(1)||0}%`],["Efficiency Percentage",`${G.efficiency_percentage?.toFixed(1)||0}%`],["Quality Percentage",`${G.quality_percentage?.toFixed(1)||100}%`]].map(g=>g.join(",")).join("\\n"),ve=new Blob([ce],{type:"text/csv"}),O=URL.createObjectURL(ve),b=document.createElement("a");b.href=O,b.download=`shift-report-${G.shift_date}-${G.shift_type}-${G.environment}.csv`,b.click(),URL.revokeObjectURL(O),te("Shift report exported successfully")};x.useEffect(()=>{ue();const G=setInterval(ue,3e4);return()=>clearInterval(G)},[p]);const Z=X();return j?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Loading shift reports..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[w&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${w.type==="success"?"bg-green-100 text-green-800 border border-green-200":w.type==="danger"?"bg-red-100 text-red-800 border border-red-200":w.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:w.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Shift Reports"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time production shift tracking and automated reporting"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("select",{value:p,onChange:G=>R(G.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Environments"}),C.map(G=>a.jsx("option",{value:G.code,children:G.name},G.code))]}),a.jsxs(be,{onClick:ue,variant:"outline",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.jsxs(Se,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Current Shift - ",Z.label]}),a.jsx(Xe,{variant:"info",children:Z.date}),a.jsxs(Xe,{variant:"default",children:[Z.start," - ",Z.end]})]}),a.jsxs(be,{onClick:re,disabled:P,className:"bg-blue-600 text-white hover:bg-blue-700",children:[P?a.jsx(Ke,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]}),i&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.total_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.completed_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.in_progress_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.stopped_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Stopped"})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(i.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-sm text-gray-600",children:"Quantity Produced"})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.oee_percentage?`${i.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-sm text-gray-600",children:"OEE"})]})]})]}),a.jsxs(Se,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(yt,{className:"w-5 h-5"}),"Recent Quantity Updates (",u.length,")"]}),u.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(dn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No quantity updates recorded for current shift"})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:u.map((G,ie)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[G.order_number," - ",G.product_name]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[G.machine_name," • ",G.updated_by_name]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-bold text-gray-900",children:[G.previous_quantity," → ",G.new_quantity]}),a.jsx("div",{className:"text-sm text-gray-500",children:new Date(G.update_time).toLocaleTimeString()})]})]},ie))})]}),a.jsxs(Se,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(Sf,{className:"w-5 h-5"}),"Shift Reports History"]}),f.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(Ft,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No shift reports available"})]}):a.jsx("div",{className:"space-y-3",children:f.map(G=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[G.shift_date," - ",G.shift_type.toUpperCase()," Shift"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[G.environment," • ",G.supervisor_name||"No supervisor assigned"]})]}),a.jsxs("div",{className:"flex gap-4 text-sm",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-blue-600",children:G.total_orders||0}),a.jsx("div",{className:"text-gray-500",children:"Orders"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-green-600",children:G.completed_orders||0}),a.jsx("div",{className:"text-gray-500",children:"Completed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-purple-600",children:(G.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-gray-500",children:"Produced"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-orange-600",children:G.oee_percentage?`${G.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-gray-500",children:"OEE"})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(be,{onClick:()=>{E(G),Y(!0)},variant:"outline",size:"sm",children:[a.jsx(gs,{className:"w-4 h-4 mr-1"}),"View"]}),a.jsxs(be,{onClick:()=>xe(G),variant:"outline",size:"sm",children:[a.jsx(la,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})},G.id))})]}),M&&q&&a.jsx(Pt,{isOpen:M,onClose:()=>Y(!1),title:`Shift Report - ${q.shift_date} ${q.shift_type.toUpperCase()}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:q.total_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Orders"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:q.completed_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Completed"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:q.in_progress_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:q.stopped_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Stopped"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600",children:(q.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-600",children:"Quantity Produced"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-orange-600",children:q.oee_percentage?`${q.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-xs text-gray-600",children:"OEE"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Downtime Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:["Total Stops: ",a.jsx("span",{className:"font-medium",children:q.total_stops||0})]}),a.jsxs("div",{children:["Total Downtime: ",a.jsxs("span",{className:"font-medium",children:[q.total_downtime_minutes||0," minutes"]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Machine Utilization"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:["Active Machines: ",a.jsx("span",{className:"font-medium",children:q.total_machines_active||0})]}),a.jsxs("div",{children:["Available Machines: ",a.jsx("span",{className:"font-medium",children:q.total_machines_available||0})]})]})]}),q.summary_notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Summary Notes"}),a.jsx("p",{className:"text-sm text-gray-700",children:q.summary_notes})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs(be,{onClick:()=>xe(q),variant:"outline",children:[a.jsx(la,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),a.jsx(be,{onClick:()=>Y(!1),children:"Close"})]})]})})]})}function pp(){const[i,o]=x.useState([]),[f,d]=x.useState(!0),[u,v]=x.useState(!1),[j,k]=x.useState(!1),[w,y]=x.useState(null),[p,R]=x.useState({username:"",email:"",password:"",confirmPassword:"",role:"operator"}),[C,L]=x.useState("");ps();const{user:M}=Ja(),Y=async()=>{d(!0);try{const X=await le.get("/users");o(X)}catch(X){console.error("Failed to load users:",X)}finally{d(!1)}};x.useEffect(()=>{Y()},[]);const q=()=>{R({username:"",email:"",password:"",confirmPassword:"",role:"operator"}),L("")},E=async X=>{if(X.preventDefault(),L(""),p.password!==p.confirmPassword)return L("Passwords do not match");try{await le.post("/users",{username:p.username,email:p.email,password:p.password,role:p.role}),v(!1),q(),Y()}catch(ue){L(ue.message||"Failed to add user")}},P=async X=>{X.preventDefault(),L("");try{await le.put(`/users/${w.id}`,{email:p.email,role:p.role}),k(!1),q(),Y()}catch(ue){L(ue.message||"Failed to update user")}},I=async X=>{if(X===M.id)return alert("You cannot delete your own account.");if(window.confirm("Are you sure you want to delete this user?"))try{await le.delete(`/users/${X}`),Y()}catch(ue){alert("Failed to delete user: "+ue.message)}},te=X=>{const ue={admin:"bg-purple-100 text-purple-800",supervisor:"bg-blue-100 text-blue-800",operator:"bg-green-100 text-green-800",viewer:"bg-gray-100 text-gray-800"};return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ue[X]||""}`,children:X.toUpperCase()})};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),a.jsx(gn,{})]}),M?.role==="admin"&&a.jsx("button",{onClick:()=>{q(),v(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add New User"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["User","Email","Role","Status","Actions"].map(X=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:X},X))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(X=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.username}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:te(X.role)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.is_active?"Active":"Inactive"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:M?.role==="admin"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{y(X),R(X),k(!0)},className:"text-blue-600 hover:text-blue-800",children:"Edit"}),a.jsx("button",{onClick:()=>I(X.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},X.id))})]})}),u&&a.jsx(Pt,{title:"Add New User",onClose:()=>v(!1),children:a.jsxs("form",{onSubmit:E,className:"space-y-4",children:[C&&a.jsx("div",{className:"p-2 bg-red-100 text-red-700 rounded",children:C}),a.jsx("input",{type:"text",placeholder:"Username",value:p.username,onChange:X=>R({...p,username:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"email",placeholder:"Email",value:p.email,onChange:X=>R({...p,email:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"password",placeholder:"Password",value:p.password,onChange:X=>R({...p,password:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"password",placeholder:"Confirm Password",value:p.confirmPassword,onChange:X=>R({...p,confirmPassword:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsxs("select",{value:p.role,onChange:X=>R({...p,role:X.target.value}),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"admin",children:"Administrator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>v(!1),children:"Cancel"}),a.jsx("button",{type:"submit",children:"Add User"})]})]})}),j&&w&&a.jsx(Pt,{title:"Edit User",onClose:()=>k(!1),children:a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[C&&a.jsx("div",{className:"p-2 bg-red-100 text-red-700 rounded",children:C}),a.jsxs("div",{children:[a.jsx("label",{children:"Username"}),a.jsx("input",{type:"text",value:p.username,className:"w-full px-3 py-2 border rounded bg-gray-100",disabled:!0})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Email"}),a.jsx("input",{type:"email",value:p.email,onChange:X=>R({...p,email:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Role"}),a.jsxs("select",{value:p.role,onChange:X=>R({...p,role:X.target.value}),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"admin",children:"Administrator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>k(!1),children:"Cancel"}),a.jsx("button",{type:"submit",children:"Update User"})]})]})})]})}const lo=({title:i,children:o})=>a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i})}),a.jsx("div",{className:"px-4 py-5 sm:p-6",children:o})]}),yp=()=>{const{user:i,checkAuth:o}=Ja(),[f,d]=x.useState({email:"",fullName:"",phone:""}),[u,v]=x.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[j,k]=x.useState({text:"",type:"success"}),[w,y]=x.useState(!1),[p,R]=x.useState({});x.useEffect(()=>{i&&d({email:i.email||"",fullName:i.fullName||"",phone:i.phone||""})},[i]);const C=x.useCallback(E=>{const P={};return E.email?.trim()||(P.email="Email is required"),E.fullName?.trim()||(P.fullName="Full name is required"),E.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)&&(P.email="Please enter a valid email address"),P},[]),L=x.useCallback(async E=>{E.preventDefault(),k({text:"",type:"success"}),R({});const P=C(f);if(Object.keys(P).length>0){R(P);return}y(!0);try{await le.put("/settings/profile",f),k({text:"Profile updated successfully!",type:"success"}),await o()}catch(I){k({text:I.response?.data?.message||"Failed to update profile",type:"error"})}finally{y(!1)}},[f,C,o]),M=x.useCallback(E=>{if(!E)return{score:0,text:"",color:""};let P=0;const I={length:E.length>=8,lowercase:/[a-z]/.test(E),uppercase:/[A-Z]/.test(E),numbers:/\d/.test(E),special:/[!@#$%^&*(),.?":{}|<>]/.test(E)};return P=Object.values(I).filter(Boolean).length,{score:P,...{0:{text:"",color:""},1:{text:"Very Weak",color:"text-red-600"},2:{text:"Weak",color:"text-red-500"},3:{text:"Fair",color:"text-yellow-500"},4:{text:"Good",color:"text-blue-500"},5:{text:"Strong",color:"text-green-500"}}[P],checks:I}},[]),Y=x.useCallback(E=>{const P={};E.currentPassword||(P.currentPassword="Current password is required"),E.newPassword||(P.newPassword="New password is required");const I=M(E.newPassword);return E.newPassword&&I.score<3&&(P.newPassword="Password is too weak. Please include uppercase, lowercase, numbers, and special characters."),E.newPassword!==E.confirmPassword&&(P.confirmPassword="Passwords do not match"),P},[M]),q=x.useCallback(async E=>{E.preventDefault(),k({text:"",type:"success"}),R({});const P=Y(u);if(Object.keys(P).length>0){R(P);return}y(!0);try{await le.post("/settings/change-password",{currentPassword:u.currentPassword,newPassword:u.newPassword}),k({text:"Password changed successfully!",type:"success"}),v({currentPassword:"",newPassword:"",confirmPassword:""})}catch(I){k({text:I.response?.data?.message||"Failed to change password",type:"error"})}finally{y(!1)}},[u,Y]);return a.jsxs("div",{className:"space-y-6",children:[j.text&&a.jsx("div",{className:`p-3 rounded ${j.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.text}),a.jsx(lo,{title:"Profile Information",children:a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("input",{id:"fullName",type:"text",value:f.fullName,onChange:E=>d({...f,fullName:E.target.value}),className:`mt-1 block w-full border rounded-md shadow-sm px-3 py-2 ${p.fullName?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-describedby":p.fullName?"fullName-error":void 0,disabled:w}),p.fullName&&a.jsx("p",{id:"fullName-error",className:"mt-1 text-sm text-red-600",children:p.fullName})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),a.jsx("input",{id:"phone",type:"tel",value:f.phone,onChange:E=>d({...f,phone:E.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm px-3 py-2 focus:border-blue-500 focus:ring-blue-500",disabled:w})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("input",{id:"email",type:"email",value:f.email,onChange:E=>d({...f,email:E.target.value}),className:`mt-1 block w-full border rounded-md shadow-sm px-3 py-2 ${p.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-describedby":p.email?"email-error":void 0,disabled:w,required:!0}),p.email&&a.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",children:p.email})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[w&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w?"Updating...":"Update Profile"]})})]})}),a.jsx(lo,{title:"Change Password",children:a.jsxs("form",{onSubmit:q,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),a.jsx("input",{id:"currentPassword",type:"password",value:u.currentPassword,onChange:E=>v({...u,currentPassword:E.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${p.currentPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":p.currentPassword?"currentPassword-error":void 0,disabled:w,required:!0}),p.currentPassword&&a.jsx("p",{id:"currentPassword-error",className:"mt-1 text-sm text-red-600",children:p.currentPassword})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),a.jsx("input",{id:"newPassword",type:"password",value:u.newPassword,onChange:E=>v({...u,newPassword:E.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${p.newPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":p.newPassword?"newPassword-error":"newPassword-help",disabled:w,required:!0}),(()=>{const E=M(u.newPassword);return a.jsxs("div",{className:"mt-2",children:[u.newPassword&&a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Password strength:"}),a.jsx("span",{className:`text-xs font-medium ${E.color}`,children:E.text})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${E.score===1?"bg-red-400 w-1/5":E.score===2?"bg-red-400 w-2/5":E.score===3?"bg-yellow-400 w-3/5":E.score===4?"bg-blue-400 w-4/5":E.score===5?"bg-green-400 w-full":"w-0"}`})}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:a.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[a.jsx("span",{className:E.checks?.length?"text-green-600":"text-gray-400",children:"✓ 8+ characters"}),a.jsx("span",{className:E.checks?.uppercase?"text-green-600":"text-gray-400",children:"✓ Uppercase"}),a.jsx("span",{className:E.checks?.lowercase?"text-green-600":"text-gray-400",children:"✓ Lowercase"}),a.jsx("span",{className:E.checks?.numbers?"text-green-600":"text-gray-400",children:"✓ Numbers"}),a.jsx("span",{className:E.checks?.special?"text-green-600":"text-gray-400",children:"✓ Special chars"})]})})]}),a.jsx("p",{id:"newPassword-help",className:"text-xs text-gray-500",children:"Include uppercase, lowercase, numbers, and special characters"}),p.newPassword&&a.jsx("p",{id:"newPassword-error",className:"mt-1 text-sm text-red-600",children:p.newPassword})]})})()]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),a.jsx("input",{id:"confirmPassword",type:"password",value:u.confirmPassword,onChange:E=>v({...u,confirmPassword:E.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${p.confirmPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":p.confirmPassword?"confirmPassword-error":void 0,disabled:w,required:!0}),p.confirmPassword&&a.jsx("p",{id:"confirmPassword-error",className:"mt-1 text-sm text-red-600",children:p.confirmPassword})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[w&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w?"Changing...":"Change Password"]})})]})})]})},bp=()=>{const[i,o]=x.useState({maintenanceMode:!1,sessionTimeout:30}),[f,d]=x.useState(!0),[u,v]=x.useState({text:"",type:"success"}),[j,k]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const p=await le.get("/settings/system");o(R=>({...R,...p}))}catch(p){console.error("Failed to load system settings:",p)}finally{d(!1)}})()},[]);const w=x.useCallback(async y=>{y.preventDefault(),v({text:"",type:"success"}),k(!0);try{await le.put("/settings/system",i),v({text:"Settings saved successfully!",type:"success"})}catch(p){v({text:p.response?.data?.message||"Failed to save settings",type:"error"})}finally{k(!1)}},[i]);return f?a.jsxs("div",{className:"flex items-center justify-center p-8",role:"status","aria-label":"Loading system settings",children:[a.jsxs("svg",{className:"animate-spin h-6 w-6 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading system settings..."]}):a.jsxs(lo,{title:"System Configuration",children:[u.text&&a.jsx("div",{className:`p-3 mb-4 rounded ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,role:"alert","aria-live":"polite",children:u.text}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"maintenanceMode",className:"font-medium text-gray-700",children:"Maintenance Mode"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Prevents non-admins from accessing the system."})]}),a.jsx("input",{id:"maintenanceMode",type:"checkbox",checked:i.maintenanceMode,onChange:y=>o({...i,maintenanceMode:y.target.checked}),className:"h-4 w-4 rounded text-blue-600 border-gray-300"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"sessionTimeout",className:"block text-sm font-medium text-gray-700",children:"Session Timeout (minutes)"}),a.jsx("input",{id:"sessionTimeout",type:"number",value:i.sessionTimeout,onChange:y=>o({...i,sessionTimeout:parseInt(y.target.value)||30}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[j&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),j?"Saving...":"Save System Settings"]})})]})]})};function vp(){const[i,o]=x.useState("profile"),{user:f}=Ja(),d=x.useMemo(()=>[{id:"profile",label:"Profile"},f?.role==="admin"&&{id:"system",label:"System"}].filter(Boolean),[f?.role]),u=x.useCallback(v=>{o(v)},[]);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:d.map(v=>a.jsx("button",{onClick:()=>u(v.id),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i===v.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,role:"tab","aria-selected":i===v.id,"aria-controls":`${v.id}-panel`,children:v.label},v.id))})}),a.jsxs("div",{role:"tabpanel",children:[i==="profile"&&a.jsx("div",{id:"profile-panel","aria-labelledby":"profile-tab",children:a.jsx(yp,{})}),i==="system"&&f?.role==="admin"&&a.jsx("div",{id:"system-panel","aria-labelledby":"system-tab",children:a.jsx(bp,{})})]})]})}function jp(){const[i,o]=x.useState([]),[f,d]=x.useState(!0),[u,v]=x.useState(!1),[j,k]=x.useState(null),[w,y]=x.useState(""),[p,R]=x.useState("all"),[C,L]=x.useState("overview"),[M,Y]=x.useState([]),[q,E]=x.useState(!1),[P,I]=x.useState(null),[te,X]=x.useState({name:"",code:"",description:"",color:"blue",machine_types:[]}),[ue,re]=x.useState(!1),[xe,Z]=x.useState(!1),[G,ie]=x.useState(null),[ce,ve]=x.useState({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),[O,b]=x.useState({backup_frequency:"daily",session_timeout:24,max_login_attempts:5,maintenance_mode:!1}),g=($,he="success")=>{k({message:$,type:he}),setTimeout(()=>k(null),3e3)},T=async($=!1)=>{$?v(!0):d(!0);try{const[he,_]=await Promise.all([le.get("/users"),le.get("/environments").catch(()=>[])]);o(he),Y(_)}catch(he){console.error("Failed to load data:",he),g("Failed to load users","danger")}finally{d(!1),v(!1)}},V=()=>{T(!0)};x.useEffect(()=>{T()},[]);const K=async $=>{$.preventDefault();try{await le.post("/users",ce),re(!1),ve({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),T(),g("User created successfully")}catch(he){g("Failed to create user: "+he.message,"danger")}},h=async $=>{$.preventDefault();try{await le.put(`/users/${G.id}`,ce),re(!1),ie(null),ve({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),T(),g("User updated successfully")}catch(he){g("Failed to update user: "+he.message,"danger")}},B=async $=>{if(window.confirm("Are you sure you want to delete this user?"))try{await le.delete(`/users/${$}`),T(),g("User deleted successfully")}catch(he){g("Failed to delete user: "+he.message,"danger")}},ae=$=>{ie($),ve({username:$.username,email:$.email,password:"",role:$.role,employee_code:$.employee_code||"",company:$.company||"Workforce"}),re(!0)},se=async $=>{$.preventDefault();try{await le.post("/environments",te),E(!1),X({name:"",code:"",description:"",color:"blue",machine_types:[]}),T(),g("Environment created successfully")}catch(he){g("Failed to create environment: "+he.message,"danger")}},ne=async $=>{$.preventDefault();try{await le.put(`/environments/${P.id}`,te),E(!1),I(null),X({name:"",code:"",description:"",color:"blue",machine_types:[]}),T(),g("Environment updated successfully")}catch(he){g("Failed to update environment: "+he.message,"danger")}},pe=async $=>{if(window.confirm("Are you sure you want to delete this environment? This action cannot be undone."))try{await le.delete(`/environments/${$}`),T(),g("Environment deleted successfully")}catch(he){g("Failed to delete environment: "+he.message,"danger")}},de=$=>{I($);let he=[];try{he=typeof $.machine_types=="string"?JSON.parse($.machine_types):$.machine_types||[]}catch(_){console.error("Failed to parse machine types:",_),he=[]}X({name:$.name,code:$.code,description:$.description||"",color:$.color||"blue",machine_types:he}),E(!0)},Ce=x.useMemo(()=>{let $=i;return p!=="all"&&($=$.filter(he=>he.role===p)),w&&($=$.filter(he=>he.username.toLowerCase().includes(w.toLowerCase())||he.email.toLowerCase().includes(w.toLowerCase())||he.employee_code&&he.employee_code.toLowerCase().includes(w.toLowerCase()))),$},[i,p,w]),ge=x.useMemo(()=>{const $=i.length,he=i.filter(ut=>ut.is_active!==0).length,_=i.filter(ut=>ut.role==="admin").length,F=i.filter(ut=>ut.role==="supervisor").length,me=i.filter(ut=>ut.role==="operator").length,Ze=i.filter(ut=>ut.role==="viewer").length;return{total:$,active:he,admins:_,supervisors:F,operators:me,viewers:Ze}},[i]),He=$=>{const _={admin:{variant:"danger",icon:Rr},supervisor:{variant:"warning",icon:na},operator:{variant:"info",icon:Ve},viewer:{variant:"default",icon:gs}}[$]||{variant:"default",icon:Ve},F=_.icon;return a.jsxs(Xe,{variant:_.variant,children:[a.jsx(F,{className:"w-3 h-3 mr-1"}),$.toUpperCase()]})},Q=$=>a.jsxs(Xe,{variant:$?"success":"danger",children:[$?a.jsx(na,{className:"w-3 h-3 mr-1"}):a.jsx(hg,{className:"w-3 h-3 mr-1"}),$?"ACTIVE":"INACTIVE"]}),ke=()=>a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ve,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:ge.total})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:ge.active})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Rr,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Admins"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:ge.admins})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Supervisors"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:ge.supervisors})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ve,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Operators"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ge.operators})]})]})}),a.jsx(Se,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gs,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Viewers"}),a.jsx("p",{className:"text-2xl font-bold text-gray-600",children:ge.viewers})]})]})})]}),Oe=({title:$,description:he,icon:_,onClick:F,color:me="gray"})=>{const Ze={blue:"border-blue-200 bg-blue-50 hover:bg-blue-100 text-blue-600",green:"border-green-200 bg-green-50 hover:bg-green-100 text-green-600",yellow:"border-yellow-200 bg-yellow-50 hover:bg-yellow-100 text-yellow-600",red:"border-red-200 bg-red-50 hover:bg-red-100 text-red-600",purple:"border-purple-200 bg-purple-50 hover:bg-purple-100 text-purple-600",gray:"border-gray-200 bg-gray-50 hover:bg-gray-100 text-gray-600"};return a.jsx(Se,{className:`p-6 border-l-4 cursor-pointer transition-all duration-300 hover:shadow-lg ${Ze[me]}`,onClick:F,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(_,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:$}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:he})]})]})})};return f&&i.length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Ke,{className:"w-5 h-5 animate-spin"}),"Loading admin panel..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[j&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${j.type==="success"?"bg-green-100 text-green-800 border border-green-200":j.type==="danger"?"bg-red-100 text-red-800 border border-red-200":j.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:j.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Panel"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system settings, users, and administration"})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(be,{onClick:V,disabled:u,variant:"outline",children:[a.jsx(Ke,{className:`w-4 h-4 mr-2 ${u?"animate-spin":""}`}),"Refresh"]})})]}),a.jsx(Se,{className:"p-1",children:a.jsx("div",{className:"flex gap-1",children:[{id:"overview",label:"Overview",icon:Jt},{id:"users",label:"User Management",icon:Ve},{id:"environments",label:"Environments",icon:Ut},{id:"settings",label:"System Settings",icon:Ut},{id:"tools",label:"Admin Tools",icon:qr}].map($=>{const he=$.icon;return a.jsxs("button",{onClick:()=>L($.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${C===$.id?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[a.jsx(he,{className:"w-4 h-4"}),$.label]},$.id)})})}),C==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(ke,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Oe,{title:"User Management",description:"Add, edit, and manage user accounts",icon:Ve,onClick:()=>L("users"),color:"blue"}),a.jsx(Oe,{title:"System Settings",description:"Configure system parameters",icon:Ut,onClick:()=>L("settings"),color:"green"}),a.jsx(Oe,{title:"Database Backup",description:"Backup and restore data",icon:T0,onClick:()=>g("Backup functionality coming soon","info"),color:"yellow"}),a.jsx(Oe,{title:"Activity Logs",description:"View system activity and logs",icon:yt,onClick:()=>g("Activity logs coming soon","info"),color:"purple"}),a.jsx(Oe,{title:"System Reports",description:"Generate comprehensive reports",icon:Jt,onClick:()=>g("Reports functionality coming soon","info"),color:"red"}),a.jsx(Oe,{title:"Maintenance Tools",description:"System maintenance and utilities",icon:qr,onClick:()=>L("tools"),color:"gray"})]})]}),C==="users"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(ke,{}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),a.jsxs(be,{onClick:()=>re(!0),children:[a.jsx(ao,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),a.jsx(Se,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:$=>y($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(co,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{value:p,onChange:$=>R($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsx("div",{className:"flex items-center justify-center md:justify-start",children:a.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",Ce.length," of ",i.length," users"]})})]})}),a.jsx(Se,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Username","Email","Employee Code","Role","Status","Last Login","Actions"].map($=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:$},$))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ce.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"7",className:"text-center py-10",children:[a.jsx(Ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No users found"}),a.jsxs(be,{onClick:()=>re(!0),size:"sm",children:[a.jsx(ao,{className:"w-4 h-4 mr-2"}),"Add First User"]})]})}):Ce.map($=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:$.username})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:$.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:$.employee_code||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:He($.role)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Q($.is_active)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:$.last_login?new Date($.last_login).toLocaleDateString():"Never"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[a.jsx(be,{onClick:()=>ae($),size:"sm",variant:"outline",children:a.jsx(zr,{className:"w-4 h-4"})}),a.jsx(be,{onClick:()=>B($.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:a.jsx(Ur,{className:"w-4 h-4"})})]})]},$.id))})]})})})]}),C==="environments"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Environment Management"}),a.jsx("p",{className:"text-gray-600",children:"Configure production environments and their machine types"})]}),a.jsxs(be,{onClick:()=>{X({name:"",code:"",description:"",color:"blue",machine_types:[]}),I(null),E(!0)},children:[a.jsx(wa,{className:"w-4 h-4 mr-2"}),"Add Environment"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.length===0?a.jsxs(Se,{className:"col-span-full p-12 text-center",children:[a.jsx(Ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No environments configured"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production environment to get started"}),a.jsxs(be,{onClick:()=>{X({name:"",code:"",description:"",color:"blue",machine_types:[]}),I(null),E(!0)},children:[a.jsx(wa,{className:"w-4 h-4 mr-2"}),"Add First Environment"]})]}):M.map($=>a.jsxs(Se,{className:`p-6 border-l-4 border-${$.color||"blue"}-200 hover:shadow-lg transition-all duration-300`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:$.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-2 uppercase font-mono",children:$.code}),$.description&&a.jsx("p",{className:"text-sm text-gray-600",children:$.description})]}),a.jsx(Xe,{variant:$.color==="blue"?"info":$.color==="green"?"success":$.color==="yellow"?"warning":"default",children:$.code})]}),(()=>{let he=[];try{he=typeof $.machine_types=="string"?JSON.parse($.machine_types):$.machine_types||[]}catch(_){console.error("Failed to parse machine types:",_),he=[]}return he&&he.length>0&&a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Machine Types:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[he.slice(0,3).map((_,F)=>a.jsx(Xe,{variant:"default",size:"sm",children:_},F)),he.length>3&&a.jsxs(Xe,{variant:"default",size:"sm",children:["+",he.length-3," more"]})]})]})})(),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(be,{onClick:()=>de($),variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(zr,{className:"w-4 h-4 mr-1"}),"Edit"]}),a.jsx(be,{onClick:()=>pe($.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",children:a.jsx(Ur,{className:"w-4 h-4"})})]})]},$.id))})]}),C==="settings"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"System Settings"}),a.jsx("p",{className:"text-gray-600",children:"Configure system parameters and preferences"})]}),a.jsx(Se,{className:"p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),a.jsxs("select",{value:O.backup_frequency,onChange:$=>b({...O,backup_frequency:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"hourly",children:"Hourly"}),a.jsx("option",{value:"daily",children:"Daily"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"monthly",children:"Monthly"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (hours)"}),a.jsx("input",{type:"number",value:O.session_timeout,onChange:$=>b({...O,session_timeout:parseInt($.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"72"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Login Attempts"}),a.jsx("input",{type:"number",value:O.max_login_attempts,onChange:$=>b({...O,max_login_attempts:parseInt($.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"3",max:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Mode"}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("button",{onClick:()=>b({...O,maintenance_mode:!O.maintenance_mode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${O.maintenance_mode?"bg-blue-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${O.maintenance_mode?"translate-x-6":"translate-x-1"}`})}),a.jsx("span",{className:"text-sm text-gray-600",children:O.maintenance_mode?"Enabled":"Disabled"})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsxs(be,{onClick:()=>g("Settings saved successfully"),children:[a.jsx(Or,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})})]}),C==="tools"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Admin Tools"}),a.jsx("p",{className:"text-gray-600",children:"System maintenance and administrative utilities"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Oe,{title:"Export Users",description:"Export user data to CSV/Excel",icon:la,onClick:()=>g("Export functionality coming soon","info"),color:"blue"}),a.jsx(Oe,{title:"Import Users",description:"Import users from CSV/Excel",icon:Ef,onClick:()=>g("Import functionality coming soon","info"),color:"green"}),a.jsx(Oe,{title:"Clear Cache",description:"Clear system cache and temporary files",icon:Ke,onClick:()=>g("Cache cleared successfully"),color:"yellow"}),a.jsx(Oe,{title:"System Health",description:"Check system health and status",icon:yt,onClick:()=>g("System health check completed","success"),color:"purple"}),a.jsx(Oe,{title:"Security Audit",description:"Run security audit and checks",icon:Rr,onClick:()=>g("Security audit initiated","info"),color:"red"}),a.jsx(Oe,{title:"Log Analysis",description:"Analyze system logs and errors",icon:Jt,onClick:()=>g("Log analysis coming soon","info"),color:"gray"})]})]}),q&&a.jsx(Pt,{title:P?"Edit Environment":"Add New Environment",onClose:()=>{E(!1),I(null),X({name:"",code:"",description:"",color:"blue",machine_types:[]})},children:a.jsxs("form",{onSubmit:P?ne:se,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Name"}),a.jsx("input",{type:"text",placeholder:"e.g. Blending Department",value:te.name,onChange:$=>X({...te,name:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Code"}),a.jsx("input",{type:"text",placeholder:"e.g. blending",value:te.code,onChange:$=>X({...te,code:$.target.value.toLowerCase().replace(/\s+/g,"_")}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used internally (lowercase, no spaces)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx("textarea",{placeholder:"Brief description of this environment",value:te.description,onChange:$=>X({...te,description:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),a.jsxs("select",{value:te.color,onChange:$=>X({...te,color:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"blue",children:"Blue"}),a.jsx("option",{value:"green",children:"Green"}),a.jsx("option",{value:"yellow",children:"Yellow"}),a.jsx("option",{value:"purple",children:"Purple"}),a.jsx("option",{value:"red",children:"Red"}),a.jsx("option",{value:"gray",children:"Gray"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Types"}),a.jsx("textarea",{placeholder:"Enter machine types, one per line (e.g., Bulk Line, Canning line, etc.)",value:te.machine_types.join(`
`),onChange:$=>X({...te,machine_types:$.target.value.split(`
`).filter(he=>he.trim())}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"4"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"One machine type per line"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(be,{type:"button",onClick:()=>{E(!1),I(null),X({name:"",code:"",description:"",color:"blue",machine_types:[]})},variant:"outline",children:"Cancel"}),a.jsxs(be,{type:"submit",children:[P?a.jsx(Or,{className:"w-4 h-4 mr-2"}):a.jsx(wa,{className:"w-4 h-4 mr-2"}),P?"Update Environment":"Create Environment"]})]})]})}),ue&&a.jsx(Pt,{title:G?"Edit User":"Add New User",onClose:()=>{re(!1),ie(null),ve({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"})},children:a.jsxs("form",{onSubmit:G?h:K,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),a.jsx("input",{type:"text",placeholder:"Username",value:ce.username,onChange:$=>ve({...ce,username:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Code"}),a.jsx("input",{type:"text",placeholder:"1234",value:ce.employee_code,onChange:$=>ve({...ce,employee_code:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",placeholder:"user@example.com",value:ce.email,onChange:$=>ve({...ce,email:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",G&&"(leave blank to keep current)"]}),a.jsx("input",{type:"password",placeholder:"Password",value:ce.password,onChange:$=>ve({...ce,password:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!G})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:ce.role,onChange:$=>ve({...ce,role:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),a.jsx("input",{type:"text",placeholder:"Company name",value:ce.company,onChange:$=>ve({...ce,company:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(be,{type:"button",onClick:()=>{re(!1),ie(null),ve({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"})},variant:"outline",children:"Cancel"}),a.jsxs(be,{type:"submit",children:[G?a.jsx(Or,{className:"w-4 h-4 mr-2"}):a.jsx(ao,{className:"w-4 h-4 mr-2"}),G?"Update User":"Create User"]})]})]})})]})}const Mf=(i,o)=>{const f=i.map(k=>Object.values(k).join(",")).join(`
`),u=Object.keys(i[0]||{}).join(",")+`
`+f,v=new Blob([u],{type:"text/csv;charset=utf-8;"}),j=document.createElement("a");j.href=URL.createObjectURL(v),j.download=o,j.click()},Np=(i,o)=>{const f=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),d=document.createElement("a");d.href=URL.createObjectURL(f),d.download=o,d.click()},wp=(i,o)=>{if(!window.XLSX){console.warn("XLSX library not available, falling back to CSV export");const y=[...i.supervisors.map(p=>({Type:"Supervisor","Employee Code":p.employee_code||"N/A",Name:p.fullName||p.name,Machine:"N/A",Position:"Supervisor",Shift:p.shift,Company:"N/A",Status:p.status,Date:o})),...i.assignments.map(p=>({Type:"Employee","Employee Code":p.employee_code||"N/A",Name:ho(p),Machine:p.machine||"N/A",Position:p.position?p.position:p.role?p.role:"Operator",Shift:p.shift,Company:p.company||"N/A",Status:p.status,Date:o})),...i.attendance.map(p=>({Type:"Attendance",Name:p.name,"Employee Code":"N/A",Machine:"N/A","Production Area":p.production_area||"N/A",Position:p.position||"N/A",Shift:p.shift,Status:p.status,Date:o}))];Mf(y,`labour-layout-${o}.csv`);return}const f=window.XLSX.utils.book_new(),d=new Date(o),u=d.toLocaleDateString("en-US",{weekday:"long"}),v=d.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),j=[];j.push(["DAILY LABOUR LAYOUT REPORT"]),j.push([]),j.push(["Day of Week:",u]),j.push(["Date:",v]),j.push(["Total Supervisors:",i.summary.total_supervisors||0]),j.push(["Total Assignments:",i.summary.total_assignments||0]),j.push(["Total Attendance Records:",i.summary.total_attendance||0]),j.push([]),i.supervisors.length>0&&(j.push(["SUPERVISORS ON DUTY"]),j.push(["Employee Code","Name","Area","Position","Shift","Status"]),i.supervisors.forEach(y=>{j.push([y.employee_code||"N/A",y.fullName||y.name,"Supervision","Supervisor",y.shift,y.status])})),i.assignments.length>0&&(j.push([]),j.push(["ASSIGNED EMPLOYEES"]),j.push(["Employee Code","Name","Machine","Position","Shift","Company","Status"]),i.assignments.forEach(y=>{j.push([y.employee_code||"N/A",y.fullName||y.name,y.machine||"N/A",y.position?y.position:y.role?y.role:"Operator",y.shift,y.company||"N/A",y.status])})),i.attendance.length>0&&(j.push([]),j.push(["ATTENDANCE RECORDS"]),j.push(["Name","Production Area","Position","Shift","Status"]),i.attendance.forEach(y=>{j.push([y.name,y.production_area||"N/A",y.position||"N/A",y.shift,y.status])}));const k=window.XLSX.utils.aoa_to_sheet(j),w=[{wch:20},{wch:18},{wch:15},{wch:10},{wch:12}];k["!cols"]=w,window.XLSX.utils.book_append_sheet(f,k,"Labour Layout"),window.XLSX.writeFile(f,`labour-layout-${o}.xlsx`)};function Sp(){const[i,o]=x.useState({supervisors:[],assignments:[],attendance:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}}),[f,d]=x.useState(!0),[u,v]=x.useState(()=>{const P=new URLSearchParams(window.location.search).get("date");return P||new Date().toISOString().split("T")[0]}),[j,k]=x.useState(!1),[w,y]=x.useState("excel"),[p,R]=x.useState("all"),[C,L]=x.useState("all"),M=async E=>{d(!0);try{const P=await le.get("/labour/roster?date="+E);o(P)}catch(P){console.error("Failed to fetch roster for "+E+":",P);try{const I=await le.get("/labour/today");o({supervisors:[],assignments:[],attendance:I,machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:I.length,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}})}catch(I){console.error("Failed to fetch roster:",I),alert("Failed to load roster. Please check the server connection."),o({supervisors:[],assignments:[],attendance:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}})}}finally{d(!1)}};x.useEffect(()=>{M(u)},[u]);const Y=async E=>{try{await le.put("/labour/verify/"+E),M(u)}catch(P){alert("Failed to verify worker: "+P.message)}},q=async()=>{try{if(d(!0),w==="excel")wp(i,u),alert(`Exported labour layout for ${u}`);else{const E=[...i.supervisors.map(I=>({Type:"Supervisor",Name:I.fullName||I.name,"Employee Code":I.employee_code||"N/A",Machine:"N/A","Production Area":"Supervision",Position:I.position,Shift:I.shift,Status:I.status,Date:u})),...i.assignments.map(I=>({Type:"Employee",Name:ho(I),"Employee Code":I.employee_code||"N/A",Machine:I.machine||"N/A","Production Area":I.production_area||"N/A",Position:I.position,Shift:I.shift,Status:I.status,Date:u})),...i.attendance.map(I=>({Type:"Attendance",Name:I.name,"Employee Code":"N/A",Machine:"N/A","Production Area":I.production_area||"N/A",Position:I.position||"N/A",Shift:I.shift,Status:I.status,Date:u}))],P=`labour-layout-${u}.${w}`;w==="csv"?Mf(E,P):Np(E,P),alert(`Exported ${E.length} records to ${w.toUpperCase()}`)}k(!1)}catch(E){console.error("Export error:",E),alert("Export failed: "+E.message)}finally{d(!1)}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-200 text-sm mb-2",children:[a.jsx("span",{className:"cursor-pointer hover:text-white transition-colors",onClick:()=>window.location.href="/labor-planner?date="+u,children:"Labor Planner"}),a.jsx("span",{children:">"}),a.jsx("span",{className:"text-white font-medium",children:"Layout View"}),a.jsx("span",{className:"ml-2 px-2 py-1 bg-green-500 bg-opacity-20 text-green-200 rounded-full text-xs",children:"Live Data"})]}),a.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[a.jsx(Ve,{className:"w-8 h-8"}),"Daily Labour Layout"]}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Real-time workforce management and reporting"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(il,{className:"w-4 h-4"}),a.jsx("input",{type:"date",value:u,onChange:E=>v(E.target.value),className:"bg-transparent text-white placeholder-blue-200 border-none outline-none text-sm font-medium"})]}),a.jsxs("button",{onClick:()=>window.location.href="/labor-planner?date="+u,className:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(_f,{className:"w-4 h-4"}),"Plan Workforce"]}),a.jsxs("button",{onClick:()=>k(!0),className:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(la,{className:"w-4 h-4"}),"Export"]}),a.jsxs("button",{onClick:()=>M(u),className:"bg-white bg-opacity-10 hover:bg-white hover:bg-opacity-20 backdrop-blur-sm px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(Ke,{className:"w-4 h-4"}),"Refresh"]})]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-blue-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Supervisors"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_supervisors||0})]}),a.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:a.jsx(na,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-green-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-600",children:"Assignments"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_assignments||0})]}),a.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:a.jsx(mn,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Machines Active"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_machines_in_use||0})]}),a.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:a.jsx(Ut,{className:"w-6 h-6 text-orange-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Attendance"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_attendance||0})]}),a.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:a.jsx(gs,{className:"w-6 h-6 text-purple-600"})})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Workforce Overview"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u," • ",(i.summary?.total_supervisors||0)+(i.summary?.total_assignments||0)+(i.summary?.total_attendance||0)+(i.summary?.total_machines_in_use||0)," total records"]})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("select",{value:p,onChange:E=>R(E.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Shifts"}),a.jsx("option",{value:"day",children:"Day Shift"}),a.jsx("option",{value:"night",children:"Night Shift"})]})}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("select",{value:C,onChange:E=>L(E.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"Machine [all]"}),Array.from(new Set(i.assignments?.map(E=>E.machine).filter(E=>E))).sort().map((E,P)=>a.jsx("option",{value:E,children:E},P))]})})]})]})})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:a.jsx("div",{className:"p-6",children:f?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-500 mt-3",children:"Loading workforce data..."})]}):a.jsxs("div",{className:"space-y-8",children:[i.supervisors&&i.supervisors.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(Ve,{className:"w-5 h-5 text-blue-600"})}),"Supervisors on Duty"]}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee Code"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Area"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Position"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-blue-100",children:i.supervisors.filter(E=>p==="all"?!0:E.shift===p).map(E=>a.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600 font-mono font-semibold",children:E.employee_code||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:a.jsx(Ve,{className:"w-4 h-4 text-blue-600"})}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:E.fullName||E.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:"Supervision"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 font-medium",children:"Supervisor"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${E.shift==="day"?"bg-amber-100 text-amber-800":"bg-indigo-100 text-indigo-800"}`,children:E.shift==="day"?"Day Shift":"Night Shift"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-800",children:E.status})})]},`supervisor-${E.id}`))})]})})})]}),i.assignments&&i.assignments.filter(E=>{const P=p==="all"?!0:E.shift===p,I=C==="all"?!0:E.machine===C;return P&&I}).length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:a.jsx(mn,{className:"w-5 h-5 text-green-600"})}),"Assigned Employees"]}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee Code"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Machine"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Position"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Company"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:i.assignments.filter(E=>{const P=p==="all"?!0:E.shift===p,I=C==="all"?!0:E.machine===C;return P&&I}).map(E=>a.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600 font-mono font-semibold",children:E.employee_code||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-green-100 rounded-full p-2 mr-3",children:a.jsx(Ve,{className:"w-4 h-4 text-green-600"})}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:E.fullName||E.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 font-medium",children:E.machine||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:E.position?E.position:E.role?E.role:"Operator"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${E.shift==="day"?"bg-amber-100 text-amber-800":"bg-indigo-100 text-indigo-800"}`,children:E.shift==="day"?"Day Shift":"Night Shift"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:E.company||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${E.status==="present"?"bg-emerald-100 text-emerald-800":E.status==="absent"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:E.status})})]},`assignment-${E.id}`))})]})})})]}),i.attendance&&i.attendance.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[a.jsx(na,{className:"w-5 h-5"}),"Attendance Records"]}),a.jsx("div",{className:"bg-purple-50 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-purple-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Name"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Production Area"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Position"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Shift"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Status"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-purple-700 uppercase",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-purple-100",children:i.attendance.map(E=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:E.name}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600",children:E.production_area||"N/A"}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600",children:E.position||"N/A"}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-600",children:E.shift}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E.status==="present"?"bg-green-100 text-green-800":E.status==="absent"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:E.status})}),a.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:E.status==="pending"&&a.jsx("button",{onClick:()=>Y(E.id),className:"px-2 py-1 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200",children:"Verify Arrival"})})]},`attendance-${E.id}`))})]})})]}),(i.supervisors?i.supervisors.length:0)===0&&(i.assignments?i.assignments.length:0)===0&&(i.attendance?i.attendance.length:0)===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Ve,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsxs("p",{children:["No labour data found for ",u]}),a.jsx("p",{className:"text-sm",children:"Try selecting a different date or check if data has been entered for this date."})]})]})})})]})]}),j&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export Labour Layout"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),a.jsxs("select",{value:w,onChange:E=>y(E.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[a.jsx("option",{value:"excel",children:"Excel (.xlsx)"}),a.jsx("option",{value:"csv",children:"CSV (.csv)"}),a.jsx("option",{value:"json",children:"JSON (.json)"})]})]})}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{onClick:q,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Export"})]})]})})]})}const _p=()=>{const i=new Date;return i.setHours(i.getHours()+2),i.toISOString().split("T")[0]},Ep=({onShowNotification:i})=>{const[o,f]=x.useState(_p()),[d,u]=x.useState([]),[v,j]=x.useState(!0),[k,w]=x.useState(null),y=L=>{const M=new Date(o);M.setDate(M.getDate()+L),f(M.toISOString().split("T")[0])},p=async L=>{try{j(!0),w(null);const M=await le.get(`/planner/assignments?date=${L}`);u(M||[])}catch(M){console.error("Error fetching attendance data:",M),w("Failed to load attendance data"),i?.("Failed to load attendance data","danger")}finally{j(!1)}},R=async(L,M)=>{try{await le.patch(`/planner/assignments/${L}`,{status:M}),await p(o),i?.(`Attendance updated to ${M}`,"success")}catch(Y){console.error("Error updating attendance:",Y),i?.("Failed to update attendance status","danger")}},C=x.useMemo(()=>{const L=d.filter(q=>q.status==="present").length,M=d.filter(q=>q.status==="absent").length,Y=d.filter(q=>q.status==="planned"||!q.status).length;return{present:L,absent:M,pending:Y,total:d.length}},[d]);return x.useEffect(()=>{p(o)},[o]),v?a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center justify-center py-16",children:[a.jsx(Ke,{className:"w-8 h-8 animate-spin text-blue-500"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading attendance data..."})]})})}):a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl",children:a.jsx(na,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Attendance Tracking"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Monitor daily attendance and presence"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>y(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:"‹"}),a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-50 rounded-lg",children:[a.jsx(il,{className:"w-4 h-4 text-slate-500"}),a.jsx("input",{type:"date",value:o,onChange:L=>f(L.target.value),className:"bg-transparent border-none focus:outline-none font-medium text-sm md:text-base"})]}),a.jsx("button",{onClick:()=>y(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:"›"}),a.jsx("button",{onClick:()=>p(o),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:a.jsx(Ke,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"bg-emerald-50 border-emerald-200 text-emerald-700 rounded-xl p-4 border",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-emerald-100",children:a.jsx(tt,{className:"w-5 h-5 text-emerald-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium opacity-90",children:"Present"}),a.jsx("p",{className:"text-2xl font-bold",children:C.present})]})]})}),a.jsx("div",{className:"bg-red-50 border-red-200 text-red-700 rounded-xl p-4 border",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-red-100",children:a.jsx(rl,{className:"w-5 h-5 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium opacity-90",children:"Absent"}),a.jsx("p",{className:"text-2xl font-bold",children:C.absent})]})]})}),a.jsx("div",{className:"bg-amber-50 border-amber-200 text-amber-700 rounded-xl p-4 border",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-amber-100",children:a.jsx(S0,{className:"w-5 h-5 text-amber-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium opacity-90",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold",children:C.pending})]})]})})]}),d.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"font-semibold text-slate-900 mb-3",children:["Team Attendance (",d.length," employees)"]}),d.map(L=>a.jsx("div",{className:"bg-white rounded-xl border-2 p-4 hover:shadow-lg transition-all duration-300",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-white font-medium text-sm",children:L.employee_code?.slice(0,2)||L.username?.slice(0,2).toUpperCase()})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-slate-900 text-base truncate",children:L.fullName||L.username}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm",children:[a.jsx("span",{className:"text-slate-600",children:L.employee_code}),a.jsx("span",{className:"text-slate-400",children:"•"}),a.jsx("span",{className:"text-slate-600 truncate",children:L.machine_name}),L.job_role&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-400",children:"•"}),a.jsx("span",{className:"font-medium text-blue-600",children:L.job_role})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.shift==="day"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[L.shift," shift"]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.status==="present"?"bg-emerald-100 text-emerald-700":L.status==="absent"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:L.status==="present"?"Present":L.status==="absent"?"Absent":"Pending"})]})]})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>R(L.id,"present"),className:`min-w-[44px] min-h-[44px] p-2 rounded-lg border transition-all ${L.status==="present"?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-slate-200 text-slate-600 hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-600"}`,children:a.jsx(tt,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>R(L.id,"absent"),className:`min-w-[44px] min-h-[44px] p-2 rounded-lg border transition-all ${L.status==="absent"?"bg-red-500 border-red-500 text-white":"bg-white border-slate-200 text-slate-600 hover:bg-red-50 hover:border-red-200 hover:text-red-600"}`,children:a.jsx(rl,{className:"w-5 h-5"})})]})]})},L.id))]}):a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(na,{className:"w-10 h-10 text-slate-400"})}),a.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:"No assignments found"}),a.jsx("p",{className:"text-slate-500 mb-4",children:"No scheduled assignments for this date"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Check the planning board to create assignments first"})]}),k&&a.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-700 text-sm",children:k})})]})})},Ap=()=>{const i=new Date;return i.setHours(i.getHours()+2),i.toISOString().split("T")[0]},Cp=({activeTab:i,onTabChange:o,tabs:f=[]})=>a.jsx("div",{className:"flex gap-0 bg-white shadow-sm border border-gray-100 rounded-xl p-1",children:f.map(d=>{const u=d.icon,v=i===d.id;return a.jsxs("button",{onClick:()=>o(d.id),className:`flex-1 min-h-[44px] flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200 ${v?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(u,{className:"w-4 h-4"}),a.jsx("span",{className:"text-base",children:d.label})]},d.id)})}),Mp=({assignments:i=[],onShowNotification:o})=>{const[f,d]=x.useState([]),[u,v]=x.useState(""),[j,k]=x.useState(!0),w=async()=>{const R=localStorage.getItem("token");if(console.log("🔐 Token check:",R?`Token exists (${R.substring(0,20)}...)`:"No token found"),!R){console.log("ℹ️ No authentication token, waiting for user login"),d([]),k(!1);return}try{k(!0),console.log("🔍 Fetching users from /api/users with token..."),console.log("🌐 Current origin:",window.location.origin),console.log("🌐 Full URL will be:",`${window.location.origin}/api/users`);const C=await le.get("/api/users");console.log("👥 Users loaded successfully:",C?.length||0),d(C||[])}catch(C){console.error("❌ Error fetching employees:",C),console.error("🔍 Error type:",typeof C),console.error("🔍 Error message:",C.message),console.error("🔍 Error stack:",C.stack),C.message.includes("Session expired")||C.message.includes("unauthorized")?o?.("Session expired. Please log in again.","warning"):C.message.includes("<!DOCTYPE")?o?.("Authentication required. Please log in.","warning"):o?.("Failed to load employee data: "+C.message,"danger"),d([])}finally{k(!1)}};x.useEffect(()=>{w()},[]);const y=x.useMemo(()=>u?f.filter(R=>{const C=u.toLowerCase(),L=R.fullName?.toLowerCase()||"",M=R.username?.toLowerCase()||"",Y=R.employee_code?.toLowerCase()||"",q=R.role?.toLowerCase()||"";return L.includes(C)||M.includes(C)||Y.includes(C)||q.includes(C)}):f,[f,u]);return localStorage.getItem("token")?j?a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center justify-center py-16",children:[a.jsx(Ke,{className:"w-8 h-8 animate-spin text-blue-500"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading employee data..."})]})})}):a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-600 rounded-xl",children:a.jsx(Ve,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Team Management"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Manage employee information and roles"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"relative flex-1 md:flex-none",children:a.jsx("input",{type:"text",placeholder:"Search employees...",value:u,onChange:R=>v(R.target.value),className:"pl-4 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full md:w-64 text-sm"})}),a.jsx("button",{onClick:()=>w(),className:"min-w-[44px] min-h-[44px] p-2 hover:bg-gray-100 rounded-lg transition-colors flex items-center justify-center",children:a.jsx(Ke,{className:"w-4 h-4"})})]})]}),y.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold text-slate-900",children:["Team Members (",y.length,")"]}),u&&a.jsx("button",{onClick:()=>v(""),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Clear Search"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(R=>{const C=i.some(L=>L.employee_id===R.id);return a.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 transition-all duration-300 hover:shadow-lg ${C?"border-green-200 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-white font-medium text-sm",children:R.employee_code?.slice(0,2)||R.username?.slice(0,2).toUpperCase()})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-slate-900 text-base truncate",children:R.fullName||(R.username?R.username.replace(/\./g," ").replace(/\b\w/g,L=>L.toUpperCase()):"N/A")}),a.jsx("p",{className:"text-sm text-slate-600 truncate",children:R.employee_code})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Role:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.role==="supervisor"?"bg-purple-100 text-purple-700":R.role==="operator"?"bg-green-100 text-green-700":R.role==="packer"?"bg-blue-100 text-blue-700":R.role==="technician"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:R.role?.charAt(0).toUpperCase()+R.role?.slice(1)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Company:"}),a.jsx("span",{className:"text-sm font-medium text-slate-900 truncate ml-2",children:R.company||"N/A"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Status:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C?"bg-green-100 text-green-700":"bg-slate-100 text-slate-700"}`,children:C?"Assigned":"Available"})]})]})]},R.id)})})]}):a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ve,{className:"w-10 h-10 text-slate-400"})}),a.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:u?"No employees found":"No employees available"}),a.jsx("p",{className:"text-slate-500 mb-4",children:u?"No employees match your search criteria":"No employee data available"}),u?a.jsx("button",{onClick:()=>v(""),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Clear Search"}):a.jsx("p",{className:"text-sm text-slate-400",children:"Contact your administrator to add employees"})]})]})}):a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ve,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Authentication Required"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Please log in to view employee data"}),a.jsx("button",{onClick:()=>window.location.href="/login",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Go to Login"})]})})})})},Tp=()=>{const[i,o]=x.useState("planning"),[f,d]=x.useState([]),[u,v]=x.useState(!0),[j,k]=x.useState({show:!1,message:"",type:"success"}),[w,y]=x.useState(()=>new URLSearchParams(window.location.search).get("date")||Ap()),p=x.useCallback((M,Y="success")=>{k({show:!0,message:M,type:Y}),setTimeout(()=>{k({show:!1,message:"",type:"success"})},4e3)},[]),R=x.useMemo(()=>f.filter(M=>M.assignment_date===w),[f,w]),C=[{id:"planning",label:"Planning",icon:mn},{id:"attendance",label:"Attendance",icon:na},{id:"workers",label:"Workers",icon:Ve}],L=()=>{const[M,Y]=x.useState([]),[q,E]=x.useState([]),[P,I]=x.useState(""),[te,X]=x.useState("day"),[ue,re]=x.useState(!1);x.useEffect(()=>{(async()=>{if(!localStorage.getItem("token")){console.log("ℹ️ No authentication token, waiting for user login"),Y([]),E([]);return}try{console.log("🔍 Loading planning data...");const[ie,ce]=await Promise.all([le.get("/api/machines").catch(ve=>(console.error("Failed to load machines:",ve),console.error("Machines error type:",typeof ve),console.error("Machines error message:",ve.message),[])),le.get("/api/users").catch(ve=>(console.error("Failed to load users:",ve),console.error("Users error type:",typeof ve),console.error("Users error message:",ve.message),[]))]);console.log("🏭 Machines loaded:",ie?.length||0),console.log("👥 Employees loaded:",ce?.length||0),Y(ie||[]),E(ce||[])}catch(ie){console.error("Error loading planning data:",ie),ie.message.includes("<!DOCTYPE")?p("Authentication required. Please log in.","warning"):p("Failed to load planning data","danger")}})()},[]);const xe=async(Z,G,ie)=>{try{await le.post("/api/planner/assignments",{employee_id:Z,machine_id:G,shift:ie,assignment_date:w}),p("Employee assigned successfully","success"),re(!1)}catch{p("Failed to assign employee","danger")}};return a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 md:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl",children:a.jsx(mn,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Workforce Planning"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Assign employees to machines and shifts"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("input",{type:"date",value:w,onChange:Z=>y(Z.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500"})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Quick Assignment"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Machine"}),a.jsxs("select",{value:P,onChange:Z=>I(Z.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Machine"}),M.map(Z=>a.jsxs("option",{value:Z.id,children:[Z.name," (",Z.type,")"]},Z.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Shift"}),a.jsxs("select",{value:te,onChange:Z=>X(Z.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"day",children:"Day Shift"}),a.jsx("option",{value:"night",children:"Night Shift"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:()=>re(!0),disabled:!P,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Assign Employee"})})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Current Assignments for ",new Date(w).toLocaleDateString()]}),R.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(Z=>a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-slate-900",children:Z.fullName||Z.username}),a.jsxs("p",{className:"text-sm text-slate-600",children:[Z.machine_name," • ",Z.shift," shift"]}),Z.job_role&&a.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full mt-1",children:Z.job_role})]}),a.jsx("button",{onClick:()=>{confirm("Remove this assignment?")&&p("Assignment removed","success")},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(rl,{className:"w-4 h-4"})})]})},Z.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-500",children:"No assignments for this date"}),a.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Use the quick assignment tool above to assign employees"})]})]}),ue&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Select Employee"}),a.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:q.map(Z=>a.jsxs("button",{onClick:()=>xe(Z.id,P,te),className:"w-full p-3 text-left hover:bg-slate-50 rounded-lg border transition-colors",children:[a.jsx("p",{className:"font-medium text-slate-900",children:Z.fullName||Z.username}),a.jsxs("p",{className:"text-sm text-slate-600",children:[Z.employee_code," • ",Z.role]})]},Z.id))}),a.jsx("div",{className:"flex gap-3 mt-6",children:a.jsx("button",{onClick:()=>re(!1),className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"})})]})})})]})})};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Labor Management System"}),a.jsx("p",{className:"text-gray-600",children:"Mobile-optimized workforce management"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(la,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Ke,{className:"w-4 h-4"})})]})]}),a.jsx(Cp,{activeTab:i,onTabChange:o,tabs:C})]}),a.jsxs("div",{className:"flex flex-col min-h-screen",children:[i==="planning"&&a.jsx(L,{}),i==="attendance"&&a.jsx(Ep,{onShowNotification:p}),i==="workers"&&a.jsx(Mp,{assignments:R,onShowNotification:p})]}),j.show&&a.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm ${j.type==="success"?"bg-green-500 text-white":j.type==="danger"?"bg-red-500 text-white":j.type==="info"?"bg-blue-500 text-white":"bg-gray-500 text-white"}`,children:a.jsx("p",{className:"text-sm font-medium",children:j.message})})]})};function kp(){return a.jsx(Tp,{})}const Tf=[{path:"/",component:Af,title:"Dashboard"},{path:"/production",component:rp,title:"Production Monitor"},{path:"/labour-layout",component:Sp,title:"Labour Layout"},{path:"/labor-planner",component:kp,name:"Labor Planner"},{path:"/orders",component:up,title:"Production Orders"},{path:"/machines",component:hp,title:"Machine Management"},{path:"/analytics",component:xp,title:"Analytics & Reports"},{path:"/shift-reports",component:gp,title:"Shift Reports"},{path:"/users",component:pp,title:"User Management"},{path:"/settings",component:vp,title:"Settings"},{path:"/admin",component:jp,title:"Admin Panel"}];Tf.forEach(i=>io.addRoute(i));io.init();function Dp(){const{isAuthenticated:i,loading:o,user:f}=Ja(),[d,u]=x.useState(window.location.pathname),{handleSessionExpiring:v,handleSessionExpired:j}=zg();if(ps(),x.useEffect(()=>{const p=C=>u(C.path),R=window.EventBus.on("router:navigation",p);return()=>{R()}},[]),o)return a.jsx("div",{className:"h-screen flex items-center justify-center text-xl bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading Production Management System..."})]})});if(!i)return a.jsx(bf,{children:a.jsx(Tg,{})});const k=Tf.find(p=>p.path===d),w=k?k.component:Af,y=k?k.name||k.title:"Dashboard";return a.jsx(bf,{children:a.jsxs(Mg,{title:y,children:[a.jsx(w,{}),a.jsx(Dg,{}),i&&a.jsx(Rg,{onSessionExpiring:v,onSessionExpired:j}),a.jsx(Ug,{}),a.jsx(qg,{})]})})}const Op=document.getElementById("root"),Rp=n0.createRoot(Op);Rp.render(a.jsx(Wa.StrictMode,{children:a.jsx(Nf,{children:a.jsx(Dp,{})})}));
