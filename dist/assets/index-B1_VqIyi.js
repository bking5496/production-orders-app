(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const p of f)if(p.type==="childList")for(const v of p.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function u(f){const p={};return f.integrity&&(p.integrity=f.integrity),f.referrerPolicy&&(p.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?p.credentials="include":f.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function d(f){if(f.ep)return;f.ep=!0;const p=u(f);fetch(f.href,p)}})();function go(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var lo={exports:{}},bn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf;function I0(){if(xf)return bn;xf=1;var i=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function u(d,f,p){var v=null;if(p!==void 0&&(v=""+p),f.key!==void 0&&(v=""+f.key),"key"in f){p={};for(var M in f)M!=="key"&&(p[M]=f[M])}else p=f;return f=p.ref,{$$typeof:i,type:d,key:v,ref:f!==void 0?f:null,props:p}}return bn.Fragment=c,bn.jsx=u,bn.jsxs=u,bn}var gf;function ex(){return gf||(gf=1,lo.exports=I0()),lo.exports}var a=ex(),no={exports:{}},Ae={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pf;function tx(){if(pf)return Ae;pf=1;var i=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.consumer"),v=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),H=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=H&&h[H]||h["@@iterator"],typeof h=="function"?h:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,B={};function g(h,U,P){this.props=h,this.context=U,this.refs=B,this.updater=P||I}g.prototype.isReactComponent={},g.prototype.setState=function(h,U){if(typeof h!="object"&&typeof h!="function"&&h!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,h,U,"setState")},g.prototype.forceUpdate=function(h){this.updater.enqueueForceUpdate(this,h,"forceUpdate")};function L(){}L.prototype=g.prototype;function W(h,U,P){this.props=h,this.context=U,this.refs=B,this.updater=P||I}var ie=W.prototype=new L;ie.constructor=W,Y(ie,g.prototype),ie.isPureReactComponent=!0;var V=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function re(h,U,P,ae,le,je){return P=je.ref,{$$typeof:i,type:h,key:U,ref:P!==void 0?P:null,props:je}}function de(h,U){return re(h.type,U,void 0,void 0,void 0,h.props)}function Z(h){return typeof h=="object"&&h!==null&&h.$$typeof===i}function Q(h){var U={"=":"=0",":":"=2"};return"$"+h.replace(/[=:]/g,function(P){return U[P]})}var Se=/\/+/g;function se(h,U){return typeof h=="object"&&h!==null&&h.key!=null?Q(""+h.key):U.toString(36)}function ue(){}function O(h){switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:switch(typeof h.status=="string"?h.then(ue,ue):(h.status="pending",h.then(function(U){h.status==="pending"&&(h.status="fulfilled",h.value=U)},function(U){h.status==="pending"&&(h.status="rejected",h.reason=U)})),h.status){case"fulfilled":return h.value;case"rejected":throw h.reason}}throw h}function ee(h,U,P,ae,le){var je=typeof h;(je==="undefined"||je==="boolean")&&(h=null);var ce=!1;if(h===null)ce=!0;else switch(je){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(h.$$typeof){case i:case c:ce=!0;break;case y:return ce=h._init,ee(ce(h._payload),U,P,ae,le)}}if(ce)return le=le(h),ce=ae===""?"."+se(h,0):ae,V(le)?(P="",ce!=null&&(P=ce.replace(Se,"$&/")+"/"),ee(le,U,P,"",function(Xe){return Xe})):le!=null&&(Z(le)&&(le=de(le,P+(le.key==null||h&&h.key===le.key?"":(""+le.key).replace(Se,"$&/")+"/")+ce)),U.push(le)),1;ce=0;var Me=ae===""?".":ae+":";if(V(h))for(var Ee=0;Ee<h.length;Ee++)ae=h[Ee],je=Me+se(ae,Ee),ce+=ee(ae,U,P,je,le);else if(Ee=C(h),typeof Ee=="function")for(h=Ee.call(h),Ee=0;!(ae=h.next()).done;)ae=ae.value,je=Me+se(ae,Ee++),ce+=ee(ae,U,P,je,le);else if(je==="object"){if(typeof h.then=="function")return ee(O(h),U,P,ae,le);throw U=String(h),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return ce}function S(h,U,P){if(h==null)return h;var ae=[],le=0;return ee(h,ae,"","",function(je){return U.call(P,je,le++)}),ae}function q(h){if(h._status===-1){var U=h._result;U=U(),U.then(function(P){(h._status===0||h._status===-1)&&(h._status=1,h._result=P)},function(P){(h._status===0||h._status===-1)&&(h._status=2,h._result=P)}),h._status===-1&&(h._status=0,h._result=U)}if(h._status===1)return h._result.default;throw h._result}var $=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function G(){}return Ae.Children={map:S,forEach:function(h,U,P){S(h,function(){U.apply(this,arguments)},P)},count:function(h){var U=0;return S(h,function(){U++}),U},toArray:function(h){return S(h,function(U){return U})||[]},only:function(h){if(!Z(h))throw Error("React.Children.only expected to receive a single React element child.");return h}},Ae.Component=g,Ae.Fragment=u,Ae.Profiler=f,Ae.PureComponent=W,Ae.StrictMode=d,Ae.Suspense=w,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(h){return X.H.useMemoCache(h)}},Ae.cache=function(h){return function(){return h.apply(null,arguments)}},Ae.cloneElement=function(h,U,P){if(h==null)throw Error("The argument must be a React element, but you passed "+h+".");var ae=Y({},h.props),le=h.key,je=void 0;if(U!=null)for(ce in U.ref!==void 0&&(je=void 0),U.key!==void 0&&(le=""+U.key),U)!J.call(U,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&U.ref===void 0||(ae[ce]=U[ce]);var ce=arguments.length-2;if(ce===1)ae.children=P;else if(1<ce){for(var Me=Array(ce),Ee=0;Ee<ce;Ee++)Me[Ee]=arguments[Ee+2];ae.children=Me}return re(h.type,le,void 0,void 0,je,ae)},Ae.createContext=function(h){return h={$$typeof:v,_currentValue:h,_currentValue2:h,_threadCount:0,Provider:null,Consumer:null},h.Provider=h,h.Consumer={$$typeof:p,_context:h},h},Ae.createElement=function(h,U,P){var ae,le={},je=null;if(U!=null)for(ae in U.key!==void 0&&(je=""+U.key),U)J.call(U,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(le[ae]=U[ae]);var ce=arguments.length-2;if(ce===1)le.children=P;else if(1<ce){for(var Me=Array(ce),Ee=0;Ee<ce;Ee++)Me[Ee]=arguments[Ee+2];le.children=Me}if(h&&h.defaultProps)for(ae in ce=h.defaultProps,ce)le[ae]===void 0&&(le[ae]=ce[ae]);return re(h,je,void 0,void 0,null,le)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(h){return{$$typeof:M,render:h}},Ae.isValidElement=Z,Ae.lazy=function(h){return{$$typeof:y,_payload:{_status:-1,_result:h},_init:q}},Ae.memo=function(h,U){return{$$typeof:N,type:h,compare:U===void 0?null:U}},Ae.startTransition=function(h){var U=X.T,P={};X.T=P;try{var ae=h(),le=X.S;le!==null&&le(P,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(G,$)}catch(je){$(je)}finally{X.T=U}},Ae.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Ae.use=function(h){return X.H.use(h)},Ae.useActionState=function(h,U,P){return X.H.useActionState(h,U,P)},Ae.useCallback=function(h,U){return X.H.useCallback(h,U)},Ae.useContext=function(h){return X.H.useContext(h)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(h,U){return X.H.useDeferredValue(h,U)},Ae.useEffect=function(h,U,P){var ae=X.H;if(typeof P=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(h,U)},Ae.useId=function(){return X.H.useId()},Ae.useImperativeHandle=function(h,U,P){return X.H.useImperativeHandle(h,U,P)},Ae.useInsertionEffect=function(h,U){return X.H.useInsertionEffect(h,U)},Ae.useLayoutEffect=function(h,U){return X.H.useLayoutEffect(h,U)},Ae.useMemo=function(h,U){return X.H.useMemo(h,U)},Ae.useOptimistic=function(h,U){return X.H.useOptimistic(h,U)},Ae.useReducer=function(h,U,P){return X.H.useReducer(h,U,P)},Ae.useRef=function(h){return X.H.useRef(h)},Ae.useState=function(h){return X.H.useState(h)},Ae.useSyncExternalStore=function(h,U,P){return X.H.useSyncExternalStore(h,U,P)},Ae.useTransition=function(){return X.H.useTransition()},Ae.version="19.1.0",Ae}var yf;function po(){return yf||(yf=1,no.exports=tx()),no.exports}var x=po();const qa=go(x);var ro={exports:{}},vn={},io={exports:{}},co={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bf;function ax(){return bf||(bf=1,function(i){function c(S,q){var $=S.length;S.push(q);e:for(;0<$;){var G=$-1>>>1,h=S[G];if(0<f(h,q))S[G]=q,S[$]=h,$=G;else break e}}function u(S){return S.length===0?null:S[0]}function d(S){if(S.length===0)return null;var q=S[0],$=S.pop();if($!==q){S[0]=$;e:for(var G=0,h=S.length,U=h>>>1;G<U;){var P=2*(G+1)-1,ae=S[P],le=P+1,je=S[le];if(0>f(ae,$))le<h&&0>f(je,ae)?(S[G]=je,S[le]=$,G=le):(S[G]=ae,S[P]=$,G=P);else if(le<h&&0>f(je,$))S[G]=je,S[le]=$,G=le;else break e}}return q}function f(S,q){var $=S.sortIndex-q.sortIndex;return $!==0?$:S.id-q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var p=performance;i.unstable_now=function(){return p.now()}}else{var v=Date,M=v.now();i.unstable_now=function(){return v.now()-M}}var w=[],N=[],y=1,H=null,C=3,I=!1,Y=!1,B=!1,g=!1,L=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function V(S){for(var q=u(N);q!==null;){if(q.callback===null)d(N);else if(q.startTime<=S)d(N),q.sortIndex=q.expirationTime,c(w,q);else break;q=u(N)}}function X(S){if(B=!1,V(S),!Y)if(u(w)!==null)Y=!0,J||(J=!0,se());else{var q=u(N);q!==null&&ee(X,q.startTime-S)}}var J=!1,re=-1,de=5,Z=-1;function Q(){return g?!0:!(i.unstable_now()-Z<de)}function Se(){if(g=!1,J){var S=i.unstable_now();Z=S;var q=!0;try{e:{Y=!1,B&&(B=!1,W(re),re=-1),I=!0;var $=C;try{t:{for(V(S),H=u(w);H!==null&&!(H.expirationTime>S&&Q());){var G=H.callback;if(typeof G=="function"){H.callback=null,C=H.priorityLevel;var h=G(H.expirationTime<=S);if(S=i.unstable_now(),typeof h=="function"){H.callback=h,V(S),q=!0;break t}H===u(w)&&d(w),V(S)}else d(w);H=u(w)}if(H!==null)q=!0;else{var U=u(N);U!==null&&ee(X,U.startTime-S),q=!1}}break e}finally{H=null,C=$,I=!1}q=void 0}}finally{q?se():J=!1}}}var se;if(typeof ie=="function")se=function(){ie(Se)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,O=ue.port2;ue.port1.onmessage=Se,se=function(){O.postMessage(null)}}else se=function(){L(Se,0)};function ee(S,q){re=L(function(){S(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(S){S.callback=null},i.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<S?Math.floor(1e3/S):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_next=function(S){switch(C){case 1:case 2:case 3:var q=3;break;default:q=C}var $=C;C=q;try{return S()}finally{C=$}},i.unstable_requestPaint=function(){g=!0},i.unstable_runWithPriority=function(S,q){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var $=C;C=S;try{return q()}finally{C=$}},i.unstable_scheduleCallback=function(S,q,$){var G=i.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?G+$:G):$=G,S){case 1:var h=-1;break;case 2:h=250;break;case 5:h=1073741823;break;case 4:h=1e4;break;default:h=5e3}return h=$+h,S={id:y++,callback:q,priorityLevel:S,startTime:$,expirationTime:h,sortIndex:-1},$>G?(S.sortIndex=$,c(N,S),u(w)===null&&S===u(N)&&(B?(W(re),re=-1):B=!0,ee(X,$-G))):(S.sortIndex=h,c(w,S),Y||I||(Y=!0,J||(J=!0,se()))),S},i.unstable_shouldYield=Q,i.unstable_wrapCallback=function(S){var q=C;return function(){var $=C;C=q;try{return S.apply(this,arguments)}finally{C=$}}}}(co)),co}var vf;function sx(){return vf||(vf=1,io.exports=ax()),io.exports}var oo={exports:{}},At={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jf;function lx(){if(jf)return At;jf=1;var i=po();function c(w){var N="https://react.dev/errors/"+w;if(1<arguments.length){N+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)N+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+w+"; visit "+N+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var d={d:{f:u,r:function(){throw Error(c(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},f=Symbol.for("react.portal");function p(w,N,y){var H=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:H==null?null:""+H,children:w,containerInfo:N,implementation:y}}var v=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function M(w,N){if(w==="font")return"";if(typeof N=="string")return N==="use-credentials"?N:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,At.createPortal=function(w,N){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N||N.nodeType!==1&&N.nodeType!==9&&N.nodeType!==11)throw Error(c(299));return p(w,N,null,y)},At.flushSync=function(w){var N=v.T,y=d.p;try{if(v.T=null,d.p=2,w)return w()}finally{v.T=N,d.p=y,d.d.f()}},At.preconnect=function(w,N){typeof w=="string"&&(N?(N=N.crossOrigin,N=typeof N=="string"?N==="use-credentials"?N:"":void 0):N=null,d.d.C(w,N))},At.prefetchDNS=function(w){typeof w=="string"&&d.d.D(w)},At.preinit=function(w,N){if(typeof w=="string"&&N&&typeof N.as=="string"){var y=N.as,H=M(y,N.crossOrigin),C=typeof N.integrity=="string"?N.integrity:void 0,I=typeof N.fetchPriority=="string"?N.fetchPriority:void 0;y==="style"?d.d.S(w,typeof N.precedence=="string"?N.precedence:void 0,{crossOrigin:H,integrity:C,fetchPriority:I}):y==="script"&&d.d.X(w,{crossOrigin:H,integrity:C,fetchPriority:I,nonce:typeof N.nonce=="string"?N.nonce:void 0})}},At.preinitModule=function(w,N){if(typeof w=="string")if(typeof N=="object"&&N!==null){if(N.as==null||N.as==="script"){var y=M(N.as,N.crossOrigin);d.d.M(w,{crossOrigin:y,integrity:typeof N.integrity=="string"?N.integrity:void 0,nonce:typeof N.nonce=="string"?N.nonce:void 0})}}else N==null&&d.d.M(w)},At.preload=function(w,N){if(typeof w=="string"&&typeof N=="object"&&N!==null&&typeof N.as=="string"){var y=N.as,H=M(y,N.crossOrigin);d.d.L(w,y,{crossOrigin:H,integrity:typeof N.integrity=="string"?N.integrity:void 0,nonce:typeof N.nonce=="string"?N.nonce:void 0,type:typeof N.type=="string"?N.type:void 0,fetchPriority:typeof N.fetchPriority=="string"?N.fetchPriority:void 0,referrerPolicy:typeof N.referrerPolicy=="string"?N.referrerPolicy:void 0,imageSrcSet:typeof N.imageSrcSet=="string"?N.imageSrcSet:void 0,imageSizes:typeof N.imageSizes=="string"?N.imageSizes:void 0,media:typeof N.media=="string"?N.media:void 0})}},At.preloadModule=function(w,N){if(typeof w=="string")if(N){var y=M(N.as,N.crossOrigin);d.d.m(w,{as:typeof N.as=="string"&&N.as!=="script"?N.as:void 0,crossOrigin:y,integrity:typeof N.integrity=="string"?N.integrity:void 0})}else d.d.m(w)},At.requestFormReset=function(w){d.d.r(w)},At.unstable_batchedUpdates=function(w,N){return w(N)},At.useFormState=function(w,N,y){return v.H.useFormState(w,N,y)},At.useFormStatus=function(){return v.H.useHostTransitionStatus()},At.version="19.1.0",At}var Nf;function Tf(){if(Nf)return oo.exports;Nf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),oo.exports=lx(),oo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf;function nx(){if(wf)return vn;wf=1;var i=sx(),c=po(),u=Tf();function d(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function p(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function v(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function M(e){if(p(e)!==e)throw Error(d(188))}function w(e){var t=e.alternate;if(!t){if(t=p(e),t===null)throw Error(d(188));return t!==e?null:e}for(var s=e,l=t;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return M(n),e;if(r===l)return M(n),t;r=r.sibling}throw Error(d(188))}if(s.return!==l.return)s=n,l=r;else{for(var o=!1,m=n.child;m;){if(m===s){o=!0,s=n,l=r;break}if(m===l){o=!0,l=n,s=r;break}m=m.sibling}if(!o){for(m=r.child;m;){if(m===s){o=!0,s=r,l=n;break}if(m===l){o=!0,l=r,s=n;break}m=m.sibling}if(!o)throw Error(d(189))}}if(s.alternate!==l)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:t}function N(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=N(e),t!==null)return t;e=e.sibling}return null}var y=Object.assign,H=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),Se=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=Se&&e[Se]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Symbol.for("react.client.reference");function O(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ue?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case g:return"Profiler";case B:return"StrictMode";case X:return"Suspense";case J:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case ie:return(e.displayName||"Context")+".Provider";case W:return(e._context.displayName||"Context")+".Consumer";case V:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case re:return t=e.displayName||null,t!==null?t:O(e.type)||"Memo";case de:t=e._payload,e=e._init;try{return O(e(t))}catch{}}return null}var ee=Array.isArray,S=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},G=[],h=-1;function U(e){return{current:e}}function P(e){0>h||(e.current=G[h],G[h]=null,h--)}function ae(e,t){h++,G[h]=e.current,e.current=t}var le=U(null),je=U(null),ce=U(null),Me=U(null);function Ee(e,t){switch(ae(ce,t),ae(je,e),ae(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?$m(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=$m(t),e=Gm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(le),ae(le,e)}function Xe(){P(le),P(je),P(ce)}function dt(e){e.memoizedState!==null&&ae(Me,e);var t=le.current,s=Gm(t,e.type);t!==s&&(ae(je,e),ae(le,s))}function ft(e){je.current===e&&(P(le),P(je)),Me.current===e&&(P(Me),hn._currentValue=$)}var Ot=Object.prototype.hasOwnProperty,Dt=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,Ne=i.unstable_shouldYield,Le=i.unstable_requestPaint,ke=i.unstable_now,kt=i.unstable_getCurrentPriorityLevel,E=i.unstable_ImmediatePriority,oe=i.unstable_UserBlockingPriority,ye=i.unstable_NormalPriority,yt=i.unstable_LowPriority,Rt=i.unstable_IdlePriority,b=i.log,ne=i.unstable_setDisableYieldValue,Ve=null,Ke=null;function Pe(e){if(typeof b=="function"&&ne(e),Ke&&typeof Ke.setStrictMode=="function")try{Ke.setStrictMode(Ve,e)}catch{}}var _=Math.clz32?Math.clz32:bt,me=Math.log,st=Math.LN2;function bt(e){return e>>>=0,e===0?32:31-(me(e)/st|0)|0}var Mt=256,ma=4194304;function vt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Cn(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var n=0,r=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var m=l&134217727;return m!==0?(l=m&~r,l!==0?n=vt(l):(o&=m,o!==0?n=vt(o):s||(s=m&~e,s!==0&&(n=vt(s))))):(m=l&~r,m!==0?n=vt(m):o!==0?n=vt(o):s||(s=l&~e,s!==0&&(n=vt(s)))),n===0?0:t!==0&&t!==n&&(t&r)===0&&(r=n&-n,s=t&-t,r>=s||r===32&&(s&4194048)!==0)?t:n}function Nl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Bf(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _o(){var e=Mt;return Mt<<=1,(Mt&4194048)===0&&(Mt=256),e}function Eo(){var e=ma;return ma<<=1,(ma&62914560)===0&&(ma=4194304),e}function Zr(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function wl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Yf(e,t,s,l,n,r){var o=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var m=e.entanglements,j=e.expirationTimes,k=e.hiddenUpdates;for(s=o&~s;0<s;){var K=31-_(s),te=1<<K;m[K]=0,j[K]=-1;var R=k[K];if(R!==null)for(k[K]=null,K=0;K<R.length;K++){var z=R[K];z!==null&&(z.lane&=-536870913)}s&=~te}l!==0&&Ao(e,l,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(o&~t))}function Ao(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-_(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&4194090}function Mo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-_(s),n=1<<l;n&t|e[l]&t&&(e[l]|=t),s&=~n}}function Wr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Kr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function To(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:of(e.type))}function $f(e,t){var s=q.p;try{return q.p=e,t()}finally{q.p=s}}var Ba=Math.random().toString(36).slice(2),_t="__reactFiber$"+Ba,Ut="__reactProps$"+Ba,ks="__reactContainer$"+Ba,Pr="__reactEvents$"+Ba,Gf="__reactListeners$"+Ba,Qf="__reactHandles$"+Ba,Co="__reactResources$"+Ba,Sl="__reactMarker$"+Ba;function Jr(e){delete e[_t],delete e[Ut],delete e[Pr],delete e[Gf],delete e[Qf]}function Rs(e){var t=e[_t];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ks]||s[_t]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Zm(e);e!==null;){if(s=e[_t])return s;e=Zm(e)}return t}e=s,s=e.parentNode}return null}function Us(e){if(e=e[_t]||e[ks]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function _l(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(d(33))}function zs(e){var t=e[Co];return t||(t=e[Co]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ht(e){e[Sl]=!0}var Oo=new Set,Do={};function fs(e,t){Ls(e,t),Ls(e+"Capture",t)}function Ls(e,t){for(Do[e]=t,e=0;e<t.length;e++)Oo.add(t[e])}var Xf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ko={},Ro={};function Vf(e){return Ot.call(Ro,e)?!0:Ot.call(ko,e)?!1:Xf.test(e)?Ro[e]=!0:(ko[e]=!0,!1)}function On(e,t,s){if(Vf(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Dn(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function wa(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}var Fr,Uo;function qs(e){if(Fr===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Fr=t&&t[1]||"",Uo=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fr+e+Uo}var Ir=!1;function ei(e,t){if(!e||Ir)return"";Ir=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch(z){var R=z}Reflect.construct(e,[],te)}else{try{te.call()}catch(z){R=z}e.call(te.prototype)}}else{try{throw Error()}catch(z){R=z}(te=e())&&typeof te.catch=="function"&&te.catch(function(){})}}catch(z){if(z&&R&&typeof z.stack=="string")return[z.stack,R.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),o=r[0],m=r[1];if(o&&m){var j=o.split(`
`),k=m.split(`
`);for(n=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;n<k.length&&!k[n].includes("DetermineComponentFrameRoot");)n++;if(l===j.length||n===k.length)for(l=j.length-1,n=k.length-1;1<=l&&0<=n&&j[l]!==k[n];)n--;for(;1<=l&&0<=n;l--,n--)if(j[l]!==k[n]){if(l!==1||n!==1)do if(l--,n--,0>n||j[l]!==k[n]){var K=`
`+j[l].replace(" at new "," at ");return e.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",e.displayName)),K}while(1<=l&&0<=n);break}}}finally{Ir=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?qs(s):""}function Zf(e){switch(e.tag){case 26:case 27:case 5:return qs(e.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 15:return ei(e.type,!1);case 11:return ei(e.type.render,!1);case 1:return ei(e.type,!0);case 31:return qs("Activity");default:return""}}function zo(e){try{var t="";do t+=Zf(e),e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function Ft(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wf(e){var t=Lo(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){l=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(o){l=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kn(e){e._valueTracker||(e._valueTracker=Wf(e))}function qo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=Lo(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Rn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Kf=/[\n"\\]/g;function It(e){return e.replace(Kf,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ti(e,t,s,l,n,r,o,m){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ft(t)):e.value!==""+Ft(t)&&(e.value=""+Ft(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?ai(e,o,Ft(t)):s!=null?ai(e,o,Ft(s)):l!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Ft(m):e.removeAttribute("name")}function Ho(e,t,s,l,n,r,o,m){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||t!=null))return;s=s!=null?""+Ft(s):"",t=t!=null?""+Ft(t):s,m||t===e.value||(e.value=t),e.defaultValue=t}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=m?e.checked:!!l,e.defaultChecked=!!l,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o)}function ai(e,t,s){t==="number"&&Rn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Hs(e,t,s,l){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&l&&(e[s].defaultSelected=!0)}else{for(s=""+Ft(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Bo(e,t,s){if(t!=null&&(t=""+Ft(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Ft(s):""}function Yo(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(d(92));if(ee(l)){if(1<l.length)throw Error(d(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=Ft(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l)}function Bs(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Pf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $o(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||Pf.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Go(e,t,s){if(t!=null&&typeof t!="object")throw Error(d(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in t)l=t[n],t.hasOwnProperty(n)&&s[n]!==l&&$o(e,n,l)}else for(var r in t)t.hasOwnProperty(r)&&$o(e,r,t[r])}function si(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ff=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Un(e){return Ff.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var li=null;function ni(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ys=null,$s=null;function Qo(e){var t=Us(e);if(t&&(e=t.stateNode)){var s=e[Ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(ti(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+It(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var n=l[Ut]||null;if(!n)throw Error(d(90));ti(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&qo(l)}break e;case"textarea":Bo(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Hs(e,!!s.multiple,t,!1)}}}var ri=!1;function Xo(e,t,s){if(ri)return e(t,s);ri=!0;try{var l=e(t);return l}finally{if(ri=!1,(Ys!==null||$s!==null)&&(vr(),Ys&&(t=Ys,e=$s,$s=Ys=null,Qo(t),e)))for(t=0;t<e.length;t++)Qo(e[t])}}function El(e,t){var s=e.stateNode;if(s===null)return null;var l=s[Ut]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,t,typeof s));return s}var Sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ii=!1;if(Sa)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){ii=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{ii=!1}var Ya=null,ci=null,zn=null;function Vo(){if(zn)return zn;var e,t=ci,s=t.length,l,n="value"in Ya?Ya.value:Ya.textContent,r=n.length;for(e=0;e<s&&t[e]===n[e];e++);var o=s-e;for(l=1;l<=o&&t[s-l]===n[r-l];l++);return zn=n.slice(e,1<l?1-l:void 0)}function Ln(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qn(){return!0}function Zo(){return!1}function zt(e){function t(s,l,n,r,o){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(s=e[m],this[m]=s?s(r):r[m]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?qn:Zo,this.isPropagationStopped=Zo,this}return y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){},isPersistent:qn}),t}var hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hn=zt(hs),Ml=y({},hs,{view:0,detail:0}),If=zt(Ml),oi,di,Tl,Bn=y({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tl&&(Tl&&e.type==="mousemove"?(oi=e.screenX-Tl.screenX,di=e.screenY-Tl.screenY):di=oi=0,Tl=e),oi)},movementY:function(e){return"movementY"in e?e.movementY:di}}),Wo=zt(Bn),eh=y({},Bn,{dataTransfer:0}),th=zt(eh),ah=y({},Ml,{relatedTarget:0}),ui=zt(ah),sh=y({},hs,{animationName:0,elapsedTime:0,pseudoElement:0}),lh=zt(sh),nh=y({},hs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rh=zt(nh),ih=y({},hs,{data:0}),Ko=zt(ih),ch={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dh[e])?!!t[e]:!1}function mi(){return uh}var mh=y({},Ml,{key:function(e){if(e.key){var t=ch[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ln(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?oh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mi,charCode:function(e){return e.type==="keypress"?Ln(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ln(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fh=zt(mh),hh=y({},Bn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Po=zt(hh),xh=y({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mi}),gh=zt(xh),ph=y({},hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),yh=zt(ph),bh=y({},Bn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vh=zt(bh),jh=y({},hs,{newState:0,oldState:0}),Nh=zt(jh),wh=[9,13,27,32],fi=Sa&&"CompositionEvent"in window,Cl=null;Sa&&"documentMode"in document&&(Cl=document.documentMode);var Sh=Sa&&"TextEvent"in window&&!Cl,Jo=Sa&&(!fi||Cl&&8<Cl&&11>=Cl),Fo=" ",Io=!1;function ed(e,t){switch(e){case"keyup":return wh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function td(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gs=!1;function _h(e,t){switch(e){case"compositionend":return td(t);case"keypress":return t.which!==32?null:(Io=!0,Fo);case"textInput":return e=t.data,e===Fo&&Io?null:e;default:return null}}function Eh(e,t){if(Gs)return e==="compositionend"||!fi&&ed(e,t)?(e=Vo(),zn=ci=Ya=null,Gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jo&&t.locale!=="ko"?null:t.data;default:return null}}var Ah={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ad(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ah[e.type]:t==="textarea"}function sd(e,t,s,l){Ys?$s?$s.push(l):$s=[l]:Ys=l,t=Er(t,"onChange"),0<t.length&&(s=new Hn("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var Ol=null,Dl=null;function Mh(e){Lm(e,0)}function Yn(e){var t=_l(e);if(qo(t))return e}function ld(e,t){if(e==="change")return t}var nd=!1;if(Sa){var hi;if(Sa){var xi="oninput"in document;if(!xi){var rd=document.createElement("div");rd.setAttribute("oninput","return;"),xi=typeof rd.oninput=="function"}hi=xi}else hi=!1;nd=hi&&(!document.documentMode||9<document.documentMode)}function id(){Ol&&(Ol.detachEvent("onpropertychange",cd),Dl=Ol=null)}function cd(e){if(e.propertyName==="value"&&Yn(Dl)){var t=[];sd(t,Dl,e,ni(e)),Xo(Mh,t)}}function Th(e,t,s){e==="focusin"?(id(),Ol=t,Dl=s,Ol.attachEvent("onpropertychange",cd)):e==="focusout"&&id()}function Ch(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yn(Dl)}function Oh(e,t){if(e==="click")return Yn(t)}function Dh(e,t){if(e==="input"||e==="change")return Yn(t)}function kh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:kh;function kl(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!Ot.call(t,n)||!$t(e[n],t[n]))return!1}return!0}function od(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dd(e,t){var s=od(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=od(s)}}function ud(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ud(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function md(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Rn(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Rn(e.document)}return t}function gi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Rh=Sa&&"documentMode"in document&&11>=document.documentMode,Qs=null,pi=null,Rl=null,yi=!1;function fd(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;yi||Qs==null||Qs!==Rn(l)||(l=Qs,"selectionStart"in l&&gi(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Rl&&kl(Rl,l)||(Rl=l,l=Er(pi,"onSelect"),0<l.length&&(t=new Hn("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=Qs)))}function xs(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Xs={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionrun:xs("Transition","TransitionRun"),transitionstart:xs("Transition","TransitionStart"),transitioncancel:xs("Transition","TransitionCancel"),transitionend:xs("Transition","TransitionEnd")},bi={},hd={};Sa&&(hd=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function gs(e){if(bi[e])return bi[e];if(!Xs[e])return e;var t=Xs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in hd)return bi[e]=t[s];return e}var xd=gs("animationend"),gd=gs("animationiteration"),pd=gs("animationstart"),Uh=gs("transitionrun"),zh=gs("transitionstart"),Lh=gs("transitioncancel"),yd=gs("transitionend"),bd=new Map,vi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vi.push("scrollEnd");function ca(e,t){bd.set(e,t),fs(t,[e])}var vd=new WeakMap;function ea(e,t){if(typeof e=="object"&&e!==null){var s=vd.get(e);return s!==void 0?s:(t={value:e,source:t,stack:zo(t)},vd.set(e,t),t)}return{value:e,source:t,stack:zo(t)}}var ta=[],Vs=0,ji=0;function $n(){for(var e=Vs,t=ji=Vs=0;t<e;){var s=ta[t];ta[t++]=null;var l=ta[t];ta[t++]=null;var n=ta[t];ta[t++]=null;var r=ta[t];if(ta[t++]=null,l!==null&&n!==null){var o=l.pending;o===null?n.next=n:(n.next=o.next,o.next=n),l.pending=n}r!==0&&jd(s,n,r)}}function Gn(e,t,s,l){ta[Vs++]=e,ta[Vs++]=t,ta[Vs++]=s,ta[Vs++]=l,ji|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Ni(e,t,s,l){return Gn(e,t,s,l),Qn(e)}function Zs(e,t){return Gn(e,null,null,t),Qn(e)}function jd(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var n=!1,r=e.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-_(s),e=r.hiddenUpdates,l=e[n],l===null?e[n]=[t]:l.push(t),t.lane=s|536870912),r):null}function Qn(e){if(50<nn)throw nn=0,Mc=null,Error(d(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ws={};function qh(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,s,l){return new qh(e,t,s,l)}function wi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _a(e,t){var s=e.alternate;return s===null?(s=Gt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Nd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Xn(e,t,s,l,n,r){var o=0;if(l=e,typeof e=="function")wi(e)&&(o=1);else if(typeof e=="string")o=B0(e,s,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Z:return e=Gt(31,s,t,n),e.elementType=Z,e.lanes=r,e;case Y:return ps(s.children,n,r,t);case B:o=8,n|=24;break;case g:return e=Gt(12,s,t,n|2),e.elementType=g,e.lanes=r,e;case X:return e=Gt(13,s,t,n),e.elementType=X,e.lanes=r,e;case J:return e=Gt(19,s,t,n),e.elementType=J,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:case ie:o=10;break e;case W:o=9;break e;case V:o=11;break e;case re:o=14;break e;case de:o=16,l=null;break e}o=29,s=Error(d(130,e===null?"null":typeof e,"")),l=null}return t=Gt(o,s,t,n),t.elementType=e,t.type=l,t.lanes=r,t}function ps(e,t,s,l){return e=Gt(7,e,l,t),e.lanes=s,e}function Si(e,t,s){return e=Gt(6,e,null,t),e.lanes=s,e}function _i(e,t,s){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ks=[],Ps=0,Vn=null,Zn=0,aa=[],sa=0,ys=null,Ea=1,Aa="";function bs(e,t){Ks[Ps++]=Zn,Ks[Ps++]=Vn,Vn=e,Zn=t}function wd(e,t,s){aa[sa++]=Ea,aa[sa++]=Aa,aa[sa++]=ys,ys=e;var l=Ea;e=Aa;var n=32-_(l)-1;l&=~(1<<n),s+=1;var r=32-_(t)+n;if(30<r){var o=n-n%5;r=(l&(1<<o)-1).toString(32),l>>=o,n-=o,Ea=1<<32-_(t)+n|s<<n|l,Aa=r+e}else Ea=1<<r|s<<n|l,Aa=e}function Ei(e){e.return!==null&&(bs(e,1),wd(e,1,0))}function Ai(e){for(;e===Vn;)Vn=Ks[--Ps],Ks[Ps]=null,Zn=Ks[--Ps],Ks[Ps]=null;for(;e===ys;)ys=aa[--sa],aa[sa]=null,Aa=aa[--sa],aa[sa]=null,Ea=aa[--sa],aa[sa]=null}var Tt=null,tt=null,ze=!1,vs=null,fa=!1,Mi=Error(d(519));function js(e){var t=Error(d(418,""));throw Ll(ea(t,e)),Mi}function Sd(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[_t]=e,t[Ut]=l,s){case"dialog":De("cancel",t),De("close",t);break;case"iframe":case"object":case"embed":De("load",t);break;case"video":case"audio":for(s=0;s<cn.length;s++)De(cn[s],t);break;case"source":De("error",t);break;case"img":case"image":case"link":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"input":De("invalid",t),Ho(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),kn(t);break;case"select":De("invalid",t);break;case"textarea":De("invalid",t),Yo(t,l.value,l.defaultValue,l.children),kn(t)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||Ym(t.textContent,s)?(l.popover!=null&&(De("beforetoggle",t),De("toggle",t)),l.onScroll!=null&&De("scroll",t),l.onScrollEnd!=null&&De("scrollend",t),l.onClick!=null&&(t.onclick=Ar),t=!0):t=!1,t||js(e)}function _d(e){for(Tt=e.return;Tt;)switch(Tt.tag){case 5:case 13:fa=!1;return;case 27:case 3:fa=!0;return;default:Tt=Tt.return}}function Ul(e){if(e!==Tt)return!1;if(!ze)return _d(e),ze=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Qc(e.type,e.memoizedProps)),s=!s),s&&tt&&js(e),_d(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(s=e.data,s==="/$"){if(t===0){tt=da(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++;e=e.nextSibling}tt=null}}else t===27?(t=tt,ss(e.type)?(e=Wc,Wc=null,tt=e):tt=t):tt=Tt?da(e.stateNode.nextSibling):null;return!0}function zl(){tt=Tt=null,ze=!1}function Ed(){var e=vs;return e!==null&&(Ht===null?Ht=e:Ht.push.apply(Ht,e),vs=null),e}function Ll(e){vs===null?vs=[e]:vs.push(e)}var Ti=U(null),Ns=null,Ma=null;function $a(e,t,s){ae(Ti,t._currentValue),t._currentValue=s}function Ta(e){e._currentValue=Ti.current,P(Ti)}function Ci(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function Oi(e,t,s,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var o=n.child;r=r.firstContext;e:for(;r!==null;){var m=r;r=n;for(var j=0;j<t.length;j++)if(m.context===t[j]){r.lanes|=s,m=r.alternate,m!==null&&(m.lanes|=s),Ci(r.return,s,e),l||(o=null);break e}r=m.next}}else if(n.tag===18){if(o=n.return,o===null)throw Error(d(341));o.lanes|=s,r=o.alternate,r!==null&&(r.lanes|=s),Ci(o,s,e),o=null}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}}function ql(e,t,s,l){e=null;for(var n=t,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var o=n.alternate;if(o===null)throw Error(d(387));if(o=o.memoizedProps,o!==null){var m=n.type;$t(n.pendingProps.value,o.value)||(e!==null?e.push(m):e=[m])}}else if(n===Me.current){if(o=n.alternate,o===null)throw Error(d(387));o.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(hn):e=[hn])}n=n.return}e!==null&&Oi(t,e,s,l),t.flags|=262144}function Wn(e){for(e=e.firstContext;e!==null;){if(!$t(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ws(e){Ns=e,Ma=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Et(e){return Ad(Ns,e)}function Kn(e,t){return Ns===null&&ws(e),Ad(e,t)}function Ad(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},Ma===null){if(e===null)throw Error(d(308));Ma=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ma=Ma.next=t;return s}var Hh=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Bh=i.unstable_scheduleCallback,Yh=i.unstable_NormalPriority,ut={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new Hh,data:new Map,refCount:0}}function Hl(e){e.refCount--,e.refCount===0&&Bh(Yh,function(){e.controller.abort()})}var Bl=null,ki=0,Js=0,Fs=null;function $h(e,t){if(Bl===null){var s=Bl=[];ki=0,Js=Uc(),Fs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return ki++,t.then(Md,Md),t}function Md(){if(--ki===0&&Bl!==null){Fs!==null&&(Fs.status="fulfilled");var e=Bl;Bl=null,Js=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Gh(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var n=0;n<s.length;n++)(0,s[n])(t)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var Td=S.S;S.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&$h(e,t),Td!==null&&Td(e,t)};var Ss=U(null);function Ri(){var e=Ss.current;return e!==null?e:Ze.pooledCache}function Pn(e,t){t===null?ae(Ss,Ss.current):ae(Ss,t.pool)}function Cd(){var e=Ri();return e===null?null:{parent:ut._currentValue,pool:e}}var Yl=Error(d(460)),Od=Error(d(474)),Jn=Error(d(542)),Ui={then:function(){}};function Dd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Fn(){}function kd(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(Fn,Fn),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ud(e),e;default:if(typeof t.status=="string")t.then(Fn,Fn);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=l}},function(l){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ud(e),e}throw $l=t,Yl}}var $l=null;function Rd(){if($l===null)throw Error(d(459));var e=$l;return $l=null,e}function Ud(e){if(e===Yl||e===Jn)throw Error(d(483))}var Ga=!1;function zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Xa(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(qe&2)!==0){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,t=Qn(e),jd(e,null,s),t}return Gn(e,l,t,s),Qn(e)}function Gl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Mo(e,s)}}function qi(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var o={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?n=r=o:r=r.next=o,s=s.next}while(s!==null);r===null?n=r=t:r=r.next=t}else n=r=t;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Hi=!1;function Ql(){if(Hi){var e=Fs;if(e!==null)throw e}}function Xl(e,t,s,l){Hi=!1;var n=e.updateQueue;Ga=!1;var r=n.firstBaseUpdate,o=n.lastBaseUpdate,m=n.shared.pending;if(m!==null){n.shared.pending=null;var j=m,k=j.next;j.next=null,o===null?r=k:o.next=k,o=j;var K=e.alternate;K!==null&&(K=K.updateQueue,m=K.lastBaseUpdate,m!==o&&(m===null?K.firstBaseUpdate=k:m.next=k,K.lastBaseUpdate=j))}if(r!==null){var te=n.baseState;o=0,K=k=j=null,m=r;do{var R=m.lane&-536870913,z=R!==m.lane;if(z?(Re&R)===R:(l&R)===R){R!==0&&R===Js&&(Hi=!0),K!==null&&(K=K.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var _e=e,be=m;R=t;var Ge=s;switch(be.tag){case 1:if(_e=be.payload,typeof _e=="function"){te=_e.call(Ge,te,R);break e}te=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=be.payload,R=typeof _e=="function"?_e.call(Ge,te,R):_e,R==null)break e;te=y({},te,R);break e;case 2:Ga=!0}}R=m.callback,R!==null&&(e.flags|=64,z&&(e.flags|=8192),z=n.callbacks,z===null?n.callbacks=[R]:z.push(R))}else z={lane:R,tag:m.tag,payload:m.payload,callback:m.callback,next:null},K===null?(k=K=z,j=te):K=K.next=z,o|=R;if(m=m.next,m===null){if(m=n.shared.pending,m===null)break;z=m,m=z.next,z.next=null,n.lastBaseUpdate=z,n.shared.pending=null}}while(!0);K===null&&(j=te),n.baseState=j,n.firstBaseUpdate=k,n.lastBaseUpdate=K,r===null&&(n.shared.lanes=0),Ia|=o,e.lanes=o,e.memoizedState=te}}function zd(e,t){if(typeof e!="function")throw Error(d(191,e));e.call(t)}function Ld(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)zd(s[e],t)}var Is=U(null),In=U(0);function qd(e,t){e=za,ae(In,e),ae(Is,t),za=e|t.baseLanes}function Bi(){ae(In,za),ae(Is,Is.current)}function Yi(){za=In.current,P(Is),P(In)}var Va=0,Te=null,Ye=null,rt=null,er=!1,el=!1,_s=!1,tr=0,Vl=0,tl=null,Qh=0;function lt(){throw Error(d(321))}function $i(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!$t(e[s],t[s]))return!1;return!0}function Gi(e,t,s,l,n,r){return Va=r,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,S.H=e===null||e.memoizedState===null?ju:Nu,_s=!1,r=s(l,n),_s=!1,el&&(r=Bd(t,s,l,n)),Hd(e),r}function Hd(e){S.H=ir;var t=Ye!==null&&Ye.next!==null;if(Va=0,rt=Ye=Te=null,er=!1,Vl=0,tl=null,t)throw Error(d(300));e===null||xt||(e=e.dependencies,e!==null&&Wn(e)&&(xt=!0))}function Bd(e,t,s,l){Te=e;var n=0;do{if(el&&(tl=null),Vl=0,el=!1,25<=n)throw Error(d(301));if(n+=1,rt=Ye=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}S.H=Jh,r=t(s,l)}while(el);return r}function Xh(){var e=S.H,t=e.useState()[0];return t=typeof t.then=="function"?Zl(t):t,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(Te.flags|=1024),t}function Qi(){var e=tr!==0;return tr=0,e}function Xi(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Vi(e){if(er){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}er=!1}Va=0,rt=Ye=Te=null,el=!1,Vl=tr=0,tl=null}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Te.memoizedState=rt=e:rt=rt.next=e,rt}function it(){if(Ye===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=rt===null?Te.memoizedState:rt.next;if(t!==null)rt=t,Ye=e;else{if(e===null)throw Te.alternate===null?Error(d(467)):Error(d(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},rt===null?Te.memoizedState=rt=e:rt=rt.next=e}return rt}function Zi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(e){var t=Vl;return Vl+=1,tl===null&&(tl=[]),e=kd(tl,e,t),t=Te,(rt===null?t.memoizedState:rt.next)===null&&(t=t.alternate,S.H=t===null||t.memoizedState===null?ju:Nu),e}function ar(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zl(e);if(e.$$typeof===ie)return Et(e)}throw Error(d(438,String(e)))}function Wi(e){var t=null,s=Te.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=Te.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Zi(),Te.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=Q;return t.index++,s}function Ca(e,t){return typeof t=="function"?t(e):t}function sr(e){var t=it();return Ki(t,Ye,e)}function Ki(e,t,s){var l=e.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=s;var n=e.baseQueue,r=l.pending;if(r!==null){if(n!==null){var o=n.next;n.next=r.next,r.next=o}t.baseQueue=n=r,l.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var m=o=null,j=null,k=t,K=!1;do{var te=k.lane&-536870913;if(te!==k.lane?(Re&te)===te:(Va&te)===te){var R=k.revertLane;if(R===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),te===Js&&(K=!0);else if((Va&R)===R){k=k.next,R===Js&&(K=!0);continue}else te={lane:0,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},j===null?(m=j=te,o=r):j=j.next=te,Te.lanes|=R,Ia|=R;te=k.action,_s&&s(r,te),r=k.hasEagerState?k.eagerState:s(r,te)}else R={lane:te,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},j===null?(m=j=R,o=r):j=j.next=R,Te.lanes|=te,Ia|=te;k=k.next}while(k!==null&&k!==t);if(j===null?o=r:j.next=m,!$t(r,e.memoizedState)&&(xt=!0,K&&(s=Fs,s!==null)))throw s;e.memoizedState=r,e.baseState=o,e.baseQueue=j,l.lastRenderedState=r}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Pi(e){var t=it(),s=t.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var l=s.dispatch,n=s.pending,r=t.memoizedState;if(n!==null){s.pending=null;var o=n=n.next;do r=e(r,o.action),o=o.next;while(o!==n);$t(r,t.memoizedState)||(xt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),s.lastRenderedState=r}return[r,l]}function Yd(e,t,s){var l=Te,n=it(),r=ze;if(r){if(s===void 0)throw Error(d(407));s=s()}else s=t();var o=!$t((Ye||n).memoizedState,s);o&&(n.memoizedState=s,xt=!0),n=n.queue;var m=Qd.bind(null,l,n,e);if(Wl(2048,8,m,[e]),n.getSnapshot!==t||o||rt!==null&&rt.memoizedState.tag&1){if(l.flags|=2048,al(9,lr(),Gd.bind(null,l,n,s,t),null),Ze===null)throw Error(d(349));r||(Va&124)!==0||$d(l,t,s)}return s}function $d(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Te.updateQueue,t===null?(t=Zi(),Te.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Gd(e,t,s,l){t.value=s,t.getSnapshot=l,Xd(t)&&Vd(e)}function Qd(e,t,s){return s(function(){Xd(t)&&Vd(e)})}function Xd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!$t(e,s)}catch{return!0}}function Vd(e){var t=Zs(e,2);t!==null&&Wt(t,e,2)}function Ji(e){var t=Lt();if(typeof e=="function"){var s=e;if(e=s(),_s){Pe(!0);try{s()}finally{Pe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t}function Zd(e,t,s,l){return e.baseState=s,Ki(e,Ye,typeof l=="function"?l:Ca)}function Vh(e,t,s,l,n){if(rr(e))throw Error(d(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};S.T!==null?s(!0):r.isTransition=!1,l(r),s=t.pending,s===null?(r.next=t.pending=r,Wd(t,r)):(r.next=s.next,t.pending=s.next=r)}}function Wd(e,t){var s=t.action,l=t.payload,n=e.state;if(t.isTransition){var r=S.T,o={};S.T=o;try{var m=s(n,l),j=S.S;j!==null&&j(o,m),Kd(e,t,m)}catch(k){Fi(e,t,k)}finally{S.T=r}}else try{r=s(n,l),Kd(e,t,r)}catch(k){Fi(e,t,k)}}function Kd(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Pd(e,t,l)},function(l){return Fi(e,t,l)}):Pd(e,t,s)}function Pd(e,t,s){t.status="fulfilled",t.value=s,Jd(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Wd(e,s)))}function Fi(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,Jd(t),t=t.next;while(t!==l)}e.action=null}function Jd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Fd(e,t){return t}function Id(e,t){if(ze){var s=Ze.formState;if(s!==null){e:{var l=Te;if(ze){if(tt){t:{for(var n=tt,r=fa;n.nodeType!==8;){if(!r){n=null;break t}if(n=da(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){tt=da(n.nextSibling),l=n.data==="F!";break e}}js(l)}l=!1}l&&(t=s[0])}}return s=Lt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:t},s.queue=l,s=yu.bind(null,Te,l),l.dispatch=s,l=Ji(!1),r=sc.bind(null,Te,!1,l.queue),l=Lt(),n={state:t,dispatch:null,action:e,pending:null},l.queue=n,s=Vh.bind(null,Te,n,r,s),n.dispatch=s,l.memoizedState=e,[t,s,!1]}function eu(e){var t=it();return tu(t,Ye,e)}function tu(e,t,s){if(t=Ki(e,t,Fd)[0],e=sr(Ca)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Zl(t)}catch(o){throw o===Yl?Jn:o}else l=t;t=it();var n=t.queue,r=n.dispatch;return s!==t.memoizedState&&(Te.flags|=2048,al(9,lr(),Zh.bind(null,n,s),null)),[l,r,e]}function Zh(e,t){e.action=t}function au(e){var t=it(),s=Ye;if(s!==null)return tu(t,s,e);it(),t=t.memoizedState,s=it();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function al(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=Te.updateQueue,t===null&&(t=Zi(),Te.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function lr(){return{destroy:void 0,resource:void 0}}function su(){return it().memoizedState}function nr(e,t,s,l){var n=Lt();l=l===void 0?null:l,Te.flags|=e,n.memoizedState=al(1|t,lr(),s,l)}function Wl(e,t,s,l){var n=it();l=l===void 0?null:l;var r=n.memoizedState.inst;Ye!==null&&l!==null&&$i(l,Ye.memoizedState.deps)?n.memoizedState=al(t,r,s,l):(Te.flags|=e,n.memoizedState=al(1|t,r,s,l))}function lu(e,t){nr(8390656,8,e,t)}function nu(e,t){Wl(2048,8,e,t)}function ru(e,t){return Wl(4,2,e,t)}function iu(e,t){return Wl(4,4,e,t)}function cu(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ou(e,t,s){s=s!=null?s.concat([e]):null,Wl(4,4,cu.bind(null,t,e),s)}function Ii(){}function du(e,t){var s=it();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&$i(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function uu(e,t){var s=it();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&$i(t,l[1]))return l[0];if(l=e(),_s){Pe(!0);try{e()}finally{Pe(!1)}}return s.memoizedState=[l,t],l}function ec(e,t,s){return s===void 0||(Va&1073741824)!==0?e.memoizedState=t:(e.memoizedState=s,e=hm(),Te.lanes|=e,Ia|=e,s)}function mu(e,t,s,l){return $t(s,t)?s:Is.current!==null?(e=ec(e,s,l),$t(e,t)||(xt=!0),e):(Va&42)===0?(xt=!0,e.memoizedState=s):(e=hm(),Te.lanes|=e,Ia|=e,t)}function fu(e,t,s,l,n){var r=q.p;q.p=r!==0&&8>r?r:8;var o=S.T,m={};S.T=m,sc(e,!1,t,s);try{var j=n(),k=S.S;if(k!==null&&k(m,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var K=Gh(j,l);Kl(e,t,K,Zt(e))}else Kl(e,t,l,Zt(e))}catch(te){Kl(e,t,{then:function(){},status:"rejected",reason:te},Zt())}finally{q.p=r,S.T=o}}function Wh(){}function tc(e,t,s,l){if(e.tag!==5)throw Error(d(476));var n=hu(e).queue;fu(e,n,t,$,s===null?Wh:function(){return xu(e),s(l)})}function hu(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:$},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function xu(e){var t=hu(e).next.queue;Kl(e,t,{},Zt())}function ac(){return Et(hn)}function gu(){return it().memoizedState}function pu(){return it().memoizedState}function Kh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Zt();e=Qa(s);var l=Xa(t,e,s);l!==null&&(Wt(l,t,s),Gl(l,t,s)),t={cache:Di()},e.payload=t;return}t=t.return}}function Ph(e,t,s){var l=Zt();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},rr(e)?bu(t,s):(s=Ni(e,t,s,l),s!==null&&(Wt(s,e,l),vu(s,t,l)))}function yu(e,t,s){var l=Zt();Kl(e,t,s,l)}function Kl(e,t,s,l){var n={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(rr(e))bu(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,m=r(o,s);if(n.hasEagerState=!0,n.eagerState=m,$t(m,o))return Gn(e,t,n,0),Ze===null&&$n(),!1}catch{}finally{}if(s=Ni(e,t,n,l),s!==null)return Wt(s,e,l),vu(s,t,l),!0}return!1}function sc(e,t,s,l){if(l={lane:2,revertLane:Uc(),action:l,hasEagerState:!1,eagerState:null,next:null},rr(e)){if(t)throw Error(d(479))}else t=Ni(e,s,l,2),t!==null&&Wt(t,e,2)}function rr(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function bu(e,t){el=er=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function vu(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Mo(e,s)}}var ir={readContext:Et,use:ar,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt},ju={readContext:Et,use:ar,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:Et,useEffect:lu,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,nr(4194308,4,cu.bind(null,t,e),s)},useLayoutEffect:function(e,t){return nr(4194308,4,e,t)},useInsertionEffect:function(e,t){nr(4,2,e,t)},useMemo:function(e,t){var s=Lt();t=t===void 0?null:t;var l=e();if(_s){Pe(!0);try{e()}finally{Pe(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=Lt();if(s!==void 0){var n=s(t);if(_s){Pe(!0);try{s(t)}finally{Pe(!1)}}}else n=t;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Ph.bind(null,Te,e),[l.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ji(e);var t=e.queue,s=yu.bind(null,Te,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Ii,useDeferredValue:function(e,t){var s=Lt();return ec(s,e,t)},useTransition:function(){var e=Ji(!1);return e=fu.bind(null,Te,e.queue,!0,!1),Lt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=Te,n=Lt();if(ze){if(s===void 0)throw Error(d(407));s=s()}else{if(s=t(),Ze===null)throw Error(d(349));(Re&124)!==0||$d(l,t,s)}n.memoizedState=s;var r={value:s,getSnapshot:t};return n.queue=r,lu(Qd.bind(null,l,r,e),[e]),l.flags|=2048,al(9,lr(),Gd.bind(null,l,r,s,t),null),s},useId:function(){var e=Lt(),t=Ze.identifierPrefix;if(ze){var s=Aa,l=Ea;s=(l&~(1<<32-_(l)-1)).toString(32)+s,t="«"+t+"R"+s,s=tr++,0<s&&(t+="H"+s.toString(32)),t+="»"}else s=Qh++,t="«"+t+"r"+s.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:ac,useFormState:Id,useActionState:Id,useOptimistic:function(e){var t=Lt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=sc.bind(null,Te,!0,s),s.dispatch=t,[e,t]},useMemoCache:Wi,useCacheRefresh:function(){return Lt().memoizedState=Kh.bind(null,Te)}},Nu={readContext:Et,use:ar,useCallback:du,useContext:Et,useEffect:nu,useImperativeHandle:ou,useInsertionEffect:ru,useLayoutEffect:iu,useMemo:uu,useReducer:sr,useRef:su,useState:function(){return sr(Ca)},useDebugValue:Ii,useDeferredValue:function(e,t){var s=it();return mu(s,Ye.memoizedState,e,t)},useTransition:function(){var e=sr(Ca)[0],t=it().memoizedState;return[typeof e=="boolean"?e:Zl(e),t]},useSyncExternalStore:Yd,useId:gu,useHostTransitionStatus:ac,useFormState:eu,useActionState:eu,useOptimistic:function(e,t){var s=it();return Zd(s,Ye,e,t)},useMemoCache:Wi,useCacheRefresh:pu},Jh={readContext:Et,use:ar,useCallback:du,useContext:Et,useEffect:nu,useImperativeHandle:ou,useInsertionEffect:ru,useLayoutEffect:iu,useMemo:uu,useReducer:Pi,useRef:su,useState:function(){return Pi(Ca)},useDebugValue:Ii,useDeferredValue:function(e,t){var s=it();return Ye===null?ec(s,e,t):mu(s,Ye.memoizedState,e,t)},useTransition:function(){var e=Pi(Ca)[0],t=it().memoizedState;return[typeof e=="boolean"?e:Zl(e),t]},useSyncExternalStore:Yd,useId:gu,useHostTransitionStatus:ac,useFormState:au,useActionState:au,useOptimistic:function(e,t){var s=it();return Ye!==null?Zd(s,Ye,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Wi,useCacheRefresh:pu},sl=null,Pl=0;function cr(e){var t=Pl;return Pl+=1,sl===null&&(sl=[]),kd(sl,e,t)}function Jl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function or(e,t){throw t.$$typeof===H?Error(d(525)):(e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wu(e){var t=e._init;return t(e._payload)}function Su(e){function t(T,A){if(e){var D=T.deletions;D===null?(T.deletions=[A],T.flags|=16):D.push(A)}}function s(T,A){if(!e)return null;for(;A!==null;)t(T,A),A=A.sibling;return null}function l(T){for(var A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function n(T,A){return T=_a(T,A),T.index=0,T.sibling=null,T}function r(T,A,D){return T.index=D,e?(D=T.alternate,D!==null?(D=D.index,D<A?(T.flags|=67108866,A):D):(T.flags|=67108866,A)):(T.flags|=1048576,A)}function o(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function m(T,A,D,F){return A===null||A.tag!==6?(A=Si(D,T.mode,F),A.return=T,A):(A=n(A,D),A.return=T,A)}function j(T,A,D,F){var xe=D.type;return xe===Y?K(T,A,D.props.children,F,D.key):A!==null&&(A.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===de&&wu(xe)===A.type)?(A=n(A,D.props),Jl(A,D),A.return=T,A):(A=Xn(D.type,D.key,D.props,null,T.mode,F),Jl(A,D),A.return=T,A)}function k(T,A,D,F){return A===null||A.tag!==4||A.stateNode.containerInfo!==D.containerInfo||A.stateNode.implementation!==D.implementation?(A=_i(D,T.mode,F),A.return=T,A):(A=n(A,D.children||[]),A.return=T,A)}function K(T,A,D,F,xe){return A===null||A.tag!==7?(A=ps(D,T.mode,F,xe),A.return=T,A):(A=n(A,D),A.return=T,A)}function te(T,A,D){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=Si(""+A,T.mode,D),A.return=T,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case C:return D=Xn(A.type,A.key,A.props,null,T.mode,D),Jl(D,A),D.return=T,D;case I:return A=_i(A,T.mode,D),A.return=T,A;case de:var F=A._init;return A=F(A._payload),te(T,A,D)}if(ee(A)||se(A))return A=ps(A,T.mode,D,null),A.return=T,A;if(typeof A.then=="function")return te(T,cr(A),D);if(A.$$typeof===ie)return te(T,Kn(T,A),D);or(T,A)}return null}function R(T,A,D,F){var xe=A!==null?A.key:null;if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return xe!==null?null:m(T,A,""+D,F);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case C:return D.key===xe?j(T,A,D,F):null;case I:return D.key===xe?k(T,A,D,F):null;case de:return xe=D._init,D=xe(D._payload),R(T,A,D,F)}if(ee(D)||se(D))return xe!==null?null:K(T,A,D,F,null);if(typeof D.then=="function")return R(T,A,cr(D),F);if(D.$$typeof===ie)return R(T,A,Kn(T,D),F);or(T,D)}return null}function z(T,A,D,F,xe){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return T=T.get(D)||null,m(A,T,""+F,xe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return T=T.get(F.key===null?D:F.key)||null,j(A,T,F,xe);case I:return T=T.get(F.key===null?D:F.key)||null,k(A,T,F,xe);case de:var Ce=F._init;return F=Ce(F._payload),z(T,A,D,F,xe)}if(ee(F)||se(F))return T=T.get(D)||null,K(A,T,F,xe,null);if(typeof F.then=="function")return z(T,A,D,cr(F),xe);if(F.$$typeof===ie)return z(T,A,D,Kn(A,F),xe);or(A,F)}return null}function _e(T,A,D,F){for(var xe=null,Ce=null,ge=A,we=A=0,pt=null;ge!==null&&we<D.length;we++){ge.index>we?(pt=ge,ge=null):pt=ge.sibling;var Ue=R(T,ge,D[we],F);if(Ue===null){ge===null&&(ge=pt);break}e&&ge&&Ue.alternate===null&&t(T,ge),A=r(Ue,A,we),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue,ge=pt}if(we===D.length)return s(T,ge),ze&&bs(T,we),xe;if(ge===null){for(;we<D.length;we++)ge=te(T,D[we],F),ge!==null&&(A=r(ge,A,we),Ce===null?xe=ge:Ce.sibling=ge,Ce=ge);return ze&&bs(T,we),xe}for(ge=l(ge);we<D.length;we++)pt=z(ge,T,we,D[we],F),pt!==null&&(e&&pt.alternate!==null&&ge.delete(pt.key===null?we:pt.key),A=r(pt,A,we),Ce===null?xe=pt:Ce.sibling=pt,Ce=pt);return e&&ge.forEach(function(cs){return t(T,cs)}),ze&&bs(T,we),xe}function be(T,A,D,F){if(D==null)throw Error(d(151));for(var xe=null,Ce=null,ge=A,we=A=0,pt=null,Ue=D.next();ge!==null&&!Ue.done;we++,Ue=D.next()){ge.index>we?(pt=ge,ge=null):pt=ge.sibling;var cs=R(T,ge,Ue.value,F);if(cs===null){ge===null&&(ge=pt);break}e&&ge&&cs.alternate===null&&t(T,ge),A=r(cs,A,we),Ce===null?xe=cs:Ce.sibling=cs,Ce=cs,ge=pt}if(Ue.done)return s(T,ge),ze&&bs(T,we),xe;if(ge===null){for(;!Ue.done;we++,Ue=D.next())Ue=te(T,Ue.value,F),Ue!==null&&(A=r(Ue,A,we),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue);return ze&&bs(T,we),xe}for(ge=l(ge);!Ue.done;we++,Ue=D.next())Ue=z(ge,T,we,Ue.value,F),Ue!==null&&(e&&Ue.alternate!==null&&ge.delete(Ue.key===null?we:Ue.key),A=r(Ue,A,we),Ce===null?xe=Ue:Ce.sibling=Ue,Ce=Ue);return e&&ge.forEach(function(F0){return t(T,F0)}),ze&&bs(T,we),xe}function Ge(T,A,D,F){if(typeof D=="object"&&D!==null&&D.type===Y&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case C:e:{for(var xe=D.key;A!==null;){if(A.key===xe){if(xe=D.type,xe===Y){if(A.tag===7){s(T,A.sibling),F=n(A,D.props.children),F.return=T,T=F;break e}}else if(A.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===de&&wu(xe)===A.type){s(T,A.sibling),F=n(A,D.props),Jl(F,D),F.return=T,T=F;break e}s(T,A);break}else t(T,A);A=A.sibling}D.type===Y?(F=ps(D.props.children,T.mode,F,D.key),F.return=T,T=F):(F=Xn(D.type,D.key,D.props,null,T.mode,F),Jl(F,D),F.return=T,T=F)}return o(T);case I:e:{for(xe=D.key;A!==null;){if(A.key===xe)if(A.tag===4&&A.stateNode.containerInfo===D.containerInfo&&A.stateNode.implementation===D.implementation){s(T,A.sibling),F=n(A,D.children||[]),F.return=T,T=F;break e}else{s(T,A);break}else t(T,A);A=A.sibling}F=_i(D,T.mode,F),F.return=T,T=F}return o(T);case de:return xe=D._init,D=xe(D._payload),Ge(T,A,D,F)}if(ee(D))return _e(T,A,D,F);if(se(D)){if(xe=se(D),typeof xe!="function")throw Error(d(150));return D=xe.call(D),be(T,A,D,F)}if(typeof D.then=="function")return Ge(T,A,cr(D),F);if(D.$$typeof===ie)return Ge(T,A,Kn(T,D),F);or(T,D)}return typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint"?(D=""+D,A!==null&&A.tag===6?(s(T,A.sibling),F=n(A,D),F.return=T,T=F):(s(T,A),F=Si(D,T.mode,F),F.return=T,T=F),o(T)):s(T,A)}return function(T,A,D,F){try{Pl=0;var xe=Ge(T,A,D,F);return sl=null,xe}catch(ge){if(ge===Yl||ge===Jn)throw ge;var Ce=Gt(29,ge,null,T.mode);return Ce.lanes=F,Ce.return=T,Ce}finally{}}}var ll=Su(!0),_u=Su(!1),la=U(null),ha=null;function Za(e){var t=e.alternate;ae(mt,mt.current&1),ae(la,e),ha===null&&(t===null||Is.current!==null||t.memoizedState!==null)&&(ha=e)}function Eu(e){if(e.tag===22){if(ae(mt,mt.current),ae(la,e),ha===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(ha=e)}}else Wa()}function Wa(){ae(mt,mt.current),ae(la,la.current)}function Oa(e){P(la),ha===e&&(ha=null),P(mt)}var mt=U(0);function dr(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||Zc(s)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function lc(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:y({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var nc={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=Zt(),n=Qa(l);n.payload=t,s!=null&&(n.callback=s),t=Xa(e,n,l),t!==null&&(Wt(t,e,l),Gl(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=Zt(),n=Qa(l);n.tag=1,n.payload=t,s!=null&&(n.callback=s),t=Xa(e,n,l),t!==null&&(Wt(t,e,l),Gl(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Zt(),l=Qa(s);l.tag=2,t!=null&&(l.callback=t),t=Xa(e,l,s),t!==null&&(Wt(t,e,s),Gl(t,e,s))}};function Au(e,t,s,l,n,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,r,o):t.prototype&&t.prototype.isPureReactComponent?!kl(s,l)||!kl(n,r):!0}function Mu(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&nc.enqueueReplaceState(t,t.state,null)}function Es(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=y({},s));for(var n in e)s[n]===void 0&&(s[n]=e[n])}return s}var ur=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Tu(e){ur(e)}function Cu(e){console.error(e)}function Ou(e){ur(e)}function mr(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Du(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function rc(e,t,s){return s=Qa(s),s.tag=3,s.payload={element:null},s.callback=function(){mr(e,t)},s}function ku(e){return e=Qa(e),e.tag=3,e}function Ru(e,t,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;e.payload=function(){return n(r)},e.callback=function(){Du(t,s,l)}}var o=s.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){Du(t,s,l),typeof n!="function"&&(es===null?es=new Set([this]):es.add(this));var m=l.stack;this.componentDidCatch(l.value,{componentStack:m!==null?m:""})})}function Fh(e,t,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&ql(t,s,n,!0),s=la.current,s!==null){switch(s.tag){case 13:return ha===null?Cc():s.alternate===null&&at===0&&(at=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===Ui?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Dc(e,l,n)),!1;case 22:return s.flags|=65536,l===Ui?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Dc(e,l,n)),!1}throw Error(d(435,s.tag))}return Dc(e,l,n),Cc(),!1}if(ze)return t=la.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,l!==Mi&&(e=Error(d(422),{cause:l}),Ll(ea(e,s)))):(l!==Mi&&(t=Error(d(423),{cause:l}),Ll(ea(t,s))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=ea(l,s),n=rc(e.stateNode,l,n),qi(e,n),at!==4&&(at=2)),!1;var r=Error(d(520),{cause:l});if(r=ea(r,s),ln===null?ln=[r]:ln.push(r),at!==4&&(at=2),t===null)return!0;l=ea(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=n&-n,s.lanes|=e,e=rc(s.stateNode,l,e),qi(s,e),!1;case 1:if(t=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(es===null||!es.has(r))))return s.flags|=65536,n&=-n,s.lanes|=n,n=ku(n),Ru(n,e,s,l),qi(s,n),!1}s=s.return}while(s!==null);return!1}var Uu=Error(d(461)),xt=!1;function jt(e,t,s,l){t.child=e===null?_u(t,null,s,l):ll(t,e.child,s,l)}function zu(e,t,s,l,n){s=s.render;var r=t.ref;if("ref"in l){var o={};for(var m in l)m!=="ref"&&(o[m]=l[m])}else o=l;return ws(t),l=Gi(e,t,s,o,r,n),m=Qi(),e!==null&&!xt?(Xi(e,t,n),Da(e,t,n)):(ze&&m&&Ei(t),t.flags|=1,jt(e,t,l,n),t.child)}function Lu(e,t,s,l,n){if(e===null){var r=s.type;return typeof r=="function"&&!wi(r)&&r.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=r,qu(e,t,r,l,n)):(e=Xn(s.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!hc(e,n)){var o=r.memoizedProps;if(s=s.compare,s=s!==null?s:kl,s(o,l)&&e.ref===t.ref)return Da(e,t,n)}return t.flags|=1,e=_a(r,l),e.ref=t.ref,e.return=t,t.child=e}function qu(e,t,s,l,n){if(e!==null){var r=e.memoizedProps;if(kl(r,l)&&e.ref===t.ref)if(xt=!1,t.pendingProps=l=r,hc(e,n))(e.flags&131072)!==0&&(xt=!0);else return t.lanes=e.lanes,Da(e,t,n)}return ic(e,t,s,l,n)}function Hu(e,t,s){var l=t.pendingProps,n=l.children,r=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=r!==null?r.baseLanes|s:s,e!==null){for(n=t.child=e.child,r=0;n!==null;)r=r|n.lanes|n.childLanes,n=n.sibling;t.childLanes=r&~l}else t.childLanes=0,t.child=null;return Bu(e,t,l,s)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Pn(t,r!==null?r.cachePool:null),r!==null?qd(t,r):Bi(),Eu(t);else return t.lanes=t.childLanes=536870912,Bu(e,t,r!==null?r.baseLanes|s:s,s)}else r!==null?(Pn(t,r.cachePool),qd(t,r),Wa(),t.memoizedState=null):(e!==null&&Pn(t,null),Bi(),Wa());return jt(e,t,n,s),t.child}function Bu(e,t,s,l){var n=Ri();return n=n===null?null:{parent:ut._currentValue,pool:n},t.memoizedState={baseLanes:s,cachePool:n},e!==null&&Pn(t,null),Bi(),Eu(t),e!==null&&ql(e,t,l,!0),null}function fr(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function ic(e,t,s,l,n){return ws(t),s=Gi(e,t,s,l,void 0,n),l=Qi(),e!==null&&!xt?(Xi(e,t,n),Da(e,t,n)):(ze&&l&&Ei(t),t.flags|=1,jt(e,t,s,n),t.child)}function Yu(e,t,s,l,n,r){return ws(t),t.updateQueue=null,s=Bd(t,l,s,n),Hd(e),l=Qi(),e!==null&&!xt?(Xi(e,t,r),Da(e,t,r)):(ze&&l&&Ei(t),t.flags|=1,jt(e,t,s,r),t.child)}function $u(e,t,s,l,n){if(ws(t),t.stateNode===null){var r=Ws,o=s.contextType;typeof o=="object"&&o!==null&&(r=Et(o)),r=new s(l,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=nc,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=l,r.state=t.memoizedState,r.refs={},zi(t),o=s.contextType,r.context=typeof o=="object"&&o!==null?Et(o):Ws,r.state=t.memoizedState,o=s.getDerivedStateFromProps,typeof o=="function"&&(lc(t,s,o,l),r.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&nc.enqueueReplaceState(r,r.state,null),Xl(t,l,r,n),Ql(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){r=t.stateNode;var m=t.memoizedProps,j=Es(s,m);r.props=j;var k=r.context,K=s.contextType;o=Ws,typeof K=="object"&&K!==null&&(o=Et(K));var te=s.getDerivedStateFromProps;K=typeof te=="function"||typeof r.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,K||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(m||k!==o)&&Mu(t,r,l,o),Ga=!1;var R=t.memoizedState;r.state=R,Xl(t,l,r,n),Ql(),k=t.memoizedState,m||R!==k||Ga?(typeof te=="function"&&(lc(t,s,te,l),k=t.memoizedState),(j=Ga||Au(t,s,j,l,R,k,o))?(K||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=k),r.props=l,r.state=k,r.context=o,l=j):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{r=t.stateNode,Li(e,t),o=t.memoizedProps,K=Es(s,o),r.props=K,te=t.pendingProps,R=r.context,k=s.contextType,j=Ws,typeof k=="object"&&k!==null&&(j=Et(k)),m=s.getDerivedStateFromProps,(k=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==te||R!==j)&&Mu(t,r,l,j),Ga=!1,R=t.memoizedState,r.state=R,Xl(t,l,r,n),Ql();var z=t.memoizedState;o!==te||R!==z||Ga||e!==null&&e.dependencies!==null&&Wn(e.dependencies)?(typeof m=="function"&&(lc(t,s,m,l),z=t.memoizedState),(K=Ga||Au(t,s,K,l,R,z,j)||e!==null&&e.dependencies!==null&&Wn(e.dependencies))?(k||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,z,j),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,z,j)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=z),r.props=l,r.state=z,r.context=j,l=K):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),l=!1)}return r=l,fr(e,t),l=(t.flags&128)!==0,r||l?(r=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&l?(t.child=ll(t,e.child,null,n),t.child=ll(t,null,s,n)):jt(e,t,s,n),t.memoizedState=r.state,e=t.child):e=Da(e,t,n),e}function Gu(e,t,s,l){return zl(),t.flags|=256,jt(e,t,s,l),t.child}var cc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oc(e){return{baseLanes:e,cachePool:Cd()}}function dc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=na),e}function Qu(e,t,s){var l=t.pendingProps,n=!1,r=(t.flags&128)!==0,o;if((o=r)||(o=e!==null&&e.memoizedState===null?!1:(mt.current&2)!==0),o&&(n=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(ze){if(n?Za(t):Wa(),ze){var m=tt,j;if(j=m){e:{for(j=m,m=fa;j.nodeType!==8;){if(!m){m=null;break e}if(j=da(j.nextSibling),j===null){m=null;break e}}m=j}m!==null?(t.memoizedState={dehydrated:m,treeContext:ys!==null?{id:Ea,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},j=Gt(18,null,null,0),j.stateNode=m,j.return=t,t.child=j,Tt=t,tt=null,j=!0):j=!1}j||js(t)}if(m=t.memoizedState,m!==null&&(m=m.dehydrated,m!==null))return Zc(m)?t.lanes=32:t.lanes=536870912,null;Oa(t)}return m=l.children,l=l.fallback,n?(Wa(),n=t.mode,m=hr({mode:"hidden",children:m},n),l=ps(l,n,s,null),m.return=t,l.return=t,m.sibling=l,t.child=m,n=t.child,n.memoizedState=oc(s),n.childLanes=dc(e,o,s),t.memoizedState=cc,l):(Za(t),uc(t,m))}if(j=e.memoizedState,j!==null&&(m=j.dehydrated,m!==null)){if(r)t.flags&256?(Za(t),t.flags&=-257,t=mc(e,t,s)):t.memoizedState!==null?(Wa(),t.child=e.child,t.flags|=128,t=null):(Wa(),n=l.fallback,m=t.mode,l=hr({mode:"visible",children:l.children},m),n=ps(n,m,s,null),n.flags|=2,l.return=t,n.return=t,l.sibling=n,t.child=l,ll(t,e.child,null,s),l=t.child,l.memoizedState=oc(s),l.childLanes=dc(e,o,s),t.memoizedState=cc,t=n);else if(Za(t),Zc(m)){if(o=m.nextSibling&&m.nextSibling.dataset,o)var k=o.dgst;o=k,l=Error(d(419)),l.stack="",l.digest=o,Ll({value:l,source:null,stack:null}),t=mc(e,t,s)}else if(xt||ql(e,t,s,!1),o=(s&e.childLanes)!==0,xt||o){if(o=Ze,o!==null&&(l=s&-s,l=(l&42)!==0?1:Wr(l),l=(l&(o.suspendedLanes|s))!==0?0:l,l!==0&&l!==j.retryLane))throw j.retryLane=l,Zs(e,l),Wt(o,e,l),Uu;m.data==="$?"||Cc(),t=mc(e,t,s)}else m.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=j.treeContext,tt=da(m.nextSibling),Tt=t,ze=!0,vs=null,fa=!1,e!==null&&(aa[sa++]=Ea,aa[sa++]=Aa,aa[sa++]=ys,Ea=e.id,Aa=e.overflow,ys=t),t=uc(t,l.children),t.flags|=4096);return t}return n?(Wa(),n=l.fallback,m=t.mode,j=e.child,k=j.sibling,l=_a(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,k!==null?n=_a(k,n):(n=ps(n,m,s,null),n.flags|=2),n.return=t,l.return=t,l.sibling=n,t.child=l,l=n,n=t.child,m=e.child.memoizedState,m===null?m=oc(s):(j=m.cachePool,j!==null?(k=ut._currentValue,j=j.parent!==k?{parent:k,pool:k}:j):j=Cd(),m={baseLanes:m.baseLanes|s,cachePool:j}),n.memoizedState=m,n.childLanes=dc(e,o,s),t.memoizedState=cc,l):(Za(t),s=e.child,e=s.sibling,s=_a(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=s,t.memoizedState=null,s)}function uc(e,t){return t=hr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function hr(e,t){return e=Gt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function mc(e,t,s){return ll(t,e.child,null,s),e=uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xu(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ci(e.return,t,s)}function fc(e,t,s,l,n){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=s,r.tailMode=n)}function Vu(e,t,s){var l=t.pendingProps,n=l.revealOrder,r=l.tail;if(jt(e,t,l.children,s),l=mt.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xu(e,s,t);else if(e.tag===19)Xu(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ae(mt,l),n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&dr(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),fc(t,!1,n,s,r);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&dr(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}fc(t,!0,s,null,r);break;case"together":fc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Da(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ia|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(ql(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,s=_a(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=_a(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function hc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Wn(e)))}function Ih(e,t,s){switch(t.tag){case 3:Ee(t,t.stateNode.containerInfo),$a(t,ut,e.memoizedState.cache),zl();break;case 27:case 5:dt(t);break;case 4:Ee(t,t.stateNode.containerInfo);break;case 10:$a(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Za(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Qu(e,t,s):(Za(t),e=Da(e,t,s),e!==null?e.sibling:null);Za(t);break;case 19:var n=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(ql(e,t,s,!1),l=(s&t.childLanes)!==0),n){if(l)return Vu(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ae(mt,mt.current),l)break;return null;case 22:case 23:return t.lanes=0,Hu(e,t,s);case 24:$a(t,ut,e.memoizedState.cache)}return Da(e,t,s)}function Zu(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)xt=!0;else{if(!hc(e,s)&&(t.flags&128)===0)return xt=!1,Ih(e,t,s);xt=(e.flags&131072)!==0}else xt=!1,ze&&(t.flags&1048576)!==0&&wd(t,Zn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,n=l._init;if(l=n(l._payload),t.type=l,typeof l=="function")wi(l)?(e=Es(l,e),t.tag=1,t=$u(null,t,l,e,s)):(t.tag=0,t=ic(null,t,l,e,s));else{if(l!=null){if(n=l.$$typeof,n===V){t.tag=11,t=zu(null,t,l,e,s);break e}else if(n===re){t.tag=14,t=Lu(null,t,l,e,s);break e}}throw t=O(l)||l,Error(d(306,t,""))}}return t;case 0:return ic(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,n=Es(l,t.pendingProps),$u(e,t,l,n,s);case 3:e:{if(Ee(t,t.stateNode.containerInfo),e===null)throw Error(d(387));l=t.pendingProps;var r=t.memoizedState;n=r.element,Li(e,t),Xl(t,l,null,s);var o=t.memoizedState;if(l=o.cache,$a(t,ut,l),l!==r.cache&&Oi(t,[ut],s,!0),Ql(),l=o.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Gu(e,t,l,s);break e}else if(l!==n){n=ea(Error(d(424)),t),Ll(n),t=Gu(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(tt=da(e.firstChild),Tt=t,ze=!0,vs=null,fa=!0,s=_u(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(zl(),l===n){t=Da(e,t,s);break e}jt(e,t,l,s)}t=t.child}return t;case 26:return fr(e,t),e===null?(s=Jm(t.type,null,t.pendingProps,null))?t.memoizedState=s:ze||(s=t.type,e=t.pendingProps,l=Mr(ce.current).createElement(s),l[_t]=t,l[Ut]=e,wt(l,s,e),ht(l),t.stateNode=l):t.memoizedState=Jm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return dt(t),e===null&&ze&&(l=t.stateNode=Wm(t.type,t.pendingProps,ce.current),Tt=t,fa=!0,n=tt,ss(t.type)?(Wc=n,tt=da(l.firstChild)):tt=n),jt(e,t,t.pendingProps.children,s),fr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ze&&((n=l=tt)&&(l=A0(l,t.type,t.pendingProps,fa),l!==null?(t.stateNode=l,Tt=t,tt=da(l.firstChild),fa=!1,n=!0):n=!1),n||js(t)),dt(t),n=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,l=r.children,Qc(n,r)?l=null:o!==null&&Qc(n,o)&&(t.flags|=32),t.memoizedState!==null&&(n=Gi(e,t,Xh,null,null,s),hn._currentValue=n),fr(e,t),jt(e,t,l,s),t.child;case 6:return e===null&&ze&&((e=s=tt)&&(s=M0(s,t.pendingProps,fa),s!==null?(t.stateNode=s,Tt=t,tt=null,e=!0):e=!1),e||js(t)),null;case 13:return Qu(e,t,s);case 4:return Ee(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=ll(t,null,l,s):jt(e,t,l,s),t.child;case 11:return zu(e,t,t.type,t.pendingProps,s);case 7:return jt(e,t,t.pendingProps,s),t.child;case 8:return jt(e,t,t.pendingProps.children,s),t.child;case 12:return jt(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,$a(t,t.type,l.value),jt(e,t,l.children,s),t.child;case 9:return n=t.type._context,l=t.pendingProps.children,ws(t),n=Et(n),l=l(n),t.flags|=1,jt(e,t,l,s),t.child;case 14:return Lu(e,t,t.type,t.pendingProps,s);case 15:return qu(e,t,t.type,t.pendingProps,s);case 19:return Vu(e,t,s);case 31:return l=t.pendingProps,s=t.mode,l={mode:l.mode,children:l.children},e===null?(s=hr(l,s),s.ref=t.ref,t.child=s,s.return=t,t=s):(s=_a(e.child,l),s.ref=t.ref,t.child=s,s.return=t,t=s),t;case 22:return Hu(e,t,s);case 24:return ws(t),l=Et(ut),e===null?(n=Ri(),n===null&&(n=Ze,r=Di(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=s),n=r),t.memoizedState={parent:l,cache:n},zi(t),$a(t,ut,n)):((e.lanes&s)!==0&&(Li(e,t),Xl(t,null,null,s),Ql()),n=e.memoizedState,r=t.memoizedState,n.parent!==l?(n={parent:l,cache:l},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),$a(t,ut,l)):(l=r.cache,$a(t,ut,l),l!==n.cache&&Oi(t,[ut],s,!0))),jt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function ka(e){e.flags|=4}function Wu(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!af(t)){if(t=la.current,t!==null&&((Re&4194048)===Re?ha!==null:(Re&62914560)!==Re&&(Re&536870912)===0||t!==ha))throw $l=Ui,Od;e.flags|=8192}}function xr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Eo():536870912,e.lanes|=t,cl|=t)}function Fl(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function e0(e,t,s){var l=t.pendingProps;switch(Ai(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return et(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Ta(ut),Xe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ul(t)?ka(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ed())),et(t),null;case 26:return s=t.memoizedState,e===null?(ka(t),s!==null?(et(t),Wu(t,s)):(et(t),t.flags&=-16777217)):s?s!==e.memoizedState?(ka(t),et(t),Wu(t,s)):(et(t),t.flags&=-16777217):(e.memoizedProps!==l&&ka(t),et(t),t.flags&=-16777217),null;case 27:ft(t),s=ce.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ka(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return et(t),null}e=le.current,Ul(t)?Sd(t):(e=Wm(n,l,s),t.stateNode=e,ka(t))}return et(t),null;case 5:if(ft(t),s=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ka(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return et(t),null}if(e=le.current,Ul(t))Sd(t);else{switch(n=Mr(ce.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?n.createElement(s,{is:l.is}):n.createElement(s)}}e[_t]=t,e[Ut]=l;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(wt(e,s,l),s){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ka(t)}}return et(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ka(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(e=ce.current,Ul(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,n=Tt,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[_t]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Ym(e.nodeValue,s)),e||js(t)}else e=Mr(e).createTextNode(l),e[_t]=t,t.stateNode=e}return et(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=Ul(t),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(d(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(d(317));n[_t]=t}else zl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;et(t),n=!1}else n=Ed(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Oa(t),t):(Oa(t),null)}if(Oa(t),(t.flags&128)!==0)return t.lanes=s,t;if(s=l!==null,e=e!==null&&e.memoizedState!==null,s){l=t.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var r=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)}return s!==e&&s&&(t.child.flags|=8192),xr(t,t.updateQueue),et(t),null;case 4:return Xe(),e===null&&Hc(t.stateNode.containerInfo),et(t),null;case 10:return Ta(t.type),et(t),null;case 19:if(P(mt),n=t.memoizedState,n===null)return et(t),null;if(l=(t.flags&128)!==0,r=n.rendering,r===null)if(l)Fl(n,!1);else{if(at!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=dr(e),r!==null){for(t.flags|=128,Fl(n,!1),e=r.updateQueue,t.updateQueue=e,xr(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Nd(s,e),s=s.sibling;return ae(mt,mt.current&1|2),t.child}e=e.sibling}n.tail!==null&&ke()>yr&&(t.flags|=128,l=!0,Fl(n,!1),t.lanes=4194304)}else{if(!l)if(e=dr(r),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,xr(t,e),Fl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!r.alternate&&!ze)return et(t),null}else 2*ke()-n.renderingStartTime>yr&&s!==536870912&&(t.flags|=128,l=!0,Fl(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(e=n.last,e!==null?e.sibling=r:t.child=r,n.last=r)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=ke(),t.sibling=null,e=mt.current,ae(mt,l?e&1|2:e&1),t):(et(t),null);case 22:case 23:return Oa(t),Yi(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),s=t.updateQueue,s!==null&&xr(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&P(Ss),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Ta(ut),et(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function t0(e,t){switch(Ai(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ta(ut),Xe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ft(t),null;case 13:if(Oa(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));zl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return P(mt),null;case 4:return Xe(),null;case 10:return Ta(t.type),null;case 22:case 23:return Oa(t),Yi(),e!==null&&P(Ss),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ta(ut),null;case 25:return null;default:return null}}function Ku(e,t){switch(Ai(t),t.tag){case 3:Ta(ut),Xe();break;case 26:case 27:case 5:ft(t);break;case 4:Xe();break;case 13:Oa(t);break;case 19:P(mt);break;case 10:Ta(t.type);break;case 22:case 23:Oa(t),Yi(),e!==null&&P(Ss);break;case 24:Ta(ut)}}function Il(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&e)===e){l=void 0;var r=s.create,o=s.inst;l=r(),o.destroy=l}s=s.next}while(s!==n)}}catch(m){Qe(t,t.return,m)}}function Ka(e,t,s){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&e)===e){var o=l.inst,m=o.destroy;if(m!==void 0){o.destroy=void 0,n=t;var j=s,k=m;try{k()}catch(K){Qe(n,j,K)}}}l=l.next}while(l!==r)}}catch(K){Qe(t,t.return,K)}}function Pu(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Ld(t,s)}catch(l){Qe(e,e.return,l)}}}function Ju(e,t,s){s.props=Es(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Qe(e,t,l)}}function en(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(n){Qe(e,t,n)}}function xa(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){Qe(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){Qe(e,t,n)}else s.current=null}function Fu(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){Qe(e,e.return,n)}}function xc(e,t,s){try{var l=e.stateNode;N0(l,e.type,s,t),l[Ut]=t}catch(n){Qe(e,e.return,n)}}function Iu(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ss(e.type)||e.tag===4}function gc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Iu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ss(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ar));else if(l!==4&&(l===27&&ss(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(pc(e,t,s),e=e.sibling;e!==null;)pc(e,t,s),e=e.sibling}function gr(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&ss(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(gr(e,t,s),e=e.sibling;e!==null;)gr(e,t,s),e=e.sibling}function em(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);wt(t,l,s),t[_t]=e,t[Ut]=s}catch(r){Qe(e,e.return,r)}}var Ra=!1,nt=!1,yc=!1,tm=typeof WeakSet=="function"?WeakSet:Set,gt=null;function a0(e,t){if(e=e.containerInfo,$c=Rr,e=md(e),gi(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var o=0,m=-1,j=-1,k=0,K=0,te=e,R=null;t:for(;;){for(var z;te!==s||n!==0&&te.nodeType!==3||(m=o+n),te!==r||l!==0&&te.nodeType!==3||(j=o+l),te.nodeType===3&&(o+=te.nodeValue.length),(z=te.firstChild)!==null;)R=te,te=z;for(;;){if(te===e)break t;if(R===s&&++k===n&&(m=o),R===r&&++K===l&&(j=o),(z=te.nextSibling)!==null)break;te=R,R=te.parentNode}te=z}s=m===-1||j===-1?null:{start:m,end:j}}else s=null}s=s||{start:0,end:0}}else s=null;for(Gc={focusedElem:e,selectionRange:s},Rr=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){switch(t=gt,r=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,s=t,n=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var _e=Es(s.type,n,s.elementType===s.type);e=l.getSnapshotBeforeUpdate(_e,r),l.__reactInternalSnapshotBeforeUpdate=e}catch(be){Qe(s,s.return,be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Vc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}}function am(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Pa(e,s),l&4&&Il(5,s);break;case 1:if(Pa(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(o){Qe(s,s.return,o)}else{var n=Es(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Qe(s,s.return,o)}}l&64&&Pu(s),l&512&&en(s,s.return);break;case 3:if(Pa(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Ld(e,t)}catch(o){Qe(s,s.return,o)}}break;case 27:t===null&&l&4&&em(s);case 26:case 5:Pa(e,s),t===null&&l&4&&Fu(s),l&512&&en(s,s.return);break;case 12:Pa(e,s);break;case 13:Pa(e,s),l&4&&nm(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=u0.bind(null,s),T0(e,s))));break;case 22:if(l=s.memoizedState!==null||Ra,!l){t=t!==null&&t.memoizedState!==null||nt,n=Ra;var r=nt;Ra=l,(nt=t)&&!r?Ja(e,s,(s.subtreeFlags&8772)!==0):Pa(e,s),Ra=n,nt=r}break;case 30:break;default:Pa(e,s)}}function sm(e){var t=e.alternate;t!==null&&(e.alternate=null,sm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Jr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Fe=null,qt=!1;function Ua(e,t,s){for(s=s.child;s!==null;)lm(e,t,s),s=s.sibling}function lm(e,t,s){if(Ke&&typeof Ke.onCommitFiberUnmount=="function")try{Ke.onCommitFiberUnmount(Ve,s)}catch{}switch(s.tag){case 26:nt||xa(s,t),Ua(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:nt||xa(s,t);var l=Fe,n=qt;ss(s.type)&&(Fe=s.stateNode,qt=!1),Ua(e,t,s),dn(s.stateNode),Fe=l,qt=n;break;case 5:nt||xa(s,t);case 6:if(l=Fe,n=qt,Fe=null,Ua(e,t,s),Fe=l,qt=n,Fe!==null)if(qt)try{(Fe.nodeType===9?Fe.body:Fe.nodeName==="HTML"?Fe.ownerDocument.body:Fe).removeChild(s.stateNode)}catch(r){Qe(s,t,r)}else try{Fe.removeChild(s.stateNode)}catch(r){Qe(s,t,r)}break;case 18:Fe!==null&&(qt?(e=Fe,Vm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),yn(e)):Vm(Fe,s.stateNode));break;case 4:l=Fe,n=qt,Fe=s.stateNode.containerInfo,qt=!0,Ua(e,t,s),Fe=l,qt=n;break;case 0:case 11:case 14:case 15:nt||Ka(2,s,t),nt||Ka(4,s,t),Ua(e,t,s);break;case 1:nt||(xa(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Ju(s,t,l)),Ua(e,t,s);break;case 21:Ua(e,t,s);break;case 22:nt=(l=nt)||s.memoizedState!==null,Ua(e,t,s),nt=l;break;default:Ua(e,t,s)}}function nm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{yn(e)}catch(s){Qe(t,t.return,s)}}function s0(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new tm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new tm),t;default:throw Error(d(435,e.tag))}}function bc(e,t){var s=s0(e);t.forEach(function(l){var n=m0.bind(null,e,l);s.has(l)||(s.add(l),l.then(n,n))})}function Qt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],r=e,o=t,m=o;e:for(;m!==null;){switch(m.tag){case 27:if(ss(m.type)){Fe=m.stateNode,qt=!1;break e}break;case 5:Fe=m.stateNode,qt=!1;break e;case 3:case 4:Fe=m.stateNode.containerInfo,qt=!0;break e}m=m.return}if(Fe===null)throw Error(d(160));lm(r,o,n),Fe=null,qt=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)rm(t,e),t=t.sibling}var oa=null;function rm(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qt(t,e),Xt(e),l&4&&(Ka(3,e,e.return),Il(3,e),Ka(5,e,e.return));break;case 1:Qt(t,e),Xt(e),l&512&&(nt||s===null||xa(s,s.return)),l&64&&Ra&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=oa;if(Qt(t,e),Xt(e),l&512&&(nt||s===null||xa(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[Sl]||r[_t]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),wt(r,l,s),r[_t]=e,ht(r),l=r;break e;case"link":var o=ef("link","href",n).get(l+(s.href||""));if(o){for(var m=0;m<o.length;m++)if(r=o[m],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){o.splice(m,1);break t}}r=n.createElement(l),wt(r,l,s),n.head.appendChild(r);break;case"meta":if(o=ef("meta","content",n).get(l+(s.content||""))){for(m=0;m<o.length;m++)if(r=o[m],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){o.splice(m,1);break t}}r=n.createElement(l),wt(r,l,s),n.head.appendChild(r);break;default:throw Error(d(468,l))}r[_t]=e,ht(r),l=r}e.stateNode=l}else tf(n,e.type,e.stateNode);else e.stateNode=Im(n,l,e.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?tf(n,e.type,e.stateNode):Im(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&xc(e,e.memoizedProps,s.memoizedProps)}break;case 27:Qt(t,e),Xt(e),l&512&&(nt||s===null||xa(s,s.return)),s!==null&&l&4&&xc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Qt(t,e),Xt(e),l&512&&(nt||s===null||xa(s,s.return)),e.flags&32){n=e.stateNode;try{Bs(n,"")}catch(z){Qe(e,e.return,z)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,xc(e,n,s!==null?s.memoizedProps:n)),l&1024&&(yc=!0);break;case 6:if(Qt(t,e),Xt(e),l&4){if(e.stateNode===null)throw Error(d(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(z){Qe(e,e.return,z)}}break;case 3:if(Or=null,n=oa,oa=Tr(t.containerInfo),Qt(t,e),oa=n,Xt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{yn(t.containerInfo)}catch(z){Qe(e,e.return,z)}yc&&(yc=!1,im(e));break;case 4:l=oa,oa=Tr(e.stateNode.containerInfo),Qt(t,e),Xt(e),oa=l;break;case 12:Qt(t,e),Xt(e);break;case 13:Qt(t,e),Xt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(_c=ke()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bc(e,l)));break;case 22:n=e.memoizedState!==null;var j=s!==null&&s.memoizedState!==null,k=Ra,K=nt;if(Ra=k||n,nt=K||j,Qt(t,e),nt=K,Ra=k,Xt(e),l&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(s===null||j||Ra||nt||As(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){j=s=t;try{if(r=j.stateNode,n)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{m=j.stateNode;var te=j.memoizedProps.style,R=te!=null&&te.hasOwnProperty("display")?te.display:null;m.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(z){Qe(j,j.return,z)}}}else if(t.tag===6){if(s===null){j=t;try{j.stateNode.nodeValue=n?"":j.memoizedProps}catch(z){Qe(j,j.return,z)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,bc(e,s))));break;case 19:Qt(t,e),Xt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,bc(e,l)));break;case 30:break;case 21:break;default:Qt(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(Iu(l)){s=l;break}l=l.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var n=s.stateNode,r=gc(e);gr(e,r,n);break;case 5:var o=s.stateNode;s.flags&32&&(Bs(o,""),s.flags&=-33);var m=gc(e);gr(e,m,o);break;case 3:case 4:var j=s.stateNode.containerInfo,k=gc(e);pc(e,k,j);break;default:throw Error(d(161))}}catch(K){Qe(e,e.return,K)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function im(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;im(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Pa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)am(e,t.alternate,t),t=t.sibling}function As(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ka(4,t,t.return),As(t);break;case 1:xa(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Ju(t,t.return,s),As(t);break;case 27:dn(t.stateNode);case 26:case 5:xa(t,t.return),As(t);break;case 22:t.memoizedState===null&&As(t);break;case 30:As(t);break;default:As(t)}e=e.sibling}}function Ja(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,n=e,r=t,o=r.flags;switch(r.tag){case 0:case 11:case 15:Ja(n,r,s),Il(4,r);break;case 1:if(Ja(n,r,s),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(k){Qe(l,l.return,k)}if(l=r,n=l.updateQueue,n!==null){var m=l.stateNode;try{var j=n.shared.hiddenCallbacks;if(j!==null)for(n.shared.hiddenCallbacks=null,n=0;n<j.length;n++)zd(j[n],m)}catch(k){Qe(l,l.return,k)}}s&&o&64&&Pu(r),en(r,r.return);break;case 27:em(r);case 26:case 5:Ja(n,r,s),s&&l===null&&o&4&&Fu(r),en(r,r.return);break;case 12:Ja(n,r,s);break;case 13:Ja(n,r,s),s&&o&4&&nm(n,r);break;case 22:r.memoizedState===null&&Ja(n,r,s),en(r,r.return);break;case 30:break;default:Ja(n,r,s)}t=t.sibling}}function vc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Hl(s))}function jc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Hl(e))}function ga(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)cm(e,t,s,l),t=t.sibling}function cm(e,t,s,l){var n=t.flags;switch(t.tag){case 0:case 11:case 15:ga(e,t,s,l),n&2048&&Il(9,t);break;case 1:ga(e,t,s,l);break;case 3:ga(e,t,s,l),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Hl(e)));break;case 12:if(n&2048){ga(e,t,s,l),e=t.stateNode;try{var r=t.memoizedProps,o=r.id,m=r.onPostCommit;typeof m=="function"&&m(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Qe(t,t.return,j)}}else ga(e,t,s,l);break;case 13:ga(e,t,s,l);break;case 23:break;case 22:r=t.stateNode,o=t.alternate,t.memoizedState!==null?r._visibility&2?ga(e,t,s,l):tn(e,t):r._visibility&2?ga(e,t,s,l):(r._visibility|=2,nl(e,t,s,l,(t.subtreeFlags&10256)!==0)),n&2048&&vc(o,t);break;case 24:ga(e,t,s,l),n&2048&&jc(t.alternate,t);break;default:ga(e,t,s,l)}}function nl(e,t,s,l,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var r=e,o=t,m=s,j=l,k=o.flags;switch(o.tag){case 0:case 11:case 15:nl(r,o,m,j,n),Il(8,o);break;case 23:break;case 22:var K=o.stateNode;o.memoizedState!==null?K._visibility&2?nl(r,o,m,j,n):tn(r,o):(K._visibility|=2,nl(r,o,m,j,n)),n&&k&2048&&vc(o.alternate,o);break;case 24:nl(r,o,m,j,n),n&&k&2048&&jc(o.alternate,o);break;default:nl(r,o,m,j,n)}t=t.sibling}}function tn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,n=l.flags;switch(l.tag){case 22:tn(s,l),n&2048&&vc(l.alternate,l);break;case 24:tn(s,l),n&2048&&jc(l.alternate,l);break;default:tn(s,l)}t=t.sibling}}var an=8192;function rl(e){if(e.subtreeFlags&an)for(e=e.child;e!==null;)om(e),e=e.sibling}function om(e){switch(e.tag){case 26:rl(e),e.flags&an&&e.memoizedState!==null&&$0(oa,e.memoizedState,e.memoizedProps);break;case 5:rl(e);break;case 3:case 4:var t=oa;oa=Tr(e.stateNode.containerInfo),rl(e),oa=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=an,an=16777216,rl(e),an=t):rl(e));break;default:rl(e)}}function dm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function sn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];gt=l,mm(l,e)}dm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)um(e),e=e.sibling}function um(e){switch(e.tag){case 0:case 11:case 15:sn(e),e.flags&2048&&Ka(9,e,e.return);break;case 3:sn(e);break;case 12:sn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,pr(e)):sn(e);break;default:sn(e)}}function pr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];gt=l,mm(l,e)}dm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ka(8,t,t.return),pr(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,pr(t));break;default:pr(t)}e=e.sibling}}function mm(e,t){for(;gt!==null;){var s=gt;switch(s.tag){case 0:case 11:case 15:Ka(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Hl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,gt=l;else e:for(s=e;gt!==null;){l=gt;var n=l.sibling,r=l.return;if(sm(l),l===s){gt=null;break e}if(n!==null){n.return=r,gt=n;break e}gt=r}}}var l0={getCacheForType:function(e){var t=Et(ut),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s}},n0=typeof WeakMap=="function"?WeakMap:Map,qe=0,Ze=null,Oe=null,Re=0,He=0,Vt=null,Fa=!1,il=!1,Nc=!1,za=0,at=0,Ia=0,Ms=0,wc=0,na=0,cl=0,ln=null,Ht=null,Sc=!1,_c=0,yr=1/0,br=null,es=null,Nt=0,ts=null,ol=null,dl=0,Ec=0,Ac=null,fm=null,nn=0,Mc=null;function Zt(){if((qe&2)!==0&&Re!==0)return Re&-Re;if(S.T!==null){var e=Js;return e!==0?e:Uc()}return To()}function hm(){na===0&&(na=(Re&536870912)===0||ze?_o():536870912);var e=la.current;return e!==null&&(e.flags|=32),na}function Wt(e,t,s){(e===Ze&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(ul(e,0),as(e,Re,na,!1)),wl(e,s),((qe&2)===0||e!==Ze)&&(e===Ze&&((qe&2)===0&&(Ms|=s),at===4&&as(e,Re,na,!1)),pa(e))}function xm(e,t,s){if((qe&6)!==0)throw Error(d(327));var l=!s&&(t&124)===0&&(t&e.expiredLanes)===0||Nl(e,t),n=l?c0(e,t):Oc(e,t,!0),r=l;do{if(n===0){il&&!l&&as(e,t,0,!1);break}else{if(s=e.current.alternate,r&&!r0(s)){n=Oc(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var m=e;n=ln;var j=m.current.memoizedState.isDehydrated;if(j&&(ul(m,o).flags|=256),o=Oc(m,o,!1),o!==2){if(Nc&&!j){m.errorRecoveryDisabledLanes|=r,Ms|=r,n=4;break e}r=Ht,Ht=n,r!==null&&(Ht===null?Ht=r:Ht.push.apply(Ht,r))}n=o}if(r=!1,n!==2)continue}}if(n===1){ul(e,0),as(e,t,0,!0);break}e:{switch(l=e,r=n,r){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:as(l,t,na,!Fa);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(n=_c+300-ke(),10<n)){if(as(l,t,na,!Fa),Cn(l,0,!0)!==0)break e;l.timeoutHandle=Qm(gm.bind(null,l,s,Ht,br,Sc,t,na,Ms,cl,Fa,r,2,-0,0),n);break e}gm(l,s,Ht,br,Sc,t,na,Ms,cl,Fa,r,0,-0,0)}}break}while(!0);pa(e)}function gm(e,t,s,l,n,r,o,m,j,k,K,te,R,z){if(e.timeoutHandle=-1,te=t.subtreeFlags,(te&8192||(te&16785408)===16785408)&&(fn={stylesheets:null,count:0,unsuspend:Y0},om(t),te=G0(),te!==null)){e.cancelPendingCommit=te(wm.bind(null,e,t,r,s,l,n,o,m,j,K,1,R,z)),as(e,r,o,!k);return}wm(e,t,r,s,l,n,o,m,j)}function r0(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],r=n.getSnapshot;n=n.value;try{if(!$t(r(),n))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function as(e,t,s,l){t&=~wc,t&=~Ms,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var n=t;0<n;){var r=31-_(n),o=1<<r;l[r]=-1,n&=~o}s!==0&&Ao(e,s,t)}function vr(){return(qe&6)===0?(rn(0),!1):!0}function Tc(){if(Oe!==null){if(He===0)var e=Oe.return;else e=Oe,Ma=Ns=null,Vi(e),sl=null,Pl=0,e=Oe;for(;e!==null;)Ku(e.alternate,e),e=e.return;Oe=null}}function ul(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,S0(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Tc(),Ze=e,Oe=s=_a(e.current,null),Re=t,He=0,Vt=null,Fa=!1,il=Nl(e,t),Nc=!1,cl=na=wc=Ms=Ia=at=0,Ht=ln=null,Sc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var n=31-_(l),r=1<<n;t|=e[n],l&=~r}return za=t,$n(),s}function pm(e,t){Te=null,S.H=ir,t===Yl||t===Jn?(t=Rd(),He=3):t===Od?(t=Rd(),He=4):He=t===Uu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Vt=t,Oe===null&&(at=1,mr(e,ea(t,e.current)))}function ym(){var e=S.H;return S.H=ir,e===null?ir:e}function bm(){var e=S.A;return S.A=l0,e}function Cc(){at=4,Fa||(Re&4194048)!==Re&&la.current!==null||(il=!0),(Ia&134217727)===0&&(Ms&134217727)===0||Ze===null||as(Ze,Re,na,!1)}function Oc(e,t,s){var l=qe;qe|=2;var n=ym(),r=bm();(Ze!==e||Re!==t)&&(br=null,ul(e,t)),t=!1;var o=at;e:do try{if(He!==0&&Oe!==null){var m=Oe,j=Vt;switch(He){case 8:Tc(),o=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(t=!0);var k=He;if(He=0,Vt=null,ml(e,m,j,k),s&&il){o=0;break e}break;default:k=He,He=0,Vt=null,ml(e,m,j,k)}}i0(),o=at;break}catch(K){pm(e,K)}while(!0);return t&&e.shellSuspendCounter++,Ma=Ns=null,qe=l,S.H=n,S.A=r,Oe===null&&(Ze=null,Re=0,$n()),o}function i0(){for(;Oe!==null;)vm(Oe)}function c0(e,t){var s=qe;qe|=2;var l=ym(),n=bm();Ze!==e||Re!==t?(br=null,yr=ke()+500,ul(e,t)):il=Nl(e,t);e:do try{if(He!==0&&Oe!==null){t=Oe;var r=Vt;t:switch(He){case 1:He=0,Vt=null,ml(e,t,r,1);break;case 2:case 9:if(Dd(r)){He=0,Vt=null,jm(t);break}t=function(){He!==2&&He!==9||Ze!==e||(He=7),pa(e)},r.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:Dd(r)?(He=0,Vt=null,jm(t)):(He=0,Vt=null,ml(e,t,r,7));break;case 5:var o=null;switch(Oe.tag){case 26:o=Oe.memoizedState;case 5:case 27:var m=Oe;if(!o||af(o)){He=0,Vt=null;var j=m.sibling;if(j!==null)Oe=j;else{var k=m.return;k!==null?(Oe=k,jr(k)):Oe=null}break t}}He=0,Vt=null,ml(e,t,r,5);break;case 6:He=0,Vt=null,ml(e,t,r,6);break;case 8:Tc(),at=6;break e;default:throw Error(d(462))}}o0();break}catch(K){pm(e,K)}while(!0);return Ma=Ns=null,S.H=l,S.A=n,qe=s,Oe!==null?0:(Ze=null,Re=0,$n(),at)}function o0(){for(;Oe!==null&&!Ne();)vm(Oe)}function vm(e){var t=Zu(e.alternate,e,za);e.memoizedProps=e.pendingProps,t===null?jr(e):Oe=t}function jm(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Yu(s,t,t.pendingProps,t.type,void 0,Re);break;case 11:t=Yu(s,t,t.pendingProps,t.type.render,t.ref,Re);break;case 5:Vi(t);default:Ku(s,t),t=Oe=Nd(t,za),t=Zu(s,t,za)}e.memoizedProps=e.pendingProps,t===null?jr(e):Oe=t}function ml(e,t,s,l){Ma=Ns=null,Vi(t),sl=null,Pl=0;var n=t.return;try{if(Fh(e,n,t,s,Re)){at=1,mr(e,ea(s,e.current)),Oe=null;return}}catch(r){if(n!==null)throw Oe=n,r;at=1,mr(e,ea(s,e.current)),Oe=null;return}t.flags&32768?(ze||l===1?e=!0:il||(Re&536870912)!==0?e=!1:(Fa=e=!0,(l===2||l===9||l===3||l===6)&&(l=la.current,l!==null&&l.tag===13&&(l.flags|=16384))),Nm(t,e)):jr(t)}function jr(e){var t=e;do{if((t.flags&32768)!==0){Nm(t,Fa);return}e=t.return;var s=e0(t.alternate,t,za);if(s!==null){Oe=s;return}if(t=t.sibling,t!==null){Oe=t;return}Oe=t=e}while(t!==null);at===0&&(at=5)}function Nm(e,t){do{var s=t0(e.alternate,e);if(s!==null){s.flags&=32767,Oe=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Oe=e;return}Oe=e=s}while(e!==null);at=6,Oe=null}function wm(e,t,s,l,n,r,o,m,j){e.cancelPendingCommit=null;do Nr();while(Nt!==0);if((qe&6)!==0)throw Error(d(327));if(t!==null){if(t===e.current)throw Error(d(177));if(r=t.lanes|t.childLanes,r|=ji,Yf(e,s,r,o,m,j),e===Ze&&(Oe=Ze=null,Re=0),ol=t,ts=e,dl=s,Ec=r,Ac=n,fm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,f0(ye,function(){return Mm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=S.T,S.T=null,n=q.p,q.p=2,o=qe,qe|=4;try{a0(e,t,s)}finally{qe=o,q.p=n,S.T=l}}Nt=1,Sm(),_m(),Em()}}function Sm(){if(Nt===1){Nt=0;var e=ts,t=ol,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=S.T,S.T=null;var l=q.p;q.p=2;var n=qe;qe|=4;try{rm(t,e);var r=Gc,o=md(e.containerInfo),m=r.focusedElem,j=r.selectionRange;if(o!==m&&m&&m.ownerDocument&&ud(m.ownerDocument.documentElement,m)){if(j!==null&&gi(m)){var k=j.start,K=j.end;if(K===void 0&&(K=k),"selectionStart"in m)m.selectionStart=k,m.selectionEnd=Math.min(K,m.value.length);else{var te=m.ownerDocument||document,R=te&&te.defaultView||window;if(R.getSelection){var z=R.getSelection(),_e=m.textContent.length,be=Math.min(j.start,_e),Ge=j.end===void 0?be:Math.min(j.end,_e);!z.extend&&be>Ge&&(o=Ge,Ge=be,be=o);var T=dd(m,be),A=dd(m,Ge);if(T&&A&&(z.rangeCount!==1||z.anchorNode!==T.node||z.anchorOffset!==T.offset||z.focusNode!==A.node||z.focusOffset!==A.offset)){var D=te.createRange();D.setStart(T.node,T.offset),z.removeAllRanges(),be>Ge?(z.addRange(D),z.extend(A.node,A.offset)):(D.setEnd(A.node,A.offset),z.addRange(D))}}}}for(te=[],z=m;z=z.parentNode;)z.nodeType===1&&te.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<te.length;m++){var F=te[m];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Rr=!!$c,Gc=$c=null}finally{qe=n,q.p=l,S.T=s}}e.current=t,Nt=2}}function _m(){if(Nt===2){Nt=0;var e=ts,t=ol,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=S.T,S.T=null;var l=q.p;q.p=2;var n=qe;qe|=4;try{am(e,t.alternate,t)}finally{qe=n,q.p=l,S.T=s}}Nt=3}}function Em(){if(Nt===4||Nt===3){Nt=0,Le();var e=ts,t=ol,s=dl,l=fm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Nt=5:(Nt=0,ol=ts=null,Am(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(es=null),Kr(s),t=t.stateNode,Ke&&typeof Ke.onCommitFiberRoot=="function")try{Ke.onCommitFiberRoot(Ve,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=S.T,n=q.p,q.p=2,S.T=null;try{for(var r=e.onRecoverableError,o=0;o<l.length;o++){var m=l[o];r(m.value,{componentStack:m.stack})}}finally{S.T=t,q.p=n}}(dl&3)!==0&&Nr(),pa(e),n=e.pendingLanes,(s&4194090)!==0&&(n&42)!==0?e===Mc?nn++:(nn=0,Mc=e):nn=0,rn(0)}}function Am(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Hl(t)))}function Nr(e){return Sm(),_m(),Em(),Mm()}function Mm(){if(Nt!==5)return!1;var e=ts,t=Ec;Ec=0;var s=Kr(dl),l=S.T,n=q.p;try{q.p=32>s?32:s,S.T=null,s=Ac,Ac=null;var r=ts,o=dl;if(Nt=0,ol=ts=null,dl=0,(qe&6)!==0)throw Error(d(331));var m=qe;if(qe|=4,um(r.current),cm(r,r.current,o,s),qe=m,rn(0,!1),Ke&&typeof Ke.onPostCommitFiberRoot=="function")try{Ke.onPostCommitFiberRoot(Ve,r)}catch{}return!0}finally{q.p=n,S.T=l,Am(e,t)}}function Tm(e,t,s){t=ea(s,t),t=rc(e.stateNode,t,2),e=Xa(e,t,2),e!==null&&(wl(e,2),pa(e))}function Qe(e,t,s){if(e.tag===3)Tm(e,e,s);else for(;t!==null;){if(t.tag===3){Tm(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(es===null||!es.has(l))){e=ea(s,e),s=ku(2),l=Xa(t,s,2),l!==null&&(Ru(s,l,t,e),wl(l,2),pa(l));break}}t=t.return}}function Dc(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new n0;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(s)||(Nc=!0,n.add(s),e=d0.bind(null,e,t,s),t.then(e,e))}function d0(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ze===e&&(Re&s)===s&&(at===4||at===3&&(Re&62914560)===Re&&300>ke()-_c?(qe&2)===0&&ul(e,0):wc|=s,cl===Re&&(cl=0)),pa(e)}function Cm(e,t){t===0&&(t=Eo()),e=Zs(e,t),e!==null&&(wl(e,t),pa(e))}function u0(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Cm(e,s)}function m0(e,t){var s=0;switch(e.tag){case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),Cm(e,s)}function f0(e,t){return Dt(e,t)}var wr=null,fl=null,kc=!1,Sr=!1,Rc=!1,Ts=0;function pa(e){e!==fl&&e.next===null&&(fl===null?wr=fl=e:fl=fl.next=e),Sr=!0,kc||(kc=!0,x0())}function rn(e,t){if(!Rc&&Sr){Rc=!0;do for(var s=!1,l=wr;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var o=l.suspendedLanes,m=l.pingedLanes;r=(1<<31-_(42|e)+1)-1,r&=n&~(o&~m),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,Rm(l,r))}else r=Re,r=Cn(l,l===Ze?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||Nl(l,r)||(s=!0,Rm(l,r));l=l.next}while(s);Rc=!1}}function h0(){Om()}function Om(){Sr=kc=!1;var e=0;Ts!==0&&(w0()&&(e=Ts),Ts=0);for(var t=ke(),s=null,l=wr;l!==null;){var n=l.next,r=Dm(l,t);r===0?(l.next=null,s===null?wr=n:s.next=n,n===null&&(fl=s)):(s=l,(e!==0||(r&3)!==0)&&(Sr=!0)),l=n}rn(e)}function Dm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var o=31-_(r),m=1<<o,j=n[o];j===-1?((m&s)===0||(m&l)!==0)&&(n[o]=Bf(m,t)):j<=t&&(e.expiredLanes|=m),r&=~m}if(t=Ze,s=Re,s=Cn(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Yt(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Nl(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&Yt(l),Kr(s)){case 2:case 8:s=oe;break;case 32:s=ye;break;case 268435456:s=Rt;break;default:s=ye}return l=km.bind(null,e),s=Dt(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&Yt(l),e.callbackPriority=2,e.callbackNode=null,2}function km(e,t){if(Nt!==0&&Nt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Nr()&&e.callbackNode!==s)return null;var l=Re;return l=Cn(e,e===Ze?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(xm(e,l,t),Dm(e,ke()),e.callbackNode!=null&&e.callbackNode===s?km.bind(null,e):null)}function Rm(e,t){if(Nr())return null;xm(e,t,!0)}function x0(){_0(function(){(qe&6)!==0?Dt(E,h0):Om()})}function Uc(){return Ts===0&&(Ts=_o()),Ts}function Um(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Un(""+e)}function zm(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function g0(e,t,s,l,n){if(t==="submit"&&s&&s.stateNode===n){var r=Um((n[Ut]||null).action),o=l.submitter;o&&(t=(t=o[Ut]||null)?Um(t.formAction):o.getAttribute("formAction"),t!==null&&(r=t,o=null));var m=new Hn("action","action",null,l,n);e.push({event:m,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ts!==0){var j=o?zm(n,o):new FormData(n);tc(s,{pending:!0,data:j,method:n.method,action:r},null,j)}}else typeof r=="function"&&(m.preventDefault(),j=o?zm(n,o):new FormData(n),tc(s,{pending:!0,data:j,method:n.method,action:r},r,j))},currentTarget:n}]})}}for(var zc=0;zc<vi.length;zc++){var Lc=vi[zc],p0=Lc.toLowerCase(),y0=Lc[0].toUpperCase()+Lc.slice(1);ca(p0,"on"+y0)}ca(xd,"onAnimationEnd"),ca(gd,"onAnimationIteration"),ca(pd,"onAnimationStart"),ca("dblclick","onDoubleClick"),ca("focusin","onFocus"),ca("focusout","onBlur"),ca(Uh,"onTransitionRun"),ca(zh,"onTransitionStart"),ca(Lh,"onTransitionCancel"),ca(yd,"onTransitionEnd"),Ls("onMouseEnter",["mouseout","mouseover"]),Ls("onMouseLeave",["mouseout","mouseover"]),Ls("onPointerEnter",["pointerout","pointerover"]),Ls("onPointerLeave",["pointerout","pointerover"]),fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fs("onBeforeInput",["compositionend","keypress","textInput","paste"]),fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cn));function Lm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],n=l.event;l=l.listeners;e:{var r=void 0;if(t)for(var o=l.length-1;0<=o;o--){var m=l[o],j=m.instance,k=m.currentTarget;if(m=m.listener,j!==r&&n.isPropagationStopped())break e;r=m,n.currentTarget=k;try{r(n)}catch(K){ur(K)}n.currentTarget=null,r=j}else for(o=0;o<l.length;o++){if(m=l[o],j=m.instance,k=m.currentTarget,m=m.listener,j!==r&&n.isPropagationStopped())break e;r=m,n.currentTarget=k;try{r(n)}catch(K){ur(K)}n.currentTarget=null,r=j}}}}function De(e,t){var s=t[Pr];s===void 0&&(s=t[Pr]=new Set);var l=e+"__bubble";s.has(l)||(qm(t,e,2,!1),s.add(l))}function qc(e,t,s){var l=0;t&&(l|=4),qm(s,e,l,t)}var _r="_reactListening"+Math.random().toString(36).slice(2);function Hc(e){if(!e[_r]){e[_r]=!0,Oo.forEach(function(s){s!=="selectionchange"&&(b0.has(s)||qc(s,!1,e),qc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_r]||(t[_r]=!0,qc("selectionchange",!1,t))}}function qm(e,t,s,l){switch(of(t)){case 2:var n=V0;break;case 8:n=Z0;break;default:n=Ic}s=n.bind(null,t,s,e),n=void 0,!ii||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Bc(e,t,s,l,n){var r=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var o=l.tag;if(o===3||o===4){var m=l.stateNode.containerInfo;if(m===n)break;if(o===4)for(o=l.return;o!==null;){var j=o.tag;if((j===3||j===4)&&o.stateNode.containerInfo===n)return;o=o.return}for(;m!==null;){if(o=Rs(m),o===null)return;if(j=o.tag,j===5||j===6||j===26||j===27){l=r=o;continue e}m=m.parentNode}}l=l.return}Xo(function(){var k=r,K=ni(s),te=[];e:{var R=bd.get(e);if(R!==void 0){var z=Hn,_e=e;switch(e){case"keypress":if(Ln(s)===0)break e;case"keydown":case"keyup":z=fh;break;case"focusin":_e="focus",z=ui;break;case"focusout":_e="blur",z=ui;break;case"beforeblur":case"afterblur":z=ui;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=gh;break;case xd:case gd:case pd:z=lh;break;case yd:z=yh;break;case"scroll":case"scrollend":z=If;break;case"wheel":z=vh;break;case"copy":case"cut":case"paste":z=rh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Po;break;case"toggle":case"beforetoggle":z=Nh}var be=(t&4)!==0,Ge=!be&&(e==="scroll"||e==="scrollend"),T=be?R!==null?R+"Capture":null:R;be=[];for(var A=k,D;A!==null;){var F=A;if(D=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||D===null||T===null||(F=El(A,T),F!=null&&be.push(on(A,F,D))),Ge)break;A=A.return}0<be.length&&(R=new z(R,_e,null,s,K),te.push({event:R,listeners:be}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",R&&s!==li&&(_e=s.relatedTarget||s.fromElement)&&(Rs(_e)||_e[ks]))break e;if((z||R)&&(R=K.window===K?K:(R=K.ownerDocument)?R.defaultView||R.parentWindow:window,z?(_e=s.relatedTarget||s.toElement,z=k,_e=_e?Rs(_e):null,_e!==null&&(Ge=p(_e),be=_e.tag,_e!==Ge||be!==5&&be!==27&&be!==6)&&(_e=null)):(z=null,_e=k),z!==_e)){if(be=Wo,F="onMouseLeave",T="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(be=Po,F="onPointerLeave",T="onPointerEnter",A="pointer"),Ge=z==null?R:_l(z),D=_e==null?R:_l(_e),R=new be(F,A+"leave",z,s,K),R.target=Ge,R.relatedTarget=D,F=null,Rs(K)===k&&(be=new be(T,A+"enter",_e,s,K),be.target=D,be.relatedTarget=Ge,F=be),Ge=F,z&&_e)t:{for(be=z,T=_e,A=0,D=be;D;D=hl(D))A++;for(D=0,F=T;F;F=hl(F))D++;for(;0<A-D;)be=hl(be),A--;for(;0<D-A;)T=hl(T),D--;for(;A--;){if(be===T||T!==null&&be===T.alternate)break t;be=hl(be),T=hl(T)}be=null}else be=null;z!==null&&Hm(te,R,z,be,!1),_e!==null&&Ge!==null&&Hm(te,Ge,_e,be,!0)}}e:{if(R=k?_l(k):window,z=R.nodeName&&R.nodeName.toLowerCase(),z==="select"||z==="input"&&R.type==="file")var xe=ld;else if(ad(R))if(nd)xe=Dh;else{xe=Ch;var Ce=Th}else z=R.nodeName,!z||z.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?k&&si(k.elementType)&&(xe=ld):xe=Oh;if(xe&&(xe=xe(e,k))){sd(te,xe,s,K);break e}Ce&&Ce(e,R,k),e==="focusout"&&k&&R.type==="number"&&k.memoizedProps.value!=null&&ai(R,"number",R.value)}switch(Ce=k?_l(k):window,e){case"focusin":(ad(Ce)||Ce.contentEditable==="true")&&(Qs=Ce,pi=k,Rl=null);break;case"focusout":Rl=pi=Qs=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,fd(te,s,K);break;case"selectionchange":if(Rh)break;case"keydown":case"keyup":fd(te,s,K)}var ge;if(fi)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else Gs?ed(e,s)&&(we="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(we="onCompositionStart");we&&(Jo&&s.locale!=="ko"&&(Gs||we!=="onCompositionStart"?we==="onCompositionEnd"&&Gs&&(ge=Vo()):(Ya=K,ci="value"in Ya?Ya.value:Ya.textContent,Gs=!0)),Ce=Er(k,we),0<Ce.length&&(we=new Ko(we,e,null,s,K),te.push({event:we,listeners:Ce}),ge?we.data=ge:(ge=td(s),ge!==null&&(we.data=ge)))),(ge=Sh?_h(e,s):Eh(e,s))&&(we=Er(k,"onBeforeInput"),0<we.length&&(Ce=new Ko("onBeforeInput","beforeinput",null,s,K),te.push({event:Ce,listeners:we}),Ce.data=ge)),g0(te,e,k,s,K)}Lm(te,t)})}function on(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Er(e,t){for(var s=t+"Capture",l=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=El(e,s),n!=null&&l.unshift(on(e,n,r)),n=El(e,t),n!=null&&l.push(on(e,n,r))),e.tag===3)return l;e=e.return}return[]}function hl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Hm(e,t,s,l,n){for(var r=t._reactName,o=[];s!==null&&s!==l;){var m=s,j=m.alternate,k=m.stateNode;if(m=m.tag,j!==null&&j===l)break;m!==5&&m!==26&&m!==27||k===null||(j=k,n?(k=El(s,r),k!=null&&o.unshift(on(s,k,j))):n||(k=El(s,r),k!=null&&o.push(on(s,k,j)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var v0=/\r\n?/g,j0=/\u0000|\uFFFD/g;function Bm(e){return(typeof e=="string"?e:""+e).replace(v0,`
`).replace(j0,"")}function Ym(e,t){return t=Bm(t),Bm(e)===t}function Ar(){}function $e(e,t,s,l,n,r){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Bs(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Bs(e,""+l);break;case"className":Dn(e,"class",l);break;case"tabIndex":Dn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Dn(e,s,l);break;case"style":Go(e,l,r);break;case"data":if(t!=="object"){Dn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Un(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(t!=="input"&&$e(e,t,"name",n.name,n,null),$e(e,t,"formEncType",n.formEncType,n,null),$e(e,t,"formMethod",n.formMethod,n,null),$e(e,t,"formTarget",n.formTarget,n,null)):($e(e,t,"encType",n.encType,n,null),$e(e,t,"method",n.method,n,null),$e(e,t,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Un(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=Ar);break;case"onScroll":l!=null&&De("scroll",e);break;case"onScrollEnd":l!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Un(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":De("beforetoggle",e),De("toggle",e),On(e,"popover",l);break;case"xlinkActuate":wa(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":wa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":wa(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":wa(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":wa(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":wa(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":wa(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":wa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":wa(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":On(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Jf.get(s)||s,On(e,s,l))}}function Yc(e,t,s,l,n,r){switch(s){case"style":Go(e,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Bs(e,l):(typeof l=="number"||typeof l=="bigint")&&Bs(e,""+l);break;case"onScroll":l!=null&&De("scroll",e);break;case"onScrollEnd":l!=null&&De("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Do.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),t=s.slice(2,n?s.length-7:void 0),r=e[Ut]||null,r=r!=null?r[s]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,n);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):On(e,s,l)}}}function wt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var l=!1,n=!1,r;for(r in s)if(s.hasOwnProperty(r)){var o=s[r];if(o!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:$e(e,t,r,o,s,null)}}n&&$e(e,t,"srcSet",s.srcSet,s,null),l&&$e(e,t,"src",s.src,s,null);return;case"input":De("invalid",e);var m=r=o=n=null,j=null,k=null;for(l in s)if(s.hasOwnProperty(l)){var K=s[l];if(K!=null)switch(l){case"name":n=K;break;case"type":o=K;break;case"checked":j=K;break;case"defaultChecked":k=K;break;case"value":r=K;break;case"defaultValue":m=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(d(137,t));break;default:$e(e,t,l,K,s,null)}}Ho(e,r,m,j,k,o,n,!1),kn(e);return;case"select":De("invalid",e),l=o=r=null;for(n in s)if(s.hasOwnProperty(n)&&(m=s[n],m!=null))switch(n){case"value":r=m;break;case"defaultValue":o=m;break;case"multiple":l=m;default:$e(e,t,n,m,s,null)}t=r,s=o,e.multiple=!!l,t!=null?Hs(e,!!l,t,!1):s!=null&&Hs(e,!!l,s,!0);return;case"textarea":De("invalid",e),r=n=l=null;for(o in s)if(s.hasOwnProperty(o)&&(m=s[o],m!=null))switch(o){case"value":l=m;break;case"defaultValue":n=m;break;case"children":r=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(d(91));break;default:$e(e,t,o,m,s,null)}Yo(e,l,n,r),kn(e);return;case"option":for(j in s)if(s.hasOwnProperty(j)&&(l=s[j],l!=null))switch(j){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:$e(e,t,j,l,s,null)}return;case"dialog":De("beforetoggle",e),De("toggle",e),De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(l=0;l<cn.length;l++)De(cn[l],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in s)if(s.hasOwnProperty(k)&&(l=s[k],l!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:$e(e,t,k,l,s,null)}return;default:if(si(t)){for(K in s)s.hasOwnProperty(K)&&(l=s[K],l!==void 0&&Yc(e,t,K,l,s,void 0));return}}for(m in s)s.hasOwnProperty(m)&&(l=s[m],l!=null&&$e(e,t,m,l,s,null))}function N0(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,o=null,m=null,j=null,k=null,K=null;for(z in s){var te=s[z];if(s.hasOwnProperty(z)&&te!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":j=te;default:l.hasOwnProperty(z)||$e(e,t,z,null,l,te)}}for(var R in l){var z=l[R];if(te=s[R],l.hasOwnProperty(R)&&(z!=null||te!=null))switch(R){case"type":r=z;break;case"name":n=z;break;case"checked":k=z;break;case"defaultChecked":K=z;break;case"value":o=z;break;case"defaultValue":m=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(d(137,t));break;default:z!==te&&$e(e,t,R,z,l,te)}}ti(e,o,m,j,k,K,r,n);return;case"select":z=o=m=R=null;for(r in s)if(j=s[r],s.hasOwnProperty(r)&&j!=null)switch(r){case"value":break;case"multiple":z=j;default:l.hasOwnProperty(r)||$e(e,t,r,null,l,j)}for(n in l)if(r=l[n],j=s[n],l.hasOwnProperty(n)&&(r!=null||j!=null))switch(n){case"value":R=r;break;case"defaultValue":m=r;break;case"multiple":o=r;default:r!==j&&$e(e,t,n,r,l,j)}t=m,s=o,l=z,R!=null?Hs(e,!!s,R,!1):!!l!=!!s&&(t!=null?Hs(e,!!s,t,!0):Hs(e,!!s,s?[]:"",!1));return;case"textarea":z=R=null;for(m in s)if(n=s[m],s.hasOwnProperty(m)&&n!=null&&!l.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:$e(e,t,m,null,l,n)}for(o in l)if(n=l[o],r=s[o],l.hasOwnProperty(o)&&(n!=null||r!=null))switch(o){case"value":R=n;break;case"defaultValue":z=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(d(91));break;default:n!==r&&$e(e,t,o,n,l,r)}Bo(e,R,z);return;case"option":for(var _e in s)if(R=s[_e],s.hasOwnProperty(_e)&&R!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":e.selected=!1;break;default:$e(e,t,_e,null,l,R)}for(j in l)if(R=l[j],z=s[j],l.hasOwnProperty(j)&&R!==z&&(R!=null||z!=null))switch(j){case"selected":e.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:$e(e,t,j,R,l,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in s)R=s[be],s.hasOwnProperty(be)&&R!=null&&!l.hasOwnProperty(be)&&$e(e,t,be,null,l,R);for(k in l)if(R=l[k],z=s[k],l.hasOwnProperty(k)&&R!==z&&(R!=null||z!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(d(137,t));break;default:$e(e,t,k,R,l,z)}return;default:if(si(t)){for(var Ge in s)R=s[Ge],s.hasOwnProperty(Ge)&&R!==void 0&&!l.hasOwnProperty(Ge)&&Yc(e,t,Ge,void 0,l,R);for(K in l)R=l[K],z=s[K],!l.hasOwnProperty(K)||R===z||R===void 0&&z===void 0||Yc(e,t,K,R,l,z);return}}for(var T in s)R=s[T],s.hasOwnProperty(T)&&R!=null&&!l.hasOwnProperty(T)&&$e(e,t,T,null,l,R);for(te in l)R=l[te],z=s[te],!l.hasOwnProperty(te)||R===z||R==null&&z==null||$e(e,t,te,R,l,z)}var $c=null,Gc=null;function Mr(e){return e.nodeType===9?e:e.ownerDocument}function $m(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Qc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xc=null;function w0(){var e=window.event;return e&&e.type==="popstate"?e===Xc?!1:(Xc=e,!0):(Xc=null,!1)}var Qm=typeof setTimeout=="function"?setTimeout:void 0,S0=typeof clearTimeout=="function"?clearTimeout:void 0,Xm=typeof Promise=="function"?Promise:void 0,_0=typeof queueMicrotask=="function"?queueMicrotask:typeof Xm<"u"?function(e){return Xm.resolve(null).then(e).catch(E0)}:Qm;function E0(e){setTimeout(function(){throw e})}function ss(e){return e==="head"}function Vm(e,t){var s=t,l=0,n=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(0<l&&8>l){s=l;var o=e.ownerDocument;if(s&1&&dn(o.documentElement),s&2&&dn(o.body),s&4)for(s=o.head,dn(s),o=s.firstChild;o;){var m=o.nextSibling,j=o.nodeName;o[Sl]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&o.rel.toLowerCase()==="stylesheet"||s.removeChild(o),o=m}}if(n===0){e.removeChild(r),yn(t);return}n--}else s==="$"||s==="$?"||s==="$!"?n++:l=s.charCodeAt(0)-48;else l=0;s=r}while(s);yn(t)}function Vc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Vc(s),Jr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function A0(e,t,s,l){for(;e.nodeType===1;){var n=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Sl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=da(e.nextSibling),e===null)break}return null}function M0(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=da(e.nextSibling),e===null))return null;return e}function Zc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function T0(e,t){var s=e.ownerDocument;if(e.data!=="$?"||s.readyState==="complete")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function da(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Wc=null;function Zm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}function Wm(e,t,s){switch(t=Mr(s),e){case"html":if(e=t.documentElement,!e)throw Error(d(452));return e;case"head":if(e=t.head,!e)throw Error(d(453));return e;case"body":if(e=t.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function dn(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Jr(e)}var ra=new Map,Km=new Set;function Tr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var La=q.d;q.d={f:C0,r:O0,D:D0,C:k0,L:R0,m:U0,X:L0,S:z0,M:q0};function C0(){var e=La.f(),t=vr();return e||t}function O0(e){var t=Us(e);t!==null&&t.tag===5&&t.type==="form"?xu(t):La.r(e)}var xl=typeof document>"u"?null:document;function Pm(e,t,s){var l=xl;if(l&&typeof t=="string"&&t){var n=It(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),Km.has(n)||(Km.add(n),e={rel:e,crossOrigin:s,href:t},l.querySelector(n)===null&&(t=l.createElement("link"),wt(t,"link",e),ht(t),l.head.appendChild(t)))}}function D0(e){La.D(e),Pm("dns-prefetch",e,null)}function k0(e,t){La.C(e,t),Pm("preconnect",e,t)}function R0(e,t,s){La.L(e,t,s);var l=xl;if(l&&e&&t){var n='link[rel="preload"][as="'+It(t)+'"]';t==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+It(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+It(s.imageSizes)+'"]')):n+='[href="'+It(e)+'"]';var r=n;switch(t){case"style":r=gl(e);break;case"script":r=pl(e)}ra.has(r)||(e=y({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),ra.set(r,e),l.querySelector(n)!==null||t==="style"&&l.querySelector(un(r))||t==="script"&&l.querySelector(mn(r))||(t=l.createElement("link"),wt(t,"link",e),ht(t),l.head.appendChild(t)))}}function U0(e,t){La.m(e,t);var s=xl;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+It(l)+'"][href="'+It(e)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=pl(e)}if(!ra.has(r)&&(e=y({rel:"modulepreload",href:e},t),ra.set(r,e),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(mn(r)))return}l=s.createElement("link"),wt(l,"link",e),ht(l),s.head.appendChild(l)}}}function z0(e,t,s){La.S(e,t,s);var l=xl;if(l&&e){var n=zs(l).hoistableStyles,r=gl(e);t=t||"default";var o=n.get(r);if(!o){var m={loading:0,preload:null};if(o=l.querySelector(un(r)))m.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":t},s),(s=ra.get(r))&&Kc(e,s);var j=o=l.createElement("link");ht(j),wt(j,"link",e),j._p=new Promise(function(k,K){j.onload=k,j.onerror=K}),j.addEventListener("load",function(){m.loading|=1}),j.addEventListener("error",function(){m.loading|=2}),m.loading|=4,Cr(o,t,l)}o={type:"stylesheet",instance:o,count:1,state:m},n.set(r,o)}}}function L0(e,t){La.X(e,t);var s=xl;if(s&&e){var l=zs(s).hoistableScripts,n=pl(e),r=l.get(n);r||(r=s.querySelector(mn(n)),r||(e=y({src:e,async:!0},t),(t=ra.get(n))&&Pc(e,t),r=s.createElement("script"),ht(r),wt(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function q0(e,t){La.M(e,t);var s=xl;if(s&&e){var l=zs(s).hoistableScripts,n=pl(e),r=l.get(n);r||(r=s.querySelector(mn(n)),r||(e=y({src:e,async:!0,type:"module"},t),(t=ra.get(n))&&Pc(e,t),r=s.createElement("script"),ht(r),wt(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function Jm(e,t,s,l){var n=(n=ce.current)?Tr(n):null;if(!n)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=gl(s.href),s=zs(n).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=gl(s.href);var r=zs(n).hoistableStyles,o=r.get(e);if(o||(n=n.ownerDocument||n,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,o),(r=n.querySelector(un(e)))&&!r._p&&(o.instance=r,o.state.loading=5),ra.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ra.set(e,s),r||H0(n,e,s,o.state))),t&&l===null)throw Error(d(528,""));return o}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=pl(s),s=zs(n).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function gl(e){return'href="'+It(e)+'"'}function un(e){return'link[rel="stylesheet"]['+e+"]"}function Fm(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function H0(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),wt(t,"link",s),ht(t),e.head.appendChild(t))}function pl(e){return'[src="'+It(e)+'"]'}function mn(e){return"script[async]"+e}function Im(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+It(s.href)+'"]');if(l)return t.instance=l,ht(l),l;var n=y({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ht(l),wt(l,"style",n),Cr(l,s.precedence,e),t.instance=l;case"stylesheet":n=gl(s.href);var r=e.querySelector(un(n));if(r)return t.state.loading|=4,t.instance=r,ht(r),r;l=Fm(s),(n=ra.get(n))&&Kc(l,n),r=(e.ownerDocument||e).createElement("link"),ht(r);var o=r;return o._p=new Promise(function(m,j){o.onload=m,o.onerror=j}),wt(r,"link",l),t.state.loading|=4,Cr(r,s.precedence,e),t.instance=r;case"script":return r=pl(s.src),(n=e.querySelector(mn(r)))?(t.instance=n,ht(n),n):(l=s,(n=ra.get(r))&&(l=y({},s),Pc(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),ht(n),wt(n,"link",l),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Cr(l,s.precedence,e));return t.instance}function Cr(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,o=0;o<l.length;o++){var m=l[o];if(m.dataset.precedence===t)r=m;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Kc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Pc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Or=null;function ef(e,t,s){if(Or===null){var l=new Map,n=Or=new Map;n.set(s,l)}else n=Or,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),n=0;n<s.length;n++){var r=s[n];if(!(r[Sl]||r[_t]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(t)||"";o=e+o;var m=l.get(o);m?m.push(r):l.set(o,[r])}}return l}function tf(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function B0(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function af(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var fn=null;function Y0(){}function $0(e,t,s){if(fn===null)throw Error(d(475));var l=fn;if(t.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var n=gl(s.href),r=e.querySelector(un(n));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Dr.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=r,ht(r);return}r=e.ownerDocument||e,s=Fm(s),(n=ra.get(n))&&Kc(s,n),r=r.createElement("link"),ht(r);var o=r;o._p=new Promise(function(m,j){o.onload=m,o.onerror=j}),wt(r,"link",s),t.instance=r}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=Dr.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function G0(){if(fn===null)throw Error(d(475));var e=fn;return e.stylesheets&&e.count===0&&Jc(e,e.stylesheets),0<e.count?function(t){var s=setTimeout(function(){if(e.stylesheets&&Jc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(s)}}:null}function Dr(){if(this.count--,this.count===0){if(this.stylesheets)Jc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var kr=null;function Jc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,kr=new Map,t.forEach(Q0,e),kr=null,Dr.call(e))}function Q0(e,t){if(!(t.state.loading&4)){var s=kr.get(e);if(s)var l=s.get(null);else{s=new Map,kr.set(e,s);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var o=n[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(s.set(o.dataset.precedence,o),l=o)}l&&s.set(null,l)}n=t.instance,o=n.getAttribute("data-precedence"),r=s.get(o)||l,r===l&&s.set(null,n),s.set(o,n),this.count++,l=Dr.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var hn={$$typeof:ie,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function X0(e,t,s,l,n,r,o,m){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zr(0),this.hiddenUpdates=Zr(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=m,this.incompleteTransitions=new Map}function sf(e,t,s,l,n,r,o,m,j,k,K,te){return e=new X0(e,t,s,o,m,j,k,te),t=1,r===!0&&(t|=24),r=Gt(3,null,null,t),e.current=r,r.stateNode=e,t=Di(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:t},zi(r),e}function lf(e){return e?(e=Ws,e):Ws}function nf(e,t,s,l,n,r){n=lf(n),l.context===null?l.context=n:l.pendingContext=n,l=Qa(t),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=Xa(e,l,t),s!==null&&(Wt(s,e,t),Gl(s,e,t))}function rf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Fc(e,t){rf(e,t),(e=e.alternate)&&rf(e,t)}function cf(e){if(e.tag===13){var t=Zs(e,67108864);t!==null&&Wt(t,e,67108864),Fc(e,67108864)}}var Rr=!0;function V0(e,t,s,l){var n=S.T;S.T=null;var r=q.p;try{q.p=2,Ic(e,t,s,l)}finally{q.p=r,S.T=n}}function Z0(e,t,s,l){var n=S.T;S.T=null;var r=q.p;try{q.p=8,Ic(e,t,s,l)}finally{q.p=r,S.T=n}}function Ic(e,t,s,l){if(Rr){var n=eo(l);if(n===null)Bc(e,t,l,Ur,s),df(e,l);else if(K0(n,e,t,s,l))l.stopPropagation();else if(df(e,l),t&4&&-1<W0.indexOf(e)){for(;n!==null;){var r=Us(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=vt(r.pendingLanes);if(o!==0){var m=r;for(m.pendingLanes|=2,m.entangledLanes|=2;o;){var j=1<<31-_(o);m.entanglements[1]|=j,o&=~j}pa(r),(qe&6)===0&&(yr=ke()+500,rn(0))}}break;case 13:m=Zs(r,2),m!==null&&Wt(m,r,2),vr(),Fc(r,2)}if(r=eo(l),r===null&&Bc(e,t,l,Ur,s),r===n)break;n=r}n!==null&&l.stopPropagation()}else Bc(e,t,l,null,s)}}function eo(e){return e=ni(e),to(e)}var Ur=null;function to(e){if(Ur=null,e=Rs(e),e!==null){var t=p(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=v(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ur=e,null}function of(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kt()){case E:return 2;case oe:return 8;case ye:case yt:return 32;case Rt:return 268435456;default:return 32}default:return 32}}var ao=!1,ls=null,ns=null,rs=null,xn=new Map,gn=new Map,is=[],W0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function df(e,t){switch(e){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":ns=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":xn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gn.delete(t.pointerId)}}function pn(e,t,s,l,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},t!==null&&(t=Us(t),t!==null&&cf(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function K0(e,t,s,l,n){switch(t){case"focusin":return ls=pn(ls,e,t,s,l,n),!0;case"dragenter":return ns=pn(ns,e,t,s,l,n),!0;case"mouseover":return rs=pn(rs,e,t,s,l,n),!0;case"pointerover":var r=n.pointerId;return xn.set(r,pn(xn.get(r)||null,e,t,s,l,n)),!0;case"gotpointercapture":return r=n.pointerId,gn.set(r,pn(gn.get(r)||null,e,t,s,l,n)),!0}return!1}function uf(e){var t=Rs(e.target);if(t!==null){var s=p(t);if(s!==null){if(t=s.tag,t===13){if(t=v(s),t!==null){e.blockedOn=t,$f(e.priority,function(){if(s.tag===13){var l=Zt();l=Wr(l);var n=Zs(s,l);n!==null&&Wt(n,s,l),Fc(s,l)}});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=eo(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);li=l,s.target.dispatchEvent(l),li=null}else return t=Us(s),t!==null&&cf(t),e.blockedOn=s,!1;t.shift()}return!0}function mf(e,t,s){zr(e)&&s.delete(t)}function P0(){ao=!1,ls!==null&&zr(ls)&&(ls=null),ns!==null&&zr(ns)&&(ns=null),rs!==null&&zr(rs)&&(rs=null),xn.forEach(mf),gn.forEach(mf)}function Lr(e,t){e.blockedOn===t&&(e.blockedOn=null,ao||(ao=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,P0)))}var qr=null;function ff(e){qr!==e&&(qr=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){qr===e&&(qr=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],n=e[t+2];if(typeof l!="function"){if(to(l||s)===null)continue;break}var r=Us(s);r!==null&&(e.splice(t,3),t-=3,tc(r,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function yn(e){function t(j){return Lr(j,e)}ls!==null&&Lr(ls,e),ns!==null&&Lr(ns,e),rs!==null&&Lr(rs,e),xn.forEach(t),gn.forEach(t);for(var s=0;s<is.length;s++){var l=is[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<is.length&&(s=is[0],s.blockedOn===null);)uf(s),s.blockedOn===null&&is.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],r=s[l+1],o=n[Ut]||null;if(typeof r=="function")o||ff(s);else if(o){var m=null;if(r&&r.hasAttribute("formAction")){if(n=r,o=r[Ut]||null)m=o.formAction;else if(to(n)!==null)continue}else m=o.action;typeof m=="function"?s[l+1]=m:(s.splice(l,3),l-=3),ff(s)}}}function so(e){this._internalRoot=e}Hr.prototype.render=so.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(d(409));var s=t.current,l=Zt();nf(s,l,e,t,null,null)},Hr.prototype.unmount=so.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nf(e.current,2,null,e,null,null),vr(),t[ks]=null}};function Hr(e){this._internalRoot=e}Hr.prototype.unstable_scheduleHydration=function(e){if(e){var t=To();e={blockedOn:null,target:e,priority:t};for(var s=0;s<is.length&&t!==0&&t<is[s].priority;s++);is.splice(s,0,e),s===0&&uf(e)}};var hf=c.version;if(hf!=="19.1.0")throw Error(d(527,hf,"19.1.0"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=w(t),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var J0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Br=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Br.isDisabled&&Br.supportsFiber)try{Ve=Br.inject(J0),Ke=Br}catch{}}return vn.createRoot=function(e,t){if(!f(e))throw Error(d(299));var s=!1,l="",n=Tu,r=Cu,o=Ou,m=null;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(m=t.unstable_transitionCallbacks)),t=sf(e,1,!1,null,null,s,l,n,r,o,m,null),e[ks]=t.current,Hc(e),new so(t)},vn.hydrateRoot=function(e,t,s){if(!f(e))throw Error(d(299));var l=!1,n="",r=Tu,o=Cu,m=Ou,j=null,k=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(o=s.onCaughtError),s.onRecoverableError!==void 0&&(m=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(j=s.unstable_transitionCallbacks),s.formState!==void 0&&(k=s.formState)),t=sf(e,1,!0,t,s??null,l,n,r,o,m,j,k),t.context=lf(null),s=t.current,l=Zt(),l=Wr(l),n=Qa(l),n.callback=null,Xa(s,n,l),s=l,t.current.lanes=s,wl(t,s),pa(t),e[ks]=t.current,Hc(e),new Hr(t)},vn.version="19.1.0",vn}var Sf;function rx(){if(Sf)return ro.exports;Sf=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(c){console.error(c)}}return i(),ro.exports=nx(),ro.exports}var ix=rx();const cx=go(ix);window.APP_CONFIG={APP_NAME:"Production Management System",APP_VERSION:"2.0.0",COMPANY_NAME:"Oracles Africa",COMPANY_EMAIL:"admin@oracles.africa",ENV:window.location.hostname==="localhost"?"development":"production",DEBUG:window.location.hostname==="localhost",API_BASE:"/api",API_TIMEOUT:3e4,API_RETRY_ATTEMPTS:3,API_RETRY_DELAY:1e3,WS_URL:`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}`,WS_RECONNECT_ATTEMPTS:5,WS_RECONNECT_DELAY:1e3,WS_PING_INTERVAL:3e4,TOKEN_KEY:"pms_token",USER_KEY:"pms_user",SESSION_TIMEOUT:6e5,SESSION_WARNING_TIME:3e5,REMEMBER_ME_DURATION:6048e5,ENVIRONMENTS:{BLENDING:"blending",PACKAGING:"packaging"},DEFAULT_ENVIRONMENTS:["blending","packaging"],ORDER_STATUSES:{PENDING:"pending",IN_PROGRESS:"in_progress",STOPPED:"stopped",COMPLETED:"completed"},ORDER_STATUS_FLOW:{pending:["in_progress"],in_progress:["stopped","completed"],stopped:["in_progress","completed"],completed:[]},PRIORITY_LEVELS:{LOW:"low",NORMAL:"normal",HIGH:"high",URGENT:"urgent"},PRIORITY_WEIGHTS:{low:1,normal:2,high:3,urgent:4},MACHINE_STATUSES:{AVAILABLE:"available",IN_USE:"in_use",MAINTENANCE:"maintenance",OFFLINE:"offline",PAUSED:"paused"},MACHINE_STATUS_TRANSITIONS:{available:["in_use","maintenance","offline"],in_use:["paused","available","offline"],paused:["in_use","available"],maintenance:["available","offline"],offline:["available","maintenance"]},USER_ROLES:{ADMIN:"admin",SUPERVISOR:"supervisor",OPERATOR:"operator"},ROLE_PERMISSIONS:{admin:["createOrder","updateOrder","deleteOrder","viewOrders","startProduction","stopProduction","completeOrder","manageMachines","viewMachines","manageUsers","viewUsers","viewAnalytics","exportData","manageSettings"],supervisor:["createOrder","updateOrder","deleteOrder","viewOrders","startProduction","stopProduction","completeOrder","viewMachines","viewAnalytics","exportData"],operator:["viewOrders","startProduction","stopProduction","completeOrder","viewMachines"]},STOP_REASONS:[{value:"equipment_breakdown",label:"Equipment Breakdown",category:"mechanical"},{value:"material_shortage",label:"Material Shortage",category:"supply"},{value:"maintenance",label:"Planned Maintenance",category:"mechanical"},{value:"quality_issue",label:"Quality Issue",category:"quality"},{value:"safety_concern",label:"Safety Concern",category:"safety"},{value:"operator_break",label:"Operator Break",category:"operational"},{value:"power_outage",label:"Power Outage",category:"infrastructure"},{value:"shift_change",label:"Shift Change",category:"operational"},{value:"other",label:"Other",category:"other"}],STOP_CATEGORIES:{mechanical:{label:"Mechanical",color:"red"},supply:{label:"Supply Chain",color:"orange"},quality:{label:"Quality",color:"yellow"},safety:{label:"Safety",color:"red"},operational:{label:"Operational",color:"blue"},infrastructure:{label:"Infrastructure",color:"purple"},other:{label:"Other",color:"gray"}},WASTE_TYPES:["Raw Material","Packaging Material","Finished Product","Energy","Water","Other"],WASTE_UNITS:[{value:"kg",label:"Kilograms",type:"weight"},{value:"g",label:"Grams",type:"weight"},{value:"tons",label:"Tons",type:"weight"},{value:"units",label:"Units",type:"count"},{value:"liters",label:"Liters",type:"volume"},{value:"ml",label:"Milliliters",type:"volume"},{value:"meters",label:"Meters",type:"length"},{value:"kwh",label:"kWh",type:"energy"}],THEME:{PRIMARY_COLOR:"blue",SECONDARY_COLOR:"gray",SUCCESS_COLOR:"green",WARNING_COLOR:"yellow",ERROR_COLOR:"red",INFO_COLOR:"blue"},PAGE_SIZE_OPTIONS:[10,25,50,100],DEFAULT_PAGE_SIZE:25,TOAST_DURATION:5e3,TOAST_POSITION:"top-right",MODAL_SIZES:{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-6xl"},TIMEZONE:{name:"SAST",fullName:"South African Standard Time",offset:"+02:00",offsetMinutes:120,olsonName:"Africa/Johannesburg",displayInUI:!0},DATE_FORMATS:{display:{date:"YYYY-MM-DD",time:"HH:mm:ss",datetime:"YYYY-MM-DD HH:mm:ss",datetimeShort:"YYYY-MM-DD HH:mm",friendly:"DD MMM YYYY",friendlyWithTime:"DD MMM YYYY, HH:mm SAST"},input:{date:"YYYY-MM-DD",time:"HH:mm",datetime:"YYYY-MM-DDTHH:mm"},api:{iso:"YYYY-MM-DDTHH:mm:ss.SSSZ"}},DATE_FORMAT:{dateStyle:"short",timeStyle:"short"},DATE_FORMAT_LONG:{dateStyle:"long",timeStyle:"medium"},LOCALE:"en-ZA",BUSINESS_HOURS:{timezone:"SAST",workDays:[1,2,3,4,5],startTime:"08:00",endTime:"17:00",lunchBreak:{start:"12:00",end:"13:00"},breaks:[{name:"Morning Tea",start:"10:00",end:"10:15"},{name:"Afternoon Tea",start:"15:00",end:"15:15"}]},SHIFTS:{day:{name:"Day Shift",start:"06:00",end:"14:00",timezone:"SAST"},afternoon:{name:"Afternoon Shift",start:"14:00",end:"22:00",timezone:"SAST"},night:{name:"Night Shift",start:"22:00",end:"06:00",timezone:"SAST"}},UPLOAD:{MAX_FILE_SIZE:10*1024*1024,CHUNK_SIZE:1024*1024,ALLOWED_EXTENSIONS:["xlsx","xls","csv","pdf","png","jpg","jpeg"],ALLOWED_MIME_TYPES:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv","application/pdf","image/png","image/jpeg"],IMAGE_MAX_WIDTH:2e3,IMAGE_MAX_HEIGHT:2e3,IMAGE_QUALITY:.9},EXPORT_FORMATS:["json","csv","excel","pdf"],EXPORT_BATCH_SIZE:1e3,CACHE_TTL:{SHORT:3e5,MEDIUM:18e5,LONG:36e5,VERY_LONG:864e5},REFRESH_INTERVALS:{ORDERS:3e4,MACHINES:6e4,ANALYTICS:3e5,NOTIFICATIONS:6e4},ANALYTICS:{CHART_COLORS:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"],DEFAULT_DATE_RANGE:30,MAX_CHART_POINTS:100,EFFICIENCY_TARGETS:{EXCELLENT:95,GOOD:85,AVERAGE:75,POOR:65}},VALIDATION:{USERNAME_MIN_LENGTH:3,USERNAME_MAX_LENGTH:50,PASSWORD_MIN_LENGTH:6,PASSWORD_MAX_LENGTH:128,ORDER_NUMBER_PATTERN:/^[A-Z0-9-]+$/,EMAIL_PATTERN:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,PHONE_PATTERN:/^[\d\s\-\+\(\)]+$/},BUSINESS_RULES:{MIN_ORDER_QUANTITY:1,MAX_ORDER_QUANTITY:999999,ORDER_NUMBER_PREFIX:"ORD",AUTO_LOGOUT_AFTER_INACTIVITY:!0,REQUIRE_STOP_REASON:!0,REQUIRE_WASTE_TRACKING:!0,ALLOW_NEGATIVE_EFFICIENCY:!1,MAX_CONCURRENT_ORDERS_PER_MACHINE:1},FEATURES:{REAL_TIME_UPDATES:!0,OFFLINE_MODE:!0,EXPORT_FUNCTIONALITY:!0,ADVANCED_ANALYTICS:!0,MACHINE_MAINTENANCE_TRACKING:!0,TIMEZONE_DISPLAY:!0,BUSINESS_HOURS_VALIDATION:!0,SHIFT_TRACKING:!0,QUALITY_CONTROL:!1,INVENTORY_MANAGEMENT:!1,PREDICTIVE_MAINTENANCE:!1},EXTERNAL_SERVICES:{ANALYTICS_ENABLED:!1,ANALYTICS_ID:"",ERROR_TRACKING_ENABLED:!1,ERROR_TRACKING_DSN:"",SUPPORT_EMAIL:"support@oracles.africa",DOCUMENTATION_URL:"https://docs.oracles.africa/pms"},STATUS_COLORS:{pending:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-300",dot:"bg-yellow-400"},in_progress:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-300",dot:"bg-blue-400"},stopped:{bg:"bg-red-100",text:"text-red-800",border:"border-red-300",dot:"bg-red-400"},completed:{bg:"bg-green-100",text:"text-green-800",border:"border-green-300",dot:"bg-green-400"}},PRIORITY_COLORS:{low:{bg:"bg-gray-100",text:"text-gray-600",border:"border-gray-300"},normal:{bg:"bg-blue-100",text:"text-blue-600",border:"border-blue-300"},high:{bg:"bg-orange-100",text:"text-orange-600",border:"border-orange-300"},urgent:{bg:"bg-red-100",text:"text-red-600",border:"border-red-300"}},MACHINE_STATUS_COLORS:{available:{bg:"bg-green-100",text:"text-green-800",dot:"bg-green-400"},in_use:{bg:"bg-blue-100",text:"text-blue-800",dot:"bg-blue-400"},paused:{bg:"bg-yellow-100",text:"text-yellow-800",dot:"bg-yellow-400"},maintenance:{bg:"bg-orange-100",text:"text-orange-800",dot:"bg-orange-400"},offline:{bg:"bg-red-100",text:"text-red-800",dot:"bg-red-400"}}};window.APP_CONFIG.ENV==="production"&&(Object.freeze(window.APP_CONFIG),Object.freeze(window.APP_CONFIG.ORDER_STATUSES),Object.freeze(window.APP_CONFIG.PRIORITY_LEVELS),Object.freeze(window.APP_CONFIG.MACHINE_STATUSES),Object.freeze(window.APP_CONFIG.USER_ROLES),Object.freeze(window.APP_CONFIG.ROLE_PERMISSIONS),Object.freeze(window.APP_CONFIG.FEATURES));const ox={events:{},on(i,c){return this.events[i]||(this.events[i]=[]),this.events[i].push(c),()=>{this.off(i,c)}},off(i,c){this.events[i]&&(this.events[i]=this.events[i].filter(u=>u!==c))},emit(i,c){this.events[i]&&this.events[i].forEach(u=>{try{u(c)}catch(d){console.error(`Error in event handler for ${i}:`,d)}})},clear(i){i?delete this.events[i]:this.events={}}};window.EventBus=ox;class dx{constructor(){this.baseURL=window.APP_CONFIG?.API_BASE||"/api",this.retryAttempts=3,this.retryDelay=1e3}getHeaders(){const c={"Content-Type":"application/json"},u=localStorage.getItem("token");return u&&(c.Authorization=`Bearer ${u}`),c}async handleResponse(c){if(!c.ok){if(c.status===401||c.status===403)throw console.log("🔐 Authentication failed - clearing tokens and triggering logout"),localStorage.removeItem("token"),localStorage.removeItem("user_data"),window.EventBus&&window.EventBus.emit("auth:logout"),new Error("Session expired. Please login again.");let u;try{u=await c.json()}catch{u={error:"Request failed",success:!1}}const d=new Error(u.error||u.message||"Request failed");throw d.response={status:c.status,data:u,success:u.success||!1},d}if(c.headers.get("content-length")==="0")return{success:!0,data:null};try{return await c.json()}catch{return{success:!0,data:null}}}async retryRequest(c,u=this.retryAttempts){for(let d=0;d<u;d++)try{return await c()}catch(f){if(f.response?.status===401||f.response?.status===403||f.response?.status===400||d===u-1)throw f;await new Promise(p=>setTimeout(p,this.retryDelay*(d+1))),console.warn(`API request failed, retrying... (${d+1}/${u})`)}}async request(c,u={}){const d=`${this.baseURL}${c}`,f={...u,headers:{...this.getHeaders(),...u.headers},credentials:"include"};return this.retryRequest(async()=>{try{const p=await fetch(d,f);return this.handleResponse(p)}catch(p){throw console.error("API request failed:",{url:d,method:f.method||"GET",error:p.message}),p}})}async get(c,u={}){const d=new URLSearchParams(Object.entries(u).filter(([p,v])=>v!=null)).toString(),f=d?`${c}?${d}`:c;return this.request(f,{method:"GET"})}async post(c,u={}){return this.request(c,{method:"POST",body:JSON.stringify(u)})}async put(c,u={}){return this.request(c,{method:"PUT",body:JSON.stringify(u)})}async patch(c,u={}){return this.request(c,{method:"PATCH",body:JSON.stringify(u)})}async delete(c){return this.request(c,{method:"DELETE"})}async uploadFile(c,u,d=null){const f=new FormData;return f.append("file",u),new Promise((p,v)=>{const M=new XMLHttpRequest,w=localStorage.getItem("token");w&&M.setRequestHeader("Authorization",`Bearer ${w}`),d&&M.upload.addEventListener("progress",N=>{if(N.lengthComputable){const y=N.loaded/N.total*100;d(y)}}),M.addEventListener("load",()=>{if(M.status>=200&&M.status<300)try{const N=JSON.parse(M.responseText);p(N)}catch{p({success:!0})}else v(new Error(`Upload failed: ${M.statusText}`))}),M.addEventListener("error",()=>{v(new Error("Upload failed"))}),M.open("POST",`${this.baseURL}${c}`),M.send(f)})}async login(c,u){const d=await this.post("/auth/login",{username:c,password:u});return d.success&&d.data?.token&&localStorage.setItem("token",d.data.token),d}async logout(){try{await this.post("/auth/logout")}finally{localStorage.removeItem("token"),window.EventBus&&window.EventBus.emit("auth:logout")}}async verifySession(){return this.post("/auth/verify")}async getWebSocketToken(){return this.get("/auth/websocket-token")}async getOrders(c={}){return this.get("/orders",c)}async createOrder(c){return this.post("/orders",c)}async updateOrder(c,u){return this.put(`/orders/${c}`,u)}async deleteOrder(c){return this.delete(`/orders/${c}`)}async startProduction(c,u){return this.post(`/orders/${c}/start`,{machine_id:u})}async stopProduction(c,u,d=""){return this.post(`/orders/${c}/stop`,{reason:u,notes:d})}async pauseProduction(c,u){return this.post(`/orders/${c}/pause`,{reason:u})}async resumeProduction(c){return this.post(`/orders/${c}/resume`)}async completeProduction(c,u={}){return this.post(`/orders/${c}/complete`,u)}async getMachines(c=null){return this.get("/machines",c?{environment:c}:{})}async createMachine(c){return this.post("/machines",c)}async updateMachine(c,u){return this.put(`/machines/${c}`,u)}async updateMachineStatus(c,u){return this.patch(`/machines/${c}/status`,{status:u})}async deleteMachine(c){return this.delete(`/machines/${c}`)}async getMachineStats(){return this.get("/machines/stats")}async getUsers(){return this.get("/users")}async createUser(c){return this.post("/users",c)}async updateUser(c,u){return this.put(`/users/${c}`,u)}async getProductionStatus(){return this.get("/production/status")}async getMachineStatus(){return this.get("/machines/status")}async getActiveOrders(){return this.get("/orders/active")}async getProductionFloorOverview(){return this.get("/production/floor-overview")}async getAnalyticsSummary(c={}){return this.get("/analytics/summary",c)}async getDowntimeAnalytics(c={}){return this.get("/analytics/downtime",c)}async getDowntimeReports(c={}){return this.get("/reports/downtime",c)}async getArchivedOrders(){return this.get("/orders/archived")}async getOrder(c){return this.get(`/orders/${c}`)}async getAnalyticsStops(){return this.get("/analytics/stops")}async getGeneralSettings(){return this.get("/settings/general")}async updateGeneralSettings(c){return this.put("/settings/general",c)}async getLaborAssignments(c=null){return this.get("/planner/assignments",c?{date:c}:{})}async createLaborAssignment(c){return this.post("/planner/assignments",c)}async deleteLaborAssignment(c){return this.delete(`/planner/assignments/${c}`)}async getSupervisors(c=null,u=null){const d={};return c&&(d.date=c),u&&(d.shift=u),this.get("/planner/supervisors",d)}async addSupervisor(c){return this.post("/planner/supervisors",c)}async deleteSupervisor(c){return this.delete(`/planner/supervisors/${c}`)}async getEnvironments(){return this.get("/environments")}async exportData(c,u={}){const d=await fetch(`${this.baseURL}/export/${c}?${new URLSearchParams(u)}`,{headers:this.getHeaders(),credentials:"include"});if(!d.ok)throw new Error("Export failed");return d.blob()}async uploadOrders(c,u=null){return this.uploadFile("/upload-orders",c,u)}async checkHealth(){return this.get("/health")}}const fe=new dx;window.API=fe;class ux{constructor(){this.ws=null,this.connectionId=null,this.connectionState="disconnected",this.isAuthenticated=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.reconnectDelay=1e3,this.heartbeatInterval=3e4,this.messageQueue=[],this.subscriptions=new Set,this.rooms=new Set,this.eventHandlers=new Map,this.metrics={messagesReceived:0,messagesSent:0,reconnections:0,lastPing:null,connectionTime:null},this.heartbeatTimer=null,this.reconnectTimer=null,this.connectionTimeoutTimer=null,console.log("🚀 Enhanced WebSocket Service initialized")}async connect(c=null){return this.connectionState==="connecting"||this.isConnected()?(console.log("⚠️ WebSocket already connecting or connected"),Promise.resolve()):new Promise(async(u,d)=>{try{this.connectionState="connecting",this.emit("connectionStateChanged",{state:"connecting"});const f=c||await this.getWebSocketToken();if(!f){console.log("ℹ️ No authentication token available, skipping WebSocket connection"),this.connectionState="disconnected",this.emit("connectionStateChanged",{state:"disconnected"});return}const p=this.buildWebSocketUrl(f);console.log("🔗 Connecting to:",p),this.ws=new WebSocket(p,f),this.connectionTimeoutTimer=setTimeout(()=>{this.connectionState==="connecting"&&(this.ws.close(),d(new Error("Connection timeout")))},1e4),this.setupEnhancedEventHandlers(u,d)}catch(f){this.handleConnectionError(f),d(f)}})}buildWebSocketUrl(c){return window.location.hostname==="localhost"?(this.authToken=c,"ws://localhost:3000"):(this.authToken=c,"wss://oracles.africa/ws")}setupEnhancedEventHandlers(c,u){const d={value:!1};this.ws.onopen=f=>{this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),console.log("✅ Enhanced WebSocket connected"),this.connectionState="connected",this.metrics.connectionTime=new Date,this.reconnectAttempts=0,this.connectionId=`enh_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,this.startHeartbeat(),this.processMessageQueue(),this.resubscribeToChannels(),this.emit("connected",{connectionId:this.connectionId,serverTime:new Date().toISOString(),enhanced:!0}),d.value||(d.value=!0,c())},this.ws.onmessage=f=>{try{const p=JSON.parse(f.data);this.metrics.messagesReceived++,this.handleEnhancedMessage(p)}catch(p){console.error("💥 Failed to parse WebSocket message:",p)}},this.ws.onclose=f=>{this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),console.log(`🔌 Enhanced WebSocket disconnected - Code: ${f.code}, Reason: ${f.reason}`),this.handleDisconnection(f),d.value||(d.value=!0,u(new Error(`Connection failed: ${f.code} ${f.reason}`)))},this.ws.onerror=f=>{console.error("💥 Enhanced WebSocket error:",f),d.value||(d.value=!0,u(f))}}handleConnectionError(c){console.error("❌ WebSocket connection error:",c),this.connectionState="disconnected",this.lastError=c,this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),this.metrics.connectionErrors=(this.metrics.connectionErrors||0)+1,this.emit("error",c),c.message&&c.message.includes("token")&&console.warn("🔐 Token-related error, may need re-authentication")}handleEnhancedMessage(c){const{type:u,data:d,room:f,channel:p,priority:v="normal",timestamp:M}=c;switch(console.log(`📨 Enhanced message received: ${u}`,{room:f,channel:p,priority:v}),u){case"welcome":this.isAuthenticated=!0,this.emit("authenticated",d),console.log("🎉 Enhanced WebSocket authenticated:",d.user);break;case"auth_error":console.error("🚫 Authentication failed:",d.error),this.disconnect(),this.emit("auth_error",d);break;case"pong":this.metrics.lastPing=new Date;break;case"room_joined":this.rooms.add(d.room),console.log("🏠 Joined room:",d.room),this.emit("room_joined",d);break;case"room_left":this.rooms.delete(d.room),console.log("🚪 Left room:",d.room),this.emit("room_left",d);break;case"subscription_confirmed":d.channels?.forEach(w=>this.subscriptions.add(w)),this.emit("subscribed",d);break;case"error":console.error("⚠️ Server error:",d.error),this.emit("server_error",d);break;case"order_started":case"order_stopped":case"order_resumed":case"order_completed":this.emit("order_update",{type:u,data:d,timestamp:M,room:f,channel:p}),this.emit(u,{data:d,timestamp:M,room:f,channel:p});break;case"machine_status_changed":this.emit("machine_update",{type:u,data:d,timestamp:M,room:f,channel:p}),this.emit(u,{data:d,timestamp:M,room:f,channel:p});break;case"production_alert":this.emit("alert",{data:d,timestamp:M,priority:v,room:f,channel:p});break;case"user_notification":this.emit("notification",{data:d,timestamp:M,priority:v});break;default:this.emit(u,{data:d,timestamp:M,room:f,channel:p,priority:v});break}}subscribe(c,u=null){if(typeof c=="string"&&(c=[c]),!Array.isArray(c))return;c.forEach(f=>this.subscriptions.add(f));const d={channels:c};u&&(d.room=u,this.rooms.add(u)),this.isConnected()&&this.isAuthenticated?(this.send("subscribe",d),console.log("📺 Subscribing to channels:",c,u?`in room: ${u}`:"")):console.log("📺 Queued subscription (will subscribe when connected):",c)}joinRoom(c){this.isConnected()&&this.isAuthenticated?(this.send("join_room",{room:c}),console.log("🏠 Joining room:",c)):console.log("🏠 Queued room join:",c)}leaveRoom(c){this.isConnected()&&this.isAuthenticated&&(this.send("leave_room",{room:c}),this.rooms.delete(c),console.log("🚪 Leaving room:",c))}send(c,u={},d="normal"){const f={type:c,data:u,priority:d,timestamp:new Date().toISOString(),clientId:this.connectionId};if(!this.isConnected())return this.messageQueue.push(f),console.log("📬 Message queued:",c),!1;try{return this.ws.send(JSON.stringify(f)),this.metrics.messagesSent++,console.log(`📤 Enhanced message sent: ${c}`),!0}catch(p){return console.error("💥 Failed to send message:",p),this.messageQueue.push(f),!1}}processMessageQueue(){if(this.messageQueue.length===0)return;console.log(`📬 Processing ${this.messageQueue.length} queued messages`);const c=[...this.messageQueue];this.messageQueue=[],c.forEach(u=>{this.send(u.type,u.data,u.priority)})}resubscribeToChannels(){if(this.subscriptions.size>0){const c=Array.from(this.subscriptions);this.send("subscribe",{channels:c}),console.log("🔄 Resubscribed to channels:",c)}this.rooms.size>0&&(this.rooms.forEach(c=>{this.send("join_room",{room:c})}),console.log("🔄 Rejoined rooms:",Array.from(this.rooms)))}startHeartbeat(){this.stopHeartbeat(),this.heartbeatTimer=setInterval(()=>{if(this.isConnected()){const c=Date.now();this.send("ping",{clientTime:c})}},this.heartbeatInterval),console.log(`💓 Enhanced heartbeat started (${this.heartbeatInterval}ms)`)}stopHeartbeat(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null)}handleDisconnection(c){this.connectionState="disconnected",this.isAuthenticated=!1,this.stopHeartbeat(),this.emit("disconnected",{code:c.code,reason:c.reason,connectionTime:this.metrics.connectionTime,reconnectAttempts:this.reconnectAttempts}),c.code!==1e3&&c.code!==1001&&this.scheduleReconnect()}scheduleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("❌ Max reconnection attempts reached"),this.emit("max_reconnect_attempts");return}const c=this.reconnectDelay*Math.pow(2,this.reconnectAttempts),u=Math.random()*1e3,d=c+u;this.reconnectAttempts++,this.metrics.reconnections++,console.log(`🔄 Scheduling reconnection ${this.reconnectAttempts}/${this.maxReconnectAttempts} in ${Math.round(d)}ms`),this.connectionState="reconnecting",this.emit("connectionStateChanged",{state:"reconnecting",attempt:this.reconnectAttempts,delay:Math.round(d)}),this.reconnectTimer=setTimeout(()=>{this.connect().catch(f=>{console.warn("🔄 Reconnection failed:",f.message)})},d)}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}getConnectionStatus(){return{state:this.connectionState,isConnected:this.isConnected(),isAuthenticated:this.isAuthenticated,connectionId:this.connectionId,subscriptions:Array.from(this.subscriptions),rooms:Array.from(this.rooms),queuedMessages:this.messageQueue.length,metrics:{...this.metrics},reconnectAttempts:this.reconnectAttempts}}disconnect(){console.log("🔌 Disconnecting Enhanced WebSocket"),this.stopHeartbeat(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.connectionTimeoutTimer&&(clearTimeout(this.connectionTimeoutTimer),this.connectionTimeoutTimer=null),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null),this.connectionState="disconnected",this.isAuthenticated=!1,this.reconnectAttempts=0,this.connectionId=null,this.messageQueue=[],this.emit("disconnected",{deliberate:!0})}on(c,u){this.eventHandlers.has(c)||this.eventHandlers.set(c,new Set),this.eventHandlers.get(c).add(u),console.log(`👂 Handler registered for: ${c}`)}off(c,u){this.eventHandlers.has(c)&&this.eventHandlers.get(c).delete(u)}emit(c,u){this.eventHandlers.has(c)&&this.eventHandlers.get(c).forEach(d=>{try{d(u)}catch(f){console.error(`💥 Error in event handler for ${c}:`,f)}})}async getWebSocketToken(){try{const c=localStorage.getItem("token"),u={"Content-Type":"application/json"};c&&(u.Authorization=`Bearer ${c}`);const d=await fetch("/api/auth/websocket-token",{method:"GET",credentials:"include",headers:u});if(d.status===401)return console.warn("🚫 Not authenticated for WebSocket"),null;if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);return(await d.json()).token}catch(c){return console.error("Failed to get WebSocket token:",c),null}}getMetrics(){return{...this.metrics,uptime:this.metrics.connectionTime?Date.now()-this.metrics.connectionTime.getTime():0,subscriptionCount:this.subscriptions.size,roomCount:this.rooms.size,handlerCount:Array.from(this.eventHandlers.values()).reduce((c,u)=>c+u.size,0)}}resetMetrics(){this.metrics={messagesReceived:0,messagesSent:0,reconnections:0,lastPing:null,connectionTime:this.metrics.connectionTime}}}const ct=new ux;window.EnhancedWebSocketService=ct;const Cf=qa.createContext(null),us=()=>qa.useContext(Cf),Of=({children:i})=>{const[c,u]=qa.useState(null),[d,f]=qa.useState(!0),[p,v]=qa.useState(!1),M=async()=>{f(!0);try{if(!localStorage.getItem("token")){console.log("🔐 No token found in localStorage"),u(null),v(!1),f(!1);return}console.log("🔐 Token found, verifying session...");const I=await window.API.verifySession(),Y=I?.data?.user||I?.user;if(Y){if(console.log("🔐 Session verified successfully:",Y.username),u(Y),v(!0),localStorage.setItem("user_data",JSON.stringify(Y)),window.EnhancedWebSocketService&&!window.EnhancedWebSocketService.isConnected())try{console.log("🔐 User already authenticated - connecting WebSocket"),await window.EnhancedWebSocketService.connect()}catch(B){console.warn("⚠️ WebSocket connection failed for existing session:",B.message)}}else throw console.log("🔐 Session verification failed - no user data returned"),new Error("No user data returned from session verification")}catch(C){console.log("🔐 Session verification failed:",C.message),u(null),v(!1),localStorage.removeItem("user_data"),localStorage.removeItem("token")}finally{f(!1)}};qa.useEffect(()=>{M();const C=window.EventBus.on("auth:logout",()=>{u(null),v(!1),localStorage.removeItem("user_data"),localStorage.removeItem("token")});return()=>C()},[]);const H={user:c,login:async(C,I)=>{const Y=await window.API.login(C,I);if(Y.data?.user&&Y.data?.token&&(u(Y.data.user),v(!0),localStorage.setItem("user_data",JSON.stringify(Y.data.user)),localStorage.setItem("token",Y.data.token),window.EnhancedWebSocketService))try{console.log("🔐 Connecting WebSocket after successful login"),await window.EnhancedWebSocketService.connect()}catch(B){console.warn("⚠️ WebSocket connection failed after login:",B.message)}return Y},logout:async()=>{try{await window.API.logout()}catch(C){console.error("Logout failed:",C)}finally{if(window.EnhancedWebSocketService)try{console.log("🔌 Disconnecting WebSocket on logout"),window.EnhancedWebSocketService.disconnect()}catch(C){console.warn("⚠️ WebSocket disconnect failed on logout:",C.message)}u(null),v(!1),localStorage.removeItem("user_data"),localStorage.removeItem("token")}},loading:d,isAuthenticated:p,hasRole:C=>c?(Array.isArray(C)?C:[C]).includes(c.role):!1,checkAuth:M};return qa.createElement(Cf.Provider,{value:H},i)};window.useAuth=us;window.AuthProvider=Of;class mx{constructor(){this.routes=[],this.currentRoute=null,this.listening=!1}init(){this.listening=!0,window.addEventListener("popstate",c=>{this.handleRouteChange()}),this.handleRouteChange()}addRoute(c){this.routes.push(c)}navigate(c,u={}){c!==window.location.pathname&&(window.history.pushState({},"",c),this.handleRouteChange())}back(){window.history.back()}handleRouteChange(){const c=window.location.pathname,u=this.findRoute(c);this.currentRoute=u,window.EventBus&&window.EventBus.emit("router:navigation",{route:u,path:c,params:u?{}:null})}findRoute(c){return this.routes.find(u=>{if(u.path===c)return!0;const d=u.path.split("/"),f=c.split("/");return d.length!==f.length?!1:d.every((p,v)=>p.startsWith(":")||p===f[v])})}getCurrentRoute(){return{route:this.currentRoute,path:window.location.pathname,params:{},query:this.getQueryParams()}}getQueryParams(){const c=new URLSearchParams(window.location.search),u={};for(const[d,f]of c)u[d]=f;return u}updateQueryParams(c,u=!1){const d=new URL(window.location);Object.entries(c).forEach(([f,p])=>{p==null?d.searchParams.delete(f):d.searchParams.set(f,p)}),u?window.history.replaceState({},"",d):window.history.pushState({},"",d)}isActive(c,u=!1){const d=window.location.pathname;return u?d===c:d.startsWith(c)}link(c){return c}}const yo=new mx;window.Router=yo;const fx=()=>{const[i,c]=React.useState(window.Router.getCurrentRoute());React.useEffect(()=>{const p=v=>{c({route:v.route,path:v.path,params:v.params||{},query:window.Router.getQueryParams()})};if(window.EventBus)return window.EventBus.on("router:navigation",p)},[]);const u=React.useCallback((p,v)=>{window.Router.navigate(p,v)},[]),d=React.useCallback(()=>{window.Router.back()},[]),f=React.useCallback((p,v)=>{window.Router.updateQueryParams(p,v)},[]);return{route:i.route,path:i.path,params:i.params,query:i.query,navigate:u,back:d,updateQuery:f,isActive:window.Router.isActive.bind(window.Router),link:window.Router.link.bind(window.Router)}};window.useRouter=fx;/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xx=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(c,u,d)=>d?d.toUpperCase():u.toLowerCase()),_f=i=>{const c=xx(i);return c.charAt(0).toUpperCase()+c.slice(1)},Df=(...i)=>i.filter((c,u,d)=>!!c&&c.trim()!==""&&d.indexOf(c)===u).join(" ").trim(),gx=i=>{for(const c in i)if(c.startsWith("aria-")||c==="role"||c==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var px={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=x.forwardRef(({color:i="currentColor",size:c=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:f="",children:p,iconNode:v,...M},w)=>x.createElement("svg",{ref:w,...px,width:c,height:c,stroke:i,strokeWidth:d?Number(u)*24/Number(c):u,className:Df("lucide",f),...!p&&!gx(M)&&{"aria-hidden":"true"},...M},[...v.map(([N,y])=>x.createElement(N,y)),...Array.isArray(p)?p:[p]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(i,c)=>{const u=x.forwardRef(({className:d,...f},p)=>x.createElement(yx,{ref:p,iconNode:c,className:Df(`lucide-${hx(_f(i))}`,`lucide-${i}`,d),...f}));return u.displayName=_f(i),u};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],St=ve("activity",bx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],jx=ve("award",vx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],wx=ve("bell",Nx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ua=ve("calendar",Sx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],va=ve("chart-column",_x);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ax=ve("circle-alert",Ex);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ot=ve("circle-check-big",Mx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fo=ve("circle-x",Tx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],En=ve("clipboard-list",Cx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jt=ve("clock",Ox);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],Ef=ve("cpu",Dx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Rx=ve("database",kx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ja=ve("download",Ux);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Lx=ve("ellipsis-vertical",zx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ds=ve("eye",qx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],jn=ve("factory",Hx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kf=ve("file-text",Bx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Xr=ve("funnel",Yx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Gx=ve("info",$x);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Xx=ve("layout-dashboard",Qx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Zx=ve("map-pin",Vx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Kx=ve("menu",Wx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ba=ve("package",Px);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Cs=ve("pause",Jx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],wn=ve("pen-line",Fx);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Rf=ve("pen",Ix);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],ya=ve("play",eg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ia=ve("plus",tg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Je=ve("refresh-cw",ag);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],lg=ve("rotate-ccw",sg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Nn=ve("save",ng);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Vr=ve("search",rg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kt=ve("settings",ig);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Qr=ve("shield",cg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ho=ve("square",og);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Sn=ve("target",dg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Af=ve("timer",ug);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_n=ve("trash-2",mg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],bo=ve("trending-down",fg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],yl=ve("trending-up",hg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bt=ve("triangle-alert",xg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Uf=ve("upload",gg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ha=ve("user-check",pg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],uo=ve("user-plus",yg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],vg=ve("user-x",bg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ie=ve("users",jg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wg=ve("wifi-off",Ng);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],_g=ve("wifi",Sg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],bl=ve("wrench",Eg);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vl=ve("x",Ag);/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Tg=ve("zap",Mg),Cg={calendar:ua,users:Ie,search:Vr,plus:ia,check:ot,x:vl,clipboard:En,userCheck:Ha,settings:Kt,edit:Rf,save:Nn,trash:_n,upload:Uf,download:ja,activity:St,package:ba,shield:Qr,dashboard:Xx,moreVertical:Lx,clock:Jt,barChart3:va,menu:Kx,wifi:_g,wifiOff:wg},Na=({icon:i,size:c=24,className:u=""})=>{const d=Cg[i];return d?a.jsx(d,{size:c,className:u}):a.jsx(Ie,{size:c,className:u})},Og=()=>{const[i,c]=x.useState(navigator.onLine),[u,d]=x.useState("disconnected"),[f,p]=x.useState(new Date);x.useEffect(()=>{const C=()=>{c(!0),p(new Date)},I=()=>{c(!1),p(new Date)};window.addEventListener("online",C),window.addEventListener("offline",I);const Y=()=>{d("connected"),p(new Date)},B=()=>{d("disconnected"),p(new Date)},g=()=>{d("reconnecting"),p(new Date)},L=()=>{d("error"),p(new Date)};if(window.WebSocketService){window.WebSocketService.on("connected",Y),window.WebSocketService.on("authenticated",Y),window.WebSocketService.on("disconnected",B),window.WebSocketService.on("reconnecting",g),window.WebSocketService.on("error",L);const ie=window.WebSocketService.getStatus();d(ie.isConnected?"connected":ie.state)}const W=setInterval(()=>{i&&p(new Date)},6e4);return()=>{window.removeEventListener("online",C),window.removeEventListener("offline",I),clearInterval(W),window.WebSocketService&&(window.WebSocketService.off("connected",Y),window.WebSocketService.off("authenticated",Y),window.WebSocketService.off("disconnected",B),window.WebSocketService.off("reconnecting",g),window.WebSocketService.off("error",L))}},[i]);const v=i&&u==="connected",M=u==="reconnecting",w=u==="error"||!i;let N,y,H;return M?(N="bg-yellow-100 text-yellow-800",y="Reconnecting...",H="wifi"):v?(N="bg-green-100 text-green-800",y="Live",H="wifi"):w?(N="bg-red-100 text-red-800",y=i?"Connection Error":"Offline",H="wifiOff"):(N="bg-gray-100 text-gray-800",y="Connecting...",H="wifi"),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs ${N}`,children:[a.jsx(Na,{icon:H,size:12,className:`${v?"text-green-600":w?"text-red-600":"text-yellow-600"} ${M?"animate-pulse":""}`}),a.jsx("span",{children:y}),a.jsx("span",{className:"text-gray-500 hidden sm:inline",children:f.toLocaleTimeString()})]})},Dg=()=>{const{user:i,logout:c}=us(),[u,d]=x.useState(!1);return i?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>d(!u),className:"flex items-center space-x-3 focus:outline-none",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-semibold text-gray-700",children:i.username?i.username.charAt(0).toUpperCase():"U"})}),a.jsxs("div",{className:"hidden md:block text-left",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:i.username}),a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:i.role})]})]}),u&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:a.jsx("button",{onClick:c,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})})]}):null},kg=({onMenuClick:i})=>a.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("button",{onClick:i,className:"lg:hidden p-3 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Open navigation menu",children:a.jsx(Na,{icon:"menu",size:24})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-semibold text-gray-900 hidden sm:block",children:"Production Management System"}),a.jsx("h1",{className:"text-lg font-semibold text-gray-900 sm:hidden",children:"PMS"}),a.jsx(Og,{})]}),a.jsx(Dg,{})]})})}),Rg=({isOpen:i,onClose:c})=>{const{user:u}=us(),f=[{name:"Dashboard",href:"/",icon:"dashboard",priority:"critical",roles:["operator","supervisor","manager","admin"]},{name:"Production Monitor",href:"/production",icon:"activity",priority:"critical",roles:["operator","supervisor","manager","admin"]},{name:"Orders",href:"/orders",icon:"package",priority:"daily",roles:["operator","supervisor","manager","admin"]},{name:"Machines",href:"/machines",icon:"settings",priority:"daily",roles:["operator","supervisor","manager","admin"]},{name:"Labor Layout",href:"/labour-layout",icon:"users",priority:"daily",roles:["supervisor","manager","admin"]},{name:"Labor Planner",href:"/labor-planner",icon:"calendar",priority:"daily",roles:["supervisor","manager","admin"]},{name:"Analytics",href:"/analytics",icon:"barChart3",priority:"management",roles:["manager","admin"]},{name:"Shift Reports",href:"/shift-reports",icon:"clock",priority:"management",roles:["supervisor","manager","admin"]},{name:"Users",href:"/users",icon:"users",priority:"management",roles:["admin"]},{name:"Settings",href:"/settings",icon:"settings",priority:"management",roles:["supervisor","manager","admin"]},{name:"Admin",href:"/admin",icon:"shield",priority:"management",roles:["admin"]}].filter(y=>y.roles.includes(u?.role||"operator")),p=f.filter(y=>y.priority==="critical"),v=f.filter(y=>y.priority==="daily"),M=f.filter(y=>y.priority==="management"),w=(y,H)=>{y.preventDefault(),window.history.pushState({},"",H);const C=new PopStateEvent("popstate");window.dispatchEvent(C),c&&c()},N=(y,H)=>y.length===0?null:a.jsxs("div",{className:"mb-4",children:[H&&a.jsx("h3",{className:"px-3 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2",children:H}),a.jsx("div",{className:"space-y-1",children:y.map(C=>a.jsxs("a",{href:C.href,onClick:I=>w(I,C.href),className:`group flex items-center px-3 py-3 text-sm font-medium rounded-md hover:bg-gray-700 hover:text-white transition-colors min-h-[44px] touch-manipulation ${window.location.pathname===C.href?"bg-gray-900 text-white":"text-gray-300"}`,children:[a.jsx(Na,{icon:C.icon,size:18,className:"mr-3 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:C.name})]},C.name))})]});return a.jsxs(a.Fragment,{children:[i&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-30 lg:hidden",onClick:c}),a.jsxs("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-gray-800 text-white transform transition-transform ${i?"translate-x-0":"-translate-x-full"} lg:translate-x-0 lg:static lg:inset-0`,children:[a.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-700",children:[a.jsx("span",{className:"text-white font-semibold text-xl",children:"PMS"}),a.jsx("button",{onClick:c,className:"lg:hidden p-2 text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white rounded-md min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Close navigation menu",children:a.jsx(Na,{icon:"x",size:20})})]}),a.jsx("div",{className:"px-4 py-3 border-b border-gray-700",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-full flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-sm font-semibold text-white",children:u?.username?u.username.charAt(0).toUpperCase():"U"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-white",children:u?.username}),a.jsx("p",{className:"text-xs text-gray-300 capitalize",children:u?.role})]})]})}),a.jsxs("nav",{className:"flex-1 px-2 py-4 overflow-y-auto",children:[N(p,"Critical"),N(v,"Daily Operations"),N(M,"Management")]})]})]})};function Ug({children:i}){const[c,u]=x.useState(!1);return a.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[a.jsx(Rg,{isOpen:c,onClose:()=>u(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(kg,{onMenuClick:()=>u(!0)}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:a.jsx("div",{className:"py-6",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})]})}function zg(){const[i,c]=x.useState({username:"",password:""}),[u,d]=x.useState(""),[f,p]=x.useState(!1),{login:v}=us(),M=async N=>{N.preventDefault(),d(""),p(!0);try{await v(i.username,i.password)}catch(y){d(y.message||"Login failed. Please try again.")}finally{p(!1)}},w=N=>y=>{c(H=>({...H,[N]:y.target.value})),u&&d("")};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Production Management"}),a.jsx("p",{className:"text-gray-600",children:"Sign in to continue"})]}),a.jsxs("form",{onSubmit:M,className:"space-y-6",children:[u&&a.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded",children:u}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),a.jsx("input",{type:"text",value:i.username,onChange:w("username"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,autoFocus:!0,disabled:f})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:i.password,onChange:w("password"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,disabled:f})]}),a.jsx("button",{type:"submit",disabled:f,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition duration-200 disabled:opacity-50",children:f?"Signing in...":"Sign In"})]})]})})}const Lg=({notification:i,onClose:c})=>{const{type:u,title:d,message:f,timestamp:p}=i;x.useEffect(()=>{const w=setTimeout(()=>{c()},5e3);return()=>clearTimeout(w)},[c]);const v=()=>{switch(u){case"order_started":return"bg-blue-50 border-blue-200 text-blue-800";case"order_completed":return"bg-green-50 border-green-200 text-green-800";case"order_stopped":return"bg-red-50 border-red-200 text-red-800";case"order_resumed":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"machine_status_changed":return"bg-purple-50 border-purple-200 text-purple-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},M=()=>{switch(u){case"order_started":return"activity";case"order_completed":return"check";case"order_stopped":return"x";case"order_resumed":return"activity";case"machine_status_changed":return"settings";default:return"info"}};return a.jsx("div",{className:`mb-3 p-4 rounded-lg border-l-4 shadow-md transition-all duration-300 ${v()}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Na,{icon:M(),size:20,className:"mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-sm",children:d}),a.jsx("p",{className:"text-sm mt-1 text-gray-600",children:f}),a.jsx("p",{className:"text-xs mt-2 text-gray-500",children:new Date(p).toLocaleTimeString()})]}),a.jsx("button",{onClick:c,className:"ml-3 flex-shrink-0 text-gray-400 hover:text-gray-600",children:a.jsx(Na,{icon:"x",size:16})})]})})},qg=()=>{const[i,c]=x.useState([]),[u,d]=x.useState(!1),f=x.useRef({});x.useEffect(()=>{if(!window.WebSocketService){console.warn("WebSocket service not available");return}const w=()=>{d(!0),window.WebSocketService.subscribe(["orders","machines","notifications"])},N=()=>{d(!1)},y=Y=>{const{type:B,data:g,timestamp:L}=Y;let W,ie;switch(B){case"order_started":W="Production Started",ie=`Order ${g.order.order_number} started on ${g.order.machine_name} by ${g.operator}`;break;case"order_stopped":W="Production Stopped",ie=`Order ${g.order.order_number} stopped - ${g.reason}`;break;case"order_resumed":W="Production Resumed",ie=`Order ${g.order.order_number} resumed by ${g.resumed_by}`;break;case"order_completed":W="Order Completed",ie=`Order ${g.order.order_number} completed (${g.efficiency.toFixed(1)}% efficiency)`;break;default:W="Order Update",ie=`Order ${g.order?.order_number||"Unknown"} has been updated`}p({id:`${B}_${Date.now()}`,type:B,title:W,message:ie,timestamp:L,data:g})},H=Y=>{const{type:B,data:g,timestamp:L}=Y;B==="machine_status_changed"&&p({id:`machine_${g.machine_id}_${Date.now()}`,type:B,title:"Machine Status Changed",message:`Machine status updated to ${g.status}`,timestamp:L,data:g})},C=Y=>{const{data:B,timestamp:g}=Y;p({id:`notification_${Date.now()}`,type:"notification",title:B.title||"System Notification",message:B.message||"You have a new notification",timestamp:g,data:B})};return f.current={handleConnected:w,handleDisconnected:N,handleOrderUpdate:y,handleMachineUpdate:H,handleNotification:C},window.WebSocketService.on("connected",w),window.WebSocketService.on("authenticated",w),window.WebSocketService.on("disconnected",N),window.WebSocketService.on("order_update",y),window.WebSocketService.on("machine_update",H),window.WebSocketService.on("notification",C),window.WebSocketService.getStatus().isConnected&&w(),()=>{const Y=f.current;window.WebSocketService.off("connected",Y.handleConnected),window.WebSocketService.off("authenticated",Y.handleConnected),window.WebSocketService.off("disconnected",Y.handleDisconnected),window.WebSocketService.off("order_update",Y.handleOrderUpdate),window.WebSocketService.off("machine_update",Y.handleMachineUpdate),window.WebSocketService.off("notification",Y.handleNotification)}},[]);const p=w=>{c(N=>[w,...N.slice(0,4)])},v=w=>{c(N=>N.filter(y=>y.id!==w))},M=()=>{c([])};return i.length===0?null:a.jsxs("div",{className:"fixed top-4 right-4 z-50 w-96 max-w-sm",children:[a.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Live Updates"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${u?"bg-green-400":"bg-gray-400"}`}),a.jsx("button",{onClick:M,className:"text-xs text-gray-500 hover:text-gray-700",children:"Clear All"})]})]}),a.jsx("div",{className:"space-y-3 max-h-screen overflow-y-auto",children:i.map(w=>a.jsx(Lg,{notification:w,onClose:()=>v(w.id)},w.id))})]})},Hg=({maxItems:i=10})=>{const[c,u]=x.useState([]),[d,f]=x.useState(!1),p=x.useRef({});return x.useEffect(()=>{if(!window.WebSocketService)return;const v=()=>{f(!0)},M=()=>{f(!1)},w=y=>{const{type:H,data:C,timestamp:I}=y;let Y={id:`${H}_${Date.now()}`,type:H,timestamp:I,icon:"activity",color:"text-blue-600",data:C};switch(H){case"order_started":Y.message=`${C.operator} started production of ${C.order.order_number}`,Y.icon="activity",Y.color="text-blue-600";break;case"order_completed":Y.message=`${C.completed_by} completed ${C.order.order_number} (${C.efficiency.toFixed(1)}% efficiency)`,Y.icon="check",Y.color="text-green-600";break;case"order_stopped":Y.message=`${C.stopped_by} stopped ${C.order.order_number} - ${C.reason}`,Y.icon="x",Y.color="text-red-600";break;case"order_resumed":Y.message=`${C.resumed_by} resumed ${C.order.order_number}`,Y.icon="activity",Y.color="text-yellow-600";break;case"machine_status_changed":Y.message=`Machine status changed to ${C.status}`,Y.icon="settings",Y.color="text-purple-600";break;default:Y.message="Unknown activity"}u(B=>[Y,...B.slice(0,i-1)])};return p.current={handleConnected:v,handleDisconnected:M,handleActivity:w},window.WebSocketService.on("connected",v),window.WebSocketService.on("authenticated",v),window.WebSocketService.on("disconnected",M),window.WebSocketService.on("order_update",w),window.WebSocketService.on("machine_update",w),window.WebSocketService.getStatus().isConnected&&v(),()=>{const y=p.current;window.WebSocketService.off("connected",y.handleConnected),window.WebSocketService.off("authenticated",y.handleConnected),window.WebSocketService.off("disconnected",y.handleDisconnected),window.WebSocketService.off("order_update",y.handleActivity),window.WebSocketService.off("machine_update",y.handleActivity)}},[i]),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),a.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-400":"bg-gray-400"}`,title:d?"Live updates active":"No live connection"})]}),c.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activity"}):a.jsx("div",{className:"space-y-3",children:c.map(v=>a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Na,{icon:v.icon,size:16,className:`mt-0.5 ${v.color}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-gray-900",children:v.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(v.timestamp).toLocaleTimeString()})]})]},v.id))})]})};class Mf extends x.Component{constructor(c){super(c),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(c){return{hasError:!0}}componentDidCatch(c,u){this.setState({error:c,errorInfo:u}),console.error("Error caught by ErrorBoundary:",c,u)}getErrorMessage=c=>{const u={NETWORK_ERROR:{title:"Connection Problem",message:"Check your network connection and try again.",actions:["retry","work_offline"],severity:"warning"},MACHINE_OFFLINE:{title:"Machine Communication Lost",message:"Unable to communicate with selected machine.",actions:["check_machine","contact_maintenance"],severity:"critical"},DATA_SYNC_FAILED:{title:"Data Sync Failed",message:"Your changes may not be saved. Try again.",actions:["retry","save_locally"],severity:"warning"},SESSION_EXPIRED:{title:"Session Expired",message:"Please log in again to continue.",actions:["login"],severity:"warning"}},d=c?.code||(c?.message?.includes("fetch")?"NETWORK_ERROR":c?.message?.includes("session")?"SESSION_EXPIRED":"UNKNOWN");return u[d]||{title:"System Error",message:"An unexpected error occurred. Please try refreshing the page.",actions:["retry","contact_support"],severity:"critical"}};handleErrorAction=c=>{switch(c){case"retry":this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload();break;case"work_offline":this.setState({hasError:!1,error:null,errorInfo:null});break;case"check_machine":window.history.pushState({},"","/machines"),this.setState({hasError:!1,error:null,errorInfo:null});break;case"contact_maintenance":alert("Please contact maintenance team at ext. 1234");break;case"save_locally":console.log("Attempting to save data locally...");break;case"contact_support":alert("Please contact IT support at ext. 5678");break;case"login":localStorage.removeItem("token"),window.location.reload();break;default:console.log("Unknown action:",c)}};render(){if(this.state.hasError){const c=this.getErrorMessage(this.state.error);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"max-w-md w-full space-y-8",children:a.jsx("div",{className:`p-6 rounded-lg border-l-4 ${c.severity==="critical"?"bg-red-50 border-red-500":"bg-yellow-50 border-yellow-500"}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Na,{icon:"x",size:24,className:`mr-3 mt-1 ${c.severity==="critical"?"text-red-600":"text-yellow-600"}`}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`font-bold text-lg ${c.severity==="critical"?"text-red-800":"text-yellow-800"}`,children:c.title}),a.jsx("p",{className:`mt-2 ${c.severity==="critical"?"text-red-700":"text-yellow-700"}`,children:c.message}),a.jsx("div",{className:"mt-6 flex flex-col gap-3 sm:flex-row",children:c.actions.map(u=>a.jsx("button",{className:`flex-1 px-4 py-3 rounded text-sm font-medium min-h-[44px] touch-manipulation ${c.severity==="critical"?"bg-red-600 text-white hover:bg-red-700":"bg-yellow-600 text-white hover:bg-yellow-700"}`,onClick:()=>this.handleErrorAction(u),children:u.replace("_"," ").toUpperCase()},u))}),a.jsxs("details",{className:"mt-4",children:[a.jsx("summary",{className:"cursor-pointer text-sm text-gray-600 hover:text-gray-800",children:"Technical Details"}),a.jsxs("div",{className:"mt-2 p-3 bg-gray-100 rounded text-xs font-mono text-gray-700 overflow-auto max-h-32",children:[this.state.error&&this.state.error.toString(),a.jsx("br",{}),this.state.errorInfo.componentStack]})]})]})]})})})})}return this.props.children}}const Bg=({onSessionExpiring:i,onSessionExpired:c})=>{const[u,d]=x.useState(null),[f,p]=x.useState(!1),[v,M]=x.useState(!1),w=x.useCallback(async()=>{try{const H=await fe.get("/auth/session-status"),C=H.timeRemaining||H.data?.timeRemaining;C!==void 0&&(d(C),C<3e5&&C>0?(p(!0),i?.(C)):C<=0?(p(!1),c?.()):p(!1))}catch(H){console.error("Session check failed:",H),H.response?.status===401&&c?.()}},[i,c]),N=async()=>{M(!0);try{await fe.post("/auth/extend-session"),p(!1),d(null),console.log("Session extended successfully")}catch(H){console.error("Failed to extend session:",H),H.response?.status===401&&c?.()}finally{M(!1)}};if(x.useEffect(()=>{const H=setInterval(w,6e4);return w(),()=>clearInterval(H)},[w]),!f)return null;const y=Math.ceil(u/6e4);return a.jsx("div",{className:"fixed top-4 right-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4 shadow-lg z-50 max-w-sm w-full",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Na,{icon:"clock",size:20,className:"text-yellow-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-yellow-800",children:"Session Expiring"}),a.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["Your session will expire in ",y," minute",y!==1?"s":"","."]}),a.jsxs("div",{className:"mt-3 flex gap-2",children:[a.jsx("button",{onClick:N,disabled:v,className:"flex-1 bg-yellow-600 text-white px-3 py-2 rounded text-sm font-medium hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px] touch-manipulation flex items-center justify-center",children:v?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Extending..."]}):"Extend Session"}),a.jsx("button",{onClick:()=>p(!1),className:"px-3 py-2 text-yellow-700 hover:text-yellow-800 text-sm font-medium min-h-[44px] min-w-[44px] flex items-center justify-center",children:a.jsx(Na,{icon:"x",size:16})})]})]})]})})},Yg=()=>{const[i,c]=x.useState("active"),u=x.useCallback(f=>{c("expiring"),console.log(`Session expiring in ${Math.ceil(f/6e4)} minutes`)},[]),d=x.useCallback(()=>{c("expired"),console.log("Session expired, redirecting to login..."),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"},[]);return{sessionStatus:i,handleSessionExpiring:u,handleSessionExpired:d}};function vo(){const[i,c]=x.useState("disconnected"),[u,d]=x.useState(!1),[f,p]=x.useState(!1),[v,M]=x.useState({});x.useEffect(()=>{(()=>{const V=ct.getConnectionStatus();c(V.state),d(V.isConnected),p(V.isAuthenticated),M(ct.getMetrics())})();const B=setInterval(()=>{M(ct.getMetrics())},3e4),g=V=>{c(V.state)},L=()=>{d(!0),c("connected")},W=()=>{d(!1),p(!1),c("disconnected")},ie=()=>{p(!0)};return ct.on("connectionStateChanged",g),ct.on("connected",L),ct.on("disconnected",W),ct.on("authenticated",ie),()=>{clearInterval(B),ct.off("connectionStateChanged",g),ct.off("connected",L),ct.off("disconnected",W),ct.off("authenticated",ie)}},[]);const w=x.useCallback(async(Y=null)=>{try{await ct.connect(Y)}catch(B){console.error("Connection failed:",B)}},[]),N=x.useCallback(()=>{ct.disconnect()},[]),y=x.useCallback((Y,B,g="normal")=>ct.send(Y,B,g),[]),H=x.useCallback((Y,B=null)=>{ct.subscribe(Y,B)},[]),C=x.useCallback(Y=>{ct.joinRoom(Y)},[]),I=x.useCallback(Y=>{ct.leaveRoom(Y)},[]);return{connectionStatus:i,isConnected:u,isAuthenticated:f,metrics:v,connect:w,disconnect:N,send:y,subscribe:H,joinRoom:C,leaveRoom:I}}function We(i,c,u=[]){const d=x.useRef(c);x.useEffect(()=>{d.current=c},u),x.useEffect(()=>{const f=p=>{d.current(p)};return ct.on(i,f),()=>{ct.off(i,f)}},[i])}function jo(){const[i,c]=x.useState([]),[u,d]=x.useState(null);return We("order_update",f=>{d({type:f.type,order:f.data.order,timestamp:f.timestamp}),c(p=>{const v=f.data.order?.id;if(!v)return p;const M=p.filter(w=>w.id!==v);return(f.type!=="order_completed"||!f.data.order.archived)&&M.push(f.data.order),M.sort((w,N)=>new Date(N.created_at)-new Date(w.created_at))})},[]),{orders:i,lastUpdate:u,setOrders:c}}function No(){const[i,c]=x.useState([]),[u,d]=x.useState(null);return We("machine_update",f=>{d({type:f.type,machine:f.data,timestamp:f.timestamp}),c(p=>{const v=f.data.machine_id;return v?p.map(M=>M.id===v?{...M,status:f.data.status,order_id:f.data.order_id}:M):p})},[]),{machines:i,lastUpdate:u,setMachines:c}}function Mn(){const[i,c]=x.useState([]);We("notification",f=>{const p={id:Date.now(),message:f.data.message||f.data,type:f.data.type||"info",timestamp:f.timestamp,priority:f.priority||"normal"};c(v=>[p,...v.slice(0,49)])},[]),We("alert",f=>{const p={id:Date.now(),message:f.data.message||f.data,type:"alert",timestamp:f.timestamp,priority:f.priority||"high"};c(v=>[p,...v.slice(0,49)])},[]);const u=x.useCallback(f=>{c(p=>p.filter(v=>v.id!==f))},[]),d=x.useCallback(()=>{c([])},[]);return{notifications:i,clearNotification:u,clearAllNotifications:d,hasUnread:i.some(f=>!f.read)}}function wo(){const{connectionStatus:i,isConnected:c,isAuthenticated:u,metrics:d}=vo(),[f,p]=x.useState(!1);We("connectionStateChanged",N=>{p(N.state==="reconnecting")},[]);const v=()=>{switch(i){case"connected":return u?"green":"yellow";case"connecting":return"blue";case"reconnecting":return"orange";case"error":return"red";default:return"gray"}},M=()=>{switch(i){case"connected":return u?"Connected":"Authenticating";case"connecting":return"Connecting...";case"reconnecting":return"Reconnecting...";case"error":return"Connection Error";default:return"Disconnected"}},w=()=>{switch(i){case"connected":return u?"🟢":"🟡";case"connecting":return"🔵";case"reconnecting":return"🟠";case"error":return"🔴";default:return"⚫"}};return{status:i,isConnected:c,isAuthenticated:u,showReconnecting:f,color:v(),text:M(),icon:w(),metrics:d}}function Os(){const{connect:i,isConnected:c}=vo();x.useEffect(()=>{const u=async()=>{try{const f=localStorage.getItem("token");if(!f){console.log("ℹ️ No token found, skipping WebSocket connection");return}const p=await fetch("/api/auth/verify-session",{method:"GET",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},credentials:"include"});p.ok&&!c?(console.log("🔐 User authenticated, connecting WebSocket..."),await i()):p.status===401&&(console.log("🚫 Token expired or invalid, removing from localStorage"),localStorage.removeItem("token"))}catch{console.log("ℹ️ Not authenticated, skipping WebSocket connection"),localStorage.getItem("token")&&(console.log("🧹 Removing potentially invalid token"),localStorage.removeItem("token"))}};localStorage.getItem("token")&&u()},[i,c])}function $g(){const[i,c]=x.useState(!1),[u,d]=x.useState({}),f=wo(),{connect:p,disconnect:v,send:M}=vo();return x.useEffect(()=>{const N=()=>{const H={timestamp:new Date().toISOString(),location:window.location.href,userAgent:navigator.userAgent.substring(0,100)+"...",webSocketSupport:typeof WebSocket<"u",enhancedServiceExists:typeof window.EnhancedWebSocketService<"u",enhancedServiceStatus:window.EnhancedWebSocketService?window.EnhancedWebSocketService.getConnectionStatus():null,cookies:document.cookie?"Present":"None",protocols:window.location.protocol};d(H)};N();const y=setInterval(N,2e3);return()=>clearInterval(y)},[]),i||window.location.hostname==="localhost"||window.location.search.includes("debug=websocket")||window.localStorage.getItem("websocket-debug")==="true"?a.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-white border border-gray-300 rounded-lg shadow-lg p-4 max-w-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h3",{className:"font-bold text-sm",children:"WebSocket Debug"}),a.jsx("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700",children:"×"})]}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Status:"}),a.jsx("span",{className:`px-2 py-1 rounded text-white ${f.isConnected?"bg-green-500":"bg-red-500"}`,children:f.text})]}),a.jsxs("div",{className:"border-t pt-2",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"WebSocket Support:"})," ",u.webSocketSupport?"✅":"❌"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Enhanced Service:"})," ",u.enhancedServiceExists?"✅":"❌"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Protocol:"})," ",u.protocols]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Cookies:"})," ",u.cookies]})]}),u.enhancedServiceStatus&&a.jsxs("div",{className:"border-t pt-2",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Connection ID:"})," ",u.enhancedServiceStatus.connectionId||"None"]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Subscriptions:"})," ",u.enhancedServiceStatus.subscriptions?.length||0]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Rooms:"})," ",u.enhancedServiceStatus.rooms?.length||0]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Queued Messages:"})," ",u.enhancedServiceStatus.queuedMessages||0]})]}),a.jsxs("div",{className:"border-t pt-2 flex gap-2",children:[a.jsx("button",{onClick:()=>p(),className:"px-2 py-1 bg-blue-500 text-white rounded text-xs",disabled:f.isConnected,children:"Connect"}),a.jsx("button",{onClick:()=>v(),className:"px-2 py-1 bg-red-500 text-white rounded text-xs",disabled:!f.isConnected,children:"Disconnect"}),a.jsx("button",{onClick:()=>M("ping"),className:"px-2 py-1 bg-green-500 text-white rounded text-xs",disabled:!f.isConnected,children:"Ping"})]}),a.jsx("div",{className:"border-t pt-2",children:a.jsx("button",{onClick:()=>{console.log("🐛 WebSocket Debug Info:",u),console.log("🐛 Enhanced Service:",window.EnhancedWebSocketService),console.log("🐛 Connection Status:",f)},className:"px-2 py-1 bg-gray-500 text-white rounded text-xs w-full",children:"Log Debug Info"})})]})]}):a.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:a.jsx("button",{onClick:()=>c(!0),className:"bg-gray-800 text-white px-3 py-1 rounded-full text-xs opacity-50 hover:opacity-100",title:"Show WebSocket Debug",children:"WS"})})}function Gg(){const[i,c]=x.useState([]);Mn(),x.useEffect(()=>{const v=setTimeout(()=>{c(M=>M.slice(0,-1))},5e3);return()=>clearTimeout(v)},[i.length]),We("user_joined",v=>{u(`${v.data.username} joined the system`,"info")},[]),We("user_left",v=>{u(`${v.data.username} left the system`,"info")},[]),We("system_alert",v=>{u(v.data.message,"error")},[]),We("system_maintenance",v=>{u(`System maintenance: ${v.data.message}`,"warning")},[]);const u=(v,M="info")=>{const w={id:Date.now(),message:v,type:M,timestamp:new Date};c(N=>[w,...N.slice(0,4)])},d=v=>{c(M=>M.filter(w=>w.id!==v))},f=v=>{switch(v){case"success":return a.jsx(ot,{className:"w-5 h-5 text-green-500"});case"warning":return a.jsx(Bt,{className:"w-5 h-5 text-yellow-500"});case"error":return a.jsx(Bt,{className:"w-5 h-5 text-red-500"});default:return a.jsx(Gx,{className:"w-5 h-5 text-blue-500"})}},p=v=>{switch(v){case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"error":return"bg-red-50 border-red-200 text-red-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return i.length===0?null:a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:i.map(v=>a.jsxs("div",{className:`flex items-center gap-3 p-4 border rounded-lg shadow-lg max-w-sm animate-slide-in ${p(v.type)}`,children:[f(v.type),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:v.message}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:v.timestamp.toLocaleTimeString()})]}),a.jsx("button",{onClick:()=>d(v.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:a.jsx(vl,{className:"w-4 h-4"})})]},v.id))})}var Qg=Tf();const Xg=go(Qg),Ct=({children:i,onClose:c,title:u})=>Xg.createPortal(a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300",onClick:c,children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all duration-300",onClick:d=>d.stopPropagation(),children:[u&&a.jsx("h2",{className:"text-xl font-bold mb-4",children:u}),i]})}),document.getElementById("portal-root")),pe=({children:i,className:c="",...u})=>a.jsx("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 ${c}`,...u,children:i}),he=({children:i,variant:c="default",size:u="md",className:d="",disabled:f=!1,...p})=>{const v="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",M={default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500"},w={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return a.jsx("button",{className:`${v} ${M[c]} ${w[u]} ${d}`,disabled:f,...p,children:i})},Be=({children:i,variant:c="default",size:u="md",className:d="",...f})=>{const p="inline-flex items-center font-medium rounded-full",v={default:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-blue-100 text-blue-800"},M={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"};return a.jsx("span",{className:`${p} ${v[c]} ${M[u]} ${d}`,...f,children:i})};function Vg(){const[i,c]=x.useState(!1),{status:u,isConnected:d,isAuthenticated:f,showReconnecting:p,color:v,text:M,icon:w,metrics:N}=wo(),y=()=>{switch(v){case"green":return"bg-green-500";case"yellow":return"bg-yellow-500";case"blue":return"bg-blue-500";case"orange":return"bg-orange-500";case"red":return"bg-red-500";default:return"bg-gray-500"}},H=()=>{switch(v){case"green":return"text-green-700";case"yellow":return"text-yellow-700";case"blue":return"text-blue-700";case"orange":return"text-orange-700";case"red":return"text-red-700";default:return"text-gray-700"}},C=I=>{if(!I)return"0s";const Y=Math.floor(I/1e3),B=Math.floor(Y/60),g=Math.floor(B/60);return g>0?`${g}h ${B%60}m`:B>0?`${B}m ${Y%60}s`:`${Y}s`};return a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 px-3 py-2 rounded-md transition-colors",onClick:()=>c(!i),title:"WebSocket Connection Status",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:`w-3 h-3 rounded-full ${y()}`,children:p&&a.jsx("div",{className:`absolute inset-0 rounded-full ${y()} opacity-75 animate-ping`})})}),a.jsx("span",{className:`text-sm font-medium ${H()}`,children:M}),N.messagesReceived>0&&a.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:N.messagesReceived}),a.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&a.jsx("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"WebSocket Status"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-2xl",children:w}),a.jsx("span",{className:`font-medium ${H()}`,children:M})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Status:"}),a.jsx("span",{className:`ml-2 font-medium ${H()}`,children:u})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Authenticated:"}),a.jsx("span",{className:`ml-2 font-medium ${f?"text-green-600":"text-red-600"}`,children:f?"Yes":"No"})]})]}),d&&N&&a.jsxs("div",{className:"border-t pt-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Connection Metrics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{children:"Messages Received:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:N.messagesReceived||0})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Messages Sent:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:N.messagesSent||0})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Reconnections:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:N.reconnections||0})]}),a.jsxs("div",{children:[a.jsx("span",{children:"Uptime:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:C(N.uptime)})]}),N.lastPing&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{children:"Last Ping:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-900",children:new Date(N.lastPing).toLocaleTimeString()})]})]})]}),a.jsxs("div",{className:"border-t pt-3 flex space-x-2",children:[a.jsx("button",{onClick:()=>{d?window.EnhancedWebSocketService?.disconnect():window.EnhancedWebSocketService?.connect()},className:`px-3 py-1 text-xs font-medium rounded-md ${d?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:d?"Disconnect":"Connect"}),u==="error"&&a.jsx("button",{onClick:()=>window.EnhancedWebSocketService?.connect(),className:"px-3 py-1 text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md",children:"Retry"}),a.jsx("button",{onClick:()=>{const I=window.EnhancedWebSocketService?.getMetrics();console.log("WebSocket Metrics:",I),console.log("WebSocket Status:",window.EnhancedWebSocketService?.getConnectionStatus())},className:"px-3 py-1 text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-md",children:"Debug"})]})]})]})})]})}function Tn(){const{icon:i,text:c,color:u}=wo(),d=()=>{switch(u){case"green":return"text-green-600";case"yellow":return"text-yellow-600";case"blue":return"text-blue-600";case"orange":return"text-orange-600";case"red":return"text-red-600";default:return"text-gray-600"}};return a.jsxs("div",{className:"flex items-center space-x-1",title:`WebSocket: ${c}`,children:[a.jsx("span",{className:"text-sm",children:i}),a.jsx("span",{className:`text-xs font-medium ${d()}`,children:"WS"})]})}function zf(){const[i,c]=x.useState({orders:{total:0,pending:0,in_progress:0,completed:0,paused:0},machines:{total:0,available:0,in_use:0,maintenance:0,offline:0},production:{efficiency:0,output:0,quality_score:0,on_time_delivery:0},alerts:{critical:0,warning:0,info:0}}),[u,d]=x.useState([]),[f,p]=x.useState([]),[v,M]=x.useState(!0),[w,N]=x.useState(!1),[y,H]=x.useState(null),[C,I]=x.useState("today"),[Y,B]=x.useState(!1),g=x.useRef(null);Os();const{lastUpdate:L}=jo(),{lastUpdate:W}=No();Mn(),x.useEffect(()=>(V(),g.current=setInterval(()=>{V(!0)},3e4),()=>{g.current&&clearInterval(g.current)}),[C]),x.useEffect(()=>{L&&(console.log("Dashboard received order update:",L),V(!0))},[L]),x.useEffect(()=>{W&&(console.log("Dashboard received machine update:",W),V(!0))},[W]),x.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["dashboard","orders","machines","production","alerts"])},[]);const ie=(re,de="success")=>{H({message:re,type:de}),setTimeout(()=>H(null),3e3)},V=async(re=!1)=>{re?N(!0):M(!0);try{const[de,Z,Q]=await Promise.all([fe.getOrders().catch(()=>[]),fe.getMachines().catch(()=>[]),fe.get("/users").catch(()=>[])]),Se={total:de.length,pending:de.filter(h=>h.status==="pending").length,in_progress:de.filter(h=>h.status==="in_progress").length,completed:de.filter(h=>h.status==="completed").length,paused:de.filter(h=>h.status==="paused").length},se={total:Z.length,available:Z.filter(h=>h.status==="available").length,in_use:Z.filter(h=>h.status==="in_use").length,maintenance:Z.filter(h=>h.status==="maintenance").length,offline:Z.filter(h=>h.status==="offline").length},ue=de.reduce((h,U)=>h+(parseInt(U.quantity)||0),0),O=de.filter(h=>h.status==="completed").reduce((h,U)=>h+(parseInt(U.actual_quantity||U.quantity)||0),0),ee=se.total>0?Math.round(se.in_use/se.total*100):0,S=ue>0?Math.round(O/ue*100):0,q=Se.total>0?Math.round(Se.completed/Se.total*100):0,$=[];se.offline>0&&$.push({type:"critical",message:`${se.offline} machine(s) offline`,time:new Date}),se.maintenance>0&&$.push({type:"warning",message:`${se.maintenance} machine(s) in maintenance`,time:new Date}),Se.paused>0&&$.push({type:"warning",message:`${Se.paused} order(s) paused`,time:new Date}),ee<60&&$.push({type:"warning",message:`Low machine utilization: ${ee}%`,time:new Date});const G={critical:$.filter(h=>h.type==="critical").length,warning:$.filter(h=>h.type==="warning").length,info:$.filter(h=>h.type==="info").length};c({orders:Se,machines:se,production:{efficiency:ee,output:O,quality_score:S,on_time_delivery:q},alerts:G}),d(de.slice(0,6)),p($.slice(0,5)),re&&ie("Dashboard updated","success")}catch(de){console.error("Failed to load dashboard data:",de),ie("Failed to load dashboard data","danger")}finally{M(!1),N(!1)}},X=[{label:"Create Order",icon:ia,action:()=>window.location.href="#/orders",color:"blue"},{label:"View Analytics",icon:va,action:()=>window.location.href="#/analytics",color:"purple"},{label:"Manage Machines",icon:Kt,action:()=>window.location.href="#/machines",color:"green"},{label:"Labor Planning",icon:Ie,action:()=>window.location.href="#/labor-planner",color:"orange"}],J=x.useMemo(()=>f.filter(re=>re.type==="critical").slice(0,3),[f]);return v?a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx(Je,{className:"w-8 h-8 animate-spin text-blue-600 mr-3"}),a.jsx("div",{className:"text-lg text-gray-600",children:"Loading dashboard..."})]}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[y&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${y.type==="success"?"bg-green-100 text-green-800 border border-green-200":y.type==="danger"?"bg-red-100 text-red-800 border border-red-200":y.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:y.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Production Dashboard"}),a.jsx(Tn,{})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time overview of your manufacturing operations"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ua,{className:"w-4 h-4 text-gray-500"}),a.jsxs("select",{value:C,onChange:re=>I(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"})]})]}),a.jsxs(he,{onClick:()=>V(!0),disabled:w,variant:"outline",children:[a.jsx(Je,{className:`w-4 h-4 mr-2 ${w?"animate-spin":""}`}),"Refresh"]}),a.jsxs(he,{onClick:()=>B(!0),children:[a.jsx(Tg,{className:"w-4 h-4 mr-2"}),"Quick Actions"]})]})]}),J.length>0&&a.jsxs(pe,{className:"p-4 bg-red-50 border-l-4 border-red-500",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Bt,{className:"w-5 h-5 text-red-600"}),a.jsx("h3",{className:"font-semibold text-red-900",children:"Critical Alerts"})]}),a.jsx("div",{className:"space-y-2",children:J.map((re,de)=>a.jsxs("div",{className:"flex items-center gap-3 text-sm text-red-800",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),a.jsx("span",{children:re.message}),a.jsx("span",{className:"text-red-600 ml-auto",children:re.time.toLocaleTimeString()})]},de))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Yr,{title:"Machine Efficiency",value:`${i.production.efficiency}%`,change:i.production.efficiency>=80?5:-3,icon:St,color:"blue",target:"80%"}),a.jsx(Yr,{title:"Quality Score",value:`${i.production.quality_score}%`,change:i.production.quality_score>=90?2:-1,icon:jx,color:"green",target:"90%"}),a.jsx(Yr,{title:"On-Time Delivery",value:`${i.production.on_time_delivery}%`,change:i.production.on_time_delivery>=85?4:-2,icon:Sn,color:"purple",target:"85%"}),a.jsx(Yr,{title:"Daily Output",value:i.production.output.toLocaleString(),change:12,icon:ba,color:"orange",target:"5000",unit:" units"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(pe,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Production Orders"}),a.jsxs(he,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/orders",children:[a.jsx(ds,{className:"w-4 h-4 mr-2"}),"View All"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.orders.in_progress}),a.jsx("div",{className:"text-sm text-blue-600",children:"In Progress"})]}),a.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.orders.completed}),a.jsx("div",{className:"text-sm text-green-600",children:"Completed"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Pending:"}),a.jsx("span",{className:"font-medium",children:i.orders.pending})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Paused:"}),a.jsx("span",{className:"font-medium text-yellow-600",children:i.orders.paused})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Total Orders:"}),a.jsx("span",{className:"font-medium",children:i.orders.total})]})]})]}),a.jsxs(pe,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Machine Status"}),a.jsxs(he,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/machines",children:[a.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Manage"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx($r,{label:"In Use",count:i.machines.in_use,total:i.machines.total,color:"blue"}),a.jsx($r,{label:"Available",count:i.machines.available,total:i.machines.total,color:"green"}),a.jsx($r,{label:"Maintenance",count:i.machines.maintenance,total:i.machines.total,color:"yellow"}),a.jsx($r,{label:"Offline",count:i.machines.offline,total:i.machines.total,color:"red"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-sm text-gray-600",children:"Utilization Rate"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-800",children:[i.production.efficiency,"%"]}),a.jsx("div",{className:"text-xs text-gray-500",children:"of total capacity"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(pe,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Recent Orders"}),a.jsx(he,{variant:"outline",size:"sm",onClick:()=>window.location.href="#/orders",children:"View All"})]}),u.length>0?a.jsx("div",{className:"space-y-3",children:u.map(re=>a.jsx(Zg,{order:re},re.id))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ba,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),a.jsx("p",{children:"No recent orders"})]})]}),a.jsxs(pe,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"System Alerts"}),a.jsx(Be,{variant:"info",children:f.length})]}),f.length>0?a.jsx("div",{className:"space-y-3",children:f.map((re,de)=>a.jsx(Wg,{alert:re},de))}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(ot,{className:"w-12 h-12 mx-auto mb-3 text-green-400"}),a.jsx("p",{children:"All systems running smoothly"})]})]}),a.jsx(Hg,{maxItems:8})]}),Y&&a.jsx(Ct,{title:"Quick Actions",onClose:()=>B(!1),children:a.jsx("div",{className:"grid grid-cols-2 gap-4",children:X.map((re,de)=>{const Z=re.icon;return a.jsxs("button",{onClick:()=>{re.action(),B(!1)},className:`p-6 border-2 border-gray-200 rounded-lg hover:border-${re.color}-300 hover:bg-${re.color}-50 transition-all group`,children:[a.jsx(Z,{className:`w-8 h-8 text-${re.color}-600 mx-auto mb-3`}),a.jsx("div",{className:"text-sm font-medium text-gray-800",children:re.label})]},de)})})})]})}const Yr=({title:i,value:c,change:u,icon:d,color:f,target:p,unit:v=""})=>{const M={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",purple:"bg-purple-50 text-purple-600 border-purple-200",orange:"bg-orange-50 text-orange-600 border-orange-200",red:"bg-red-50 text-red-600 border-red-200"},w=u>=0;return a.jsxs(pe,{className:`p-6 border-l-4 ${M[f]}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg ${M[f]} flex items-center justify-center`,children:a.jsx(d,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:i}),a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[c,v]})]})]})}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[w?a.jsx(yl,{className:"w-4 h-4 text-green-500"}):a.jsx(bo,{className:"w-4 h-4 text-red-500"}),a.jsxs("span",{className:w?"text-green-600":"text-red-600",children:[Math.abs(u),"%"]}),a.jsx("span",{className:"text-gray-500",children:"vs yesterday"})]}),p&&a.jsxs("span",{className:"text-gray-500",children:["Target: ",p]})]})]})},$r=({label:i,count:c,total:u,color:d})=>{const f=u>0?c/u*100:0,p={blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500"};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-600",children:i}),a.jsxs("span",{className:"font-medium",children:[c,"/",u]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${p[d]}`,style:{width:`${f}%`}})})]})},Zg=({order:i})=>{const c=u=>{const f={pending:{variant:"default",icon:Jt},in_progress:{variant:"info",icon:ya},completed:{variant:"success",icon:ot},paused:{variant:"warning",icon:Cs}}[u]||{variant:"default",icon:Jt},p=f.icon;return a.jsxs(Be,{variant:f.variant,children:[a.jsx(p,{className:"w-3 h-3 mr-1"}),u?u.replace("_"," ").toUpperCase():"PENDING"]})};return a.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 rounded-lg border border-gray-100 transition-all",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:i.order_number||`Order #${i.id}`}),a.jsx("p",{className:"text-sm text-gray-500",children:i.product_name||"Product"})]})}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[a.jsxs("span",{children:["Qty: ",i.quantity?.toLocaleString()||"N/A"]}),a.jsxs("span",{children:["Env: ",i.environment||"N/A"]}),i.due_date&&a.jsxs("span",{children:["Due: ",new Date(i.due_date).toLocaleDateString()]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:c(i.status)})]})},Wg=({alert:i})=>{const c=d=>{switch(d){case"critical":return a.jsx(Bt,{className:"w-4 h-4 text-red-500"});case"warning":return a.jsx(Jt,{className:"w-4 h-4 text-yellow-500"});default:return a.jsx(wx,{className:"w-4 h-4 text-blue-500"})}},u=d=>{switch(d){case"critical":return"border-l-red-500 bg-red-50";case"warning":return"border-l-yellow-500 bg-yellow-50";default:return"border-l-blue-500 bg-blue-50"}};return a.jsx("div",{className:`p-3 border-l-4 rounded-r-lg ${u(i.type)}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[c(i.type),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-800",children:i.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.time.toLocaleTimeString()})]})]})})},jl={name:"SAST",fullName:"South African Standard Time",offset:"+02:00",offsetMinutes:120,offsetHours:2,offsetMS:7200*1e3};function ms(){return new Date(Date.now()+jl.offsetMS)}function Ds(i){if(!i)return null;const c=typeof i=="string"?new Date(i):i;return isNaN(c.getTime())?null:new Date(c.getTime()+jl.offsetMS)}function Kg(i){if(!i)return null;const c=new Date(i);return isNaN(c.getTime())?null:new Date(c.getTime()-jl.offsetMS)}function Pg(i,c={}){if(!i)return"N/A";const d={...{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},...c},f=Ds(i);return f?f.toLocaleString("en-ZA",d):"N/A"}function An(i){if(!i)return"";const c=Ds(i);return c?c.toISOString().split("T")[0]:""}function Jg(i){if(!i)return"N/A";const c=Ds(i);return c?c.toLocaleString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1}):"N/A"}function Fg(i=null){const c=i?Ds(i):ms();if(!c)return"";const u=c.getFullYear(),d=String(c.getMonth()+1).padStart(2,"0"),f=String(c.getDate()).padStart(2,"0"),p=String(c.getHours()).padStart(2,"0"),v=String(c.getMinutes()).padStart(2,"0");return`${u}-${d}-${f}T${p}:${v}`}function Ig(i=null){return An(i||ms())}function ep(){return ms().toISOString()}function tp(i=null){const c=i||new Date;return new Date(c.getTime()+jl.offsetMS).toISOString()}function ap(i,c=null){if(!i)return 0;const u=new Date(i),d=c?new Date(c):ms();return Math.round((d.getTime()-u.getTime())/(1e3*60))}function sp(){return Date.now()+jl.offsetMS}function lp(i){if(!i)return!1;const c=An(i),u=An(ms());return c===u}function np(i=null){const c=i?new Date(i):ms(),u=Ds(c),d=new Date(u);d.setHours(0,0,0,0);const f=new Date(u);return f.setHours(23,59,59,999),{startOfDay:d.toISOString(),endOfDay:f.toISOString()}}function rp(i){if(i<0)return"0 seconds";const c=Math.floor(i/1e3),u=Math.floor(c/60),d=Math.floor(u/60),f=Math.floor(d/24);return f>0?`${f} day${f!==1?"s":""}, ${d%24} hour${d%24!==1?"s":""}`:d>0?`${d} hour${d!==1?"s":""}, ${u%60} minute${u%60!==1?"s":""}`:u>0?`${u} minute${u!==1?"s":""}, ${c%60} second${c%60!==1?"s":""}`:`${c} second${c!==1?"s":""}`}function ip(i){const c=Ds(i),d=ms().getTime()-c.getTime(),f=Math.floor(d/(1e3*60)),p=Math.floor(f/60),v=Math.floor(p/24);return Math.abs(f)<1?"just now":Math.abs(f)<60?f>0?`${f} minutes ago`:`in ${Math.abs(f)} minutes`:Math.abs(p)<24?p>0?`${p} hours ago`:`in ${Math.abs(p)} hours`:Math.abs(v)<7?v>0?`${v} days ago`:`in ${Math.abs(v)} days`:An(i)}const Pt={TIMEZONE_CONFIG:jl,getCurrentSASTTime:ms,toSAST:Ds,convertSASTToUTC:Kg,formatSASTDateTime:Pg,formatSASTDate:An,formatSASTTime:Jg,getSASTDateTimeLocal:Fg,getSASTDateOnly:Ig,getCurrentSASTISOString:ep,toSASTDatabaseString:tp,calculateDurationMinutes:ap,getSASTTimestamp:sp,isSASTToday:lp,getSASTDayRange:np,formatDuration:rp,getSASTRelativeTime:ip},cp=i=>{if(!i)return"00:00:00";const c=Pt.toSAST(i).getTime(),u=Pt.getSASTTimestamp(),d=Math.max(0,u-c),f=Math.floor(d/36e5).toString().padStart(2,"0"),p=Math.floor(d%36e5/6e4).toString().padStart(2,"0"),v=Math.floor(d%6e4/1e3).toString().padStart(2,"0");return`${f}:${p}:${v}`},Lf=i=>{if(!i.start_time||i.status!=="in_use")return 0;const c=new Date(i.start_time).getTime(),d=(Date.now()-c)/36e5*(i.production_rate||60),f=i.actual_quantity||0;return d>0?Math.min(100,Math.round(f/d*100)):0},op=({machine:i,onClick:c})=>{const[u,d]=x.useState(0),[f,p]=x.useState(!1);x.useEffect(()=>{p(!0);const H=setTimeout(()=>p(!1),2e3);return()=>clearTimeout(H)},[i.status,i.order_number]),x.useEffect(()=>{if(i.status==="in_use"){const H=setInterval(()=>d(C=>C+1),1e3);return()=>clearInterval(H)}},[i.status]);const M={available:{border:"border-green-500",text:"text-green-600",bg:"bg-green-50",icon:a.jsx(St,{className:"w-4 h-4"})},in_use:{border:"border-blue-500",text:"text-blue-600",bg:"bg-blue-50",icon:a.jsx(ya,{className:"w-4 h-4"})},maintenance:{border:"border-yellow-500",text:"text-yellow-600",bg:"bg-yellow-50",icon:a.jsx(Bt,{className:"w-4 h-4"})},offline:{border:"border-red-500",text:"text-red-600",bg:"bg-red-50",icon:a.jsx(Cs,{className:"w-4 h-4"})}}[i.status]||{border:"border-gray-300",text:"text-gray-600",bg:"bg-gray-50",icon:a.jsx(St,{className:"w-4 h-4"})},w=Lf(i),N=i.status==="in_use",y=i.order_number;return a.jsx("div",{className:`rounded-xl shadow-sm border-l-4 ${M.border} ${M.bg} hover:shadow-lg transition-all duration-300 ${y?"cursor-pointer":"cursor-default"} transform hover:scale-105 ${y?"relative":""}`,onClick:()=>c&&c(i),children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-800 text-sm truncate",children:i.name}),a.jsx("p",{className:"text-xs text-gray-500",children:i.type})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[f&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-ping"}),N&&w>0&&a.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[w,"%"]}),a.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${M.bg.replace("50","100")} ${M.text}`,children:[M.icon,i.status.replace("_"," ").toUpperCase()]})]})]}),a.jsx("div",{className:"space-y-2",children:y?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg p-2 relative",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 truncate",children:i.order_number}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:i.product_name}),i.order_status==="stopped"&&a.jsx("p",{className:"text-xs text-red-600 font-medium mt-1",children:"STOPPED"})]}),a.jsx(ds,{className:"w-4 h-4 text-blue-500 flex-shrink-0 ml-2",title:"Click to view order details"})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[a.jsx(Jt,{className:"w-3 h-3"}),a.jsx("span",{className:"text-lg font-mono",children:cp(i.start_time)})]}),i.operator&&a.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[a.jsx(Ie,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs truncate max-w-20",children:i.operator})]})]}),w>0&&a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${w>=90?"bg-green-500":w>=70?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(w,100)}%`}})})]}):a.jsx("div",{className:"flex items-center justify-center h-16 text-center",children:a.jsxs("div",{className:"text-gray-400",children:[M.icon,a.jsx("p",{className:"text-xs mt-1",children:i.status.replace("_"," ").toUpperCase()})]})})})]})})},dp=({machines:i,activeOrders:c,todayStats:u,efficiency:d})=>{const f=x.useMemo(()=>{const p=i.length,v=i.filter(H=>H.status==="in_use").length,M=i.filter(H=>H.status==="available").length,w=i.filter(H=>H.status==="maintenance").length,N=i.filter(H=>H.status==="offline").length,y=d||(v>0?Math.round(i.filter(H=>H.status==="in_use").reduce((H,C)=>H+Lf(C),0)/v):0);return{total:p,running:v,available:M,maintenance:w,offline:N,avgEfficiency:y,activeOrders:c.length,totalOrders:u.total_orders||0,completedOrders:u.completed_orders||0}},[i,c,u,d]);return a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:f.total})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ya,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Running"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.running})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Available"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.available})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bt,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Maintenance"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:f.maintenance})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Cs,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Offline"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:f.offline})]})]})}),a.jsx("div",{className:"bg-white rounded-lg p-4 border shadow-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yl,{className:"w-5 h-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Avg Efficiency"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[f.avgEfficiency,"%"]})]})]})})]})},up=({isOpen:i,onClose:c,orderId:u,orderNumber:d})=>{const[f,p]=x.useState(null),[v,M]=x.useState(!1),[w,N]=x.useState(""),[y,H]=x.useState(0),C=x.useCallback(async()=>{if(!(!u||!i)){M(!0),N("");try{console.log("Fetching order details for ID:",u);const B=await fe.get("/orders");console.log("Orders response:",B);const L=(B.data||B||[]).find(ie=>ie.id==u);if(!L)throw new Error(`Order with ID ${u} not found`);let W=[];try{const ie=await fe.get(`/reports/downtime?order_id=${u}`);if(W=ie.records||ie.data?.records||[],console.log("Downtime response for order",u,":",ie),!Array.isArray(W)||W.length===0){console.log("No stops found for specific order, trying all stops...");const V=await fe.get("/reports/downtime"),X=V.records||V.data?.records||[];console.log("All stops:",X),W=Array.isArray(X)?X.filter(J=>J.order_id==u):[]}}catch(ie){console.log("Downtime endpoint error:",ie),W=[]}p({order:L,stops:Array.isArray(W)?W:[]})}catch(B){console.error("Failed to fetch order details:",B),N(B.message||"Failed to load order details")}finally{M(!1)}}},[u,i]);x.useEffect(()=>{C()},[C]),x.useEffect(()=>{if(i&&f?.stops?.some(B=>!B.end_time)){const B=setInterval(()=>H(g=>g+1),1e3);return()=>clearInterval(B)}},[i,f?.stops]);const I=x.useCallback(B=>!B||!Array.isArray(B)||B.length===0?0:B.reduce((g,L)=>{if(L.start_time){const W=new Date(L.start_time).getTime();let ie;return L.end_time?ie=new Date(L.end_time).getTime():ie=Date.now(),g+(ie-W)}return g},0),[y]),Y=x.useCallback(B=>{if(!B||B===0)return"0m";const g=Math.floor(B/6e4),L=Math.floor(g/60);return L>0?`${L}h ${g%60}m`:`${g}m`},[]);return i?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm transition-opacity",onClick:c}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:"​"}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:d}),f&&a.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.order.status==="stopped"?"bg-red-500 text-white":f.order.status==="in_progress"?"bg-blue-500 text-white":f.order.status==="completed"?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:f.order.status.replace("_"," ").toUpperCase()})]}),a.jsx("button",{onClick:c,className:"text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white/20 rounded-full p-1.5 hover:bg-white/10 transition-colors",children:a.jsx(vl,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"p-6",children:[v&&a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx(Je,{className:"w-5 h-5 animate-spin text-gray-400 mr-2"}),a.jsx("span",{className:"text-gray-500 text-sm",children:"Loading..."})]}),w&&a.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Bt,{className:"w-4 h-4 text-red-500 mr-2"}),a.jsx("span",{className:"text-red-700 text-sm",children:w})]})}),f&&!v&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:f.order.start_time?Pt.formatSASTTime(f.order.start_time):"--:--"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Started"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:f.order.quantity?.toLocaleString()||"0"}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Target Qty"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:(f.order.actual_quantity||0).toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Produced"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"flex items-center justify-center",children:a.jsxs("div",{className:"relative w-8 h-8",children:[a.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 to-green-500 rounded-full",style:{clipPath:`inset(0 ${100-Math.round((f.order.actual_quantity||0)/f.order.quantity*100)}% 0 0)`}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-xs font-bold text-gray-700",children:[Math.round((f.order.actual_quantity||0)/f.order.quantity*100),"%"]})})]})}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Complete"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-100 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[a.jsx(Bt,{className:"w-4 h-4 text-orange-500"}),"Downtime Analysis"]}),f.order.status==="stopped"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600 bg-red-100 px-2 py-1 rounded-full",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),"Active Stop"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f.stops.length}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Stops"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:Y(I(f.stops))}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Time"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-500",children:f.stops.length>0?Y(I(f.stops)/f.stops.length):"0m"}),a.jsx("div",{className:"text-xs text-gray-600",children:"Avg Duration"})]})]})]}),!f.stops||!Array.isArray(f.stops)||f.stops.length===0?a.jsxs("div",{className:"text-center py-6 text-gray-400",children:[a.jsx(Jt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No stops recorded"})]}):a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(Jt,{className:"w-4 h-4"}),"Stop History (",f.stops.length,")"]}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(f.stops||[]).map((B,g)=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:border-gray-300 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${B.end_time?"bg-gray-400":"bg-red-500 animate-pulse"}`}),a.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:B.reason.replace("_"," ").replace(/\b\w/g,L=>L.toUpperCase())}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${B.category==="Equipment"?"bg-red-100 text-red-700":B.category==="Material"?"bg-orange-100 text-orange-700":B.category==="Quality"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:B.category||"Other"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx("span",{children:Pt.formatSASTTime(B.start_time)}),B.end_time&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"→"}),a.jsx("span",{children:Pt.formatSASTTime(B.end_time)})]})]})]}),a.jsxs("div",{className:"text-right ml-3",children:[a.jsx("div",{className:`text-sm font-bold ${B.end_time?"text-gray-900":"text-red-600"}`,children:B.start_time?Y(B.end_time?new Date(B.end_time).getTime()-new Date(B.start_time).getTime():Date.now()-new Date(B.start_time).getTime()):a.jsx("span",{className:"text-orange-500",children:"Unknown"})}),a.jsx("div",{className:"text-xs text-gray-500",children:B.end_time?"resolved":"active"})]})]})},g))})]})]})]}),a.jsx("div",{className:"bg-gray-50 px-8 py-4 border-t border-gray-100",children:a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:c,className:"px-6 py-2 bg-gray-900 text-white rounded-full hover:bg-gray-800 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2",children:"Close"})})})]})]})}):null};function mp(){const[i,c]=x.useState({activeOrders:[],machineStatus:[],todayStats:{},efficiency:0}),[u,d]=x.useState(!0),[f,p]=x.useState(new Date),[v,M]=x.useState(null),[w,N]=x.useState("all"),[y,H]=x.useState(!1),[C,I]=x.useState(null),[Y,B]=x.useState(!1);Os(),jo(),No(),Mn();const g=x.useCallback(async()=>{try{M(null);const V=await fe.get("/production/floor-overview");console.log("Production floor overview data:",V);const X=V.activeOrders||[],J=V.machineStatus||[],re=V.todayStats||{};console.log("Active orders:",X),console.log("Machine status:",J),console.log("Today stats:",re),c(V||{})}catch(V){console.error("Failed to fetch production data:",V),M(V.message||"Failed to fetch production data")}finally{d(!1),p(new Date),H(!1)}},[]),L=()=>{H(!0),g()},W=V=>{V.order_id&&V.order_number?(I({id:V.order_id,number:V.order_number,machineId:V.id,machineName:V.name,status:V.status}),B(!0)):console.log("Machine clicked (no assigned order):",V)};x.useEffect(()=>{g();const V=setInterval(g,5e3);return()=>clearInterval(V)},[g]),We("order_started",V=>{console.log("🟢 Production started:",V.data.order),g(),p(new Date)},[g]),We("order_stopped",V=>{console.log("🟡 Production stopped:",V.data.order),c(X=>X.map(J=>J.id===V.data.order.machine_id?{...J,status:"available",order_number:null,order_id:null}:J)),p(new Date)},[]),We("order_resumed",V=>{console.log("🔵 Production resumed:",V.data.order),c(X=>X.map(J=>J.id===V.data.order.machine_id?{...J,status:"in_use",order_number:V.data.order.order_number,order_id:V.data.order.id,start_time:V.data.order.start_time}:J)),p(new Date)},[]),We("order_completed",V=>{console.log("✅ Production completed:",V.data.order),c(X=>X.map(J=>J.id===V.data.order.machine_id?{...J,status:"available",order_number:null,order_id:null}:J)),p(new Date)},[]),We("machine_status_changed",V=>{console.log("🔧 Machine status changed:",V.data),c(X=>X.map(J=>J.id===V.data.machine_id?{...J,status:V.data.status}:J)),p(new Date)},[]),x.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["production","orders","machines"])},[]);const ie=x.useMemo(()=>{const V=i.machineStatus||[];return w==="all"?V:V.filter(X=>X.status===w)},[i,w]);return u?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Je,{className:"w-5 h-5 animate-spin"}),"Loading Production Floor Data..."]})}):v?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md mx-auto",children:[a.jsx(Bt,{className:"w-6 h-6 text-red-600 mx-auto mb-2"}),a.jsx("p",{className:"text-red-800 font-medium",children:"Error loading production data"}),a.jsx("p",{className:"text-red-600 text-sm mt-1",children:v}),a.jsx("button",{onClick:L,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Production Floor Monitor"}),a.jsx(Tn,{})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time production monitoring and machine status"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Xr,{className:"w-4 h-4 text-gray-500"}),a.jsxs("select",{value:w,onChange:V=>N(V.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Machines"}),a.jsx("option",{value:"in_use",children:"Running"}),a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"offline",children:"Offline"})]})]}),a.jsxs("button",{onClick:L,disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[a.jsx(Je,{className:`w-4 h-4 ${y?"animate-spin":""}`}),"Refresh"]})]})]}),a.jsx(dp,{machines:i.machineStatus||[],activeOrders:i.activeOrders||[],todayStats:i.todayStats||{},efficiency:i.efficiency||0}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4",children:ie.map(V=>a.jsx(op,{machine:V,onClick:W},V.id))}),ie.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(St,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No machines found for the selected filter"})]}),a.jsx(up,{isOpen:Y,onClose:()=>B(!1),orderId:C?.id,orderNumber:C?.number})]})}const fp=()=>{const[i,c]=x.useState(!1),[u,d]=x.useState(!1),[f,p]=x.useState({width:0,height:0});return x.useEffect(()=>{const v=()=>{const M=window.innerWidth,w=window.innerHeight;p({width:M,height:w}),c(M<768),d(M>=768&&M<1024)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),{isMobile:i,isTablet:u,screenSize:f,isDesktop:!i&&!u}},os=({children:i,onClick:c,variant:u="primary",size:d="md",disabled:f=!1,loading:p=!1,icon:v,className:M="",...w})=>{const N={primary:"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 active:bg-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800",success:"bg-green-600 text-white hover:bg-green-700 active:bg-green-800",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 active:bg-gray-100"},y={sm:"px-4 py-2 text-sm min-h-[44px]",md:"px-6 py-3 text-base min-h-[48px]",lg:"px-8 py-4 text-lg min-h-[52px]"};return a.jsxs("button",{onClick:c,disabled:f||p,className:`
        inline-flex items-center justify-center gap-2 font-medium rounded-lg
        transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2
        ${N[u]}
        ${y[d]}
        ${f||p?"opacity-50 cursor-not-allowed":"active:scale-95"}
        ${M}
      `,...w,children:[p?a.jsx("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):v&&a.jsx("icon",{className:"w-5 h-5"}),i]})},hp=()=>{const[i,c]=x.useState(!1),[u,d]=x.useState("unknown");return x.useEffect(()=>{const f=()=>{if("memory"in navigator){const p=navigator.memory;p.totalJSHeapSize>p.jsHeapSizeLimit*.8&&c(!0)}if("connection"in navigator){const p=navigator.connection;d(p.effectiveType||"unknown"),(p.effectiveType==="slow-2g"||p.effectiveType==="2g")&&c(!0)}window.matchMedia("(prefers-reduced-motion: reduce)").matches&&c(!0)};if(f(),"connection"in navigator)return navigator.connection.addEventListener("change",f),()=>navigator.connection.removeEventListener("change",f)},[]),{isLowPower:i,connectionType:u,shouldReduceAnimations:i,shouldLazyLoad:u==="slow-2g"||u==="2g"}},mo={pending:{label:"Pending",color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:Jt,description:"Order created, awaiting machine assignment"},assigned:{label:"Assigned",color:"bg-blue-100 text-blue-800 border-blue-200",icon:Kt,description:"Machine assigned, ready to start production"},in_progress:{label:"In Progress",color:"bg-green-100 text-green-800 border-green-200",icon:ya,description:"Production actively running"},paused:{label:"Paused",color:"bg-orange-100 text-orange-800 border-orange-200",icon:Cs,description:"Production temporarily paused"},stopped:{label:"Stopped",color:"bg-red-100 text-red-800 border-red-200",icon:ho,description:"Production stopped due to issues"},completed:{label:"Completed",color:"bg-emerald-100 text-emerald-800 border-emerald-200",icon:ot,description:"Production completed successfully"},cancelled:{label:"Cancelled",color:"bg-gray-400 text-white border-gray-500",icon:fo,description:"Order cancelled"}},Gr={low:{label:"Low",color:"bg-gray-100 text-gray-800 border-gray-200"},normal:{label:"Normal",color:"bg-blue-100 text-blue-800 border-blue-200"},high:{label:"High",color:"bg-orange-100 text-orange-800 border-orange-200"},urgent:{label:"Urgent",color:"bg-red-100 text-red-800 border-red-200"}};function xp(){const[i,c]=x.useState([]),[u,d]=x.useState([]),[f,p]=x.useState([]),[v,M]=x.useState(!0),[w,N]=x.useState(!1),[y,H]=x.useState(null),[C,I]=x.useState({environment:"all",status:"all",priority:"all",machine:"all",search:"",dateRange:"all"}),[Y,B]=x.useState("active"),[g,L]=x.useState(null),[W,ie]=x.useState(!1),[V,X]=x.useState(!1),[J,re]=x.useState(!1),[de,Z]=x.useState(!1),[Q,Se]=x.useState(!1),{isMobile:se}=fp();hp(),Os();const{notifications:ue,clearNotification:O}=Mn(),{lastUpdate:ee}=jo(),[S,q]=x.useState({order_number:"",product_name:"",quantity:"",priority:"normal",environment:"",due_date:"",specifications:"",customer_info:""}),[$,G]=x.useState({machine_id:null,operator_id:null,batch_number:"",start_notes:"",environmental_conditions:{temperature:25,humidity:60,pressure:1013.25}}),[h,U]=x.useState({material_waste:0,time_waste:0,waste_reason:"",waste_category:"material",recovery_possible:!1,waste_notes:""});x.useEffect(()=>{P()},[]),x.useEffect(()=>{ee&&ae()},[ee]),We("order_created",b=>{console.log("🆕 New order created:",b.data),ce(`Order ${b.data.order_number} created successfully`,"success"),ae()},[]),We("order_started",b=>{console.log("▶️ Order production started:",b.data),ce(`Production started for Order ${b.data.order_number}`,"success"),ae()},[]),We("order_paused",b=>{console.log("⏸️ Order paused:",b.data),ce(`Order ${b.data.order_number} paused: ${b.data.reason}`,"warning"),ae()},[]),We("order_resumed",b=>{console.log("▶️ Order resumed:",b.data),ce(`Order ${b.data.order_number} resumed`,"success"),ae()},[]),We("order_stopped",b=>{console.log("⏹️ Order stopped:",b.data),ce(`Order ${b.data.order_number} stopped: ${b.data.reason}`,"error"),ae()},[]),We("order_completed",b=>{console.log("✅ Order completed:",b.data),ce(`Order ${b.data.order_number} completed successfully`,"success"),ae()},[]),We("machine_reserved",b=>{console.log("🔒 Machine reserved:",b.data),ce(`Machine ${b.data.machine_name} reserved for Order ${b.data.order_number}`,"info"),le()},[]),We("downtime_reported",b=>{console.log("⚠️ Downtime reported:",b.data),ce(`Downtime reported: ${b.data.reason}`,"error")},[]);const P=async()=>{M(!0);try{await Promise.all([ae(),le(),je()])}catch(b){console.error("Error loading initial data:",b),ce("Failed to load system data","error")}finally{M(!1)}},ae=async()=>{try{w||M(!0);const b=await fe.get("/orders");c(b?.data||b||[])}catch(b){console.error("Error loading orders:",b),ce("Failed to load orders","error")}finally{M(!1),N(!1)}},le=async()=>{try{const b=await fe.get("/machines");d(b?.data||b||[])}catch(b){console.error("Error loading machines:",b)}},je=async()=>{try{const b=await fe.get("/environments");p(b?.data||b||[])}catch(b){console.error("Error loading environments:",b)}},ce=x.useCallback((b,ne="info")=>{H({message:b,type:ne,id:Date.now()}),setTimeout(()=>H(null),5e3)},[]),Me=x.useCallback(()=>{N(!0),ae()},[]),Ee=async b=>{b.preventDefault();try{M(!0);const ne={...S,order_number:S.order_number||`ORD-${Date.now()}`,created_by:1};await fe.post("/orders",ne),ie(!1),Yt(),ce("Order created successfully","success"),ae()}catch(ne){console.error("Error creating order:",ne),ce(ne.message||"Failed to create order","error")}finally{M(!1)}},Xe=async b=>{if(!$.machine_id){ce("Please select a machine before starting production","error");return}try{M(!0),await fe.post(`/orders/${b.id}/start`,{machine_id:$.machine_id,operator_id:$.operator_id||1,batch_number:$.batch_number||`BAT-${Date.now()}`,environmental_conditions:$.environmental_conditions,start_notes:$.start_notes}),re(!1),Ne(),ce(`Production started for Order ${b.order_number}`,"success"),ae(),le()}catch(ne){console.error("Error starting production:",ne),ce(ne.message||"Failed to start production","error")}finally{M(!1)}},dt=async b=>{const ne=prompt("Please provide reason for pausing production:");if(ne)try{M(!0),await fe.post(`/orders/${b.id}/pause`,{reason:ne}),ce(`Order ${b.order_number} paused`,"warning"),ae()}catch(Ve){console.error("Error pausing production:",Ve),ce(Ve.message||"Failed to pause production","error")}finally{M(!1)}},ft=async b=>{try{M(!0),await fe.post(`/orders/${b.id}/resume`),ce(`Order ${b.order_number} resumed`,"success"),ae()}catch(ne){console.error("Error resuming production:",ne),ce(ne.message||"Failed to resume production","error")}finally{M(!1)}},Ot=async b=>{const ne=prompt("Please provide reason for stopping production:");if(ne)try{M(!0),await fe.post(`/orders/${b.id}/stop`,{reason:ne,stop_notes:`Production stopped: ${ne}`}),ce(`Order ${b.order_number} stopped`,"error"),ae(),le()}catch(Ve){console.error("Error stopping production:",Ve),ce(Ve.message||"Failed to stop production","error")}finally{M(!1)}},Dt=async b=>{try{M(!0);const ne={actual_quantity:b.quantity,completion_notes:"Production completed successfully",waste_data:h.material_waste>0||h.time_waste>0?h:null};await fe.post(`/orders/${b.id}/complete`,ne),Z(!1),Le(),ce(`Order ${b.order_number} completed successfully`,"success"),ae(),le()}catch(ne){console.error("Error completing production:",ne),ce(ne.message||"Failed to complete production","error")}finally{M(!1)}},Yt=()=>{q({order_number:"",product_name:"",quantity:"",priority:"normal",environment:"",due_date:"",specifications:"",customer_info:""})},Ne=()=>{G({machine_id:null,operator_id:null,batch_number:"",start_notes:"",environmental_conditions:{temperature:25,humidity:60,pressure:1013.25}})},Le=()=>{U({material_waste:0,time_waste:0,waste_reason:"",waste_category:"material",recovery_possible:!1,waste_notes:""})},ke=b=>u.filter(ne=>ne.environment===b&&(ne.status==="available"||ne.status==="idle")),kt=x.useMemo(()=>i.filter(b=>{const ne=!C.search||b.order_number?.toLowerCase().includes(C.search.toLowerCase())||b.product_name?.toLowerCase().includes(C.search.toLowerCase())||b.customer_info?.toLowerCase().includes(C.search.toLowerCase()),Ve=C.environment==="all"||b.environment===C.environment,Ke=C.status==="all"||b.status===C.status,Pe=C.priority==="all"||b.priority===C.priority,_=C.machine==="all"||b.machine_id?.toString()===C.machine,me=b.status==="completed"||b.status==="cancelled";return ne&&Ve&&Ke&&Pe&&_&&(Y==="archive"?me:!me)}),[i,C,Y]),E=b=>mo[b]||mo.pending,oe=b=>Gr[b]||Gr.normal,ye=b=>{if(!b.start_time)return null;const ne=new Date(b.start_time),Ke=(b.end_time?new Date(b.end_time):new Date)-ne,Pe=Math.floor(Ke/(1e3*60*60)),_=Math.floor(Ke%(1e3*60*60)/(1e3*60));return`${Pe}h ${_}m`},yt=b=>{const ne=u.find(Ve=>Ve.id===b);return ne?ne.name:"Unknown"},Rt=b=>{const ne=f.find(Ve=>Ve.code===b);return ne?ne.name:b};return v&&!w?a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-4 text-lg",children:"Loading production system..."})]}):a.jsxs("div",{className:"space-y-6 p-4 md:p-6 bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 bg-white rounded-xl p-6 shadow-lg border border-gray-200",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[a.jsx(jn,{className:"w-8 h-8 text-blue-600"}),"Production Orders System"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Complete order lifecycle management with real-time tracking"}),a.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ba,{className:"w-4 h-4"}),kt.length," orders"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(St,{className:"w-4 h-4"}),i.filter(b=>b.status==="in_progress").length," active"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ef,{className:"w-4 h-4"}),u.filter(b=>b.status==="in_use").length,"/",u.length," machines"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Vg,{}),a.jsx(os,{onClick:Me,disabled:w,size:se?"sm":"md",variant:"outline",icon:Je,className:`${w?"animate-spin":""} transition-all duration-200`,children:se?"":"Refresh"}),a.jsx(os,{onClick:()=>ie(!0),size:se?"sm":"md",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",icon:ia,children:se?"":"New Order"})]})]}),y&&a.jsx("div",{className:`p-4 rounded-lg border transition-all duration-300 ${y.type==="success"?"bg-green-50 border-green-200 text-green-800":y.type==="error"?"bg-red-50 border-red-200 text-red-800":y.type==="warning"?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium",children:y.message}),a.jsx("button",{onClick:()=>H(null),className:"text-current hover:opacity-70 transition-opacity",children:"✕"})]})}),ue.map((b,ne)=>a.jsxs("div",{className:"p-4 rounded-lg border bg-blue-50 border-blue-200 text-blue-800 flex justify-between items-center transition-all duration-300",children:[a.jsx("span",{className:"font-medium",children:b.message}),a.jsx("button",{onClick:()=>O(b.id),className:"text-blue-600 hover:text-blue-800 transition-colors",children:"✕"})]},ne)),a.jsx(pe,{className:"p-6 bg-white shadow-lg border border-gray-200",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search orders, products, customers...",value:C.search,onChange:b=>I(ne=>({...ne,search:b.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>B("active"),className:`flex-1 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${Y==="active"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(St,{className:"w-4 h-4 inline mr-2"}),"Active"]}),a.jsxs("button",{onClick:()=>B("archive"),className:`flex-1 px-3 py-2 rounded-md text-sm font-medium transition-all duration-200 ${Y==="archive"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.jsx(ba,{className:"w-4 h-4 inline mr-2"}),"Archive"]})]}),a.jsxs("select",{value:C.environment,onChange:b=>I(ne=>({...ne,environment:b.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Environments"}),f.map(b=>a.jsx("option",{value:b.code,children:b.name},b.id))]}),a.jsxs("select",{value:C.status,onChange:b=>I(ne=>({...ne,status:b.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Statuses"}),Object.entries(mo).map(([b,ne])=>a.jsx("option",{value:b,children:ne.label},b))]}),a.jsxs("select",{value:C.priority,onChange:b=>I(ne=>({...ne,priority:b.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Priorities"}),Object.entries(Gr).map(([b,ne])=>a.jsx("option",{value:b,children:ne.label},b))]}),a.jsxs("select",{value:C.machine,onChange:b=>I(ne=>({...ne,machine:b.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"all",children:"All Machines"}),u.map(b=>a.jsxs("option",{value:b.id,children:[b.name," (",b.environment,")"]},b.id))]})]})]})}),a.jsxs(pe,{className:"overflow-hidden bg-white shadow-lg border border-gray-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50",children:[a.jsxs("h3",{className:"font-semibold text-gray-900 text-lg",children:[Y==="archive"?"Archived Orders":"Active Orders"," (",kt.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:Y==="archive"?"Completed and cancelled orders":"Current production orders"})]}),se?a.jsx("div",{className:"p-4 space-y-4",children:kt.map(b=>{const ne=E(b.status),Ve=oe(b.priority),Ke=ne.icon;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 space-y-3 shadow-sm hover:shadow-md transition-shadow duration-200",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:b.order_number}),a.jsx("p",{className:"text-sm text-gray-600",children:b.product_name}),b.customer_info&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Customer: ",b.customer_info]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs(Be,{className:ne.color,children:[a.jsx(Ke,{className:"w-3 h-3 mr-1"}),ne.label]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Quantity:"}),a.jsx("span",{className:"ml-1 font-medium",children:b.quantity})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Environment:"}),a.jsx("span",{className:"ml-1 font-medium",children:Rt(b.environment)})]}),b.machine_id&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"Machine:"}),a.jsxs("span",{className:"ml-1 font-medium text-blue-600",children:[a.jsx(Zx,{className:"w-3 h-3 inline mr-1"}),yt(b.machine_id)]})]})]}),ye(b)&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Af,{className:"w-4 h-4"}),a.jsxs("span",{children:["Runtime: ",ye(b)]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-100",children:[a.jsx(Be,{className:Ve.color,children:Ve.label}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(os,{onClick:()=>{L(b),X(!0)},size:"xs",variant:"outline",icon:ds,children:"View"}),b.status==="pending"&&a.jsx(os,{onClick:()=>{L(b),re(!0)},size:"xs",className:"bg-green-600 hover:bg-green-700",icon:ya,children:"Start"}),b.status==="in_progress"&&a.jsxs(a.Fragment,{children:[a.jsx(os,{onClick:()=>dt(b),size:"xs",className:"bg-orange-600 hover:bg-orange-700",icon:Cs,children:"Pause"}),a.jsx(os,{onClick:()=>Ot(b),size:"xs",className:"bg-red-600 hover:bg-red-700",icon:ho,children:"Stop"})]}),b.status==="paused"&&a.jsx(os,{onClick:()=>ft(b),size:"xs",className:"bg-blue-600 hover:bg-blue-700",icon:ya,children:"Resume"}),(b.status==="in_progress"||b.status==="paused")&&a.jsx(os,{onClick:()=>{L(b),Z(!0)},size:"xs",className:"bg-emerald-600 hover:bg-emerald-700",icon:ot,children:"Complete"})]})]})]},b.id)})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Info"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Machine"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:kt.map(b=>{const ne=E(b.status),Ve=oe(b.priority),Ke=ne.icon;return a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:b.order_number}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Qty: ",b.quantity," | ",Rt(b.environment)]}),a.jsx(Be,{className:`mt-1 ${Ve.color}`,children:Ve.label})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-gray-900",children:b.product_name}),b.customer_info&&a.jsxs("div",{className:"text-xs text-gray-500",children:["Customer: ",b.customer_info]})]}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsxs(Be,{className:ne.color,children:[a.jsx(Ke,{className:"w-4 h-4 mr-1"}),ne.label]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ne.description})]}),a.jsx("td",{className:"px-6 py-4",children:b.machine_id?a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Ef,{className:"w-4 h-4 mr-2 text-blue-600"}),a.jsx("span",{className:"font-medium text-blue-600",children:yt(b.machine_id)})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"Not assigned"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"space-y-1",children:[b.start_time&&a.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[a.jsx(Af,{className:"w-3 h-3 mr-1"}),ye(b)]}),b.due_date&&a.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[a.jsx(ua,{className:"w-3 h-3 mr-1"}),"Due: ",new Date(b.due_date).toLocaleDateString()]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(he,{onClick:()=>{L(b),X(!0)},size:"sm",variant:"outline",children:a.jsx(ds,{className:"w-4 h-4"})}),b.status==="pending"&&a.jsxs(he,{onClick:()=>{L(b),re(!0)},size:"sm",className:"bg-green-600 hover:bg-green-700",children:[a.jsx(ya,{className:"w-4 h-4 mr-1"}),"Start"]}),b.status==="in_progress"&&a.jsxs(a.Fragment,{children:[a.jsxs(he,{onClick:()=>dt(b),size:"sm",className:"bg-orange-600 hover:bg-orange-700",children:[a.jsx(Cs,{className:"w-4 h-4 mr-1"}),"Pause"]}),a.jsxs(he,{onClick:()=>Ot(b),size:"sm",className:"bg-red-600 hover:bg-red-700",children:[a.jsx(ho,{className:"w-4 h-4 mr-1"}),"Stop"]})]}),b.status==="paused"&&a.jsxs(he,{onClick:()=>ft(b),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[a.jsx(ya,{className:"w-4 h-4 mr-1"}),"Resume"]}),(b.status==="in_progress"||b.status==="paused")&&a.jsxs(he,{onClick:()=>{L(b),Z(!0)},size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",children:[a.jsx(ot,{className:"w-4 h-4 mr-1"}),"Complete"]})]})})]},b.id)})})]})}),kt.length===0&&a.jsxs("div",{className:"p-12 text-center text-gray-500",children:[a.jsx(ba,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),a.jsx("p",{className:"text-sm",children:"Try adjusting your filters or create a new order to get started"})]})]}),W&&a.jsx(Ct,{title:"Create New Production Order",onClose:()=>{ie(!1),Yt()},size:"large",children:a.jsxs("form",{onSubmit:Ee,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Number"}),a.jsx("input",{type:"text",value:S.order_number,onChange:b=>q({...S,order_number:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Auto-generated if empty"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),a.jsx("input",{type:"number",value:S.quantity,onChange:b=>q({...S,quantity:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,min:"1"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),a.jsx("input",{type:"text",value:S.product_name,onChange:b=>q({...S,product_name:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,placeholder:"Enter product name"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),a.jsx("select",{value:S.priority,onChange:b=>q({...S,priority:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:Object.entries(Gr).map(([b,ne])=>a.jsx("option",{value:b,children:ne.label},b))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment *"}),a.jsxs("select",{value:S.environment,onChange:b=>q({...S,environment:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[a.jsx("option",{value:"",children:"Select Environment"}),f.map(b=>a.jsx("option",{value:b.code,children:b.name},b.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),a.jsx("input",{type:"datetime-local",value:S.due_date,onChange:b=>q({...S,due_date:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Information"}),a.jsx("input",{type:"text",value:S.customer_info,onChange:b=>q({...S,customer_info:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Customer name or reference"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specifications"}),a.jsx("textarea",{value:S.specifications,onChange:b=>q({...S,specifications:b.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:"4",placeholder:"Product specifications, requirements, or notes..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsx(he,{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",disabled:v,children:v?"Creating...":"Create Order"}),a.jsx(he,{type:"button",onClick:()=>{ie(!1),Yt()},variant:"outline",className:"px-8",children:"Cancel"})]})]})}),J&&g&&a.jsx(Ct,{title:`Start Production - ${g.order_number}`,onClose:()=>{re(!1),Ne()},size:"large",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Order Details"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Product:"}),a.jsx("span",{className:"ml-2 font-medium",children:g.product_name})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Quantity:"}),a.jsx("span",{className:"ml-2 font-medium",children:g.quantity})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Environment:"}),a.jsx("span",{className:"ml-2 font-medium",children:Rt(g.environment)})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-blue-700",children:"Priority:"}),a.jsx(Be,{className:oe(g.priority).color,children:oe(g.priority).label})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Machine *"}),a.jsxs("select",{value:$.machine_id||"",onChange:b=>G(ne=>({...ne,machine_id:parseInt(b.target.value)})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0,children:[a.jsx("option",{value:"",children:"Select Machine"}),ke(g.environment).map(b=>a.jsxs("option",{value:b.id,children:[b.name," (",b.type,") - ",b.status]},b.id))]}),ke(g.environment).length===0&&a.jsxs("p",{className:"text-red-600 text-sm mt-1",children:["No available machines in ",Rt(g.environment)," environment"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batch Number"}),a.jsx("input",{type:"text",value:$.batch_number,onChange:b=>G(ne=>({...ne,batch_number:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:`BAT-${Date.now()}`})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Environmental Conditions"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temperature (°C)"}),a.jsx("input",{type:"number",step:"0.1",value:$.environmental_conditions.temperature,onChange:b=>G(ne=>({...ne,environmental_conditions:{...ne.environmental_conditions,temperature:parseFloat(b.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Humidity (%)"}),a.jsx("input",{type:"number",step:"0.1",value:$.environmental_conditions.humidity,onChange:b=>G(ne=>({...ne,environmental_conditions:{...ne.environmental_conditions,humidity:parseFloat(b.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pressure (hPa)"}),a.jsx("input",{type:"number",step:"0.01",value:$.environmental_conditions.pressure,onChange:b=>G(ne=>({...ne,environmental_conditions:{...ne.environmental_conditions,pressure:parseFloat(b.target.value)}})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Notes"}),a.jsx("textarea",{value:$.start_notes,onChange:b=>G(ne=>({...ne,start_notes:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:"3",placeholder:"Pre-production notes, setup information, or special instructions..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsxs(he,{onClick:()=>Xe(g),disabled:!$.machine_id||v,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[a.jsx(ya,{className:"w-4 h-4 mr-2"}),v?"Starting Production...":"Start Production"]}),a.jsx(he,{onClick:()=>{re(!1),Ne()},variant:"outline",className:"px-8",children:"Cancel"})]})]})}),de&&g&&a.jsx(Ct,{title:`Complete Production - ${g.order_number}`,onClose:()=>{Z(!1),Le()},size:"large",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[a.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Production Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-green-700",children:"Order:"}),a.jsx("span",{className:"ml-2 font-medium",children:g.order_number})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-green-700",children:"Product:"}),a.jsx("span",{className:"ml-2 font-medium",children:g.product_name})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-green-700",children:"Target Quantity:"}),a.jsx("span",{className:"ml-2 font-medium",children:g.quantity})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-green-700",children:"Runtime:"}),a.jsx("span",{className:"ml-2 font-medium",children:ye(g)||"Calculating..."})]})]})]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[a.jsxs("h4",{className:"font-medium text-orange-900 mb-3 flex items-center",children:[a.jsx(Bt,{className:"w-5 h-5 mr-2"}),"Waste Tracking"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Waste (units)"}),a.jsx("input",{type:"number",min:"0",step:"0.1",value:h.material_waste,onChange:b=>U(ne=>({...ne,material_waste:parseFloat(b.target.value)||0})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Waste (minutes)"}),a.jsx("input",{type:"number",min:"0",step:"1",value:h.time_waste,onChange:b=>U(ne=>({...ne,time_waste:parseInt(b.target.value)||0})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waste Category"}),a.jsxs("select",{value:h.waste_category,onChange:b=>U(ne=>({...ne,waste_category:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[a.jsx("option",{value:"material",children:"Material Waste"}),a.jsx("option",{value:"time",children:"Time Waste"}),a.jsx("option",{value:"setup",children:"Setup Issues"}),a.jsx("option",{value:"quality",children:"Quality Issues"}),a.jsx("option",{value:"equipment",children:"Equipment Problems"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waste Reason"}),a.jsx("input",{type:"text",value:h.waste_reason,onChange:b=>U(ne=>({...ne,waste_reason:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Brief description of waste cause"})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:h.recovery_possible,onChange:b=>U(ne=>({...ne,recovery_possible:b.target.checked})),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Material recovery possible"})]})}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),a.jsx("textarea",{value:h.waste_notes,onChange:b=>U(ne=>({...ne,waste_notes:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:"3",placeholder:"Additional details about waste or production issues..."})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsxs(he,{onClick:()=>Dt(g),disabled:v,className:"flex-1 bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700",children:[a.jsx(ot,{className:"w-4 h-4 mr-2"}),v?"Completing Production...":"Complete Production"]}),a.jsx(he,{onClick:()=>{Z(!1),Le()},variant:"outline",className:"px-8",children:"Cancel"})]})]})}),V&&g&&a.jsx(Ct,{title:`Order Details - ${g.order_number}`,onClose:()=>{X(!1),L(null)},size:"large",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:g.product_name}),a.jsxs("p",{className:"text-gray-600",children:["Order #",g.order_number]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs(Be,{className:E(g.status).color+" mb-2",children:[qa.createElement(E(g.status).icon,{className:"w-4 h-4 mr-1"}),E(g.status).label]}),a.jsx("br",{}),a.jsx(Be,{className:oe(g.priority).color,children:oe(g.priority).label})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Order Information"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Quantity:"}),a.jsx("span",{className:"font-medium",children:g.quantity})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Environment:"}),a.jsx("span",{className:"font-medium",children:Rt(g.environment)})]}),g.customer_info&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Customer:"}),a.jsx("span",{className:"font-medium",children:g.customer_info})]}),g.due_date&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Due Date:"}),a.jsx("span",{className:"font-medium",children:new Date(g.due_date).toLocaleString()})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Created:"}),a.jsx("span",{className:"font-medium",children:new Date(g.created_at).toLocaleString()})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Production Information"}),a.jsxs("div",{className:"space-y-3",children:[g.machine_id?a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Assigned Machine:"}),a.jsx("span",{className:"font-medium text-blue-600",children:yt(g.machine_id)})]}):a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Machine:"}),a.jsx("span",{className:"text-gray-400",children:"Not assigned"})]}),g.start_time&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Started:"}),a.jsx("span",{className:"font-medium",children:new Date(g.start_time).toLocaleString()})]}),g.end_time&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Completed:"}),a.jsx("span",{className:"font-medium",children:new Date(g.end_time).toLocaleString()})]}),ye(g)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Runtime:"}),a.jsx("span",{className:"font-medium",children:ye(g)})]})]})]})]}),g.specifications&&a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2 mb-3",children:"Specifications"}),a.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:g.specifications})]}),a.jsx("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:a.jsx(he,{onClick:()=>X(!1),variant:"outline",className:"flex-1",children:"Close"})})]})})]})}const gp=i=>i.toLowerCase().replace(/\b\w/g,c=>c.toUpperCase()),So=i=>{if(!i)return"Unknown";const c=i.fullName||i.username||"Unknown";return gp(c)},pp=i=>i?i.toUpperCase():"N/A";function yp(){const[i,c]=x.useState([]),[u,d]=x.useState([]),[f,p]=x.useState([]),[v,M]=x.useState(!0),[w,N]=x.useState(!1),[y,H]=x.useState("all"),[C,I]=x.useState(""),[Y,B]=x.useState("all"),[g,L]=x.useState(null);Os(),No();const{notifications:W,clearNotification:ie}=Mn(),[V,X]=x.useState(!1),[J,re]=x.useState(!1),[de,Z]=x.useState(!1),[Q,Se]=x.useState(null),[se,ue]=x.useState({name:"",type:"",environment:"",capacity:100,production_rate:60,shift_cycle_enabled:!1,cycle_start_date:"",operators_per_shift:2,hopper_loaders_per_shift:1,packers_per_shift:3}),[O,ee]=x.useState([{letter:"A",offset:0,employees:[]},{letter:"B",offset:2,employees:[]},{letter:"C",offset:4,employees:[]}]),[S,q]=x.useState([]),[$,G]=x.useState(!1);x.useEffect(()=>{u.length>0&&!se.environment&&ue(E=>({...E,environment:u[0].code}))},[u,se.environment]);const h=x.useMemo(()=>{const E={};return u.forEach(oe=>{let ye=[];try{ye=typeof oe.machine_types=="string"?JSON.parse(oe.machine_types):oe.machine_types||[]}catch(yt){console.error("Failed to parse machine types for environment:",oe.name,yt),ye=[]}E[oe.code]=f.filter(yt=>ye.includes(yt.name)).map(yt=>({id:yt.id,name:yt.name,description:yt.description}))}),E},[u,f]),U={available:{bg:"bg-green-50",text:"text-green-600",border:"border-green-200",icon:ot},in_use:{bg:"bg-blue-50",text:"text-blue-600",border:"border-blue-200",icon:St},maintenance:{bg:"bg-yellow-50",text:"text-yellow-600",border:"border-yellow-200",icon:bl},offline:{bg:"bg-red-50",text:"text-red-600",border:"border-red-200",icon:fo}},P=(E,oe="success")=>{L({message:E,type:oe}),setTimeout(()=>L(null),3e3)},ae=async()=>{try{const E=await fe.get("/environments");d(E)}catch(E){console.error("Failed to load environments:",E),P("Failed to load environments","danger")}},le=async()=>{try{const E=await fe.get("/machine-types");p(E)}catch(E){console.error("Failed to load machine types:",E),P("Failed to load machine types","danger")}},je=async E=>{try{const oe={name:E,description:"Created during machine setup",category:"Production"};await fe.post("/machine-types",oe),le(),P(`Machine type "${E}" created successfully`)}catch(oe){console.error("Error creating machine type:",oe),P(`Failed to create machine type "${E}": `+(oe.response?.data?.error||oe.message),"danger")}},ce=async(E=!1)=>{E?N(!0):M(!0);try{console.log("🔧 Loading machines...");const oe=await fe.get("/machines");console.log("✅ Machines loaded successfully:",oe?.length||0,"machines"),c(oe)}catch(oe){console.error("❌ Failed to load machines:",oe);let ye="Failed to load machines";oe.message.includes("Unexpected token")?ye="Authentication error - please refresh the page and try again":oe.message.includes("unauthorized")||oe.message.includes("Session expired")?ye="Your session has expired. Please log in again.":oe.response?.status===500?ye="Server error - please try again later":ye=`Failed to load machines: ${oe.message}`,P(ye,"danger")}finally{M(!1),N(!1)}},Me=async()=>{G(!0);try{const oe=(await fe.get("/users")).map(ye=>({id:ye.id,name:So(ye),employee_code:pp(ye.employee_code)||`EMP${ye.id.toString().padStart(3,"0")}`,role:ye.role,is_active:ye.is_active})).filter(ye=>ye.is_active!==!1);q(oe)}catch(E){console.error("Failed to load employees:",E),console.error("Error details:",E.message,E.response),q([]),E.message.includes("unauthorized")||E.message.includes("Session expired")?P("Please log in to manage crew assignments","danger"):P(`Failed to load employees: ${E.message}. You can still configure shift cycles without employee assignments.`,"danger")}finally{G(!1)}},Ee=async E=>{try{const oe=await fe.get(`/machines/${E}/crews`);oe.length>0?ee(oe):ee([{letter:"A",offset:0,employees:[]},{letter:"B",offset:2,employees:[]},{letter:"C",offset:4,employees:[]}])}catch(oe){console.error("Failed to load crews:",oe)}},Xe=()=>{ce(!0)},dt=async E=>{try{await fe.post(`/machines/${E}/crews`,O),P("Crew assignments saved successfully")}catch(oe){console.error("Failed to save crew assignments:",oe),P("Failed to save crew assignments: "+(oe.message||"Unknown error"),"danger")}};x.useEffect(()=>{if(!localStorage.getItem("token")){console.warn("⚠️ No authentication token found, skipping data load");return}ae(),le(),ce(),Me();const oe=setInterval(ce,3e4);return()=>clearInterval(oe)},[]),We("machine_status_changed",E=>{console.log("🔧 Machine status changed:",E.data),c(oe=>oe.map(ye=>ye.id===E.data.machine_id?{...ye,status:E.data.status,updated_at:new Date().toISOString()}:ye)),P(`Machine ${E.data.machine_name} status changed to ${E.data.status}`,"info")},[]),We("machine_created",E=>{console.log("🆕 New machine added:",E.data),c(oe=>[...oe,E.data.machine]),P(`New machine "${E.data.machine.name}" added`,"success")},[]),We("machine_updated",E=>{console.log("📝 Machine updated:",E.data),c(oe=>oe.map(ye=>ye.id===E.data.machine.id?E.data.machine:ye)),P(`Machine "${E.data.machine.name}" updated`,"info")},[]),We("machine_deleted",E=>{console.log("🗑️ Machine deleted:",E.data),c(oe=>oe.filter(ye=>ye.id!==E.data.machine_id)),P("Machine deleted","warning")},[]),x.useEffect(()=>{window.EnhancedWebSocketService?.isConnected()&&window.EnhancedWebSocketService.subscribe(["machines","production"])},[]),x.useEffect(()=>{W.forEach(E=>{E.type==="alert"&&E.message.includes("machine")&&(P(E.message,"danger"),ie(E.id))})},[W]);const ft=async E=>{E.preventDefault();try{await fe.post("/machines",se),X(!1),ce(),P("Machine added successfully")}catch(oe){P("Failed to add machine: "+(oe.message||"Unknown error"),"danger")}},Ot=async E=>{E.preventDefault();try{await fe.put(`/machines/${Q.id}`,se),se.shift_cycle_enabled&&await dt(Q.id),re(!1),ce(),P("Machine updated successfully")}catch(oe){P("Failed to update machine: "+(oe.message||"Unknown error"),"danger")}},Dt=async E=>{if(window.confirm("Are you sure you want to delete this machine?"))try{await fe.delete(`/machines/${E}`),ce(),P("Machine deleted successfully")}catch(oe){P("Failed to delete machine: "+(oe.message||"Unknown error"),"danger")}},Yt=async E=>{try{await fe.patch(`/machines/${Q.id}/status`,{status:E}),Z(!1),ce(),P(`Machine status changed to ${E}`)}catch(oe){P("Failed to update status: "+(oe.message||"Unknown error"),"danger")}},Ne=x.useMemo(()=>{let E=i;return y!=="all"&&(E=E.filter(oe=>oe.environment===y)),Y!=="all"&&(E=E.filter(oe=>oe.status===Y)),C&&(E=E.filter(oe=>oe.name.toLowerCase().includes(C.toLowerCase())||oe.type.toLowerCase().includes(C.toLowerCase()))),E},[i,y,Y,C]),Le=x.useMemo(()=>{const E=i.length,oe=i.filter(ne=>ne.status==="available").length,ye=i.filter(ne=>ne.status==="in_use").length,yt=i.filter(ne=>ne.status==="maintenance").length,Rt=i.filter(ne=>ne.status==="offline").length,b=E>0?Math.round(ye/E*100):0;return{total:E,available:oe,inUse:ye,maintenance:yt,offline:Rt,utilizationRate:b}},[i]),ke=E=>{const ye=(U[E]||U.offline).icon;return a.jsxs(Be,{variant:E==="available"?"success":E==="in_use"?"info":E==="maintenance"?"warning":"danger",children:[a.jsx(ye,{className:"w-3 h-3 mr-1"}),E.replace("_"," ").toUpperCase()]})},kt=()=>a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Kt,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Le.total})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ot,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Available"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:Le.available})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(St,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"In Use"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Le.inUse})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bl,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Maintenance"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Le.maintenance})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(fo,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Offline"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:Le.offline})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(va,{className:"w-5 h-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Utilization"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[Le.utilizationRate,"%"]})]})]})})]});return v&&i.length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Je,{className:"w-5 h-5 animate-spin"}),"Loading machines..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[g&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${g.type==="success"?"bg-green-100 text-green-800 border border-green-200":g.type==="danger"?"bg-red-100 text-red-800 border border-red-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:g.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Machine Management"}),a.jsx(Tn,{})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage manufacturing equipment and monitor real-time status"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(he,{onClick:Xe,disabled:w,variant:"outline",children:[a.jsx(Je,{className:`w-4 h-4 mr-2 ${w?"animate-spin":""}`}),"Refresh"]}),a.jsxs(he,{onClick:()=>{ue({name:"",type:"",environment:"blending",capacity:100,production_rate:60}),X(!0)},children:[a.jsx(ia,{className:"w-4 h-4 mr-2"}),"Add Machine"]})]})]}),a.jsx(kt,{}),a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search machines...",value:C,onChange:E=>I(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{value:y,onChange:E=>H(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[a.jsx("option",{value:"all",children:"All Environments"}),u.map(E=>a.jsx("option",{value:E.code,children:E.name},E.id))]})]}),a.jsx("div",{children:a.jsxs("select",{value:Y,onChange:E=>B(E.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Statuses"}),a.jsx("option",{value:"available",children:"Available"}),a.jsx("option",{value:"in_use",children:"In Use"}),a.jsx("option",{value:"maintenance",children:"Maintenance"}),a.jsx("option",{value:"offline",children:"Offline"})]})}),a.jsx("div",{className:"flex items-center justify-center md:justify-start",children:a.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",Ne.length," of ",i.length," machines"]})})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Ne.map(E=>{const oe=U[E.status]||U.offline,ye=oe.icon;return a.jsxs(pe,{className:`p-6 border-l-4 ${oe.border} hover:shadow-lg transition-all duration-300`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:E.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:E.type}),a.jsxs("p",{className:"text-xs text-gray-400 capitalize",children:[E.environment," Environment"]})]}),ke(E.status)]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Capacity:"}),a.jsx("span",{className:"font-medium",children:E.capacity})]}),E.production_rate&&a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-500",children:"Rate:"}),a.jsxs("span",{className:"font-medium",children:[E.production_rate,"/hr"]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(he,{onClick:()=>{Se(E),Z(!0)},variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(ye,{className:"w-4 h-4 mr-1"}),"Status"]}),a.jsx(he,{onClick:async()=>{Se(E),ue({...E,shift_cycle_enabled:E.shift_cycle_enabled||!1,cycle_start_date:E.cycle_start_date||"",operators_per_shift:E.operators_per_shift==null?"":E.operators_per_shift,hopper_loaders_per_shift:E.hopper_loaders_per_shift==null?"":E.hopper_loaders_per_shift,packers_per_shift:E.packers_per_shift==null?"":E.packers_per_shift}),await Ee(E.id),re(!0)},variant:"outline",size:"sm",children:a.jsx(wn,{className:"w-4 h-4"})}),E.status!=="in_use"&&a.jsx(he,{onClick:()=>Dt(E.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",children:a.jsx(_n,{className:"w-4 h-4"})})]})]},E.id)})}),Ne.length===0&&a.jsxs(pe,{className:"p-12 text-center",children:[a.jsx(Kt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No machines found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:C||y!=="all"||Y!=="all"?"Try adjusting your filters or search term":"Get started by adding your first machine"}),!C&&y==="all"&&Y==="all"&&a.jsxs(he,{onClick:()=>{ue({name:"",type:"",environment:"blending",capacity:100,production_rate:60}),X(!0)},children:[a.jsx(ia,{className:"w-4 h-4 mr-2"}),"Add First Machine"]})]}),V&&a.jsx(Ct,{title:"Add New Machine",onClose:()=>X(!1),children:a.jsxs("form",{onSubmit:ft,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Name"}),a.jsx("input",{type:"text",placeholder:"Enter machine name",value:se.name,onChange:E=>ue({...se,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),a.jsxs("select",{value:se.environment,onChange:E=>ue({...se,environment:E.target.value,type:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Environment"}),u.map(E=>a.jsx("option",{value:E.code,children:E.name},E.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type"}),a.jsxs("select",{value:se.type,onChange:E=>ue({...se,type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select machine type..."}),(h[se.environment]||[]).map(E=>a.jsx("option",{value:E.name||E,children:E.name||E},E.id||E.name))]}),a.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg",children:[a.jsx("input",{type:"text",placeholder:"Or type new machine type and press Enter",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onKeyPress:E=>{if(E.key==="Enter"&&E.target.value.trim()){const oe=E.target.value.trim();ue({...se,type:oe}),je(oe),E.target.value=""}}}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to create and select new machine type"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),a.jsx("input",{type:"number",placeholder:"100",value:se.capacity,onChange:E=>ue({...se,capacity:parseInt(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Rate (/hr)"}),a.jsx("input",{type:"number",placeholder:"60",value:se.production_rate,onChange:E=>ue({...se,production_rate:parseInt(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(he,{type:"button",onClick:()=>X(!1),variant:"outline",children:"Cancel"}),a.jsxs(he,{type:"submit",children:[a.jsx(ia,{className:"w-4 h-4 mr-2"}),"Add Machine"]})]})]})}),J&&Q&&a.jsx(Ct,{title:"Edit Machine",onClose:()=>re(!1),children:a.jsxs("form",{onSubmit:Ot,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Name"}),a.jsx("input",{type:"text",placeholder:"Machine Name",value:se.name,onChange:E=>ue({...se,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment"}),a.jsxs("select",{value:se.environment,onChange:E=>ue({...se,environment:E.target.value,type:""}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Environment"}),u.map(E=>a.jsx("option",{value:E.code,children:E.name},E.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Changing environment will reset the machine type"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type"}),a.jsx("select",{value:se.type,onChange:E=>ue({...se,type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:(h[se.environment]||[]).map(E=>a.jsx("option",{value:E.name||E,children:E.name||E},E.id||E.name))}),a.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-lg",children:[a.jsx("input",{type:"text",placeholder:"Or type new machine type and press Enter",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onKeyPress:E=>{if(E.key==="Enter"&&E.target.value.trim()){const oe=E.target.value.trim();ue({...se,type:oe}),je(oe),E.target.value=""}}}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Enter to create and select new machine type"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),a.jsx("input",{type:"number",placeholder:"Capacity",value:se.capacity,onChange:E=>ue({...se,capacity:parseInt(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Production Rate (/hr)"}),a.jsx("input",{type:"number",placeholder:"Production Rate",value:se.production_rate||"",onChange:E=>ue({...se,production_rate:parseInt(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"border-t pt-6 mt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(Ie,{className:"w-5 h-5 text-blue-600"}),"Workforce Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-blue-800 mb-2",children:[a.jsx(Kt,{className:"w-4 h-4 inline mr-1"}),"Operators per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"10",value:se.operators_per_shift??2,onChange:E=>{const oe=E.target.value===""?"":Math.max(0,parseInt(E.target.value)||0);ue({...se,operators_per_shift:oe})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Machine operators needed • Blank = N/A, 0 = Automated"})]}),a.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-orange-800 mb-2",children:[a.jsx(va,{className:"w-4 h-4 inline mr-1"}),"Hopper Loaders per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"5",value:se.hopper_loaders_per_shift??1,onChange:E=>{const oe=E.target.value===""?"":Math.max(0,parseInt(E.target.value)||0);ue({...se,hopper_loaders_per_shift:oe})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-orange-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Material handling staff • Blank = N/A, 0 = Automated"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-green-800 mb-2",children:[a.jsx(ot,{className:"w-4 h-4 inline mr-1"}),"Packers per Shift"]}),a.jsx("input",{type:"number",min:"0",max:"15",value:se.packers_per_shift??3,onChange:E=>{const oe=E.target.value===""?"":Math.max(0,parseInt(E.target.value)||0);ue({...se,packers_per_shift:oe})},placeholder:"Not applicable",className:"w-full px-3 py-2 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent bg-white"}),a.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Packaging staff needed • Blank = N/A, 0 = Automated"})]})]}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Total Workforce per Shift"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Combined staffing requirement"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:(()=>{const E=se.operators_per_shift===""?0:se.operators_per_shift??2,oe=se.hopper_loaders_per_shift===""?0:se.hopper_loaders_per_shift??1,ye=se.packers_per_shift===""?0:se.packers_per_shift??3;return E+oe+ye})()}),a.jsx("div",{className:"text-sm text-gray-500",children:"people"})]})]})}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50 rounded-lg border border-indigo-200",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(lg,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"font-semibold text-gray-900",children:"2-2-2 Shift Cycle"}),a.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs rounded-full",children:"Advanced"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Automatic crew rotation with continuous coverage"}),a.jsx("p",{className:"text-xs text-indigo-600 mt-1",children:"Configure detailed scheduling in Labor Planner →"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"checkbox",id:"shift_cycle_enabled",checked:se.shift_cycle_enabled||!1,onChange:E=>ue({...se,shift_cycle_enabled:E.target.checked}),className:"w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"shift_cycle_enabled",className:"text-sm font-medium text-gray-700",children:"Enable"})]})]}),se.shift_cycle_enabled&&a.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border border-indigo-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ua,{className:"w-8 h-8 text-indigo-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Shift Cycle Enabled"}),a.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Configure detailed crew assignments and schedules in the Labor Planner"}),a.jsx("button",{type:"button",onClick:()=>window.location.href="/labor-planner",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium",children:"Open Labor Planner →"})]})})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(he,{type:"button",onClick:()=>re(!1),variant:"outline",children:"Cancel"}),a.jsxs(he,{type:"submit",children:[a.jsx(wn,{className:"w-4 h-4 mr-2"}),"Update Machine"]})]})]})}),de&&Q&&a.jsx(Ct,{title:"Change Machine Status",onClose:()=>Z(!1),children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:Q.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Current status: ",ke(Q.status)]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(U).map(([E,oe])=>{const ye=oe.icon;return a.jsxs(he,{onClick:()=>Yt(E),variant:Q.status===E?"default":"outline",className:`${oe.bg} ${oe.text} border-2 ${oe.border} h-16 flex flex-col items-center justify-center`,disabled:Q.status===E,children:[a.jsx(ye,{className:"w-5 h-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:E.replace("_"," ").toUpperCase()})]},E)})}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx(he,{onClick:()=>Z(!1),variant:"outline",children:"Cancel"})})]})})]})}function bp(){const[i,c]=x.useState(null),[u,d]=x.useState(!0),[f,p]=x.useState(""),[v,M]=x.useState({start_date:Pt.formatSASTDate(new Date(Date.now()-10080*60*1e3)),end_date:Pt.formatSASTDate(new Date),machine_id:"",category:""}),w=async()=>{d(!0),p("");try{const g=new URLSearchParams;Object.entries(v).forEach(([W,ie])=>{ie&&g.append(W,ie)});const L=await fe.get(`/reports/downtime?${g}`);c(L)}catch(g){p("Failed to load downtime data"),console.error("Downtime report error:",g)}finally{d(!1)}};x.useEffect(()=>{w()},[]);const N=(g,L)=>{M(W=>({...W,[g]:L}))},y=()=>{w()},H=()=>{if(!i)return;const g=[["Start Time","End Time","Duration (min)","Reason","Category","Order","Machine","Stopped By","Status"],...i.records.map(V=>[Pt.formatSASTDateTime(V.start_time),V.end_time?Pt.formatSASTDateTime(V.end_time):"Active",V.duration||"N/A",V.reason,V.category,V.order_number,V.machine_name,V.stopped_by,V.status])].map(V=>V.join(",")).join(`
`),L=new Blob([g],{type:"text/csv"}),W=window.URL.createObjectURL(L),ie=document.createElement("a");ie.href=W,ie.download=`downtime-report-${v.start_date}-to-${v.end_date}.csv`,ie.click(),window.URL.revokeObjectURL(W)},C=g=>({machine_breakdown:"danger",material_shortage:"warning",quality_issue:"danger",operator_break:"info",shift_change:"info",maintenance:"warning",safety_incident:"danger",power_outage:"danger",other:"default"})[g]||"default";if(u)return a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Jt,{className:"w-5 h-5 animate-spin"}),"Loading downtime report..."]})});if(f)return a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"bg-red-100 text-red-800 p-4 rounded-lg",children:[a.jsx(Bt,{className:"w-5 h-5 inline mr-2"}),f]})});const{summary:I,category_breakdown:Y,records:B}=i||{};return a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Downtime Report"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Production stop analysis and tracking"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(he,{onClick:y,disabled:u,children:[a.jsx(Xr,{className:"w-4 h-4 mr-2"}),"Apply Filters"]}),a.jsxs(he,{onClick:H,variant:"outline",disabled:!i,children:[a.jsx(ja,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Filters"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),a.jsx("input",{type:"date",value:v.start_date,onChange:g=>N("start_date",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),a.jsx("input",{type:"date",value:v.end_date,onChange:g=>N("end_date",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),a.jsxs("select",{value:v.category,onChange:g=>N("category",g.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Categories"}),a.jsx("option",{value:"Equipment",children:"Equipment"}),a.jsx("option",{value:"Material",children:"Material"}),a.jsx("option",{value:"Quality",children:"Quality"}),a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Maintenance",children:"Maintenance"}),a.jsx("option",{value:"Safety",children:"Safety"}),a.jsx("option",{value:"Utilities",children:"Utilities"}),a.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),I&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(bo,{className:"w-8 h-8 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Stops"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:I.total_stops})]})]})}),a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Jt,{className:"w-8 h-8 text-orange-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Active Stops"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:I.active_stops})]})]})}),a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(va,{className:"w-8 h-8 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Downtime"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[I.total_downtime_hours,"h"]})]})]})}),a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Jt,{className:"w-8 h-8 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Avg Duration"}),a.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[I.average_downtime_minutes,"m"]})]})]})}),a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ua,{className:"w-8 h-8 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Resolved"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:I.resolved_stops})]})]})})]}),Y&&a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Breakdown by Category"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(Y).map(([g,L])=>a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-800",children:g}),a.jsxs("p",{className:"text-sm text-gray-600",children:[L.count," stops"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[Math.round(L.total_minutes)," minutes"]})]},g))})]}),a.jsxs(pe,{children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h3",{className:"text-lg font-semibold",children:"Downtime Records"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Start Time","Duration","Reason","Category","Order","Machine","Status","Stopped By"].map(g=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:g},g))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B?.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"text-center py-10 text-gray-500",children:"No downtime records found for the selected period"})}):B?.map(g=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Pt.formatSASTDateTime(g.start_time)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:g.duration?`${g.duration}m`:"Active"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Be,{variant:C(g.reason),size:"sm",children:g.reason.replace("_"," ").toUpperCase()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:g.category}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:g.order_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:g.machine_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Be,{variant:g.status==="Active"?"warning":"success",size:"sm",children:g.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:g.stopped_by})]},g.id))})]})})]})]})}function vp(){Os();const[i,c]=x.useState({orders:[],machines:[],assignments:[],employees:[],summary:{},archivedOrders:[]}),[u,d]=x.useState(!0),[f,p]=x.useState(!1),[v,M]=x.useState(null),[w,N]=x.useState("overview"),[y,H]=x.useState([]),[C,I]=x.useState(null),[Y,B]=x.useState(!1),[g,L]=x.useState(()=>{const O=new Date,ee=O.getFullYear(),S=O.getMonth()+1,q=`${ee}-${S.toString().padStart(2,"0")}-01`,$=O.toISOString().split("T")[0];return{start_date:q,end_date:$}}),W=(O,ee="success")=>{M({message:O,type:ee}),setTimeout(()=>M(null),3e3)},ie=async(O=!1)=>{O?p(!0):d(!0);try{const ee=`${g.start_date}T00:00:00`,S=`${g.end_date}T23:59:59`,q=new URLSearchParams({start_date:ee,end_date:S}).toString(),[$,G,h,U,P,ae,le]=await Promise.all([fe.get("/orders"),fe.get("/machines"),fe.get(`/analytics/summary?${q}`),fe.get(`/analytics/downtime?${q}`),fe.get(`/reports/downtime?${q}`),fe.get("/users"),fe.get(`/planner/assignments?date=${g.end_date}`)]);c({orders:$||[],machines:G||[],employees:ae||[],assignments:le||[],summary:h?.summary||{},downtime:U||{},downtimeRecords:P?.records||[],downtimeSummary:P?.summary||{},categoryBreakdown:P?.category_breakdown||{}})}catch(ee){console.error("Failed to load analytics:",ee),W("Failed to load analytics data","danger")}finally{d(!1),p(!1)}},V=()=>{ie(!0)};x.useEffect(()=>{ie()},[g]),x.useEffect(()=>{X()},[g]);const X=async()=>{try{const O=new URLSearchParams({start_date:g.start_date,end_date:g.end_date}).toString(),[ee,S]=await Promise.all([fe.get(`/orders/archived?${O}`).catch(()=>[]),fe.get(`/reports/waste?${O}`).catch(()=>[])]),q=ee||[];c($=>({...$,orders:[...$.orders,...q],archivedOrders:q})),H(S||[]),console.log("Loaded archived orders:",q.length)}catch(O){console.error("Failed to load archived orders:",O);try{const ee=new URLSearchParams({start_date:g.start_date,end_date:g.end_date,status:"completed"}).toString(),S=await fe.get(`/orders?${ee}&archived=true`);c(q=>({...q,orders:[...q.orders,...S||[]],archivedOrders:S||[]})),console.log("Loaded completed orders from alternative endpoint:",(S||[]).length)}catch(ee){console.error("Alternative archived orders endpoint also failed:",ee)}}},J=async O=>{try{const ee=await fe.get(`/orders/${O.id}/waste`);I({order:O,wasteData:ee||[],metrics:ee?{totalWeight:ee.reduce((S,q)=>S+(q.weight||0),0),itemCount:ee.length,categories:[...new Set(ee.map(S=>S.item_type))]}:{totalWeight:0,itemCount:0,categories:[]}}),B(!0)}catch(ee){console.error("Failed to load waste report:",ee),W("Failed to load waste report","danger")}},re=()=>{const O=i.orders.filter(S=>S.status==="completed"),ee=i.archivedOrders||[];return[...O,...ee]},de=()=>{try{const O=re();if(O.length===0){W("No completed orders to export","warning");return}const ee=[["Order Number","Product","Completion Date","Target Qty","Actual Qty","Waste Items","Total Waste Weight","Waste Types"],...O.map(G=>{const h=G.waste_data||[],U=h.reduce((ae,le)=>ae+(le.weight||0),0),P=[...new Set(h.map(ae=>ae.item_type))].join("; ");return[G.order_number||"N/A",G.product_name||"N/A",G.complete_time?Pt.formatSASTDateTime(G.complete_time):"N/A",G.quantity||0,G.actual_quantity||0,h.length,U,P||"No waste recorded"]})].map(G=>G.join(",")).join(`
`),S=new Blob([ee],{type:"text/csv"}),q=URL.createObjectURL(S),$=document.createElement("a");$.href=q,$.download=`waste-reports-${g.start_date}-to-${g.end_date}.csv`,$.click(),URL.revokeObjectURL(q),W("Waste reports exported successfully","success")}catch(O){console.error("Export error:",O),W("Failed to export waste reports","danger")}},Z=x.useMemo(()=>{const{orders:O,machines:ee}=i,S=O.length,q=O.filter(Ne=>Ne.status==="pending").length,$=O.filter(Ne=>Ne.status==="in_progress").length,G=O.filter(Ne=>Ne.status==="completed").length,h=O.filter(Ne=>Ne.status==="paused").length,U=S>0?Math.round(G/S*100):0,P=ee.length,ae=ee.filter(Ne=>Ne.status==="available").length,le=ee.filter(Ne=>Ne.status==="in_use").length,je=ee.filter(Ne=>Ne.status==="maintenance").length,ce=ee.filter(Ne=>Ne.status==="offline").length,Me=P>0?Math.round(le/P*100):0,Ee=O.reduce((Ne,Le)=>Ne+(parseInt(Le.quantity)||0),0),Xe=O.filter(Ne=>Ne.status==="completed").reduce((Ne,Le)=>Ne+(parseInt(Le.actual_quantity||Le.quantity)||0),0),dt=O.reduce((Ne,Le)=>{const ke=Le.priority||"normal";return Ne[ke]=(Ne[ke]||0)+1,Ne},{}),ft=O.reduce((Ne,Le)=>{const ke=Le.environment||"unknown";return Ne[ke]=(Ne[ke]||0)+1,Ne},{}),Ot=O.reduce((Ne,Le)=>{const ke=Le.status||"unknown";return Ne[ke]=(Ne[ke]||0)+1,Ne},{}),Dt=ee.reduce((Ne,Le)=>{const ke=Le.environment||"unknown";return Ne[ke]=(Ne[ke]||0)+1,Ne},{}),Yt=Array.from({length:7},(Ne,Le)=>{const ke=new Date;ke.setDate(ke.getDate()-Le);const kt=ke.toISOString().split("T")[0],E=O.filter(oe=>oe.created_at?.startsWith(kt)).length;return{date:kt,count:E}}).reverse();return{totalOrders:S,pendingOrders:q,inProgressOrders:$,completedOrders:G,pausedOrders:h,completionRate:U,totalMachines:P,availableMachines:ae,activeMachines:le,maintenanceMachines:je,offlineMachines:ce,utilizationRate:Me,totalQuantityOrdered:Ee,totalQuantityProduced:Xe,priorityDistribution:dt,environmentDistribution:ft,statusDistribution:Ot,machineEnvDistribution:Dt,recentTrend:Yt}},[i]),Q=O=>{try{let ee,S;if(O==="csv"){ee=[["Metric","Value"],["Total Orders",Z.totalOrders],["Completed Orders",Z.completedOrders],["Completion Rate",`${Z.completionRate}%`],["Total Machines",Z.totalMachines],["Active Machines",Z.activeMachines],["Utilization Rate",`${Z.utilizationRate}%`],["Total Quantity Ordered",Z.totalQuantityOrdered],["Total Quantity Produced",Z.totalQuantityProduced]].map(U=>U.join(",")).join("\\n"),S=`analytics-${g.start_date}-to-${g.end_date}.csv`;const $=new Blob([ee],{type:"text/csv"}),G=URL.createObjectURL($),h=document.createElement("a");h.href=G,h.download=S,h.click(),URL.revokeObjectURL(G)}else{ee=JSON.stringify({metrics:Z,dateRange:g},null,2),S=`analytics-${g.start_date}-to-${g.end_date}.json`;const q=new Blob([ee],{type:"application/json"}),$=URL.createObjectURL(q),G=document.createElement("a");G.href=$,G.download=S,G.click(),URL.revokeObjectURL($)}W(`Analytics exported as ${O.toUpperCase()}`,"success")}catch{W("Failed to export data","danger")}},Se=({data:O,title:ee,color:S="#3b82f6"})=>{const q=x.useRef(null);return x.useEffect(()=>{if(!q.current||!O)return;const $=q.current,G=$.getContext("2d"),h=Object.keys(O),U=Object.values(O),P=Math.max(...U,1);if(G.clearRect(0,0,$.width,$.height),h.length===0){G.font="14px sans-serif",G.fillStyle="#6b7280",G.textAlign="center",G.fillText("No data available",$.width/2,$.height/2);return}const ae=$.height-80,le=$.width-80,je=Math.min(60,le/(h.length*1.5));G.strokeStyle="#e5e7eb",G.lineWidth=1;for(let ce=0;ce<=5;ce++){const Me=40+ce/5*ae;G.beginPath(),G.moveTo(50,Me),G.lineTo($.width-20,Me),G.stroke(),G.font="11px sans-serif",G.fillStyle="#6b7280",G.textAlign="right",G.fillText(Math.round((5-ce)/5*P),45,Me+4)}h.forEach((ce,Me)=>{const Ee=U[Me],Xe=Ee/P*ae,dt=60+Me*(le/h.length),ft=40+ae-Xe;G.fillStyle=S,G.fillRect(dt,ft,je,Xe),G.font="11px sans-serif",G.fillStyle="#374151",G.textAlign="center",G.fillText(Ee,dt+je/2,ft-5),G.save(),G.translate(dt+je/2,$.height-20),G.rotate(-Math.PI/6),G.fillText(ce.charAt(0).toUpperCase()+ce.slice(1),0,0),G.restore()})},[O,S]),a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:ee}),a.jsx("canvas",{ref:q,width:"400",height:"300",className:"w-full h-auto max-w-full"})]})},se=({data:O,title:ee})=>{const S=x.useRef(null),q=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];return x.useEffect(()=>{if(!S.current||!O)return;const $=S.current,G=$.getContext("2d"),h=$.width/2,U=$.height/2,P=Math.min(h,U)-40;G.clearRect(0,0,$.width,$.height);const ae=Object.values(O),le=Object.keys(O),je=ae.reduce((Me,Ee)=>Me+Ee,0);if(je===0){G.font="14px sans-serif",G.fillStyle="#6b7280",G.textAlign="center",G.fillText("No data available",h,U);return}let ce=-Math.PI/2;ae.forEach((Me,Ee)=>{const Xe=Me/je*2*Math.PI;G.beginPath(),G.moveTo(h,U),G.arc(h,U,P,ce,ce+Xe),G.closePath(),G.fillStyle=q[Ee%q.length],G.fill(),G.strokeStyle="#ffffff",G.lineWidth=2,G.stroke();const dt=ce+Xe/2,ft=h+Math.cos(dt)*(P*.7),Ot=U+Math.sin(dt)*(P*.7),Dt=Math.round(Me/je*100);Dt>5&&(G.font="12px sans-serif",G.fillStyle="#ffffff",G.textAlign="center",G.fillText(`${Dt}%`,ft,Ot)),ce+=Xe}),le.forEach((Me,Ee)=>{const Xe=20+Ee*20;G.fillStyle=q[Ee%q.length],G.fillRect(10,Xe,15,15),G.fillStyle="#374151",G.font="12px sans-serif",G.textAlign="left",G.fillText(`${Me}: ${ae[Ee]}`,30,Xe+12)})},[O]),a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:ee}),a.jsx("canvas",{ref:S,width:"400",height:"300",className:"w-full h-auto max-w-full"})]})},ue=({title:O,value:ee,change:S,icon:q,color:$="gray"})=>{const G={blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",red:"bg-red-50 text-red-600 border-red-200",purple:"bg-purple-50 text-purple-600 border-purple-200",gray:"bg-gray-50 text-gray-600 border-gray-200"};return a.jsx(pe,{className:`p-6 border-l-4 ${G[$]}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:O}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:ee}),S!==void 0&&a.jsxs("div",{className:"flex items-center mt-2",children:[S>=0?a.jsx(yl,{className:"w-4 h-4 text-green-500 mr-1"}):a.jsx(bo,{className:"w-4 h-4 text-red-500 mr-1"}),a.jsxs("span",{className:`text-sm ${S>=0?"text-green-600":"text-red-600"}`,children:[Math.abs(S),"% from last period"]})]})]}),a.jsx(q,{className:"w-8 h-8"})]})})};return u&&Object.keys(i).length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Je,{className:"w-5 h-5 animate-spin"}),"Loading analytics..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[v&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${v.type==="success"?"bg-green-100 text-green-800 border border-green-200":v.type==="danger"?"bg-red-100 text-red-800 border border-red-200":v.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:v.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Analytics & Reports"}),a.jsx(Tn,{})]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Production insights and real-time performance metrics"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(he,{onClick:V,disabled:f,variant:"outline",children:[a.jsx(Je,{className:`w-4 h-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(he,{onClick:()=>Q("csv"),variant:"outline",size:"sm",children:[a.jsx(ja,{className:"w-4 h-4 mr-2"}),"CSV"]}),a.jsxs(he,{onClick:()=>Q("json"),variant:"outline",size:"sm",children:[a.jsx(ja,{className:"w-4 h-4 mr-2"}),"JSON"]})]})]})]}),a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ua,{className:"w-5 h-5 text-gray-500"}),a.jsx("span",{className:"font-medium text-gray-700",children:"Date Range:"})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:g.start_date,onChange:O=>L({...g,start_date:O.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:g.end_date,onChange:O=>L({...g,end_date:O.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Period: ",Math.ceil((new Date(g.end_date)-new Date(g.start_date))/(1e3*60*60*24))," days"]})]})}),a.jsx(pe,{className:"p-1",children:a.jsx("div",{className:"flex gap-1",children:[{id:"overview",label:"Overview",icon:va},{id:"orders",label:"Order Analytics",icon:ba},{id:"machines",label:"Machine Analytics",icon:jn},{id:"labor",label:"Labor Analytics",icon:Ie},{id:"performance",label:"Performance",icon:yl},{id:"downtime",label:"Downtime Report",icon:Bt},{id:"waste-reports",label:"Waste Reports",icon:kf}].map(O=>{const ee=O.icon;return a.jsxs("button",{onClick:()=>N(O.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${w===O.id?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[a.jsx(ee,{className:"w-4 h-4"}),O.label]},O.id)})})}),w==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(ue,{title:"Total Orders",value:Z.totalOrders,icon:ba,color:"blue"}),a.jsx(ue,{title:"Completion Rate",value:`${Z.completionRate}%`,icon:ot,color:"green"}),a.jsx(ue,{title:"Machine Utilization",value:`${Z.utilizationRate}%`,icon:jn,color:"purple"}),a.jsx(ue,{title:"Active Machines",value:`${Z.activeMachines}/${Z.totalMachines}`,icon:St,color:"yellow"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(se,{data:Z.statusDistribution,title:"Order Status Distribution"}),a.jsx(Se,{data:Z.environmentDistribution,title:"Orders by Environment",color:"#10b981"})]})]}),w==="orders"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx(ue,{title:"Pending Orders",value:Z.pendingOrders,icon:Jt,color:"gray"}),a.jsx(ue,{title:"In Progress",value:Z.inProgressOrders,icon:ya,color:"blue"}),a.jsx(ue,{title:"Completed",value:Z.completedOrders,icon:ot,color:"green"}),a.jsx(ue,{title:"Paused",value:Z.pausedOrders,icon:Cs,color:"yellow"}),a.jsx(ue,{title:"Total Quantity",value:Z.totalQuantityOrdered.toLocaleString(),icon:Sn,color:"purple"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(Se,{data:Z.priorityDistribution,title:"Order Priority Distribution",color:"#f59e0b"}),a.jsx(se,{data:Z.environmentDistribution,title:"Orders by Environment"})]})]}),w==="machines"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx(ue,{title:"Total Machines",value:Z.totalMachines,icon:jn,color:"gray"}),a.jsx(ue,{title:"Available",value:Z.availableMachines,icon:ot,color:"green"}),a.jsx(ue,{title:"In Use",value:Z.activeMachines,icon:St,color:"blue"}),a.jsx(ue,{title:"Maintenance",value:Z.maintenanceMachines,icon:Bt,color:"yellow"}),a.jsx(ue,{title:"Offline",value:Z.offlineMachines,icon:Ie,color:"red"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(se,{data:{Available:Z.availableMachines,"In Use":Z.activeMachines,Maintenance:Z.maintenanceMachines,Offline:Z.offlineMachines},title:"Machine Status Distribution"}),a.jsx(Se,{data:Z.machineEnvDistribution,title:"Machines by Environment",color:"#8b5cf6"})]})]}),w==="performance"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(ue,{title:"Quantity Produced",value:Z.totalQuantityProduced.toLocaleString(),icon:Sn,color:"green"}),a.jsx(ue,{title:"Production Efficiency",value:`${Math.round(Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100)}%`,icon:yl,color:"blue"}),a.jsx(ue,{title:"Avg Orders/Day",value:Math.round(Z.totalOrders/30),icon:ba,color:"purple"}),a.jsx(ue,{title:"Machine Efficiency",value:`${Z.utilizationRate}%`,icon:jn,color:"yellow"})]}),a.jsx("div",{className:"grid grid-cols-1 gap-6",children:a.jsx(Se,{data:Object.fromEntries(i.downtime?Object.entries(i.downtime):[["No Data",0]]),title:"Downtime by Reason (Minutes)",color:"#ef4444"})}),a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Recent Performance Summary"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Period"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Order Completion Rate"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[Z.completionRate,"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"85%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Be,{variant:Z.completionRate>=85?"success":Z.completionRate>=70?"warning":"danger",children:Z.completionRate>=85?"Excellent":Z.completionRate>=70?"Good":"Needs Improvement"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Machine Utilization"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[Z.utilizationRate,"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"80%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Be,{variant:Z.utilizationRate>=80?"success":Z.utilizationRate>=60?"warning":"danger",children:Z.utilizationRate>=80?"Excellent":Z.utilizationRate>=60?"Good":"Needs Improvement"})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Production Efficiency"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[Math.round(Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100),"%"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:"90%"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Be,{variant:Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100>=90?"success":Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100>=75?"warning":"danger",children:Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100>=90?"Excellent":Z.totalQuantityProduced/(Z.totalQuantityOrdered||1)*100>=75?"Good":"Needs Improvement"})})]})]})]})})]})]}),w==="labor"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(ue,{title:"Total Employees",value:i.employees.filter(O=>O.role!=="admin").length,icon:Ie,color:"blue"}),a.jsx(ue,{title:"Assigned Today",value:i.assignments.length,icon:ot,color:"green"}),a.jsx(ue,{title:"Unique Workers",value:new Set(i.assignments.map(O=>O.employee_id)).size,icon:St,color:"purple"}),a.jsx(ue,{title:"Utilization",value:`${Math.round(i.assignments.length/Math.max(i.machines.length,1)*100)}%`,icon:yl,color:"orange"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Employee Roles"}),a.jsx("div",{className:"space-y-3",children:["operator","supervisor","packer"].map(O=>{const ee=i.employees.filter(q=>q.role===O).length,S=Math.round(ee/Math.max(i.employees.filter(q=>q.role!=="admin").length,1)*100);return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600 capitalize",children:O}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-blue-500",style:{width:`${S}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 w-12",children:ee})]})]},O)})})]}),a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Shift Distribution"}),a.jsx("div",{className:"space-y-3",children:["day","night"].map(O=>{const ee=i.assignments.filter(q=>q.shift===O).length,S=Math.round(ee/Math.max(i.assignments.length,1)*100);return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-600 capitalize",children:[O," Shift"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full ${O==="day"?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${S}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 w-12",children:ee})]})]},O)})})]})]}),a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Recent Labor Assignments"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Machine"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.assignments.slice(0,10).map((O,ee)=>{const S=i.employees.find($=>$.id===O.employee_id),q=i.machines.find($=>$.id==O.machine_id);return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S?.fullName||S?.username||"Unknown"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:S?.role||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:q?.name||`Machine ${O.machine_id}`}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:O.shift}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(Be,{variant:"success",children:"Active"})})]},ee)})})]})})]})]}),w==="downtime"&&a.jsx(bp,{}),w==="waste-reports"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Waste Reports"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View waste tracking data for completed production orders"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(he,{onClick:de,variant:"outline",children:[a.jsx(ja,{className:"w-4 h-4 mr-2"}),"Export Waste Data"]}),a.jsxs(he,{onClick:X,variant:"outline",children:[a.jsx(Je,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(ue,{title:"Completed Orders",value:re().length,icon:ot,color:"green"}),a.jsx(ue,{title:"Orders with Waste",value:re().filter(O=>O.waste_data&&O.waste_data.length>0).length,icon:Bt,color:"yellow"}),a.jsx(ue,{title:"Total Waste Weight",value:`${re().reduce((O,ee)=>ee.waste_data?O+ee.waste_data.reduce((S,q)=>S+(q.weight||0),0):O,0).toFixed(2)} kg`,icon:ba,color:"red"}),a.jsx(ue,{title:"Waste Tracking Rate",value:`${re().length>0?Math.round(re().filter(O=>O.waste_data&&O.waste_data.length>0).length/re().length*100):0}%`,icon:Sn,color:"blue"})]}),a.jsxs(pe,{children:[a.jsxs("div",{className:"p-6 border-b",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Completed Orders - Waste Tracking"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Showing ",(i.archivedOrders||[]).length+i.orders.filter(O=>O.status==="completed").length," completed orders for selected period"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Debug: Active orders: ",i.orders.length,", Archived orders: ",(i.archivedOrders||[]).length]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Order","Product","Completion Date","Quantity","Waste Items","Total Waste","Actions"].map(O=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:O},O))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.orders.filter(O=>O.status==="completed").length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"7",className:"text-center py-10 text-gray-500",children:[a.jsx(ot,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsx("p",{children:"No completed orders found for the selected period"}),a.jsx("p",{className:"text-sm mt-2",children:"Adjust the date range to view completed orders"})]})}):i.orders.filter(O=>O.status==="completed").map((O,ee)=>{const S=O.waste_data||[],q=S.reduce((G,h)=>G+(h.weight||0),0),$=S.length>0;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.order_number}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",O.id]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:O.product_name||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:O.complete_time?Pt.formatSASTDateTime(O.complete_time):"N/A"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsxs("div",{children:[O.actual_quantity||O.quantity||0," units"]}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",O.quantity||0]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:S.length}),$?a.jsx(Be,{variant:"warning",size:"sm",children:"Has Waste"}):a.jsx(Be,{variant:"success",size:"sm",children:"No Waste"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:$?a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[q.toFixed(2)," kg"]}),a.jsx("div",{className:"text-xs text-gray-500",children:[...new Set(S.map(G=>G.item_type))].join(", ")})]}):a.jsx("span",{className:"text-gray-400",children:"No waste recorded"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs(he,{onClick:()=>J(O),variant:"outline",size:"sm",disabled:!$,children:[a.jsx(ds,{className:"w-4 h-4 mr-1"}),$?"View Waste":"No Data"]})})]},O.id||ee)})})]})})]}),i.orders.filter(O=>O.status==="completed"&&O.waste_data&&O.waste_data.length>0).length>0&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Waste by Category"}),a.jsx("div",{className:"space-y-3",children:(()=>{const O={};return i.orders.filter(ee=>ee.status==="completed"&&ee.waste_data).forEach(ee=>{ee.waste_data.forEach(S=>{const q=S.item_type||"Unknown";O[q]=(O[q]||0)+(S.weight||0)})}),Object.entries(O).map(([ee,S])=>{const q=Object.values(O).reduce(($,G)=>$+G,0)>0?Math.round(S/Object.values(O).reduce(($,G)=>$+G,0)*100):0;return a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600",children:ee}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full bg-red-500",style:{width:`${q}%`}})}),a.jsxs("span",{className:"text-sm text-gray-500 w-16",children:[S.toFixed(2),"kg"]})]})]},ee)})})()})]}),a.jsxs(pe,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent High-Waste Orders"}),a.jsx("div",{className:"space-y-3",children:i.orders.filter(O=>O.status==="completed"&&O.waste_data&&O.waste_data.length>0).sort((O,ee)=>{const S=O.waste_data.reduce(($,G)=>$+(G.weight||0),0);return ee.waste_data.reduce(($,G)=>$+(G.weight||0),0)-S}).slice(0,5).map(O=>{const ee=O.waste_data.reduce((S,q)=>S+(q.weight||0),0);return a.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:O.order_number}),a.jsx("p",{className:"text-sm text-gray-600",children:O.product_name})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-medium text-red-600",children:[ee.toFixed(2)," kg"]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[O.waste_data.length," items"]})]})]},O.id)})})]})]})]}),C&&a.jsx(Ct,{title:"Waste Report Details",onClose:()=>I(null),size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.order.order_number}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 text-sm",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-600",children:["Product: ",a.jsx("span",{className:"font-medium",children:C.order.product_name})]}),a.jsxs("p",{className:"text-gray-600",children:["Completed: ",a.jsx("span",{className:"font-medium",children:C.order.complete_time?Pt.formatSASTDateTime(C.order.complete_time):"N/A"})]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-gray-600",children:["Quantity: ",a.jsxs("span",{className:"font-medium",children:[C.order.actual_quantity||C.order.quantity," units"]})]}),a.jsxs("p",{className:"text-gray-600",children:["Target: ",a.jsxs("span",{className:"font-medium",children:[C.order.quantity," units"]})]})]})]})]}),C.wasteData.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-red-600",children:C.metrics.totalWeight.toFixed(2)}),a.jsx("p",{className:"text-sm text-red-700",children:"Total Weight (kg)"})]}),a.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:C.metrics.itemCount}),a.jsx("p",{className:"text-sm text-yellow-700",children:"Waste Items"})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:C.metrics.categories.length}),a.jsx("p",{className:"text-sm text-blue-700",children:"Categories"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Waste Items Breakdown"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Weight"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Unit"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.wasteData.map((O,ee)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:a.jsx(Be,{variant:"warning",size:"sm",children:O.item_type})}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:O.description||"No description"}),a.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900",children:O.weight||0}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:O.unit})]},ee))})]})})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ot,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Waste Recorded"}),a.jsx("p",{className:"text-gray-600",children:"This order was completed without recorded waste."})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsx(he,{onClick:()=>I(null),variant:"outline",children:"Close"})})]})})]})}function jp(){const[i,c]=x.useState(null),[u,d]=x.useState([]),[f,p]=x.useState([]),[v,M]=x.useState(!0),[w,N]=x.useState(null),[y,H]=x.useState("packaging"),[C,I]=x.useState([]),[Y,B]=x.useState(!1),[g,L]=x.useState(null),[W,ie]=x.useState(!1),V=(Q,Se="success")=>{N({message:Q,type:Se}),setTimeout(()=>N(null),3e3)},X=()=>{const Q=new Date,Se=Q.getHours(),se=Se>=6&&Se<18?"day":"night",ue=Q.toISOString().split("T")[0];return{type:se,date:ue,...{day:{start:"06:00",end:"18:00",label:"Day Shift"},night:{start:"18:00",end:"06:00",label:"Night Shift"}}[se]}},J=async()=>{try{M(!0);const Q=await fe.get("/environments");I(Q||[]);const Se=await fe.get(`/shifts/current?environment=${y}`);c(Se);const se=await fe.get(`/shifts/reports?environment=${y}&limit=10`);d(se||[]);const ue=X(),O=await fe.get(`/shifts/quantity-updates?shift_date=${ue.date}&shift_type=${ue.type}&environment=${y}`);p(O||[])}catch(Q){console.error("Failed to load shift data:",Q),V("Failed to load shift data","danger")}finally{M(!1)}},re=async()=>{try{if(ie(!0),!i?.id){V("No current shift found","warning");return}const Q=await fe.post(`/shifts/${i.id}/generate`);c(Q.report),V("Shift report generated successfully"),J()}catch(Q){console.error("Failed to generate shift report:",Q),V("Failed to generate shift report","danger")}finally{ie(!1)}},de=Q=>{const se=[["Metric","Value"],["Shift Date",Q.shift_date],["Shift Type",Q.shift_type.toUpperCase()],["Environment",Q.environment],["Total Orders",Q.total_orders||0],["Completed Orders",Q.completed_orders||0],["In Progress Orders",Q.in_progress_orders||0],["Stopped Orders",Q.stopped_orders||0],["Total Quantity Produced",Q.total_quantity_produced||0],["Total Stops",Q.total_stops||0],["Total Downtime (minutes)",Q.total_downtime_minutes||0],["OEE Percentage",`${Q.oee_percentage?.toFixed(1)||0}%`],["Efficiency Percentage",`${Q.efficiency_percentage?.toFixed(1)||0}%`],["Quality Percentage",`${Q.quality_percentage?.toFixed(1)||100}%`]].map(S=>S.join(",")).join("\\n"),ue=new Blob([se],{type:"text/csv"}),O=URL.createObjectURL(ue),ee=document.createElement("a");ee.href=O,ee.download=`shift-report-${Q.shift_date}-${Q.shift_type}-${Q.environment}.csv`,ee.click(),URL.revokeObjectURL(O),V("Shift report exported successfully")};x.useEffect(()=>{J();const Q=setInterval(J,3e4);return()=>clearInterval(Q)},[y]);const Z=X();return v?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Je,{className:"w-5 h-5 animate-spin"}),"Loading shift reports..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[w&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${w.type==="success"?"bg-green-100 text-green-800 border border-green-200":w.type==="danger"?"bg-red-100 text-red-800 border border-red-200":w.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:w.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Shift Reports"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time production shift tracking and automated reporting"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("select",{value:y,onChange:Q=>H(Q.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Environments"}),C.map(Q=>a.jsx("option",{value:Q.code,children:Q.name},Q.code))]}),a.jsxs(he,{onClick:J,variant:"outline",children:[a.jsx(Je,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),a.jsxs(pe,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),a.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Current Shift - ",Z.label]}),a.jsx(Be,{variant:"info",children:Z.date}),a.jsxs(Be,{variant:"default",children:[Z.start," - ",Z.end]})]}),a.jsxs(he,{onClick:re,disabled:W,className:"bg-blue-600 text-white hover:bg-blue-700",children:[W?a.jsx(Je,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(va,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]}),i&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.total_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Orders"})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.completed_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i.in_progress_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.stopped_orders||0}),a.jsx("div",{className:"text-sm text-gray-600",children:"Stopped"})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(i.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-sm text-gray-600",children:"Quantity Produced"})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.oee_percentage?`${i.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-sm text-gray-600",children:"OEE"})]})]})]}),a.jsxs(pe,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(St,{className:"w-5 h-5"}),"Recent Quantity Updates (",f.length,")"]}),f.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(Sn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No quantity updates recorded for current shift"})]}):a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:f.map((Q,Se)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[Q.order_number," - ",Q.product_name]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[Q.machine_name," • ",Q.updated_by_name]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"font-bold text-gray-900",children:[Q.previous_quantity," → ",Q.new_quantity]}),a.jsx("div",{className:"text-sm text-gray-500",children:new Date(Q.update_time).toLocaleTimeString()})]})]},Se))})]}),a.jsxs(pe,{className:"p-6",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(kf,{className:"w-5 h-5"}),"Shift Reports History"]}),u.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(Jt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No shift reports available"})]}):a.jsx("div",{className:"space-y-3",children:u.map(Q=>a.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[Q.shift_date," - ",Q.shift_type.toUpperCase()," Shift"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[Q.environment," • ",Q.supervisor_name||"No supervisor assigned"]})]}),a.jsxs("div",{className:"flex gap-4 text-sm",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-blue-600",children:Q.total_orders||0}),a.jsx("div",{className:"text-gray-500",children:"Orders"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-green-600",children:Q.completed_orders||0}),a.jsx("div",{className:"text-gray-500",children:"Completed"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-purple-600",children:(Q.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-gray-500",children:"Produced"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"font-bold text-orange-600",children:Q.oee_percentage?`${Q.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-gray-500",children:"OEE"})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(he,{onClick:()=>{L(Q),B(!0)},variant:"outline",size:"sm",children:[a.jsx(ds,{className:"w-4 h-4 mr-1"}),"View"]}),a.jsxs(he,{onClick:()=>de(Q),variant:"outline",size:"sm",children:[a.jsx(ja,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})},Q.id))})]}),Y&&g&&a.jsx(Ct,{isOpen:Y,onClose:()=>B(!1),title:`Shift Report - ${g.shift_date} ${g.shift_type.toUpperCase()}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-gray-900",children:g.total_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Total Orders"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:g.completed_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Completed"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-yellow-600",children:g.in_progress_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"In Progress"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-red-600",children:g.stopped_orders||0}),a.jsx("div",{className:"text-xs text-gray-600",children:"Stopped"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600",children:(g.total_quantity_produced||0).toLocaleString()}),a.jsx("div",{className:"text-xs text-gray-600",children:"Quantity Produced"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-orange-600",children:g.oee_percentage?`${g.oee_percentage.toFixed(1)}%`:"0%"}),a.jsx("div",{className:"text-xs text-gray-600",children:"OEE"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Downtime Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:["Total Stops: ",a.jsx("span",{className:"font-medium",children:g.total_stops||0})]}),a.jsxs("div",{children:["Total Downtime: ",a.jsxs("span",{className:"font-medium",children:[g.total_downtime_minutes||0," minutes"]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Machine Utilization"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:["Active Machines: ",a.jsx("span",{className:"font-medium",children:g.total_machines_active||0})]}),a.jsxs("div",{children:["Available Machines: ",a.jsx("span",{className:"font-medium",children:g.total_machines_available||0})]})]})]}),g.summary_notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Summary Notes"}),a.jsx("p",{className:"text-sm text-gray-700",children:g.summary_notes})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs(he,{onClick:()=>de(g),variant:"outline",children:[a.jsx(ja,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),a.jsx(he,{onClick:()=>B(!1),children:"Close"})]})]})})]})}function Np(){const[i,c]=x.useState([]),[u,d]=x.useState(!0),[f,p]=x.useState(!1),[v,M]=x.useState(!1),[w,N]=x.useState(null),[y,H]=x.useState({username:"",email:"",password:"",confirmPassword:"",role:"operator"}),[C,I]=x.useState("");Os();const{user:Y}=us(),B=async()=>{d(!0);try{const X=await fe.get("/users");c(X)}catch(X){console.error("Failed to load users:",X)}finally{d(!1)}};x.useEffect(()=>{B()},[]);const g=()=>{H({username:"",email:"",password:"",confirmPassword:"",role:"operator"}),I("")},L=async X=>{if(X.preventDefault(),I(""),y.password!==y.confirmPassword)return I("Passwords do not match");try{await fe.post("/users",{username:y.username,email:y.email,password:y.password,role:y.role}),p(!1),g(),B()}catch(J){I(J.message||"Failed to add user")}},W=async X=>{X.preventDefault(),I("");try{await fe.put(`/users/${w.id}`,{email:y.email,role:y.role}),M(!1),g(),B()}catch(J){I(J.message||"Failed to update user")}},ie=async X=>{if(X===Y.id)return alert("You cannot delete your own account.");if(window.confirm("Are you sure you want to delete this user?"))try{await fe.delete(`/users/${X}`),B()}catch(J){alert("Failed to delete user: "+J.message)}},V=X=>{const J={admin:"bg-purple-100 text-purple-800",supervisor:"bg-blue-100 text-blue-800",operator:"bg-green-100 text-green-800",viewer:"bg-gray-100 text-gray-800"};return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${J[X]||""}`,children:X.toUpperCase()})};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"User Management"}),a.jsx(Tn,{})]}),Y?.role==="admin"&&a.jsx("button",{onClick:()=>{g(),p(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Add New User"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["User","Email","Role","Status","Actions"].map(X=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:X},X))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(X=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.username}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:V(X.role)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.is_active?"Active":"Inactive"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:Y?.role==="admin"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{N(X),H(X),M(!0)},className:"text-blue-600 hover:text-blue-800",children:"Edit"}),a.jsx("button",{onClick:()=>ie(X.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})})]},X.id))})]})}),f&&a.jsx(Ct,{title:"Add New User",onClose:()=>p(!1),children:a.jsxs("form",{onSubmit:L,className:"space-y-4",children:[C&&a.jsx("div",{className:"p-2 bg-red-100 text-red-700 rounded",children:C}),a.jsx("input",{type:"text",placeholder:"Username",value:y.username,onChange:X=>H({...y,username:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"email",placeholder:"Email",value:y.email,onChange:X=>H({...y,email:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"password",placeholder:"Password",value:y.password,onChange:X=>H({...y,password:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsx("input",{type:"password",placeholder:"Confirm Password",value:y.confirmPassword,onChange:X=>H({...y,confirmPassword:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0}),a.jsxs("select",{value:y.role,onChange:X=>H({...y,role:X.target.value}),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"admin",children:"Administrator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>p(!1),children:"Cancel"}),a.jsx("button",{type:"submit",children:"Add User"})]})]})}),v&&w&&a.jsx(Ct,{title:"Edit User",onClose:()=>M(!1),children:a.jsxs("form",{onSubmit:W,className:"space-y-4",children:[C&&a.jsx("div",{className:"p-2 bg-red-100 text-red-700 rounded",children:C}),a.jsxs("div",{children:[a.jsx("label",{children:"Username"}),a.jsx("input",{type:"text",value:y.username,className:"w-full px-3 py-2 border rounded bg-gray-100",disabled:!0})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Email"}),a.jsx("input",{type:"email",value:y.email,onChange:X=>H({...y,email:X.target.value}),className:"w-full px-3 py-2 border rounded",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{children:"Role"}),a.jsxs("select",{value:y.role,onChange:X=>H({...y,role:X.target.value}),className:"w-full px-3 py-2 border rounded",children:[a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"admin",children:"Administrator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>M(!1),children:"Cancel"}),a.jsx("button",{type:"submit",children:"Update User"})]})]})})]})}const xo=({title:i,children:c})=>a.jsxs("div",{className:"bg-white shadow rounded-lg",children:[a.jsx("div",{className:"px-4 py-5 border-b border-gray-200 sm:px-6",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i})}),a.jsx("div",{className:"px-4 py-5 sm:p-6",children:c})]}),wp=()=>{const{user:i,checkAuth:c}=us(),[u,d]=x.useState({email:"",fullName:"",phone:""}),[f,p]=x.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[v,M]=x.useState({text:"",type:"success"}),[w,N]=x.useState(!1),[y,H]=x.useState({});x.useEffect(()=>{i&&d({email:i.email||"",fullName:i.fullName||"",phone:i.phone||""})},[i]);const C=x.useCallback(L=>{const W={};return L.email?.trim()||(W.email="Email is required"),L.fullName?.trim()||(W.fullName="Full name is required"),L.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.email)&&(W.email="Please enter a valid email address"),W},[]),I=x.useCallback(async L=>{L.preventDefault(),M({text:"",type:"success"}),H({});const W=C(u);if(Object.keys(W).length>0){H(W);return}N(!0);try{await fe.put("/settings/profile",u),M({text:"Profile updated successfully!",type:"success"}),await c()}catch(ie){M({text:ie.response?.data?.message||"Failed to update profile",type:"error"})}finally{N(!1)}},[u,C,c]),Y=x.useCallback(L=>{if(!L)return{score:0,text:"",color:""};let W=0;const ie={length:L.length>=8,lowercase:/[a-z]/.test(L),uppercase:/[A-Z]/.test(L),numbers:/\d/.test(L),special:/[!@#$%^&*(),.?":{}|<>]/.test(L)};return W=Object.values(ie).filter(Boolean).length,{score:W,...{0:{text:"",color:""},1:{text:"Very Weak",color:"text-red-600"},2:{text:"Weak",color:"text-red-500"},3:{text:"Fair",color:"text-yellow-500"},4:{text:"Good",color:"text-blue-500"},5:{text:"Strong",color:"text-green-500"}}[W],checks:ie}},[]),B=x.useCallback(L=>{const W={};L.currentPassword||(W.currentPassword="Current password is required"),L.newPassword||(W.newPassword="New password is required");const ie=Y(L.newPassword);return L.newPassword&&ie.score<3&&(W.newPassword="Password is too weak. Please include uppercase, lowercase, numbers, and special characters."),L.newPassword!==L.confirmPassword&&(W.confirmPassword="Passwords do not match"),W},[Y]),g=x.useCallback(async L=>{L.preventDefault(),M({text:"",type:"success"}),H({});const W=B(f);if(Object.keys(W).length>0){H(W);return}N(!0);try{await fe.post("/settings/change-password",{currentPassword:f.currentPassword,newPassword:f.newPassword}),M({text:"Password changed successfully!",type:"success"}),p({currentPassword:"",newPassword:"",confirmPassword:""})}catch(ie){M({text:ie.response?.data?.message||"Failed to change password",type:"error"})}finally{N(!1)}},[f,B]);return a.jsxs("div",{className:"space-y-6",children:[v.text&&a.jsx("div",{className:`p-3 rounded ${v.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.text}),a.jsx(xo,{title:"Profile Information",children:a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("input",{id:"fullName",type:"text",value:u.fullName,onChange:L=>d({...u,fullName:L.target.value}),className:`mt-1 block w-full border rounded-md shadow-sm px-3 py-2 ${y.fullName?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-describedby":y.fullName?"fullName-error":void 0,disabled:w}),y.fullName&&a.jsx("p",{id:"fullName-error",className:"mt-1 text-sm text-red-600",children:y.fullName})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),a.jsx("input",{id:"phone",type:"tel",value:u.phone,onChange:L=>d({...u,phone:L.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm px-3 py-2 focus:border-blue-500 focus:ring-blue-500",disabled:w})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("input",{id:"email",type:"email",value:u.email,onChange:L=>d({...u,email:L.target.value}),className:`mt-1 block w-full border rounded-md shadow-sm px-3 py-2 ${y.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`,"aria-describedby":y.email?"email-error":void 0,disabled:w,required:!0}),y.email&&a.jsx("p",{id:"email-error",className:"mt-1 text-sm text-red-600",children:y.email})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[w&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w?"Updating...":"Update Profile"]})})]})}),a.jsx(xo,{title:"Change Password",children:a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),a.jsx("input",{id:"currentPassword",type:"password",value:f.currentPassword,onChange:L=>p({...f,currentPassword:L.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${y.currentPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":y.currentPassword?"currentPassword-error":void 0,disabled:w,required:!0}),y.currentPassword&&a.jsx("p",{id:"currentPassword-error",className:"mt-1 text-sm text-red-600",children:y.currentPassword})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),a.jsx("input",{id:"newPassword",type:"password",value:f.newPassword,onChange:L=>p({...f,newPassword:L.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${y.newPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":y.newPassword?"newPassword-error":"newPassword-help",disabled:w,required:!0}),(()=>{const L=Y(f.newPassword);return a.jsxs("div",{className:"mt-2",children:[f.newPassword&&a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-xs text-gray-600",children:"Password strength:"}),a.jsx("span",{className:`text-xs font-medium ${L.color}`,children:L.text})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${L.score===1?"bg-red-400 w-1/5":L.score===2?"bg-red-400 w-2/5":L.score===3?"bg-yellow-400 w-3/5":L.score===4?"bg-blue-400 w-4/5":L.score===5?"bg-green-400 w-full":"w-0"}`})}),a.jsx("div",{className:"mt-2 text-xs text-gray-600",children:a.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[a.jsx("span",{className:L.checks?.length?"text-green-600":"text-gray-400",children:"✓ 8+ characters"}),a.jsx("span",{className:L.checks?.uppercase?"text-green-600":"text-gray-400",children:"✓ Uppercase"}),a.jsx("span",{className:L.checks?.lowercase?"text-green-600":"text-gray-400",children:"✓ Lowercase"}),a.jsx("span",{className:L.checks?.numbers?"text-green-600":"text-gray-400",children:"✓ Numbers"}),a.jsx("span",{className:L.checks?.special?"text-green-600":"text-gray-400",children:"✓ Special chars"})]})})]}),a.jsx("p",{id:"newPassword-help",className:"text-xs text-gray-500",children:"Include uppercase, lowercase, numbers, and special characters"}),y.newPassword&&a.jsx("p",{id:"newPassword-error",className:"mt-1 text-sm text-red-600",children:y.newPassword})]})})()]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),a.jsx("input",{id:"confirmPassword",type:"password",value:f.confirmPassword,onChange:L=>p({...f,confirmPassword:L.target.value}),className:`w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500 ${y.confirmPassword?"border-red-300":"border-gray-300"}`,"aria-describedby":y.confirmPassword?"confirmPassword-error":void 0,disabled:w,required:!0}),y.confirmPassword&&a.jsx("p",{id:"confirmPassword-error",className:"mt-1 text-sm text-red-600",children:y.confirmPassword})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:w,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[w&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),w?"Changing...":"Change Password"]})})]})})]})},Sp=()=>{const[i,c]=x.useState({maintenanceMode:!1,sessionTimeout:30}),[u,d]=x.useState(!0),[f,p]=x.useState({text:"",type:"success"}),[v,M]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const y=await fe.get("/settings/system");c(H=>({...H,...y}))}catch(y){console.error("Failed to load system settings:",y)}finally{d(!1)}})()},[]);const w=x.useCallback(async N=>{N.preventDefault(),p({text:"",type:"success"}),M(!0);try{await fe.put("/settings/system",i),p({text:"Settings saved successfully!",type:"success"})}catch(y){p({text:y.response?.data?.message||"Failed to save settings",type:"error"})}finally{M(!1)}},[i]);return u?a.jsxs("div",{className:"flex items-center justify-center p-8",role:"status","aria-label":"Loading system settings",children:[a.jsxs("svg",{className:"animate-spin h-6 w-6 text-blue-500 mr-2",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading system settings..."]}):a.jsxs(xo,{title:"System Configuration",children:[f.text&&a.jsx("div",{className:`p-3 mb-4 rounded ${f.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,role:"alert","aria-live":"polite",children:f.text}),a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"maintenanceMode",className:"font-medium text-gray-700",children:"Maintenance Mode"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Prevents non-admins from accessing the system."})]}),a.jsx("input",{id:"maintenanceMode",type:"checkbox",checked:i.maintenanceMode,onChange:N=>c({...i,maintenanceMode:N.target.checked}),className:"h-4 w-4 rounded text-blue-600 border-gray-300"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"sessionTimeout",className:"block text-sm font-medium text-gray-700",children:"Session Timeout (minutes)"}),a.jsx("input",{id:"sessionTimeout",type:"number",value:i.sessionTimeout,onChange:N=>c({...i,sessionTimeout:parseInt(N.target.value)||30}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),a.jsx("div",{className:"flex justify-end pt-4 border-t",children:a.jsxs("button",{type:"submit",disabled:v,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[v&&a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),v?"Saving...":"Save System Settings"]})})]})]})};function _p(){const[i,c]=x.useState("profile"),{user:u}=us(),d=x.useMemo(()=>[{id:"profile",label:"Profile"},u?.role==="admin"&&{id:"system",label:"System"}].filter(Boolean),[u?.role]),f=x.useCallback(p=>{c(p)},[]);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:d.map(p=>a.jsx("button",{onClick:()=>f(p.id),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i===p.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,role:"tab","aria-selected":i===p.id,"aria-controls":`${p.id}-panel`,children:p.label},p.id))})}),a.jsxs("div",{role:"tabpanel",children:[i==="profile"&&a.jsx("div",{id:"profile-panel","aria-labelledby":"profile-tab",children:a.jsx(wp,{})}),i==="system"&&u?.role==="admin"&&a.jsx("div",{id:"system-panel","aria-labelledby":"system-tab",children:a.jsx(Sp,{})})]})]})}function Ep(){const[i,c]=x.useState([]),[u,d]=x.useState(!0),[f,p]=x.useState(!1),[v,M]=x.useState(null),[w,N]=x.useState(""),[y,H]=x.useState("all"),[C,I]=x.useState("overview"),[Y,B]=x.useState([]),[g,L]=x.useState(!1),[W,ie]=x.useState(null),[V,X]=x.useState({name:"",code:"",description:"",color:"blue",machine_types:[]}),[J,re]=x.useState([]),[de,Z]=x.useState(!1),[Q,Se]=x.useState(null),[se,ue]=x.useState({name:"",description:"",category:"Production",specifications:{}}),[O,ee]=x.useState(!1),[S,q]=x.useState(!1),[$,G]=x.useState(null),[h,U]=x.useState({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),[P,ae]=x.useState({backup_frequency:"daily",session_timeout:24,max_login_attempts:5,maintenance_mode:!1}),le=(_,me="success")=>{M({message:_,type:me}),setTimeout(()=>M(null),3e3)},je=async(_=!1)=>{_?p(!0):d(!0);try{const me=await fe.get("/users");c(me)}catch(me){console.error("Failed to load users:",me),le("Failed to load users","danger")}finally{d(!1),p(!1)}},ce=async()=>{try{const _=await fe.get("/environments");console.log("Loaded environments:",_),B(_)}catch(_){console.error("Failed to load environments:",_),le("Failed to load environments","danger"),B([])}},Me=async()=>{try{const _=await fe.get("/machine-types");console.log("Loaded machine types:",_),re(_)}catch(_){console.error("Failed to load machine types:",_),re([])}},Ee=async(_=!1)=>{_?p(!0):d(!0);try{await Promise.all([je(!1),ce(),Me()])}catch(me){console.error("Failed to load data:",me)}finally{d(!1),p(!1)}},Xe=()=>{je(!0)};x.useEffect(()=>{Ee()},[]);const dt=async _=>{_.preventDefault();try{await fe.post("/users",h),ee(!1),U({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),ce(),le("User created successfully")}catch(me){le("Failed to create user: "+me.message,"danger")}},ft=async _=>{_.preventDefault();try{await fe.put(`/users/${$.id}`,h),ee(!1),G(null),U({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"}),ce(),le("User updated successfully")}catch(me){le("Failed to update user: "+me.message,"danger")}},Ot=async _=>{if(window.confirm("Are you sure you want to delete this user?"))try{await fe.delete(`/users/${_}`),ce(),le("User deleted successfully")}catch(me){le("Failed to delete user: "+me.message,"danger")}},Dt=_=>{G(_),U({username:_.username,email:_.email,password:"",role:_.role,employee_code:_.employee_code||"",company:_.company||"Workforce"}),ee(!0)},Yt=async _=>{_.preventDefault();try{await fe.post("/environments",V),L(!1),X({name:"",code:"",description:"",color:"blue",machine_types:[]}),ce(),le("Environment created successfully")}catch(me){le("Failed to create environment: "+me.message,"danger")}},Ne=async _=>{if(_.preventDefault(),!W||!W.id){le("No environment selected for editing","danger");return}try{console.log("Editing environment:",W.id,V),await fe.put(`/environments/${W.id}`,V),L(!1),ie(null),X({name:"",code:"",description:"",color:"blue",machine_types:[]}),ce(),le("Environment updated successfully")}catch(me){console.error("Edit environment error:",me),le("Failed to update environment: "+(me.response?.data?.error||me.message),"danger")}},Le=async _=>{if(window.confirm("Are you sure you want to delete this environment? This action cannot be undone."))try{await fe.delete(`/environments/${_}`),ce(),le("Environment deleted successfully")}catch(me){le("Failed to delete environment: "+me.message,"danger")}},ke=_=>{ie(_);let me=[];try{me=typeof _.machine_types=="string"?JSON.parse(_.machine_types):_.machine_types||[]}catch(st){console.error("Failed to parse machine types:",st),me=[]}X({name:_.name,code:_.code,description:_.description||"",color:_.color||"blue",machine_types:me}),L(!0)},kt=async _=>{_.preventDefault();try{await fe.post("/machine-types",se),Z(!1),ue({name:"",description:"",category:"Production",specifications:{}}),Me(),le("Machine type created successfully")}catch(me){le("Failed to create machine type: "+(me.response?.data?.error||me.message),"danger")}},E=async _=>{if(_.preventDefault(),!Q?.id){le("Invalid machine type selected","danger");return}try{await fe.put(`/machine-types/${Q.id}`,se),Z(!1),Se(null),ue({name:"",description:"",category:"Production",specifications:{}}),Me(),le("Machine type updated successfully")}catch(me){console.error("Edit machine type error:",me),le("Failed to update machine type: "+(me.response?.data?.error||me.message),"danger")}},oe=async _=>{if(window.confirm("Are you sure you want to delete this machine type? This action cannot be undone."))try{await fe.delete(`/machine-types/${_}`),Me(),le("Machine type deleted successfully")}catch(me){le("Failed to delete machine type: "+(me.response?.data?.error||me.message),"danger")}},ye=_=>{Se(_),ue({name:_.name,description:_.description||"",category:_.category||"Production",specifications:_.specifications||{}}),Z(!0)},yt=async _=>{try{const me={name:_,description:"Created for environment management",category:"Production"};await fe.post("/machine-types",me),Me(),le(`Machine type "${_}" created successfully`)}catch(me){console.error("Error creating machine type:",me),le(`Failed to create machine type "${_}": `+(me.response?.data?.error||me.message),"danger")}},Rt=x.useMemo(()=>{let _=i;return y!=="all"&&(_=_.filter(me=>me.role===y)),w&&(_=_.filter(me=>me.username.toLowerCase().includes(w.toLowerCase())||me.email.toLowerCase().includes(w.toLowerCase())||me.employee_code&&me.employee_code.toLowerCase().includes(w.toLowerCase()))),_},[i,y,w]),b=x.useMemo(()=>{const _=i.length,me=i.filter(vt=>vt.is_active!==0).length,st=i.filter(vt=>vt.role==="admin").length,bt=i.filter(vt=>vt.role==="supervisor").length,Mt=i.filter(vt=>vt.role==="operator").length,ma=i.filter(vt=>vt.role==="viewer").length;return{total:_,active:me,admins:st,supervisors:bt,operators:Mt,viewers:ma}},[i]),ne=_=>{const st={admin:{variant:"danger",icon:Qr},supervisor:{variant:"warning",icon:Ha},operator:{variant:"info",icon:Ie},viewer:{variant:"default",icon:ds}}[_]||{variant:"default",icon:Ie},bt=st.icon;return a.jsxs(Be,{variant:st.variant,children:[a.jsx(bt,{className:"w-3 h-3 mr-1"}),_.toUpperCase()]})},Ve=_=>a.jsxs(Be,{variant:_?"success":"danger",children:[_?a.jsx(Ha,{className:"w-3 h-3 mr-1"}):a.jsx(vg,{className:"w-3 h-3 mr-1"}),_?"ACTIVE":"INACTIVE"]}),Ke=()=>a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ie,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:b.total})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"w-5 h-5 text-green-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Active"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.active})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"w-5 h-5 text-red-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Admins"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:b.admins})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"w-5 h-5 text-yellow-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Supervisors"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:b.supervisors})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ie,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Operators"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:b.operators})]})]})}),a.jsx(pe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ds,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Viewers"}),a.jsx("p",{className:"text-2xl font-bold text-gray-600",children:b.viewers})]})]})})]}),Pe=({title:_,description:me,icon:st,onClick:bt,color:Mt="gray"})=>{const ma={blue:"border-blue-200 bg-blue-50 hover:bg-blue-100 text-blue-600",green:"border-green-200 bg-green-50 hover:bg-green-100 text-green-600",yellow:"border-yellow-200 bg-yellow-50 hover:bg-yellow-100 text-yellow-600",red:"border-red-200 bg-red-50 hover:bg-red-100 text-red-600",purple:"border-purple-200 bg-purple-50 hover:bg-purple-100 text-purple-600",gray:"border-gray-200 bg-gray-50 hover:bg-gray-100 text-gray-600"};return a.jsx(pe,{className:`p-6 border-l-4 cursor-pointer transition-all duration-300 hover:shadow-lg ${ma[Mt]}`,onClick:bt,children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(st,{className:"w-8 h-8"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:_}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:me})]})]})})};return u&&i.length===0?a.jsx("div",{className:"p-6 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-500",children:[a.jsx(Je,{className:"w-5 h-5 animate-spin"}),"Loading admin panel..."]})}):a.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[v&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${v.type==="success"?"bg-green-100 text-green-800 border border-green-200":v.type==="danger"?"bg-red-100 text-red-800 border border-red-200":v.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:v.message}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Panel"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system settings, users, and administration"})]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(he,{onClick:Xe,disabled:f,variant:"outline",children:[a.jsx(Je,{className:`w-4 h-4 mr-2 ${f?"animate-spin":""}`}),"Refresh"]})})]}),a.jsx(pe,{className:"p-1",children:a.jsx("div",{className:"flex gap-1",children:[{id:"overview",label:"Overview",icon:va},{id:"users",label:"User Management",icon:Ie},{id:"environments",label:"Environments",icon:Kt},{id:"machine-types",label:"Machine Types",icon:bl},{id:"settings",label:"System Settings",icon:Kt},{id:"tools",label:"Admin Tools",icon:bl}].map(_=>{const me=_.icon;return a.jsxs("button",{onClick:()=>I(_.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${C===_.id?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[a.jsx(me,{className:"w-4 h-4"}),_.label]},_.id)})})}),C==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(Ke,{}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Pe,{title:"User Management",description:"Add, edit, and manage user accounts",icon:Ie,onClick:()=>I("users"),color:"blue"}),a.jsx(Pe,{title:"System Settings",description:"Configure system parameters",icon:Kt,onClick:()=>I("settings"),color:"green"}),a.jsx(Pe,{title:"Database Backup",description:"Backup and restore data",icon:Rx,onClick:()=>le("Backup functionality coming soon","info"),color:"yellow"}),a.jsx(Pe,{title:"Activity Logs",description:"View system activity and logs",icon:St,onClick:()=>le("Activity logs coming soon","info"),color:"purple"}),a.jsx(Pe,{title:"System Reports",description:"Generate comprehensive reports",icon:va,onClick:()=>le("Reports functionality coming soon","info"),color:"red"}),a.jsx(Pe,{title:"Maintenance Tools",description:"System maintenance and utilities",icon:bl,onClick:()=>I("tools"),color:"gray"})]})]}),C==="users"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx(Ke,{}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),a.jsxs(he,{onClick:()=>ee(!0),children:[a.jsx(uo,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:w,onChange:_=>N(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Xr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{value:y,onChange:_=>H(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsx("div",{className:"flex items-center justify-center md:justify-start",children:a.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",Rt.length," of ",i.length," users"]})})]})}),a.jsx(pe,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsx("tr",{children:["Username","Email","Employee Code","Role","Status","Last Login","Actions"].map(_=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:_},_))})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Rt.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:"7",className:"text-center py-10",children:[a.jsx(Ie,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 mb-2",children:"No users found"}),a.jsxs(he,{onClick:()=>ee(!0),size:"sm",children:[a.jsx(uo,{className:"w-4 h-4 mr-2"}),"Add First User"]})]})}):Rt.map(_=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.username})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:_.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:_.employee_code||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:ne(_.role)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ve(_.is_active)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:_.last_login?new Date(_.last_login).toLocaleDateString():"Never"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[a.jsx(he,{onClick:()=>Dt(_),size:"sm",variant:"outline",children:a.jsx(wn,{className:"w-4 h-4"})}),a.jsx(he,{onClick:()=>Ot(_.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:a.jsx(_n,{className:"w-4 h-4"})})]})]},_.id))})]})})})]}),C==="environments"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Environment Management"}),a.jsx("p",{className:"text-gray-600",children:"Configure production environments and their machine types"})]}),a.jsxs(he,{onClick:()=>{X({name:"",code:"",description:"",color:"blue",machine_types:[]}),ie(null),L(!0)},children:[a.jsx(ia,{className:"w-4 h-4 mr-2"}),"Add Environment"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Y.length===0?a.jsxs(pe,{className:"col-span-full p-12 text-center",children:[a.jsx(Kt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No environments configured"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first production environment to get started"}),a.jsxs(he,{onClick:()=>{X({name:"",code:"",description:"",color:"blue",machine_types:[]}),ie(null),L(!0)},children:[a.jsx(ia,{className:"w-4 h-4 mr-2"}),"Add First Environment"]})]}):Y.map(_=>a.jsxs(pe,{className:`p-6 border-l-4 border-${_.color||"blue"}-200 hover:shadow-lg transition-all duration-300`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:_.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-2 uppercase font-mono",children:_.code}),_.description&&a.jsx("p",{className:"text-sm text-gray-600",children:_.description})]}),a.jsx(Be,{variant:_.color==="blue"?"info":_.color==="green"?"success":_.color==="yellow"?"warning":"default",children:_.code})]}),(()=>{let me=[];try{me=typeof _.machine_types=="string"?JSON.parse(_.machine_types):_.machine_types||[]}catch(st){console.error("Failed to parse machine types:",st),me=[]}return me&&me.length>0&&a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Machine Types:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[me.slice(0,3).map(st=>{const bt=J.find(Mt=>Mt.type===st);return a.jsxs("div",{className:"relative group",children:[a.jsxs(Be,{variant:"default",size:"sm",className:"cursor-help",children:[st,bt&&a.jsx("span",{className:"ml-1 px-1 py-0.5 text-xs bg-blue-200 text-blue-800 rounded-full",children:bt.machine_count})]}),bt&&bt.machines&&Array.isArray(bt.machines)&&a.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity z-10 whitespace-nowrap",children:bt.machines.filter(Mt=>Mt&&Mt!==null).join(", ")})]},st)}),me.length>3&&a.jsxs(Be,{variant:"default",size:"sm",children:["+",me.length-3," more"]})]})]})})(),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(he,{onClick:()=>ke(_),variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(wn,{className:"w-4 h-4 mr-1"}),"Edit"]}),a.jsx(he,{onClick:()=>Le(_.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",children:a.jsx(_n,{className:"w-4 h-4"})})]})]},_.id))})]}),C==="machine-types"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Machine Types Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage machine types used throughout the production system"})]}),a.jsxs(he,{onClick:()=>{ue({name:"",description:"",category:"Production",specifications:{}}),Se(null),Z(!0)},children:[a.jsx(ia,{className:"w-4 h-4 mr-2"}),"Add Machine Type"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:J.length===0?a.jsxs(pe,{className:"col-span-full p-12 text-center",children:[a.jsx(bl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No machine types configured"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first machine type to get started"}),a.jsxs(he,{onClick:()=>{ue({name:"",description:"",category:"Production",specifications:{}}),Se(null),Z(!0)},children:[a.jsx(ia,{className:"w-4 h-4 mr-2"}),"Add First Machine Type"]})]}):J.map(_=>a.jsxs(pe,{className:"p-6 hover:shadow-lg transition-all duration-300",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:_.name}),a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:_.category}),_.description&&a.jsx("p",{className:"text-sm text-gray-600",children:_.description})]}),a.jsxs(Be,{variant:"info",children:[_.machine_count||0," machines"]})]}),_.machines&&Array.isArray(_.machines)&&_.machines.length>0&&a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Machines:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.machines.filter(me=>me&&me!==null).slice(0,3).map((me,st)=>a.jsx(Be,{variant:"default",size:"sm",children:me},st)),_.machines.length>3&&a.jsxs(Be,{variant:"default",size:"sm",children:["+",_.machines.length-3," more"]})]})]}),a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(he,{onClick:()=>ye(_),variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(wn,{className:"w-4 h-4 mr-1"}),"Edit"]}),a.jsx(he,{onClick:()=>oe(_.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",disabled:_.machine_count>0,children:a.jsx(_n,{className:"w-4 h-4"})})]}),_.machine_count>0&&a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cannot delete: machines are using this type"})]},_.id))})]}),C==="settings"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"System Settings"}),a.jsx("p",{className:"text-gray-600",children:"Configure system parameters and preferences"})]}),a.jsx(pe,{className:"p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Backup Frequency"}),a.jsxs("select",{value:P.backup_frequency,onChange:_=>ae({...P,backup_frequency:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"hourly",children:"Hourly"}),a.jsx("option",{value:"daily",children:"Daily"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"monthly",children:"Monthly"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Timeout (hours)"}),a.jsx("input",{type:"number",value:P.session_timeout,onChange:_=>ae({...P,session_timeout:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"72"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Login Attempts"}),a.jsx("input",{type:"number",value:P.max_login_attempts,onChange:_=>ae({...P,max_login_attempts:parseInt(_.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"3",max:"10"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maintenance Mode"}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("button",{onClick:()=>ae({...P,maintenance_mode:!P.maintenance_mode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${P.maintenance_mode?"bg-blue-600":"bg-gray-200"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${P.maintenance_mode?"translate-x-6":"translate-x-1"}`})}),a.jsx("span",{className:"text-sm text-gray-600",children:P.maintenance_mode?"Enabled":"Disabled"})]})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsxs(he,{onClick:()=>le("Settings saved successfully"),children:[a.jsx(Nn,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})})]}),C==="tools"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Admin Tools"}),a.jsx("p",{className:"text-gray-600",children:"System maintenance and administrative utilities"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsx(Pe,{title:"Export Users",description:"Export user data to CSV/Excel",icon:ja,onClick:()=>le("Export functionality coming soon","info"),color:"blue"}),a.jsx(Pe,{title:"Import Users",description:"Import users from CSV/Excel",icon:Uf,onClick:()=>le("Import functionality coming soon","info"),color:"green"}),a.jsx(Pe,{title:"Clear Cache",description:"Clear system cache and temporary files",icon:Je,onClick:()=>le("Cache cleared successfully"),color:"yellow"}),a.jsx(Pe,{title:"System Health",description:"Check system health and status",icon:St,onClick:()=>le("System health check completed","success"),color:"purple"}),a.jsx(Pe,{title:"Security Audit",description:"Run security audit and checks",icon:Qr,onClick:()=>le("Security audit initiated","info"),color:"red"}),a.jsx(Pe,{title:"Log Analysis",description:"Analyze system logs and errors",icon:va,onClick:()=>le("Log analysis coming soon","info"),color:"gray"})]})]}),g&&a.jsx(Ct,{title:W?"Edit Environment":"Add New Environment",onClose:()=>{L(!1),ie(null),X({name:"",code:"",description:"",color:"blue",machine_types:[]})},children:a.jsxs("form",{onSubmit:W?Ne:Yt,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Name"}),a.jsx("input",{type:"text",placeholder:"e.g. Blending Department",value:V.name,onChange:_=>X({...V,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Environment Code"}),a.jsx("input",{type:"text",placeholder:"e.g. blending",value:V.code,onChange:_=>X({...V,code:_.target.value.toLowerCase().replace(/\s+/g,"_")}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used internally (lowercase, no spaces)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),a.jsx("textarea",{placeholder:"Brief description of this environment",value:V.description,onChange:_=>X({...V,description:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),a.jsxs("select",{value:V.color,onChange:_=>X({...V,color:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"blue",children:"Blue"}),a.jsx("option",{value:"green",children:"Green"}),a.jsx("option",{value:"yellow",children:"Yellow"}),a.jsx("option",{value:"purple",children:"Purple"}),a.jsx("option",{value:"red",children:"Red"}),a.jsx("option",{value:"gray",children:"Gray"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Types"}),a.jsx("div",{className:"space-y-3",children:J.length>0?J.map(_=>a.jsxs("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",id:`machine-type-${_.name||_.type}`,checked:V.machine_types.includes(_.name||_.type),onChange:me=>{const st=me.target.checked,bt=_.name||_.type,Mt=st?[...V.machine_types,bt]:V.machine_types.filter(ma=>ma!==bt);X({...V,machine_types:Mt})},className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{htmlFor:`machine-type-${_.name||_.type}`,className:"block text-sm font-medium text-gray-900 cursor-pointer",children:_.name||_.type}),a.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:[_.machine_count||0," machine",(_.machine_count||0)!==1?"s":""]}),a.jsx("span",{className:"text-gray-400",children:_.machines&&Array.isArray(_.machines)&&_.machines.length>0?a.jsxs(a.Fragment,{children:[_.machines.filter(me=>me&&me!==null).slice(0,2).join(", "),_.machines.length>2&&` +${_.machines.length-2} more`]}):"No machines using this type"})]})]})]},_.name||_.type)):a.jsxs("div",{className:"text-center py-4 text-gray-500",children:[a.jsx(Kt,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{className:"text-sm",children:"Loading machine types..."})]})}),a.jsx("div",{className:"mt-4 p-3 border-2 border-dashed border-gray-300 rounded-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"text",placeholder:"Type new machine type name and press Enter",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onKeyPress:_=>{if(_.key==="Enter"&&_.target.value.trim()){const me=_.target.value.trim();V.machine_types.includes(me)||X({...V,machine_types:[...V.machine_types,me]}),yt(me),_.target.value=""}}}),a.jsx("span",{className:"text-xs text-gray-500",children:"Press Enter to add"})]})}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select existing machine types or add new ones by typing above"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(he,{type:"button",onClick:()=>{L(!1),ie(null),X({name:"",code:"",description:"",color:"blue",machine_types:[]})},variant:"outline",children:"Cancel"}),a.jsxs(he,{type:"submit",children:[W?a.jsx(Nn,{className:"w-4 h-4 mr-2"}):a.jsx(ia,{className:"w-4 h-4 mr-2"}),W?"Update Environment":"Create Environment"]})]})]})}),de&&a.jsx(Ct,{title:Q?"Edit Machine Type":"Add New Machine Type",onClose:()=>{Z(!1),Se(null),ue({name:"",description:"",category:"Production",specifications:{}})},children:a.jsxs("form",{onSubmit:Q?E:kt,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Machine Type Name"}),a.jsx("input",{type:"text",placeholder:"e.g. Bulk Line, Processing Unit",value:se.name,onChange:_=>ue({...se,name:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),a.jsxs("select",{value:se.category,onChange:_=>ue({...se,category:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"Production",children:"Production"}),a.jsx("option",{value:"Processing",children:"Processing"}),a.jsx("option",{value:"Packaging",children:"Packaging"}),a.jsx("option",{value:"Quality Control",children:"Quality Control"}),a.jsx("option",{value:"Maintenance",children:"Maintenance"}),a.jsx("option",{value:"Utility",children:"Utility"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{placeholder:"Describe the machine type and its capabilities",value:se.description,onChange:_=>ue({...se,description:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(he,{type:"button",onClick:()=>{Z(!1),Se(null),ue({name:"",description:"",category:"Production",specifications:{}})},variant:"outline",children:"Cancel"}),a.jsxs(he,{type:"submit",children:[Q?a.jsx(Nn,{className:"w-4 h-4 mr-2"}):a.jsx(ia,{className:"w-4 h-4 mr-2"}),Q?"Update Machine Type":"Create Machine Type"]})]})]})}),O&&a.jsx(Ct,{title:$?"Edit User":"Add New User",onClose:()=>{ee(!1),G(null),U({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"})},children:a.jsxs("form",{onSubmit:$?ft:dt,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),a.jsx("input",{type:"text",placeholder:"Username",value:h.username,onChange:_=>U({...h,username:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee Code"}),a.jsx("input",{type:"text",placeholder:"1234",value:h.employee_code,onChange:_=>U({...h,employee_code:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",placeholder:"user@example.com",value:h.email,onChange:_=>U({...h,email:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",$&&"(leave blank to keep current)"]}),a.jsx("input",{type:"password",placeholder:"Password",value:h.password,onChange:_=>U({...h,password:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!$})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),a.jsxs("select",{value:h.role,onChange:_=>U({...h,role:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"supervisor",children:"Supervisor"}),a.jsx("option",{value:"operator",children:"Operator"}),a.jsx("option",{value:"viewer",children:"Viewer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),a.jsx("input",{type:"text",placeholder:"Company name",value:h.company,onChange:_=>U({...h,company:_.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx(he,{type:"button",onClick:()=>{ee(!1),G(null),U({username:"",email:"",password:"",role:"operator",employee_code:"",company:"Workforce"})},variant:"outline",children:"Cancel"}),a.jsxs(he,{type:"submit",children:[$?a.jsx(Nn,{className:"w-4 h-4 mr-2"}):a.jsx(uo,{className:"w-4 h-4 mr-2"}),$?"Update User":"Create User"]})]})]})})]})}const qf=(i,c)=>{const u=i.map(M=>Object.values(M).join(",")).join(`
`),f=Object.keys(i[0]||{}).join(",")+`
`+u,p=new Blob([f],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a");v.href=URL.createObjectURL(p),v.download=c,v.click()},Ap=(i,c)=>{const u=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),d=document.createElement("a");d.href=URL.createObjectURL(u),d.download=c,d.click()},Mp=(i,c)=>{if(!window.XLSX){console.warn("XLSX library not available, falling back to CSV export");const N=[...i.supervisors.map(y=>({Type:"Supervisor","Employee Code":y.employee_code||"N/A",Name:y.fullName||y.name,Machine:"N/A",Position:"Supervisor",Shift:y.shift,Company:"N/A",Status:y.status,Date:c})),...i.assignments.map(y=>({Type:"Employee","Employee Code":y.employee_code||"N/A",Name:So(y),Machine:y.machine||"N/A",Position:y.position?y.position:y.role?y.role:"Operator",Shift:y.shift,Company:y.company||"N/A",Status:y.status,Date:c}))];qf(N,`labour-layout-${c}.csv`);return}const u=window.XLSX.utils.book_new(),d=new Date(c),f=d.toLocaleDateString("en-US",{weekday:"long"}),p=d.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),v=[];v.push(["DAILY LABOUR LAYOUT REPORT"]),v.push([]),v.push(["Day of Week:",f]),v.push(["Date:",p]),v.push(["Total Supervisors:",i.summary.total_supervisors||0]),v.push(["Total Assignments:",i.summary.total_assignments||0]),v.push([]),i.supervisors.length>0&&(v.push(["SUPERVISORS ON DUTY"]),v.push(["Employee Code","Name","Area","Position","Shift","Status"]),i.supervisors.forEach(N=>{v.push([N.employee_code||"N/A",N.fullName||N.name,"Supervision","Supervisor",N.shift,N.status])})),i.assignments.length>0&&(v.push([]),v.push(["ASSIGNED EMPLOYEES"]),v.push(["Employee Code","Name","Machine","Position","Shift","Company","Status"]),i.assignments.forEach(N=>{v.push([N.employee_code||"N/A",N.fullName||N.name,N.machine||"N/A",N.position?N.position:N.role?N.role:"Operator",N.shift,N.company||"N/A",N.status])}));const M=window.XLSX.utils.aoa_to_sheet(v),w=[{wch:20},{wch:18},{wch:15},{wch:10},{wch:12}];M["!cols"]=w,window.XLSX.utils.book_append_sheet(u,M,"Labour Layout"),window.XLSX.writeFile(u,`labour-layout-${c}.xlsx`)};function Tp(){const[i,c]=x.useState({supervisors:[],assignments:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}}),[u,d]=x.useState(!0),[f,p]=x.useState(()=>{const L=new URLSearchParams(window.location.search).get("date");return L||new Date().toISOString().split("T")[0]}),[v,M]=x.useState(!1),[w,N]=x.useState("excel"),[y,H]=x.useState("all"),[C,I]=x.useState("all"),Y=async g=>{d(!0);try{const L=await fe.get("/labour/roster?date="+g);c(L)}catch(L){console.error("Failed to fetch roster for "+g+":",L);try{const W=await fe.get("/labour/today");c({supervisors:[],assignments:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}})}catch(W){console.error("Failed to fetch roster:",W),alert("Failed to load roster. Please check the server connection."),c({supervisors:[],assignments:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_machines_in_use:0,day_supervisors:0,night_supervisors:0,day_assignments:0,night_assignments:0}})}}finally{d(!1)}};x.useEffect(()=>{Y(f)},[f]);const B=async()=>{try{if(d(!0),w==="excel")Mp(i,f),alert(`Exported labour layout for ${f}`);else{const g=[...i.supervisors.map(W=>({Type:"Supervisor",Name:W.fullName||W.name,"Employee Code":W.employee_code||"N/A",Machine:"N/A","Production Area":"Supervision",Position:W.position,Shift:W.shift,Status:W.status,Date:f})),...i.assignments.map(W=>({Type:"Employee",Name:So(W),"Employee Code":W.employee_code||"N/A",Machine:W.machine||"N/A","Production Area":W.production_area||"N/A",Position:W.position,Shift:W.shift,Status:W.status,Date:f}))],L=`labour-layout-${f}.${w}`;w==="csv"?qf(g,L):Ap(g,L),alert(`Exported ${g.length} records to ${w.toUpperCase()}`)}M(!1)}catch(g){console.error("Export error:",g),alert("Export failed: "+g.message)}finally{d(!1)}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-200 text-sm mb-2",children:[a.jsx("span",{className:"cursor-pointer hover:text-white transition-colors",onClick:()=>window.location.href="/labor-planner?date="+f,children:"Labor Planner"}),a.jsx("span",{children:">"}),a.jsx("span",{className:"text-white font-medium",children:"Layout View"}),a.jsx("span",{className:"ml-2 px-2 py-1 bg-green-500 bg-opacity-20 text-green-200 rounded-full text-xs",children:"Live Data"})]}),a.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[a.jsx(Ie,{className:"w-8 h-8"}),"Daily Labour Layout"]}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Real-time workforce management and reporting"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"bg-white bg-opacity-10 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(ua,{className:"w-4 h-4"}),a.jsx("input",{type:"date",value:f,onChange:g=>p(g.target.value),className:"bg-transparent text-white placeholder-blue-200 border-none outline-none text-sm font-medium"})]}),a.jsxs("button",{onClick:()=>window.location.href="/labor-planner?date="+f,className:"bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(Rf,{className:"w-4 h-4"}),"Plan Workforce"]}),a.jsxs("button",{onClick:()=>M(!0),className:"bg-green-500 hover:bg-green-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(ja,{className:"w-4 h-4"}),"Export"]}),a.jsxs("button",{onClick:()=>Y(f),className:"bg-white bg-opacity-10 hover:bg-white hover:bg-opacity-20 backdrop-blur-sm px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[a.jsx(Je,{className:"w-4 h-4"}),"Refresh"]})]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-blue-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Supervisors"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_supervisors||0})]}),a.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:a.jsx(Ha,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-green-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-600",children:"Assignments"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_assignments||0})]}),a.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:a.jsx(En,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Machines Active"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.summary?.total_machines_in_use||0})]}),a.jsx("div",{className:"bg-orange-100 p-3 rounded-full",children:a.jsx(Kt,{className:"w-6 h-6 text-orange-600"})})]})})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Workforce Overview"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[f," • ",(i.summary?.total_supervisors||0)+(i.summary?.total_assignments||0)+(i.summary?.total_machines_in_use||0)," total records"]})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("select",{value:y,onChange:g=>H(g.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Shifts"}),a.jsx("option",{value:"day",children:"Day Shift"}),a.jsx("option",{value:"night",children:"Night Shift"})]})}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("select",{value:C,onChange:g=>I(g.target.value),className:"bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"Machine [all]"}),Array.from(new Set(i.assignments?.map(g=>g.machine).filter(g=>g))).sort().map((g,L)=>a.jsx("option",{value:g,children:g},L))]})})]})]})})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:a.jsx("div",{className:"p-6",children:u?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"text-gray-500 mt-3",children:"Loading workforce data..."})]}):a.jsxs("div",{className:"space-y-8",children:[i.supervisors&&i.supervisors.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(Ie,{className:"w-5 h-5 text-blue-600"})}),"Supervisors on Duty"]}),a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-blue-100 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee Code"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Area"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Position"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-blue-100",children:i.supervisors.filter(g=>y==="all"?!0:g.shift===y).map(g=>a.jsxs("tr",{className:"hover:bg-blue-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600 font-mono font-semibold",children:g.employee_code||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-blue-100 rounded-full p-2 mr-3",children:a.jsx(Ie,{className:"w-4 h-4 text-blue-600"})}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:g.fullName||g.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:"Supervision"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 font-medium",children:"Supervisor"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${g.shift==="day"?"bg-amber-100 text-amber-800":"bg-indigo-100 text-indigo-800"}`,children:g.shift==="day"?"Day Shift":"Night Shift"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-800",children:g.status})})]},`supervisor-${g.id}`))})]})})})]}),i.assignments&&i.assignments.filter(g=>{const L=y==="all"?!0:g.shift===y,W=C==="all"?!0:g.machine===C;return L&&W}).length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:a.jsx(En,{className:"w-5 h-5 text-green-600"})}),"Assigned Employees"]}),a.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Employee Code"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Machine"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Position"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Shift"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Company"}),a.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider",children:"Status"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-green-100",children:i.assignments.filter(g=>{const L=y==="all"?!0:g.shift===y,W=C==="all"?!0:g.machine===C;return L&&W}).map(g=>a.jsxs("tr",{className:"hover:bg-green-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600 font-mono font-semibold",children:g.employee_code||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-green-100 rounded-full p-2 mr-3",children:a.jsx(Ie,{className:"w-4 h-4 text-green-600"})}),a.jsx("div",{className:"text-sm font-semibold text-gray-900",children:g.fullName||g.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900 font-medium",children:g.machine||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:g.position?g.position:g.role?g.role:"Operator"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${g.shift==="day"?"bg-amber-100 text-amber-800":"bg-indigo-100 text-indigo-800"}`,children:g.shift==="day"?"Day Shift":"Night Shift"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-600",children:g.company||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${g.status==="present"?"bg-emerald-100 text-emerald-800":g.status==="absent"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:g.status})})]},`assignment-${g.id}`))})]})})})]}),(i.supervisors?i.supervisors.length:0)===0&&(i.assignments?i.assignments.length:0)===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Ie,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),a.jsxs("p",{children:["No labour data found for ",f]}),a.jsx("p",{className:"text-sm",children:"Try selecting a different date or check if data has been entered for this date."})]})]})})})]})]}),v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Export Labour Layout"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),a.jsxs("select",{value:w,onChange:g=>N(g.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[a.jsx("option",{value:"excel",children:"Excel (.xlsx)"}),a.jsx("option",{value:"csv",children:"CSV (.csv)"}),a.jsx("option",{value:"json",children:"JSON (.json)"})]})]})}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),a.jsx("button",{onClick:B,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Export"})]})]})})]})}const Cp=()=>{const i=new Date;return i.setHours(i.getHours()+2),i.toISOString().split("T")[0]},Op=({onShowNotification:i})=>{const[c,u]=x.useState(Cp()),[d,f]=x.useState([]),[p,v]=x.useState(!0),[M,w]=x.useState(null),N=I=>{const Y=new Date(c);Y.setDate(Y.getDate()+I),u(Y.toISOString().split("T")[0])},y=async I=>{try{v(!0),w(null);const Y=await fe.get(`/planner/assignments?date=${I}`);f(Y||[])}catch(Y){console.error("Error fetching attendance data:",Y),w("Failed to load attendance data"),i?.("Failed to load attendance data","danger")}finally{v(!1)}},H=async(I,Y)=>{try{await fe.patch(`/planner/assignments/${I}`,{status:Y}),await y(c),i?.(`Attendance updated to ${Y}`,"success")}catch(B){console.error("Error updating attendance:",B),i?.("Failed to update attendance status","danger")}},C=x.useMemo(()=>{const I=d.filter(g=>g.status==="present").length,Y=d.filter(g=>g.status==="absent").length,B=d.filter(g=>g.status==="planned"||!g.status).length;return{present:I,absent:Y,pending:B,total:d.length}},[d]);return x.useEffect(()=>{y(c)},[c]),p?a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center justify-center py-16",children:[a.jsx(Je,{className:"w-8 h-8 animate-spin text-blue-500"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading attendance data..."})]})})}):a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl",children:a.jsx(Ha,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Attendance Tracking"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Monitor daily attendance and presence"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>N(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:"‹"}),a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-50 rounded-lg",children:[a.jsx(ua,{className:"w-4 h-4 text-slate-500"}),a.jsx("input",{type:"date",value:c,onChange:I=>u(I.target.value),className:"bg-transparent border-none focus:outline-none font-medium text-sm md:text-base"})]}),a.jsx("button",{onClick:()=>N(1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:"›"}),a.jsx("button",{onClick:()=>y(c),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center",children:a.jsx(Je,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"bg-emerald-50 border-emerald-200 text-emerald-700 rounded-xl p-4 border",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-emerald-100",children:a.jsx(ot,{className:"w-5 h-5 text-emerald-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium opacity-90",children:"Present"}),a.jsx("p",{className:"text-2xl font-bold",children:C.present})]})]})}),a.jsx("div",{className:"bg-red-50 border-red-200 text-red-700 rounded-xl p-4 border",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-red-100",children:a.jsx(vl,{className:"w-5 h-5 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium opacity-90",children:"Absent"}),a.jsx("p",{className:"text-2xl font-bold",children:C.absent})]})]})}),a.jsx("div",{className:"bg-amber-50 border-amber-200 text-amber-700 rounded-xl p-4 border",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center bg-amber-100",children:a.jsx(Ax,{className:"w-5 h-5 text-amber-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium opacity-90",children:"Pending"}),a.jsx("p",{className:"text-2xl font-bold",children:C.pending})]})]})})]}),d.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"font-semibold text-slate-900 mb-3",children:["Team Attendance (",d.length," employees)"]}),d.map(I=>a.jsx("div",{className:"bg-white rounded-xl border-2 p-4 hover:shadow-lg transition-all duration-300",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-white font-medium text-sm",children:I.employee_code?.slice(0,2)||I.username?.slice(0,2).toUpperCase()})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-slate-900 text-base truncate",children:I.fullName||I.username}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-sm",children:[a.jsx("span",{className:"text-slate-600",children:I.employee_code}),a.jsx("span",{className:"text-slate-400",children:"•"}),a.jsx("span",{className:"text-slate-600 truncate",children:I.machine_name}),I.job_role&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-400",children:"•"}),a.jsx("span",{className:"font-medium text-blue-600",children:I.job_role})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.shift==="day"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:[I.shift," shift"]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.status==="present"?"bg-emerald-100 text-emerald-700":I.status==="absent"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:I.status==="present"?"Present":I.status==="absent"?"Absent":"Pending"})]})]})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsx("button",{onClick:()=>H(I.id,"present"),className:`min-w-[44px] min-h-[44px] p-2 rounded-lg border transition-all ${I.status==="present"?"bg-emerald-500 border-emerald-500 text-white":"bg-white border-slate-200 text-slate-600 hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-600"}`,children:a.jsx(ot,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>H(I.id,"absent"),className:`min-w-[44px] min-h-[44px] p-2 rounded-lg border transition-all ${I.status==="absent"?"bg-red-500 border-red-500 text-white":"bg-white border-slate-200 text-slate-600 hover:bg-red-50 hover:border-red-200 hover:text-red-600"}`,children:a.jsx(vl,{className:"w-5 h-5"})})]})]})},I.id))]}):a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ha,{className:"w-10 h-10 text-slate-400"})}),a.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:"No assignments found"}),a.jsx("p",{className:"text-slate-500 mb-4",children:"No scheduled assignments for this date"}),a.jsx("p",{className:"text-sm text-slate-400",children:"Check the planning board to create assignments first"})]}),M&&a.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-700 text-sm",children:M})})]})})},Dp=()=>{const i=new Date;return i.setHours(i.getHours()+2),i.toISOString().split("T")[0]},kp=({activeTab:i,onTabChange:c,tabs:u=[]})=>a.jsx("div",{className:"flex gap-0 bg-white shadow-sm border border-gray-100 rounded-xl p-1",children:u.map(d=>{const f=d.icon,p=i===d.id;return a.jsxs("button",{onClick:()=>c(d.id),className:`flex-1 min-h-[44px] flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200 ${p?"bg-blue-500 text-white shadow-sm":"text-gray-600 hover:bg-gray-50"}`,children:[a.jsx(f,{className:"w-4 h-4"}),a.jsx("span",{className:"text-base",children:d.label})]},d.id)})}),Rp=({assignments:i=[],onShowNotification:c,selectedDate:u})=>{const[d,f]=x.useState([]),[p,v]=x.useState(""),[M,w]=x.useState(!0),[N,y]=x.useState("planning"),[H,C]=x.useState("all"),[I,Y]=x.useState({A:{day:[],night:[]},B:{day:[],night:[]},C:{day:[],night:[]}}),[B,g]=x.useState(()=>{const J=new Date,re=new Date(J);return re.setDate(J.getDate()-J.getDay()+1),re.toISOString().split("T")[0]}),L=(J,re,de)=>{if(!J)return"rest";const Z=new Date(J),Q=new Date(re),ue=(Math.floor((Q-Z)/(1e3*60*60*24))+{A:0,B:2,C:4}[de])%6;return ue<2?"day":ue<4?"night":"rest"},W=(J,re=u)=>{const de=L(B,re,J);return{shift:de,color:{day:"bg-yellow-100 text-yellow-800",night:"bg-blue-100 text-blue-800",rest:"bg-gray-100 text-gray-600"}[de]}},ie=async()=>{const J=localStorage.getItem("token");if(console.log("🔐 Token check:",J?`Token exists (${J.substring(0,20)}...)`:"No token found"),!J){console.log("ℹ️ No authentication token, waiting for user login"),f([]),w(!1);return}try{w(!0),console.log("🔍 Fetching users from /api/users with token...");const re=await fe.get("/users");console.log("👥 Users loaded successfully:",re?.length||0);const de=(re||[]).map(Z=>({...Z,employee_code:Z.employee_code||`EMP${Z.id.toString().padStart(4,"0")}`,fullName:Z.fullName||Z.username?.replace(/\./g," ").replace(/\b\w/g,Q=>Q.toUpperCase())||"N/A",assignedCrew:null,currentShift:"unassigned"}));f(de)}catch(re){console.error("❌ Error fetching employees:",re),re.message.includes("Session expired")||re.message.includes("unauthorized")?c?.("Session expired. Please log in again.","warning"):re.message.includes("<!DOCTYPE")?c?.("Authentication required. Please log in.","warning"):c?.("Failed to load employee data: "+re.message,"danger"),f([])}finally{w(!1)}};x.useEffect(()=>{ie()},[]);const V=x.useMemo(()=>{let J=d;return p&&(J=J.filter(re=>{const de=p.toLowerCase(),Z=re.fullName?.toLowerCase()||"",Q=re.username?.toLowerCase()||"",Se=re.employee_code?.toLowerCase()||"",se=re.role?.toLowerCase()||"";return Z.includes(de)||Q.includes(de)||Se.includes(de)||se.includes(de)})),H!=="all"&&(J=J.filter(re=>H==="unassigned"?!re.assignedCrew:re.assignedCrew===H)),J},[d,p,H]);return localStorage.getItem("token")?M?a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center justify-center py-16",children:[a.jsx(Je,{className:"w-8 h-8 animate-spin text-blue-500"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading workforce data..."})]})})}):a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 md:p-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-violet-600 rounded-xl",children:a.jsx(Ie,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Workforce Management"}),a.jsxs("p",{className:"text-gray-600",children:["2-2-2 Shift System | ",d.length," Total Employees"]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Cycle Start:"}),a.jsx("input",{type:"date",value:B,onChange:J=>g(J.target.value),className:"px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("select",{value:H,onChange:J=>C(J.target.value),className:"px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Crews"}),a.jsx("option",{value:"A",children:"Crew A"}),a.jsx("option",{value:"B",children:"Crew B"}),a.jsx("option",{value:"C",children:"Crew C"}),a.jsx("option",{value:"unassigned",children:"Unassigned"})]}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"text",placeholder:"Search employees...",value:p,onChange:J=>v(J.target.value),className:"pl-4 pr-4 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 w-48"})}),a.jsx("button",{onClick:()=>ie(),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Je,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"p-6 bg-gradient-to-r from-gray-50 to-blue-50 border-b",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Current Shift Status - ",u]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["A","B","C"].map(J=>{const re=W(J,u),de=d.filter(Z=>Z.assignedCrew===J);return a.jsxs("div",{className:"bg-white rounded-lg p-4 border",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"text-lg font-bold text-gray-800",children:["Crew ",J]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium capitalize ${re.color}`,children:re.shift})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("p",{children:[de.length," members assigned"]}),a.jsxs("p",{className:"text-xs mt-1",children:[re.shift==="day"&&"06:00 - 18:00",re.shift==="night"&&"18:00 - 06:00",re.shift==="rest"&&"Rest Day"]})]})]},J)})})]}),V.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"font-semibold text-slate-900",children:["Team Members (",V.length,")"]}),p&&a.jsx("button",{onClick:()=>v(""),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Clear Search"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(J=>{const re=i.some(de=>de.employee_id===J.id);return a.jsxs("div",{className:`bg-white rounded-xl border-2 p-4 transition-all duration-300 hover:shadow-lg ${re?"border-green-200 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shrink-0",children:a.jsx("span",{className:"text-white font-medium text-sm",children:J.employee_code?.slice(0,2)||J.username?.slice(0,2).toUpperCase()})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-semibold text-slate-900 text-base truncate",children:J.fullName||(J.username?J.username.replace(/\./g," ").replace(/\b\w/g,de=>de.toUpperCase()):"N/A")}),a.jsx("p",{className:"text-sm text-slate-600 truncate",children:J.employee_code})]})]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Role:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${J.role==="supervisor"?"bg-purple-100 text-purple-700":J.role==="operator"?"bg-green-100 text-green-700":J.role==="packer"?"bg-blue-100 text-blue-700":J.role==="technician"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:J.role?.charAt(0).toUpperCase()+J.role?.slice(1)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Company:"}),a.jsx("span",{className:"text-sm font-medium text-slate-900 truncate ml-2",children:J.company||"N/A"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Status:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${re?"bg-green-100 text-green-700":"bg-slate-100 text-slate-700"}`,children:re?"Assigned":"Available"})]})]})]},J.id)})})]}):a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Ie,{className:"w-10 h-10 text-slate-400"})}),a.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:p?"No employees found":"No employees available"}),a.jsx("p",{className:"text-slate-500 mb-4",children:p?"No employees match your search criteria":"No employee data available"}),p?a.jsx("button",{onClick:()=>v(""),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Clear Search"}):a.jsx("p",{className:"text-sm text-slate-400",children:"Contact your administrator to add employees"})]})]})}):a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ie,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Authentication Required"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Please log in to view workforce data"}),a.jsx("button",{onClick:()=>window.location.href="/login",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Go to Login"})]})})})})},Up=()=>{const[i,c]=x.useState("planning"),[u,d]=x.useState([]),[f,p]=x.useState(!0),[v,M]=x.useState({show:!1,message:"",type:"success"}),[w,N]=x.useState(()=>new URLSearchParams(window.location.search).get("date")||Dp()),y=x.useCallback((B,g="success")=>{M({show:!0,message:B,type:g}),setTimeout(()=>{M({show:!1,message:"",type:"success"})},4e3)},[]),H=x.useMemo(()=>u.filter(B=>B.assignment_date===w),[u,w]),C=[{id:"planning",label:"Planning",icon:En},{id:"roster",label:"Roster",icon:ua},{id:"attendance",label:"Attendance",icon:Ha},{id:"workers",label:"Workers",icon:Ie}],I=()=>{const[B,g]=x.useState({supervisors:[],assignments:[],attendance:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:0,total_machines_in_use:0}}),[L,W]=x.useState(!0),[ie,V]=x.useState("all"),X=async()=>{if(!localStorage.getItem("token")){console.log("ℹ️ No authentication token, waiting for user login"),g({supervisors:[],assignments:[],attendance:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:0,total_machines_in_use:0}}),W(!1);return}try{W(!0),console.log("🔍 Fetching roster data for:",w);const Z=await fe.get(`/labour/roster?date=${w}`);console.log("📋 Roster data loaded:",Z),g(Z)}catch(Z){console.error("❌ Failed to fetch roster data:",Z),Z.message.includes("<!DOCTYPE")?y("Authentication required. Please log in.","warning"):y("Failed to load roster data: "+Z.message,"danger"),g({supervisors:[],assignments:[],attendance:[],machinesInUse:[],summary:{total_supervisors:0,total_assignments:0,total_attendance:0,total_machines_in_use:0}})}finally{W(!1)}};x.useEffect(()=>{X()},[w]);const J=x.useMemo(()=>ie==="all"?B:{...B,supervisors:B.supervisors.filter(de=>de.shift===ie),assignments:B.assignments.filter(de=>de.shift===ie),attendance:B.attendance.filter(de=>de.shift===ie)},[B,ie]);return localStorage.getItem("token")?L?a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsxs("div",{className:"flex items-center justify-center py-16",children:[a.jsx(Je,{className:"w-8 h-8 animate-spin text-blue-500"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading roster data..."})]})})}):a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-1",children:"Labour Roster"}),a.jsxs("p",{className:"text-gray-600",children:["Date: ",w]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("select",{value:ie,onChange:de=>V(de.target.value),className:"px-4 py-2 border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Shifts"}),a.jsx("option",{value:"morning",children:"Morning"}),a.jsx("option",{value:"afternoon",children:"Afternoon"}),a.jsx("option",{value:"night",children:"Night"})]}),a.jsxs("button",{onClick:X,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[a.jsx(Je,{className:"w-4 h-4"}),"Refresh"]})]})]})}),a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-bold text-blue-700",children:J.summary.total_supervisors}),a.jsx("p",{className:"text-blue-600 text-sm",children:"Supervisors"})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-bold text-green-700",children:J.summary.total_assignments}),a.jsx("p",{className:"text-green-600 text-sm",children:"Assignments"})]}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-bold text-yellow-700",children:J.summary.total_attendance}),a.jsx("p",{className:"text-yellow-600 text-sm",children:"Attendance"})]}),a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-bold text-purple-700",children:J.summary.total_machines_in_use}),a.jsx("p",{className:"text-purple-600 text-sm",children:"Machines"})]})]})}),a.jsxs("div",{className:"p-6 space-y-6",children:[J.supervisors.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Supervisors on Duty"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full table-auto",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Employee Code"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Shift"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:J.supervisors.map((de,Z)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:de.employee_code}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:de.fullName}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:de.shift}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${de.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:de.status})})]},de.id||Z))})]})})]}),J.assignments.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Machine Assignments"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full table-auto",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-50",children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Employee Code"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Machine"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Position"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Shift"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:J.assignments.map((de,Z)=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:de.employee_code}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:de.fullName}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:de.machine}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:de.position}),a.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 capitalize",children:de.shift}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${de.status==="verified"?"bg-green-100 text-green-700":de.status==="scheduled"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:de.status})})]},de.id||Z))})]})})]}),J.supervisors.length===0&&J.assignments.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ua,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"No Roster Data"}),a.jsxs("p",{className:"text-gray-500",children:["No roster information available for ",w]})]})]})]})}):a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsx("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ua,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Authentication Required"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Please log in to view roster data"}),a.jsx("button",{onClick:()=>window.location.href="/login",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Go to Login"})]})})})})},Y=()=>{const[B,g]=x.useState([]),[L,W]=x.useState([]),[ie,V]=x.useState(""),[X,J]=x.useState("day"),[re,de]=x.useState(!1);x.useEffect(()=>{(async()=>{if(!localStorage.getItem("token")){console.log("ℹ️ No authentication token, waiting for user login"),g([]),W([]);return}try{console.log("🔍 Loading planning data...");const[se,ue]=await Promise.all([fe.get("/machines").catch(O=>(console.error("Failed to load machines:",O),console.error("Machines error type:",typeof O),console.error("Machines error message:",O.message),[])),fe.get("/users").catch(O=>(console.error("Failed to load users:",O),console.error("Users error type:",typeof O),console.error("Users error message:",O.message),[]))]);console.log("🏭 Machines loaded:",se?.length||0),console.log("👥 Employees loaded:",ue?.length||0),g(se||[]),W(ue||[])}catch(se){console.error("Error loading planning data:",se),se.message.includes("<!DOCTYPE")?y("Authentication required. Please log in.","warning"):y("Failed to load planning data","danger")}})()},[]);const Z=async(Q,Se,se)=>{try{await fe.post("/planner/assignments",{employee_id:Q,machine_id:Se,shift:se,assignment_date:w}),y("Employee assigned successfully","success"),de(!1)}catch{y("Failed to assign employee","danger")}};return a.jsx("div",{className:"flex-1 p-4 md:p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border p-4 md:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl",children:a.jsx(En,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-900",children:"Workforce Planning"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Assign employees to machines and shifts"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("input",{type:"date",value:w,onChange:Q=>N(Q.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500"})})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Quick Assignment"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Machine"}),a.jsxs("select",{value:ie,onChange:Q=>V(Q.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Machine"}),B.map(Q=>a.jsxs("option",{value:Q.id,children:[Q.name," (",Q.type,")"]},Q.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Shift"}),a.jsxs("select",{value:X,onChange:Q=>J(Q.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"day",children:"Day Shift"}),a.jsx("option",{value:"night",children:"Night Shift"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:()=>de(!0),disabled:!ie,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Assign Employee"})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Available Machines"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(Q=>a.jsxs("div",{className:"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:Q.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Q.status==="active"?"bg-green-100 text-green-700":Q.status==="maintenance"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Q.status})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Type: ",Q.type]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Environment: ",Q.environment]}),Q.capacity&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Capacity: ",Q.capacity]})]},Q.id))}),B.length===0&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No machines available"})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:["Current Assignments for ",new Date(w).toLocaleDateString()]}),H.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:H.map(Q=>a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-slate-900",children:Q.fullName||Q.username}),a.jsxs("p",{className:"text-sm text-slate-600",children:[Q.machine_name," • ",Q.shift," shift"]}),Q.job_role&&a.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full mt-1",children:Q.job_role})]}),a.jsx("button",{onClick:()=>{confirm("Remove this assignment?")&&y("Assignment removed","success")},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(vl,{className:"w-4 h-4"})})]})},Q.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-500",children:"No assignments for this date"}),a.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Use the quick assignment tool above to assign employees"})]})]}),re&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Select Employee"}),a.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:L.map(Q=>a.jsxs("button",{onClick:()=>Z(Q.id,ie,X),className:"w-full p-3 text-left hover:bg-slate-50 rounded-lg border transition-colors",children:[a.jsx("p",{className:"font-medium text-slate-900",children:Q.fullName||Q.username}),a.jsxs("p",{className:"text-sm text-slate-600",children:[Q.employee_code," • ",Q.role]})]},Q.id))}),a.jsx("div",{className:"flex gap-3 mt-6",children:a.jsx("button",{onClick:()=>de(!1),className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"})})]})})})]})})};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Labor Management System"}),a.jsx("p",{className:"text-gray-600",children:"Mobile-optimized workforce management"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ja,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(Je,{className:"w-4 h-4"})})]})]}),a.jsx(kp,{activeTab:i,onTabChange:c,tabs:C})]}),a.jsxs("div",{className:"flex flex-col min-h-screen",children:[i==="planning"&&a.jsx(Y,{}),i==="roster"&&a.jsx(I,{}),i==="attendance"&&a.jsx(Op,{onShowNotification:y}),i==="workers"&&a.jsx(Rp,{assignments:H,onShowNotification:y,selectedDate:w})]}),v.show&&a.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm ${v.type==="success"?"bg-green-500 text-white":v.type==="danger"?"bg-red-500 text-white":v.type==="info"?"bg-blue-500 text-white":"bg-gray-500 text-white"}`,children:a.jsx("p",{className:"text-sm font-medium",children:v.message})})]})};function zp(){return a.jsx(Up,{})}const Hf=[{path:"/",component:zf,title:"Dashboard"},{path:"/production",component:mp,title:"Production Monitor"},{path:"/labour-layout",component:Tp,title:"Labour Layout"},{path:"/labor-planner",component:zp,name:"Labor Planner"},{path:"/orders",component:xp,title:"Production Orders"},{path:"/machines",component:yp,title:"Machine Management"},{path:"/analytics",component:vp,title:"Analytics & Reports"},{path:"/shift-reports",component:jp,title:"Shift Reports"},{path:"/users",component:Np,title:"User Management"},{path:"/settings",component:_p,title:"Settings"},{path:"/admin",component:Ep,title:"Admin Panel"}];Hf.forEach(i=>yo.addRoute(i));yo.init();function Lp(){const{isAuthenticated:i,loading:c,user:u}=us(),[d,f]=x.useState(window.location.pathname),{handleSessionExpiring:p,handleSessionExpired:v}=Yg();if(Os(),x.useEffect(()=>{const y=C=>f(C.path),H=window.EventBus.on("router:navigation",y);return()=>{H()}},[]),c)return a.jsx("div",{className:"h-screen flex items-center justify-center text-xl bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading Production Management System..."})]})});if(!i)return a.jsx(Mf,{children:a.jsx(zg,{})});const M=Hf.find(y=>y.path===d),w=M?M.component:zf,N=M?M.name||M.title:"Dashboard";return a.jsx(Mf,{children:a.jsxs(Ug,{title:N,children:[a.jsx(w,{}),a.jsx(qg,{}),i&&a.jsx(Bg,{onSessionExpiring:p,onSessionExpired:v}),a.jsx($g,{}),a.jsx(Gg,{})]})})}const qp=document.getElementById("root"),Hp=cx.createRoot(qp);Hp.render(a.jsx(qa.StrictMode,{children:a.jsx(Of,{children:a.jsx(Lp,{})})}));
