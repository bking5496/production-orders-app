ğŸ§ª Testing refactored components...
âœ… New PostgreSQL client connected
ğŸ”— Client acquired from pool
ğŸ”“ Client released back to pool
âœ… Database connection: OK
âœ… Authentication middleware: OK
âœ… Response utilities: OK
âœ… Database utilities: OK
ğŸ‰ All components tested successfully!
ğŸŒ WebSocket server initialized
ğŸ§¹ WebSocket cleanup scheduler started
ğŸš€ Refactored server running on port 3001
ğŸ“Š Health check: http://localhost:3001/api/health
ğŸ” Auth test: http://localhost:3001/api/auth/login
âš™ï¸ System routes: http://localhost:3001/api/system/health
ğŸŒ WebSocket server initialized
ValidationError: The 'X-Forwarded-For' header is set but the Express 'trust proxy' setting is false (default). This could indicate a misconfiguration which would prevent express-rate-limit from accurately identifying users. See https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/ for more information.
    at Object.xForwardedForHeader (/home/production-app/production-orders-app/node_modules/express-rate-limit/dist/index.cjs:185:13)
    at wrappedValidations.<computed> [as xForwardedForHeader] (/home/production-app/production-orders-app/node_modules/express-rate-limit/dist/index.cjs:397:22)
    at Object.keyGenerator (/home/production-app/production-orders-app/node_modules/express-rate-limit/dist/index.cjs:658:20)
    at /home/production-app/production-orders-app/node_modules/express-rate-limit/dist/index.cjs:710:32
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /home/production-app/production-orders-app/node_modules/express-rate-limit/dist/index.cjs:691:5 {
  code: 'ERR_ERL_UNEXPECTED_X_FORWARDED_FOR',
  help: 'https://express-rate-limit.github.io/ERR_ERL_UNEXPECTED_X_FORWARDED_FOR/'
}
ğŸ”— Client acquired from pool
ğŸ”“ Client released back to pool
ğŸ”— Client acquired from pool
ğŸ”“ Client released back to pool
âœ… Auth success: admin from ::ffff:127.0.0.1 - curl/8.5.0
JWT verification failed: invalid signature
